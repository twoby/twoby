var dq=Object.defineProperty,hq=Object.defineProperties;var pq=Object.getOwnPropertyDescriptors;var um=Object.getOwnPropertySymbols;var YN=Object.prototype.hasOwnProperty,XN=Object.prototype.propertyIsEnumerable;var KN=(e,t,n)=>t in e?dq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,to=(e,t)=>{for(var n in t||(t={}))YN.call(t,n)&&KN(e,n,t[n]);if(um)for(var n of um(t))XN.call(t,n)&&KN(e,n,t[n]);return e},pu=(e,t)=>hq(e,pq(t));var gu=(e,t)=>{var n={};for(var r in e)YN.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&um)for(var r of um(e))t.indexOf(r)<0&&XN.call(e,r)&&(n[r]=e[r]);return n};var gq=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function mq(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var be={exports:{}},Ne={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var QN=Object.getOwnPropertySymbols,yq=Object.prototype.hasOwnProperty,vq=Object.prototype.propertyIsEnumerable;function bq(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function xq(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var JN=xq()?Object.assign:function(e,t){for(var n,r=bq(e),i,o=1;o<arguments.length;o++){n=Object(arguments[o]);for(var a in n)yq.call(n,a)&&(r[a]=n[a]);if(QN){i=QN(n);for(var s=0;s<i.length;s++)vq.call(n,i[s])&&(r[i[s]]=n[i[s]])}}return r};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Px=JN,Ql=60103,ZN=60106;Ne.Fragment=60107;Ne.StrictMode=60108;Ne.Profiler=60114;var eM=60109,tM=60110,nM=60112;Ne.Suspense=60113;var rM=60115,iM=60116;if(typeof Symbol=="function"&&Symbol.for){var Si=Symbol.for;Ql=Si("react.element"),ZN=Si("react.portal"),Ne.Fragment=Si("react.fragment"),Ne.StrictMode=Si("react.strict_mode"),Ne.Profiler=Si("react.profiler"),eM=Si("react.provider"),tM=Si("react.context"),nM=Si("react.forward_ref"),Ne.Suspense=Si("react.suspense"),rM=Si("react.memo"),iM=Si("react.lazy")}var oM=typeof Symbol=="function"&&Symbol.iterator;function wq(e){return e===null||typeof e!="object"?null:(e=oM&&e[oM]||e["@@iterator"],typeof e=="function"?e:null)}var aM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sM={};function Jl(e,t,n){this.props=e,this.context=t,this.refs=sM,this.updater=n||aM}Jl.prototype.isReactComponent={};Jl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Jl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function uM(){}uM.prototype=Jl.prototype;function jx(e,t,n){this.props=e,this.context=t,this.refs=sM,this.updater=n||aM}var Ix=jx.prototype=new uM;Ix.constructor=jx;Px(Ix,Jl.prototype);Ix.isPureReactComponent=!0;var lM=Array.isArray,cM=Object.prototype.hasOwnProperty,Lx={current:null},fM={key:!0,ref:!0,__self:!0,__source:!0};function dM(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)cM.call(t,r)&&!fM.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Ql,type:e,key:o,ref:a,props:i,_owner:Lx.current}}function Sq(e,t){return{$$typeof:Ql,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function zx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ql}function Eq(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var hM=/\/+/g;function $x(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Eq(""+e.key):t.toString(36)}function lm(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ql:case ZN:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+$x(a,0):r,lM(i)?(n="",e!=null&&(n=e.replace(hM,"$&/")+"/"),lm(i,t,n,"",function(l){return l})):i!=null&&(zx(i)&&(i=Sq(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(hM,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",lM(e))for(var s=0;s<e.length;s++){o=e[s];var u=r+$x(o,s);a+=lm(o,t,n,u,i)}else if(u=wq(e),typeof u=="function")for(e=u.call(e),s=0;!(o=e.next()).done;)o=o.value,u=r+$x(o,s++),a+=lm(o,t,n,u,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function cm(e,t,n){if(e==null)return e;var r=[],i=0;return lm(e,r,"","",function(o){return t.call(n,o,i++)}),r}function Oq(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var In={current:null},fm={transition:0},kq={ReactCurrentDispatcher:In,ReactCurrentBatchConfig:fm,ReactCurrentOwner:Lx,assign:Px};Ne.Children={map:cm,forEach:function(e,t,n){cm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return cm(e,function(){t++}),t},toArray:function(e){return cm(e,function(t){return t})||[]},only:function(e){if(!zx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=Jl;Ne.PureComponent=jx;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kq;Ne.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Px({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Lx.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)cM.call(t,u)&&!fM.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&s!==void 0?s[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:Ql,type:e.type,key:i,ref:o,props:r,_owner:a}};Ne.createContext=function(e){return e={$$typeof:tM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:eM,_context:e},e.Consumer=e};Ne.createElement=dM;Ne.createFactory=function(e){var t=dM.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:nM,render:e}};Ne.isValidElement=zx;Ne.lazy=function(e){return{$$typeof:iM,_payload:{_status:-1,_result:e},_init:Oq}};Ne.memo=function(e,t){return{$$typeof:rM,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=fm.transition;fm.transition=1;try{e()}finally{fm.transition=t}};Ne.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ne.unstable_createMutableSource=function(e,t){return{_getVersion:t,_source:e,_workInProgressVersionPrimary:null,_workInProgressVersionSecondary:null}};Ne.useCallback=function(e,t){return In.current.useCallback(e,t)};Ne.useContext=function(e){return In.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return In.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return In.current.useEffect(e,t)};Ne.useId=function(){return In.current.useId()};Ne.useImperativeHandle=function(e,t,n){return In.current.useImperativeHandle(e,t,n)};Ne.useInsertionEffect=function(e,t){return In.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return In.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return In.current.useMemo(e,t)};Ne.useReducer=function(e,t,n){return In.current.useReducer(e,t,n)};Ne.useRef=function(e){return In.current.useRef(e)};Ne.useState=function(e){return In.current.useState(e)};Ne.useSyncExternalStore=function(e,t,n){return In.current.useSyncExternalStore(e,t,n)};Ne.useTransition=function(){return In.current.useTransition()};Ne.version="18.0.0-rc.0-fe905f152-20220107";be.exports=Ne;var Cr=be.exports,Bx={exports:{}},tt={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dm=60103,hm=60106,md=60107,yd=60108,vd=60114,bd=60109,xd=60110,wd=60112,Sd=60113,Ux=60120,Ed=60115,Od=60116,pM=60121,gM=60122,mM=60117,yM=60129,vM=60131;if(typeof Symbol=="function"&&Symbol.for){var nn=Symbol.for;dm=nn("react.element"),hm=nn("react.portal"),md=nn("react.fragment"),yd=nn("react.strict_mode"),vd=nn("react.profiler"),bd=nn("react.provider"),xd=nn("react.context"),wd=nn("react.forward_ref"),Sd=nn("react.suspense"),Ux=nn("react.suspense_list"),Ed=nn("react.memo"),Od=nn("react.lazy"),pM=nn("react.block"),gM=nn("react.server.block"),mM=nn("react.fundamental"),yM=nn("react.debug_trace_mode"),vM=nn("react.legacy_hidden")}function Ei(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case dm:switch(e=e.type,e){case md:case vd:case yd:case Sd:case Ux:return e;default:switch(e=e&&e.$$typeof,e){case xd:case wd:case Od:case Ed:case bd:return e;default:return t}}case hm:return t}}}var Cq=bd,_q=dm,Aq=wd,Tq=md,Nq=Od,Mq=Ed,Fq=hm,Dq=vd,Rq=yd,Pq=Sd;tt.ContextConsumer=xd;tt.ContextProvider=Cq;tt.Element=_q;tt.ForwardRef=Aq;tt.Fragment=Tq;tt.Lazy=Nq;tt.Memo=Mq;tt.Portal=Fq;tt.Profiler=Dq;tt.StrictMode=Rq;tt.Suspense=Pq;tt.isAsyncMode=function(){return!1};tt.isConcurrentMode=function(){return!1};tt.isContextConsumer=function(e){return Ei(e)===xd};tt.isContextProvider=function(e){return Ei(e)===bd};tt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===dm};tt.isForwardRef=function(e){return Ei(e)===wd};tt.isFragment=function(e){return Ei(e)===md};tt.isLazy=function(e){return Ei(e)===Od};tt.isMemo=function(e){return Ei(e)===Ed};tt.isPortal=function(e){return Ei(e)===hm};tt.isProfiler=function(e){return Ei(e)===vd};tt.isStrictMode=function(e){return Ei(e)===yd};tt.isSuspense=function(e){return Ei(e)===Sd};tt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===md||e===vd||e===yM||e===yd||e===Sd||e===Ux||e===vM||typeof e=="object"&&e!==null&&(e.$$typeof===Od||e.$$typeof===Ed||e.$$typeof===bd||e.$$typeof===xd||e.$$typeof===wd||e.$$typeof===mM||e.$$typeof===pM||e[0]===gM)};tt.typeOf=Ei;Bx.exports=tt;function jq(e){function t(P,I,$,G,z){for(var V=0,Y=0,U=0,H=0,X,W,Se=0,fe=0,he,ke=he=X=0,Te=0,Ve=0,kt=0,Ie=0,Ct=$.length,Pn=Ct-1,jn,te="",Ee="",pt="",wi="",Pt;Te<Ct;){if(W=$.charCodeAt(Te),Te===Pn&&Y+H+U+V!==0&&(Y!==0&&(W=Y===47?10:47),H=U=V=0,Ct++,Pn++),Y+H+U+V===0){if(Te===Pn&&(0<Ve&&(te=te.replace(d,"")),0<te.trim().length)){switch(W){case 32:case 9:case 59:case 13:case 10:break;default:te+=$.charAt(Te)}W=59}switch(W){case 123:for(te=te.trim(),X=te.charCodeAt(0),he=1,Ie=++Te;Te<Ct;){switch(W=$.charCodeAt(Te)){case 123:he++;break;case 125:he--;break;case 47:switch(W=$.charCodeAt(Te+1)){case 42:case 47:e:{for(ke=Te+1;ke<Pn;++ke)switch($.charCodeAt(ke)){case 47:if(W===42&&$.charCodeAt(ke-1)===42&&Te+2!==ke){Te=ke+1;break e}break;case 10:if(W===47){Te=ke+1;break e}}Te=ke}}break;case 91:W++;case 40:W++;case 34:case 39:for(;Te++<Pn&&$.charCodeAt(Te)!==W;);}if(he===0)break;Te++}switch(he=$.substring(Ie,Te),X===0&&(X=(te=te.replace(f,"").trim()).charCodeAt(0)),X){case 64:switch(0<Ve&&(te=te.replace(d,"")),W=te.charCodeAt(1),W){case 100:case 109:case 115:case 45:Ve=I;break;default:Ve=F}if(he=t(I,Ve,he,W,z+1),Ie=he.length,0<R&&(Ve=n(F,te,kt),Pt=s(3,he,Ve,I,k,A,Ie,W,z,G),te=Ve.join(""),Pt!==void 0&&(Ie=(he=Pt.trim()).length)===0&&(W=0,he="")),0<Ie)switch(W){case 115:te=te.replace(E,a);case 100:case 109:case 45:he=te+"{"+he+"}";break;case 107:te=te.replace(v,"$1 $2"),he=te+"{"+he+"}",he=T===1||T===2&&o("@"+he,3)?"@-webkit-"+he+"@"+he:"@"+he;break;default:he=te+he,G===112&&(he=(Ee+=he,""))}else he="";break;default:he=t(I,n(I,te,kt),he,G,z+1)}pt+=he,he=kt=Ve=ke=X=0,te="",W=$.charCodeAt(++Te);break;case 125:case 59:if(te=(0<Ve?te.replace(d,""):te).trim(),1<(Ie=te.length))switch(ke===0&&(X=te.charCodeAt(0),X===45||96<X&&123>X)&&(Ie=(te=te.replace(" ",":")).length),0<R&&(Pt=s(1,te,I,P,k,A,Ee.length,G,z,G))!==void 0&&(Ie=(te=Pt.trim()).length)===0&&(te="\0\0"),X=te.charCodeAt(0),W=te.charCodeAt(1),X){case 0:break;case 64:if(W===105||W===99){wi+=te+$.charAt(Te);break}default:te.charCodeAt(Ie-1)!==58&&(Ee+=i(te,X,W,te.charCodeAt(2)))}kt=Ve=ke=X=0,te="",W=$.charCodeAt(++Te)}}switch(W){case 13:case 10:Y===47?Y=0:1+X===0&&G!==107&&0<te.length&&(Ve=1,te+="\0"),0<R*O&&s(0,te,I,P,k,A,Ee.length,G,z,G),A=1,k++;break;case 59:case 125:if(Y+H+U+V===0){A++;break}default:switch(A++,jn=$.charAt(Te),W){case 9:case 32:if(H+V+Y===0)switch(Se){case 44:case 58:case 9:case 32:jn="";break;default:W!==32&&(jn=" ")}break;case 0:jn="\\0";break;case 12:jn="\\f";break;case 11:jn="\\v";break;case 38:H+Y+V===0&&(Ve=kt=1,jn="\f"+jn);break;case 108:if(H+Y+V+N===0&&0<ke)switch(Te-ke){case 2:Se===112&&$.charCodeAt(Te-3)===58&&(N=Se);case 8:fe===111&&(N=fe)}break;case 58:H+Y+V===0&&(ke=Te);break;case 44:Y+U+H+V===0&&(Ve=1,jn+="\r");break;case 34:case 39:Y===0&&(H=H===W?0:H===0?W:H);break;case 91:H+Y+U===0&&V++;break;case 93:H+Y+U===0&&V--;break;case 41:H+Y+V===0&&U--;break;case 40:if(H+Y+V===0){if(X===0)switch(2*Se+3*fe){case 533:break;default:X=1}U++}break;case 64:Y+U+H+V+ke+he===0&&(he=1);break;case 42:case 47:if(!(0<H+V+U))switch(Y){case 0:switch(2*W+3*$.charCodeAt(Te+1)){case 235:Y=47;break;case 220:Ie=Te,Y=42}break;case 42:W===47&&Se===42&&Ie+2!==Te&&($.charCodeAt(Ie+2)===33&&(Ee+=$.substring(Ie,Te+1)),jn="",Y=0)}}Y===0&&(te+=jn)}fe=Se,Se=W,Te++}if(Ie=Ee.length,0<Ie){if(Ve=I,0<R&&(Pt=s(2,Ee,Ve,P,k,A,Ie,G,z,G),Pt!==void 0&&(Ee=Pt).length===0))return wi+Ee+pt;if(Ee=Ve.join(",")+"{"+Ee+"}",T*N!=0){switch(T!==2||o(Ee,2)||(N=0),N){case 111:Ee=Ee.replace(x,":-moz-$1")+Ee;break;case 112:Ee=Ee.replace(b,"::-webkit-input-$1")+Ee.replace(b,"::-moz-$1")+Ee.replace(b,":-ms-input-$1")+Ee}N=0}}return wi+Ee+pt}function n(P,I,$){var G=I.trim().split(m);I=G;var z=G.length,V=P.length;switch(V){case 0:case 1:var Y=0;for(P=V===0?"":P[0]+" ";Y<z;++Y)I[Y]=r(P,I[Y],$).trim();break;default:var U=Y=0;for(I=[];Y<z;++Y)for(var H=0;H<V;++H)I[U++]=r(P[H]+" ",G[Y],$).trim()}return I}function r(P,I,$){var G=I.charCodeAt(0);switch(33>G&&(G=(I=I.trim()).charCodeAt(0)),G){case 38:return I.replace(y,"$1"+P.trim());case 58:return P.trim()+I.replace(y,"$1"+P.trim());default:if(0<1*$&&0<I.indexOf("\f"))return I.replace(y,(P.charCodeAt(0)===58?"":"$1")+P.trim())}return P+I}function i(P,I,$,G){var z=P+";",V=2*I+3*$+4*G;if(V===944){P=z.indexOf(":",9)+1;var Y=z.substring(P,z.length-1).trim();return Y=z.substring(0,P).trim()+Y+";",T===1||T===2&&o(Y,1)?"-webkit-"+Y+Y:Y}if(T===0||T===2&&!o(z,1))return z;switch(V){case 1015:return z.charCodeAt(10)===97?"-webkit-"+z+z:z;case 951:return z.charCodeAt(3)===116?"-webkit-"+z+z:z;case 963:return z.charCodeAt(5)===110?"-webkit-"+z+z:z;case 1009:if(z.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+z+z;case 978:return"-webkit-"+z+"-moz-"+z+z;case 1019:case 983:return"-webkit-"+z+"-moz-"+z+"-ms-"+z+z;case 883:if(z.charCodeAt(8)===45)return"-webkit-"+z+z;if(0<z.indexOf("image-set(",11))return z.replace(C,"$1-webkit-$2")+z;break;case 932:if(z.charCodeAt(4)===45)switch(z.charCodeAt(5)){case 103:return"-webkit-box-"+z.replace("-grow","")+"-webkit-"+z+"-ms-"+z.replace("grow","positive")+z;case 115:return"-webkit-"+z+"-ms-"+z.replace("shrink","negative")+z;case 98:return"-webkit-"+z+"-ms-"+z.replace("basis","preferred-size")+z}return"-webkit-"+z+"-ms-"+z+z;case 964:return"-webkit-"+z+"-ms-flex-"+z+z;case 1023:if(z.charCodeAt(8)!==99)break;return Y=z.substring(z.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+Y+"-webkit-"+z+"-ms-flex-pack"+Y+z;case 1005:return p.test(z)?z.replace(h,":-webkit-")+z.replace(h,":-moz-")+z:z;case 1e3:switch(Y=z.substring(13).trim(),I=Y.indexOf("-")+1,Y.charCodeAt(0)+Y.charCodeAt(I)){case 226:Y=z.replace(w,"tb");break;case 232:Y=z.replace(w,"tb-rl");break;case 220:Y=z.replace(w,"lr");break;default:return z}return"-webkit-"+z+"-ms-"+Y+z;case 1017:if(z.indexOf("sticky",9)===-1)break;case 975:switch(I=(z=P).length-10,Y=(z.charCodeAt(I)===33?z.substring(0,I):z).substring(P.indexOf(":",7)+1).trim(),V=Y.charCodeAt(0)+(Y.charCodeAt(7)|0)){case 203:if(111>Y.charCodeAt(8))break;case 115:z=z.replace(Y,"-webkit-"+Y)+";"+z;break;case 207:case 102:z=z.replace(Y,"-webkit-"+(102<V?"inline-":"")+"box")+";"+z.replace(Y,"-webkit-"+Y)+";"+z.replace(Y,"-ms-"+Y+"box")+";"+z}return z+";";case 938:if(z.charCodeAt(5)===45)switch(z.charCodeAt(6)){case 105:return Y=z.replace("-items",""),"-webkit-"+z+"-webkit-box-"+Y+"-ms-flex-"+Y+z;case 115:return"-webkit-"+z+"-ms-flex-item-"+z.replace(_,"")+z;default:return"-webkit-"+z+"-ms-flex-line-pack"+z.replace("align-content","").replace(_,"")+z}break;case 973:case 989:if(z.charCodeAt(3)!==45||z.charCodeAt(4)===122)break;case 931:case 953:if(D.test(P)===!0)return(Y=P.substring(P.indexOf(":")+1)).charCodeAt(0)===115?i(P.replace("stretch","fill-available"),I,$,G).replace(":fill-available",":stretch"):z.replace(Y,"-webkit-"+Y)+z.replace(Y,"-moz-"+Y.replace("fill-",""))+z;break;case 962:if(z="-webkit-"+z+(z.charCodeAt(5)===102?"-ms-"+z:"")+z,$+G===211&&z.charCodeAt(13)===105&&0<z.indexOf("transform",10))return z.substring(0,z.indexOf(";",27)+1).replace(g,"$1-webkit-$2")+z}return z}function o(P,I){var $=P.indexOf(I===1?":":"{"),G=P.substring(0,I!==3?$:10);return $=P.substring($+1,P.length-1),B(I!==2?G:G.replace(M,"$1"),$,I)}function a(P,I){var $=i(I,I.charCodeAt(0),I.charCodeAt(1),I.charCodeAt(2));return $!==I+";"?$.replace(S," or ($1)").substring(4):"("+I+")"}function s(P,I,$,G,z,V,Y,U,H,X){for(var W=0,Se=I,fe;W<R;++W)switch(fe=L[W].call(c,P,Se,$,G,z,V,Y,U,H,X)){case void 0:case!1:case!0:case null:break;default:Se=fe}if(Se!==I)return Se}function u(P){switch(P){case void 0:case null:R=L.length=0;break;default:if(typeof P=="function")L[R++]=P;else if(typeof P=="object")for(var I=0,$=P.length;I<$;++I)u(P[I]);else O=!!P|0}return u}function l(P){return P=P.prefix,P!==void 0&&(B=null,P?typeof P!="function"?T=1:(T=2,B=P):T=0),l}function c(P,I){var $=P;if(33>$.charCodeAt(0)&&($=$.trim()),j=$,$=[j],0<R){var G=s(-1,I,$,$,k,A,0,0,0,0);G!==void 0&&typeof G=="string"&&(I=G)}var z=t(F,$,I,0,0);return 0<R&&(G=s(-2,z,$,$,k,A,z.length,0,0,0),G!==void 0&&(z=G)),j="",N=0,A=k=1,z}var f=/^\0+/g,d=/[\0\r\f]/g,h=/: */g,p=/zoo|gra/,g=/([,: ])(transform)/g,m=/,\r+?/g,y=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,b=/::(place)/g,x=/:(read-only)/g,w=/[svh]\w+-[tblr]{2}/,E=/\(\s*(.*)\s*\)/g,S=/([\s\S]*?);/g,_=/-self|flex-/g,M=/[^]*?(:[rp][el]a[\w-]+)[^]*/,D=/stretch|:\s*\w+\-(?:conte|avail)/,C=/([^-])(image-set\()/,A=1,k=1,N=0,T=1,F=[],L=[],R=0,B=null,O=0,j="";return c.use=u,c.set=l,e!==void 0&&l(e),c}var Iq={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Lq(e){var t={};return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var zq=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,bM=Lq(function(e){return zq.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),xM={exports:{}},Ye={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wt=typeof Symbol=="function"&&Symbol.for,Wx=Wt?Symbol.for("react.element"):60103,Hx=Wt?Symbol.for("react.portal"):60106,pm=Wt?Symbol.for("react.fragment"):60107,gm=Wt?Symbol.for("react.strict_mode"):60108,mm=Wt?Symbol.for("react.profiler"):60114,ym=Wt?Symbol.for("react.provider"):60109,vm=Wt?Symbol.for("react.context"):60110,Gx=Wt?Symbol.for("react.async_mode"):60111,bm=Wt?Symbol.for("react.concurrent_mode"):60111,xm=Wt?Symbol.for("react.forward_ref"):60112,wm=Wt?Symbol.for("react.suspense"):60113,$q=Wt?Symbol.for("react.suspense_list"):60120,Sm=Wt?Symbol.for("react.memo"):60115,Em=Wt?Symbol.for("react.lazy"):60116,Bq=Wt?Symbol.for("react.block"):60121,Uq=Wt?Symbol.for("react.fundamental"):60117,Wq=Wt?Symbol.for("react.responder"):60118,Hq=Wt?Symbol.for("react.scope"):60119;function _r(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Wx:switch(e=e.type,e){case Gx:case bm:case pm:case mm:case gm:case wm:return e;default:switch(e=e&&e.$$typeof,e){case vm:case xm:case Em:case Sm:case ym:return e;default:return t}}case Hx:return t}}}function wM(e){return _r(e)===bm}Ye.AsyncMode=Gx;Ye.ConcurrentMode=bm;Ye.ContextConsumer=vm;Ye.ContextProvider=ym;Ye.Element=Wx;Ye.ForwardRef=xm;Ye.Fragment=pm;Ye.Lazy=Em;Ye.Memo=Sm;Ye.Portal=Hx;Ye.Profiler=mm;Ye.StrictMode=gm;Ye.Suspense=wm;Ye.isAsyncMode=function(e){return wM(e)||_r(e)===Gx};Ye.isConcurrentMode=wM;Ye.isContextConsumer=function(e){return _r(e)===vm};Ye.isContextProvider=function(e){return _r(e)===ym};Ye.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Wx};Ye.isForwardRef=function(e){return _r(e)===xm};Ye.isFragment=function(e){return _r(e)===pm};Ye.isLazy=function(e){return _r(e)===Em};Ye.isMemo=function(e){return _r(e)===Sm};Ye.isPortal=function(e){return _r(e)===Hx};Ye.isProfiler=function(e){return _r(e)===mm};Ye.isStrictMode=function(e){return _r(e)===gm};Ye.isSuspense=function(e){return _r(e)===wm};Ye.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===pm||e===bm||e===mm||e===gm||e===wm||e===$q||typeof e=="object"&&e!==null&&(e.$$typeof===Em||e.$$typeof===Sm||e.$$typeof===ym||e.$$typeof===vm||e.$$typeof===xm||e.$$typeof===Uq||e.$$typeof===Wq||e.$$typeof===Hq||e.$$typeof===Bq)};Ye.typeOf=_r;xM.exports=Ye;var qx=xM.exports,Gq={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},qq={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Vq={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},SM={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Vx={};Vx[qx.ForwardRef]=Vq;Vx[qx.Memo]=SM;function EM(e){return qx.isMemo(e)?SM:Vx[e.$$typeof]||Gq}var Yq=Object.defineProperty,Xq=Object.getOwnPropertyNames,OM=Object.getOwnPropertySymbols,Kq=Object.getOwnPropertyDescriptor,Qq=Object.getPrototypeOf,kM=Object.prototype;function CM(e,t,n){if(typeof t!="string"){if(kM){var r=Qq(t);r&&r!==kM&&CM(e,r,n)}var i=Xq(t);OM&&(i=i.concat(OM(t)));for(var o=EM(e),a=EM(t),s=0;s<i.length;++s){var u=i[s];if(!qq[u]&&!(n&&n[u])&&!(a&&a[u])&&!(o&&o[u])){var l=Kq(t,u);try{Yq(e,u,l)}catch{}}}}return e}var Jq=CM;function no(){return(no=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _M=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},Yx=function(e){return e!==null&&typeof e=="object"&&(e.toString?e.toString():Object.prototype.toString.call(e))==="[object Object]"&&!Bx.exports.typeOf(e)},Om=Object.freeze([]),Ba=Object.freeze({});function kd(e){return typeof e=="function"}function AM(e){return e.displayName||e.name||"Component"}function Xx(e){return e&&typeof e.styledComponentId=="string"}var Zl=typeof process!="undefined"&&{}.SC_ATTR||"data-styled",Kx=typeof window!="undefined"&&"HTMLElement"in window,Zq=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process!="undefined"&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process!="undefined"&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""?{}.SC_DISABLE_SPEEDY:!1),eV={};function Cd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var tV=function(){function e(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}var t=e.prototype;return t.indexOfGroup=function(n){for(var r=0,i=0;i<n;i++)r+=this.groupSizes[i];return r},t.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var i=this.groupSizes,o=i.length,a=o;n>=a;)(a<<=1)<0&&Cd(16,""+n);this.groupSizes=new Uint32Array(a),this.groupSizes.set(i),this.length=a;for(var s=o;s<a;s++)this.groupSizes[s]=0}for(var u=this.indexOfGroup(n+1),l=0,c=r.length;l<c;l++)this.tag.insertRule(u,r[l])&&(this.groupSizes[n]++,u++)},t.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],i=this.indexOfGroup(n),o=i+r;this.groupSizes[n]=0;for(var a=i;a<o;a++)this.tag.deleteRule(i)}},t.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var i=this.groupSizes[n],o=this.indexOfGroup(n),a=o+i,s=o;s<a;s++)r+=this.tag.getRule(s)+`/*!sc*/
`;return r},e}(),km=new Map,Cm=new Map,_d=1,_m=function(e){if(km.has(e))return km.get(e);for(;Cm.has(_d);)_d++;var t=_d++;return km.set(e,t),Cm.set(t,e),t},nV=function(e){return Cm.get(e)},rV=function(e,t){t>=_d&&(_d=t+1),km.set(e,t),Cm.set(t,e)},iV="style["+Zl+'][data-styled-version="5.3.3"]',oV=new RegExp("^"+Zl+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),aV=function(e,t,n){for(var r,i=n.split(","),o=0,a=i.length;o<a;o++)(r=i[o])&&e.registerName(t,r)},sV=function(e,t){for(var n=(t.textContent||"").split(`/*!sc*/
`),r=[],i=0,o=n.length;i<o;i++){var a=n[i].trim();if(a){var s=a.match(oV);if(s){var u=0|parseInt(s[1],10),l=s[2];u!==0&&(rV(l,u),aV(e,l,s[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(a)}}},uV=function(){return typeof window!="undefined"&&window.__webpack_nonce__!==void 0?window.__webpack_nonce__:null},TM=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(s){for(var u=s.childNodes,l=u.length;l>=0;l--){var c=u[l];if(c&&c.nodeType===1&&c.hasAttribute(Zl))return c}}(n),o=i!==void 0?i.nextSibling:null;r.setAttribute(Zl,"active"),r.setAttribute("data-styled-version","5.3.3");var a=uV();return a&&r.setAttribute("nonce",a),n.insertBefore(r,o),r},lV=function(){function e(n){var r=this.element=TM(n);r.appendChild(document.createTextNode("")),this.sheet=function(i){if(i.sheet)return i.sheet;for(var o=document.styleSheets,a=0,s=o.length;a<s;a++){var u=o[a];if(u.ownerNode===i)return u}Cd(17)}(r),this.length=0}var t=e.prototype;return t.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},t.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},t.getRule=function(n){var r=this.sheet.cssRules[n];return r!==void 0&&typeof r.cssText=="string"?r.cssText:""},e}(),cV=function(){function e(n){var r=this.element=TM(n);this.nodes=r.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(n,r){if(n<=this.length&&n>=0){var i=document.createTextNode(r),o=this.nodes[n];return this.element.insertBefore(i,o||null),this.length++,!0}return!1},t.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},t.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},e}(),fV=function(){function e(n){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},t.deleteRule=function(n){this.rules.splice(n,1),this.length--},t.getRule=function(n){return n<this.length?this.rules[n]:""},e}(),NM=Kx,dV={isServer:!Kx,useCSSOMInjection:!Zq},Am=function(){function e(n,r,i){n===void 0&&(n=Ba),r===void 0&&(r={}),this.options=no({},dV,{},n),this.gs=r,this.names=new Map(i),this.server=!!n.isServer,!this.server&&Kx&&NM&&(NM=!1,function(o){for(var a=document.querySelectorAll(iV),s=0,u=a.length;s<u;s++){var l=a[s];l&&l.getAttribute(Zl)!=="active"&&(sV(o,l),l.parentNode&&l.parentNode.removeChild(l))}}(this))}e.registerId=function(n){return _m(n)};var t=e.prototype;return t.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new e(no({},this.options,{},n),this.gs,r&&this.names||void 0)},t.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},t.getTag=function(){return this.tag||(this.tag=(i=(r=this.options).isServer,o=r.useCSSOMInjection,a=r.target,n=i?new fV(a):o?new lV(a):new cV(a),new tV(n)));var n,r,i,o,a},t.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},t.registerName=function(n,r){if(_m(n),this.names.has(n))this.names.get(n).add(r);else{var i=new Set;i.add(r),this.names.set(n,i)}},t.insertRules=function(n,r,i){this.registerName(n,r),this.getTag().insertRules(_m(n),i)},t.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},t.clearRules=function(n){this.getTag().clearGroup(_m(n)),this.clearNames(n)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(n){for(var r=n.getTag(),i=r.length,o="",a=0;a<i;a++){var s=nV(a);if(s!==void 0){var u=n.names.get(s),l=r.getGroup(a);if(u&&l&&u.size){var c=Zl+".g"+a+'[id="'+s+'"]',f="";u!==void 0&&u.forEach(function(d){d.length>0&&(f+=d+",")}),o+=""+l+c+'{content:"'+f+`"}/*!sc*/
`}}}return o}(this)},e}(),hV=/(a)(d)/gi,MM=function(e){return String.fromCharCode(e+(e>25?39:97))};function Qx(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=MM(t%52)+n;return(MM(t%52)+n).replace(hV,"$1-$2")}var ec=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},FM=function(e){return ec(5381,e)};function DM(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(kd(n)&&!Xx(n))return!1}return!0}var pV=FM("5.3.3"),gV=function(){function e(t,n,r){this.rules=t,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&DM(t),this.componentId=n,this.baseHash=ec(pV,n),this.baseStyle=r,Am.registerId(n)}return e.prototype.generateAndInjectStyles=function(t,n,r){var i=this.componentId,o=[];if(this.baseStyle&&o.push(this.baseStyle.generateAndInjectStyles(t,n,r)),this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(i,this.staticRulesId))o.push(this.staticRulesId);else{var a=mu(this.rules,t,n,r).join(""),s=Qx(ec(this.baseHash,a)>>>0);if(!n.hasNameForId(i,s)){var u=r(a,"."+s,void 0,i);n.insertRules(i,s,u)}o.push(s),this.staticRulesId=s}else{for(var l=this.rules.length,c=ec(this.baseHash,r.hash),f="",d=0;d<l;d++){var h=this.rules[d];if(typeof h=="string")f+=h;else if(h){var p=mu(h,t,n,r),g=Array.isArray(p)?p.join(""):p;c=ec(c,g+d),f+=g}}if(f){var m=Qx(c>>>0);if(!n.hasNameForId(i,m)){var y=r(f,"."+m,void 0,i);n.insertRules(i,m,y)}o.push(m)}}return o.join(" ")},e}(),mV=/^\s*\/\/.*$/gm,yV=[":","[",".","#"];function vV(e){var t,n,r,i,o=e===void 0?Ba:e,a=o.options,s=a===void 0?Ba:a,u=o.plugins,l=u===void 0?Om:u,c=new jq(s),f=[],d=function(g){function m(y){if(y)try{g(y+"}")}catch{}}return function(y,v,b,x,w,E,S,_,M,D){switch(y){case 1:if(M===0&&v.charCodeAt(0)===64)return g(v+";"),"";break;case 2:if(_===0)return v+"/*|*/";break;case 3:switch(_){case 102:case 112:return g(b[0]+v),"";default:return v+(D===0?"/*|*/":"")}case-2:v.split("/*|*/}").forEach(m)}}}(function(g){f.push(g)}),h=function(g,m,y){return m===0&&yV.indexOf(y[n.length])!==-1||y.match(i)?g:"."+t};function p(g,m,y,v){v===void 0&&(v="&");var b=g.replace(mV,""),x=m&&y?y+" "+m+" { "+b+" }":b;return t=v,n=m,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),c(y||!m?"":m,x)}return c.use([].concat(l,[function(g,m,y){g===2&&y.length&&y[0].lastIndexOf(n)>0&&(y[0]=y[0].replace(r,h))},d,function(g){if(g===-2){var m=f;return f=[],m}}])),p.hash=l.length?l.reduce(function(g,m){return m.name||Cd(15),ec(g,m.name)},5381).toString():"",p}var RM=Cr.createContext();RM.Consumer;var PM=Cr.createContext(),bV=(PM.Consumer,new Am),Jx=vV();function jM(){return be.exports.useContext(RM)||bV}function IM(){return be.exports.useContext(PM)||Jx}var xV=function(){function e(t,n){var r=this;this.inject=function(i,o){o===void 0&&(o=Jx);var a=r.name+o.hash;i.hasNameForId(r.id,a)||i.insertRules(r.id,a,o(r.rules,a,"@keyframes"))},this.toString=function(){return Cd(12,String(r.name))},this.name=t,this.id="sc-keyframes-"+t,this.rules=n}return e.prototype.getName=function(t){return t===void 0&&(t=Jx),this.name+t.hash},e}(),wV=/([A-Z])/,SV=/([A-Z])/g,EV=/^ms-/,OV=function(e){return"-"+e.toLowerCase()};function LM(e){return wV.test(e)?e.replace(SV,OV).replace(EV,"-ms-"):e}var zM=function(e){return e==null||e===!1||e===""};function mu(e,t,n,r){if(Array.isArray(e)){for(var i,o=[],a=0,s=e.length;a<s;a+=1)(i=mu(e[a],t,n,r))!==""&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));return o}if(zM(e))return"";if(Xx(e))return"."+e.styledComponentId;if(kd(e)){if(typeof(l=e)!="function"||l.prototype&&l.prototype.isReactComponent||!t)return e;var u=e(t);return mu(u,t,n,r)}var l;return e instanceof xV?n?(e.inject(n,r),e.getName(r)):e:Yx(e)?function c(f,d){var h,p,g=[];for(var m in f)f.hasOwnProperty(m)&&!zM(f[m])&&(Array.isArray(f[m])&&f[m].isCss||kd(f[m])?g.push(LM(m)+":",f[m],";"):Yx(f[m])?g.push.apply(g,c(f[m],m)):g.push(LM(m)+": "+(h=m,(p=f[m])==null||typeof p=="boolean"||p===""?"":typeof p!="number"||p===0||h in Iq?String(p).trim():p+"px")+";"));return d?[d+" {"].concat(g,["}"]):g}(e):e.toString()}var $M=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function BM(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return kd(e)||Yx(e)?$M(mu(_M(Om,[e].concat(n)))):n.length===0&&e.length===1&&typeof e[0]=="string"?e:$M(mu(_M(e,n)))}var UM=function(e,t,n){return n===void 0&&(n=Ba),e.theme!==n.theme&&e.theme||t||n.theme},kV=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,CV=/(^-|-$)/g;function Zx(e){return e.replace(kV,"-").replace(CV,"")}var WM=function(e){return Qx(FM(e)>>>0)};function Tm(e){return typeof e=="string"&&!0}var e2=function(e){return typeof e=="function"||typeof e=="object"&&e!==null&&!Array.isArray(e)},_V=function(e){return e!=="__proto__"&&e!=="constructor"&&e!=="prototype"};function AV(e,t,n){var r=e[n];e2(t)&&e2(r)?HM(r,t):e[n]=t}function HM(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];if(e2(a))for(var s in a)_V(s)&&AV(e,a[s],s)}return e}var t2=Cr.createContext();t2.Consumer;var n2={};function GM(e,t,n){var r=Xx(e),i=!Tm(e),o=t.attrs,a=o===void 0?Om:o,s=t.componentId,u=s===void 0?function(v,b){var x=typeof v!="string"?"sc":Zx(v);n2[x]=(n2[x]||0)+1;var w=x+"-"+WM("5.3.3"+x+n2[x]);return b?b+"-"+w:w}(t.displayName,t.parentComponentId):s,l=t.displayName,c=l===void 0?function(v){return Tm(v)?"styled."+v:"Styled("+AM(v)+")"}(e):l,f=t.displayName&&t.componentId?Zx(t.displayName)+"-"+t.componentId:t.componentId||u,d=r&&e.attrs?Array.prototype.concat(e.attrs,a).filter(Boolean):a,h=t.shouldForwardProp;r&&e.shouldForwardProp&&(h=t.shouldForwardProp?function(v,b,x){return e.shouldForwardProp(v,b,x)&&t.shouldForwardProp(v,b,x)}:e.shouldForwardProp);var p,g=new gV(n,f,r?e.componentStyle:void 0),m=g.isStatic&&a.length===0,y=function(v,b){return function(x,w,E,S){var _=x.attrs,M=x.componentStyle,D=x.defaultProps,C=x.foldedComponentIds,A=x.shouldForwardProp,k=x.styledComponentId,N=x.target,T=function(G,z,V){G===void 0&&(G=Ba);var Y=no({},z,{theme:G}),U={};return V.forEach(function(H){var X,W,Se,fe=H;for(X in kd(fe)&&(fe=fe(Y)),fe)Y[X]=U[X]=X==="className"?(W=U[X],Se=fe[X],W&&Se?W+" "+Se:W||Se):fe[X]}),[Y,U]}(UM(w,be.exports.useContext(t2),D)||Ba,w,_),F=T[0],L=T[1],R=function(G,z,V,Y){var U=jM(),H=IM(),X=z?G.generateAndInjectStyles(Ba,U,H):G.generateAndInjectStyles(V,U,H);return X}(M,S,F),B=E,O=L.$as||w.$as||L.as||w.as||N,j=Tm(O),P=L!==w?no({},w,{},L):w,I={};for(var $ in P)$[0]!=="$"&&$!=="as"&&($==="forwardedAs"?I.as=P[$]:(A?A($,bM,O):!j||bM($))&&(I[$]=P[$]));return w.style&&L.style!==w.style&&(I.style=no({},w.style,{},L.style)),I.className=Array.prototype.concat(C,k,R!==k?R:null,w.className,L.className).filter(Boolean).join(" "),I.ref=B,be.exports.createElement(O,I)}(p,v,b,m)};return y.displayName=c,(p=Cr.forwardRef(y)).attrs=d,p.componentStyle=g,p.displayName=c,p.shouldForwardProp=h,p.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Om,p.styledComponentId=f,p.target=r?e.target:e,p.withComponent=function(v){var b=t.componentId,x=function(E,S){if(E==null)return{};var _,M,D={},C=Object.keys(E);for(M=0;M<C.length;M++)_=C[M],S.indexOf(_)>=0||(D[_]=E[_]);return D}(t,["componentId"]),w=b&&b+"-"+(Tm(v)?v:Zx(AM(v)));return GM(v,no({},x,{attrs:d,componentId:w}),n)},Object.defineProperty(p,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(v){this._foldedDefaultProps=r?HM({},e.defaultProps,v):v}}),p.toString=function(){return"."+p.styledComponentId},i&&Jq(p,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),p}var r2=function(e){return function t(n,r,i){if(i===void 0&&(i=Ba),!Bx.exports.isValidElementType(r))return Cd(1,String(r));var o=function(){return n(r,i,BM.apply(void 0,arguments))};return o.withConfig=function(a){return t(n,r,no({},i,{},a))},o.attrs=function(a){return t(n,r,no({},i,{attrs:Array.prototype.concat(i.attrs,a).filter(Boolean)}))},o}(GM,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){r2[e]=r2(e)});var TV=function(){function e(n,r){this.rules=n,this.componentId=r,this.isStatic=DM(n),Am.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(n,r,i,o){var a=o(mu(this.rules,r,i,o).join(""),""),s=this.componentId+n;i.insertRules(s,s,a)},t.removeStyles=function(n,r){r.clearRules(this.componentId+n)},t.renderStyles=function(n,r,i,o){n>2&&Am.registerId(this.componentId+n),this.removeStyles(n,i),this.createStyles(n,r,i,o)},e}();function CAe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=BM.apply(void 0,[e].concat(n)),o="sc-global-"+WM(JSON.stringify(i)),a=new TV(i,o);function s(l){var c=jM(),f=IM(),d=be.exports.useContext(t2),h=be.exports.useRef(c.allocateGSInstance(o)).current;return c.server&&u(h,l,c,d,f),be.exports.useLayoutEffect(function(){if(!c.server)return u(h,l,c,d,f),function(){return a.removeStyles(h,c)}},[h,l,c,d,f]),null}function u(l,c,f,d,h){if(a.isStatic)a.renderStyles(l,eV,f,h);else{var p=no({},c,{theme:UM(c,d,s.defaultProps)});a.renderStyles(l,p,f,h)}}return Cr.memo(s)}var _Ae=r2;function Ad(){return Ad=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ad.apply(this,arguments)}var yu,i2=yu||(yu={});i2.Pop="POP";i2.Push="PUSH";i2.Replace="REPLACE";var qM=function(e){return e};function VM(e){e.preventDefault(),e.returnValue=""}function YM(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter(function(n){return n!==t})}},call:function(t){e.forEach(function(n){return n&&n(t)})}}}function NV(){return Math.random().toString(36).substr(2,8)}function tc(e){var t=e.pathname;t=t===void 0?"/":t;var n=e.search;return n=n===void 0?"":n,e=e.hash,e=e===void 0?"":e,n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),e&&e!=="#"&&(t+=e.charAt(0)==="#"?e:"#"+e),t}function Zo(e){var t={};if(e){var n=e.indexOf("#");0<=n&&(t.hash=e.substr(n),e=e.substr(0,n)),n=e.indexOf("?"),0<=n&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function MV(e){function t(){var y=Zo(l.location.hash.substr(1)),v=y.pathname,b=y.search;y=y.hash;var x=c.state||{};return[x.idx,qM({pathname:v===void 0?"/":v,search:b===void 0?"":b,hash:y===void 0?"":y,state:x.usr||null,key:x.key||"default"})]}function n(){if(f)m.call(f),f=null;else{var y=yu.Pop,v=t(),b=v[0];if(v=v[1],m.length){if(b!=null){var x=h-b;x&&(f={action:y,location:v,retry:function(){u(-1*x)}},u(x))}}else o(y)}}function r(y){var v=document.querySelector("base"),b="";return v&&v.getAttribute("href")&&(v=l.location.href,b=v.indexOf("#"),b=b===-1?v:v.slice(0,b)),b+"#"+(typeof y=="string"?y:tc(y))}function i(y,v){return v===void 0&&(v=null),qM(Ad({pathname:p.pathname,hash:"",search:""},typeof y=="string"?Zo(y):y,{state:v,key:NV()}))}function o(y){d=y,y=t(),h=y[0],p=y[1],g.call({action:d,location:p})}function a(y,v){function b(){a(y,v)}var x=yu.Push,w=i(y,v);if(!m.length||(m.call({action:x,location:w,retry:b}),!1)){var E=[{usr:w.state,key:w.key,idx:h+1},r(w)];w=E[0],E=E[1];try{c.pushState(w,"",E)}catch{l.location.assign(E)}o(x)}}function s(y,v){function b(){s(y,v)}var x=yu.Replace,w=i(y,v);m.length&&(m.call({action:x,location:w,retry:b}),1)||(w=[{usr:w.state,key:w.key,idx:h},r(w)],c.replaceState(w[0],"",w[1]),o(x))}function u(y){c.go(y)}e===void 0&&(e={}),e=e.window;var l=e===void 0?document.defaultView:e,c=l.history,f=null;l.addEventListener("popstate",n),l.addEventListener("hashchange",function(){var y=t()[1];tc(y)!==tc(p)&&n()});var d=yu.Pop;e=t();var h=e[0],p=e[1],g=YM(),m=YM();return h==null&&(h=0,c.replaceState(Ad({},c.state,{idx:h}),"")),{get action(){return d},get location(){return p},createHref:r,push:a,replace:s,go:u,back:function(){u(-1)},forward:function(){u(1)},listen:function(y){return g.push(y)},block:function(y){var v=m.push(y);return m.length===1&&l.addEventListener("beforeunload",VM),function(){v(),m.length||l.removeEventListener("beforeunload",VM)}}}}/**
 * React Router v6.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ro(e,t){if(!e)throw new Error(t)}const o2=be.exports.createContext(null),a2=be.exports.createContext(null),nc=be.exports.createContext({outlet:null,matches:[]});function FV(e){return LV(e.context)}function DV(e){ro(!1)}function RV(e){let{basename:t="/",children:n=null,location:r,navigationType:i=yu.Pop,navigator:o,static:a=!1}=e;Td()&&ro(!1);let s=iY(t),u=be.exports.useMemo(()=>({basename:s,navigator:o,static:a}),[s,o,a]);typeof r=="string"&&(r=Zo(r));let{pathname:l="/",search:c="",hash:f="",state:d=null,key:h="default"}=r,p=be.exports.useMemo(()=>{let g=ZM(l,s);return g==null?null:{pathname:g,search:c,hash:f,state:d,key:h}},[s,l,c,f,d,h]);return p==null?null:be.exports.createElement(o2.Provider,{value:u},be.exports.createElement(a2.Provider,{children:n,value:{location:p,navigationType:i}}))}function AAe(e){let{children:t,location:n}=e;return zV(s2(t),n)}function PV(e){Td()||ro(!1);let{basename:t,navigator:n}=be.exports.useContext(o2),{hash:r,pathname:i,search:o}=XM(e),a=i;if(t!=="/"){let s=rY(e),u=s!=null&&s.endsWith("/");a=i==="/"?t+(u?"/":""):Ua([t,i])}return n.createHref({pathname:a,search:o,hash:r})}function Td(){return be.exports.useContext(a2)!=null}function Nm(){return Td()||ro(!1),be.exports.useContext(a2).location}function jV(){Td()||ro(!1);let{basename:e,navigator:t}=be.exports.useContext(o2),{matches:n}=be.exports.useContext(nc),{pathname:r}=Nm(),i=JSON.stringify(n.map(s=>s.pathnameBase)),o=be.exports.useRef(!1);return be.exports.useEffect(()=>{o.current=!0}),be.exports.useCallback(function(s,u){if(u===void 0&&(u={}),!o.current)return;if(typeof s=="number"){t.go(s);return}let l=JM(s,JSON.parse(i),r);e!=="/"&&(l.pathname=Ua([e,l.pathname])),(u.replace?t.replace:t.push)(l,u.state)},[e,t,i,r])}const IV=be.exports.createContext(null);function LV(e){let t=be.exports.useContext(nc).outlet;return t&&be.exports.createElement(IV.Provider,{value:e},t)}function TAe(){let{matches:e}=be.exports.useContext(nc),t=e[e.length-1];return t?t.params:{}}function XM(e){let{matches:t}=be.exports.useContext(nc),{pathname:n}=Nm(),r=JSON.stringify(t.map(i=>i.pathnameBase));return be.exports.useMemo(()=>JM(e,JSON.parse(r),n),[e,r,n])}function zV(e,t){Td()||ro(!1);let{matches:n}=be.exports.useContext(nc),r=n[n.length-1],i=r?r.params:{};r&&r.pathname;let o=r?r.pathnameBase:"/";r&&r.route;let a=Nm(),s;if(t){var u;let d=typeof t=="string"?Zo(t):t;o==="/"||((u=d.pathname)==null?void 0:u.startsWith(o))||ro(!1),s=d}else s=a;let l=s.pathname||"/",c=o==="/"?l:l.slice(o.length)||"/",f=$V(e,{pathname:c});return QV(f&&f.map(d=>Object.assign({},d,{params:Object.assign({},i,d.params),pathname:Ua([o,d.pathname]),pathnameBase:d.pathnameBase==="/"?o:Ua([o,d.pathnameBase])})),n)}function s2(e){let t=[];return be.exports.Children.forEach(e,n=>{if(!be.exports.isValidElement(n))return;if(n.type===be.exports.Fragment){t.push.apply(t,s2(n.props.children));return}n.type!==DV&&ro(!1);let r={caseSensitive:n.props.caseSensitive,element:n.props.element,index:n.props.index,path:n.props.path};n.props.children&&(r.children=s2(n.props.children)),t.push(r)}),t}function $V(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Zo(t):t,i=ZM(r.pathname||"/",n);if(i==null)return null;let o=KM(e);BV(o);let a=null;for(let s=0;a==null&&s<o.length;++s)a=KV(o[s],i);return a}function KM(e,t,n,r){return t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r=""),e.forEach((i,o)=>{let a={relativePath:i.path||"",caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||ro(!1),a.relativePath=a.relativePath.slice(r.length));let s=Ua([r,a.relativePath]),u=n.concat(a);i.children&&i.children.length>0&&(i.index===!0&&ro(!1),KM(i.children,t,u,s)),!(i.path==null&&!i.index)&&t.push({path:s,score:YV(s,i.index),routesMeta:u})}),t}function BV(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:XV(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const UV=/^:\w+$/,WV=3,HV=2,GV=1,qV=10,VV=-2,QM=e=>e==="*";function YV(e,t){let n=e.split("/"),r=n.length;return n.some(QM)&&(r+=VV),t&&(r+=HV),n.filter(i=>!QM(i)).reduce((i,o)=>i+(UV.test(o)?WV:o===""?GV:qV),r)}function XV(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function KV(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let a=0;a<n.length;++a){let s=n[a],u=a===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=JV({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=s.route;o.push({params:r,pathname:Ua([i,c.pathname]),pathnameBase:Ua([i,c.pathnameBase]),route:f}),c.pathnameBase!=="/"&&(i=Ua([i,c.pathnameBase]))}return o}function QV(e,t){return t===void 0&&(t=[]),e==null?null:e.reduceRight((n,r,i)=>be.exports.createElement(nc.Provider,{children:r.route.element!==void 0?r.route.element:be.exports.createElement(FV,null),value:{outlet:n,matches:t.concat(e.slice(0,i+1))}}),null)}function JV(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=ZV(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((l,c,f)=>{if(c==="*"){let d=s[f]||"";a=o.slice(0,o.length-d.length).replace(/(.)\/+$/,"$1")}return l[c]=eY(s[f]||""),l},{}),pathname:o,pathnameBase:a,pattern:e}}function ZV(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(a,s)=>(r.push(s),"([^\\/]+)"));return e.endsWith("*")?(r.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:\\b|\\/|$)",[new RegExp(i,t?void 0:"i"),r]}function eY(e,t){try{return decodeURIComponent(e)}catch{return e}}function tY(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Zo(e):e;return{pathname:n?n.startsWith("/")?n:nY(n,t):t,search:oY(r),hash:aY(i)}}function nY(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function JM(e,t,n){let r=typeof e=="string"?Zo(e):e,i=e===""||r.pathname===""?"/":r.pathname,o;if(i==null)o=n;else{let s=t.length-1;if(i.startsWith("..")){let u=i.split("/");for(;u[0]==="..";)u.shift(),s-=1;r.pathname=u.join("/")}o=s>=0?t[s]:"/"}let a=tY(r,o);return i&&i!=="/"&&i.endsWith("/")&&!a.pathname.endsWith("/")&&(a.pathname+="/"),a}function rY(e){return e===""||e.pathname===""?"/":typeof e=="string"?Zo(e).pathname:e.pathname}function ZM(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=e.charAt(t.length);return n&&n!=="/"?null:e.slice(t.length)||"/"}const Ua=e=>e.join("/").replace(/\/\/+/g,"/"),iY=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oY=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,aY=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;/**
 * React Router DOM v6.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function u2(){return u2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u2.apply(this,arguments)}function sY(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}const uY=["onClick","reloadDocument","replace","state","target","to"];function NAe(e){let{basename:t,children:n,history:r}=e;const[i,o]=be.exports.useState({action:r.action,location:r.location});return be.exports.useLayoutEffect(()=>r.listen(o),[r]),be.exports.createElement(RV,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:r})}function lY(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const MAe=be.exports.forwardRef(function(t,n){let{onClick:r,reloadDocument:i,replace:o=!1,state:a,target:s,to:u}=t,l=sY(t,uY),c=PV(u),f=cY(u,{replace:o,state:a,target:s});function d(h){r&&r(h),!h.defaultPrevented&&!i&&f(h)}return be.exports.createElement("a",u2({},l,{href:c,onClick:d,ref:n,target:s}))});function cY(e,t){let{target:n,replace:r,state:i}=t===void 0?{}:t,o=jV(),a=Nm(),s=XM(e);return be.exports.useCallback(u=>{if(u.button===0&&(!n||n==="_self")&&!lY(u)){u.preventDefault();let l=!!r||tc(a)===tc(s);o(e,{replace:l,state:i})}},[a,o,s,r,i,n,e])}function eF({formats:e}){return[].concat(...e.map(n=>n.keys.map(r=>[r,n])))}function fY(e){const{encode:t,decode:n}=to({decode:r=>r,encode:r=>r},e);return pu(to({join:r=>r.pop(),checkText:r=>r===t(n(r)),checkValue:r=>r===n(t(r)),empty:n("")},e),{decode:n,encode:t})}function tF(...e){const[t,n]=e,r=o=>!n,i=o=>n;return([o,a])=>{const s=fY(a),u=h=>r()?s.checkValue(h):s.checkText(h),l=h=>r()?h:s.decode(h),c=h=>i()?h:s.encode(h),f=h=>i(h[1])?h:s.join(h),d=h=>i()?s.checkValue(h):s.checkText(h);if(o in t){const h=t[o],p=l(h),g=c(p);if(u(h)&&d(g))return f([o,g])}return f([o,c(s.empty)])}}const FAe=(e,t)=>n=>{const{root:r="/",slash:i="/"}=t,o=tF(n,!1),a=eF(t).map(o),s=r+a.join(i);e({pathname:s})},DAe=(e,t)=>{const n=tF(e,!0),r=eF(t).map(n);return Object.fromEntries(r)};var nF={},l2={exports:{}},dY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hY=dY,pY=hY;function rF(){}function iF(){}iF.resetWarningCache=rF;var gY=function(){function e(r,i,o,a,s,u){if(u!==pY){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:iF,resetWarningCache:rF};return n.PropTypes=n,n};l2.exports=gY();var oF=l2.exports;function mY(e){if(!!e&&typeof window!="undefined"){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}Object.defineProperty(nF,"__esModule",{value:!0});function aF(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var _t=be.exports,Ar=aF(_t),st=aF(l2.exports);function Nd(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Nd=function(t){return typeof t}:Nd=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nd(e)}function vu(e,t){return yY(e)||vY(e,t)||bY(e,t)||xY()}function yY(e){if(Array.isArray(e))return e}function vY(e,t){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,i=!1,o=void 0;try{for(var a=e[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(t&&n.length===t));r=!0);}catch(u){i=!0,o=u}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw o}}return n}}function bY(e,t){if(!!e){if(typeof e=="string")return sF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sF(e,t)}}function sF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var uF=function(t){var n=_t.useState(t),r=vu(n,2),i=r[0],o=r[1],a=_t.useRef(t),s=function(l){o(l),a.current=l};return[i,s,a]};mY(`.datalist-input {
  /*the container must be positioned relative:*/
  position: relative;
  display: inline-block;
  width: 100%;
}

.datalist-input .autocomplete-input {
  width: 100%;
}

.datalist-input .datalist-items {
  position: absolute;
  z-index: 99;
  /*position the autocomplete items to be the same width as the container:*/
  top: 100%;
  left: 0;
  right: 0;
}

.datalist-input .default-datalist-items {
  border: 1px solid #d4d4d4;
  border-bottom: none;
  border-top: none;
}

.datalist-input .default-datalist-items div:not(.datalist-active-item) {
  padding: 10px;
  cursor: pointer;
  background-color: #fff;
  border-bottom: 1px solid #d4d4d4;
}

.datalist-input .default-datalist-items div:not(.datalist-active-item):hover {
  /*when hovering an item:*/
  background-color: #e9e9e9;
}

.datalist-input .datalist-active-item {
  /*when navigating through the items using the arrow keys:*/
  cursor: pointer;
}

.datalist-input .datalist-active-item-default {
  background-color: DodgerBlue;
  color: #ffffff;
  border-bottom: 1px solid #d4d4d4;
  padding: 10px;
}`);var wY=function(t,n){return n.label.substr(0,t.length).toLowerCase()===t.toLowerCase()},SY=function(t,n){return n.label.toLowerCase().indexOf(t.toLowerCase())},EY=function(t,n){return n.indexOf(n.find(function(r){return r.key===t.key}))},c2=function(t){var n=t.activeItemClassName,r=t.clearInputOnSelect,i=t.clearInputOnClick,o=t.debounceLoader,a=t.debounceTime,s=t.dropdownClassName,u=t.dropDownLength,l=t.value,c=t.inputClassName,f=t.itemClassName,d=t.match,h=t.onDropdownClose,p=t.onDropdownOpen,g=t.onInput,m=t.onSelect,y=t.onClick,v=t.placeholder,b=t.requiredInputLength,x=t.suppressReselect,w=t.items,E=_t.useState(),S=vu(E,2),_=S[0],M=S[1],D=uF(l!==void 0?l:""),C=vu(D,3),A=C[0],k=C[1],N=C[2],T=_t.useState([]),F=vu(T,2),L=F[0],R=F[1],B=uF(!1),O=vu(B,3),j=O[0],P=O[1],I=O[2],$=_t.useState(0),G=vu($,2),z=G[0],V=G[1],Y=_t.useRef(!1),U=_t.useState(!1),H=vu(U,2),X=H[0],W=H[1],Se=_t.useRef(),fe=_t.useRef(),he=_t.useRef();_t.useEffect(function(){var te=function(pt){if(!!fe.current){if(Y.current){Y.current=!1;return}if(!!he.current){var wi=pt.target===he.current,Pt=he.current.contains(pt.target);if(!(wi||Pt)){var gd=fe.current.contains(pt.target),$a=pt.target===fe.current;gd||$a||I.current&&(P(!1),V(-1),h())}}}};return window.addEventListener("click",te,!1),function(){window.removeEventListener("click",te)}},[h,P,I]),_t.useEffect(function(){var te=l!==void 0,Ee=N.current!==l,pt=j||X;te&&Ee&&!pt&&k(l)},[j,X,l,k,N]);var ke=_t.useCallback(function(te){Se.current&&(clearTimeout(Se.current),Se.current=null);var Ee=te.length>=b,pt=a>=0&&Ee;if(k(te),W(pt),!!Ee){var wi=function(){var gd=w.filter(function(VN){return Nd(d)===(typeof Function=="undefined"?"undefined":Nd(Function))?d(te,VN):wY(te,VN)}),$a=gd.slice(0,u),fq=_&&!r,qN=fq?EY(_,$a):0;$a.length?(I.current||p(),R($a),V(qN>0?qN:0),W(!1),P(!0)):(I.current&&(P(!1),h()),R($a),V(-1),W(!1))};a<=0?wi():Se.current=setTimeout(wi,a)}},[b,a,k,w,u,_,r,d,P,p,I,h]),Te=_t.useCallback(function(te){var Ee=te.target.value;ke(Ee),g(Ee)},[ke,g]),Ve=_t.useCallback(function(){var te=N.current;te&&i&&(te=""),y(te);var Ee=te.length>=b;Ee&&!I.current&&ke(te)},[N,i,y,b,I,ke]),kt=_t.useCallback(function(te){X||(k(r?"":te.label),P(!1),V(-1),Y.current=!0,h(),!(x&&_&&te.key===_.key)&&(M(te),m(te)))},[X,k,r,P,h,x,_,m]),Ie=_t.useCallback(function(te){if(!!I.current){var Ee=z;if(te.keyCode===40||te.keyCode===9)Ee+=1,Ee>=L.length&&(Ee=0),V(Ee),te.preventDefault();else if(te.keyCode===38)Ee-=1,Ee<=-1&&(Ee=L.length-1),V(Ee);else if(te.keyCode===13&&z>-1){var pt=L[Ee];kt(pt)}}},[z,L,kt,I]),Ct=_t.useCallback(function(te){var Ee=SY(A,te),pt=A.length;return Ar.createElement(Ar.Fragment,null,Ee>=0&&pt?Ar.createElement(Ar.Fragment,null,te.label.substr(0,Ee),Ar.createElement("strong",null,te.label.substr(Ee,pt)),te.label.substr(Ee+pt,te.label.length)):te.label)},[A]),Pn=_t.useCallback(function(){return Ar.createElement(Ar.Fragment,null,L.map(function(te,Ee){var pt=z===Ee,wi=pt?"datalist-active-item ".concat(n||"datalist-active-item-default"):"",Pt="".concat(f," ").concat(wi);return Ar.createElement("div",{onClick:function(){return kt(te)},className:Pt,key:te.key,tabIndex:0,role:"button","aria-label":te.label,onKeyUp:function($a){return $a.preventDefault()}},Ct(te))}))},[L,z,n,f,kt,Ct]),jn=_t.useMemo(function(){var te=N.current.length>=b;if(te&&X)return Ar.createElement("div",{ref:fe,className:"datalist-items ".concat(s||"default-datalist-items"),role:"dialog","aria-label":"Dropdown menu"},Ar.createElement("div",{className:f},o||"loading..."));if(te&&j)return Ar.createElement("div",{ref:fe,className:"datalist-items ".concat(s||"default-datalist-items"),role:"dialog","aria-label":"Dropdown menu"},Pn())},[N,b,X,j,s,f,o,Pn]);return Ar.createElement("div",{className:"datalist-input"},Ar.createElement("input",{ref:he,onChange:Te,onClick:Ve,onKeyDown:Ie,type:"text",className:"autocomplete-input ".concat(c),placeholder:v,value:A,"aria-label":"Search"}),jn)};c2.propTypes={items:st.arrayOf(st.shape({label:st.string.isRequired,key:st.oneOfType([st.string,st.number]).isRequired})).isRequired,placeholder:st.string,onSelect:st.func.isRequired,onDropdownOpen:st.func,onDropdownClose:st.func,match:st.func,inputClassName:st.string,dropdownClassName:st.string,itemClassName:st.string,activeItemClassName:st.string,requiredInputLength:st.number,clearInputOnSelect:st.bool,clearInputOnClick:st.bool,suppressReselect:st.bool,dropDownLength:st.number,value:st.string,debounceTime:st.number,debounceLoader:st.node,onInput:st.func,onClick:st.func};c2.defaultProps={placeholder:"",match:void 0,inputClassName:"",dropdownClassName:"",itemClassName:"",activeItemClassName:"",requiredInputLength:0,clearInputOnSelect:!1,clearInputOnClick:!1,suppressReselect:!0,dropDownLength:1/0,value:void 0,debounceTime:0,debounceLoader:void 0,onDropdownOpen:function(){},onDropdownClose:function(){},onInput:function(){},onClick:function(){}};var RAe=nF.default=c2;function OY(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var kY=be.exports.useLayoutEffect,CY=function(t){var n=be.exports.useRef(t);return kY(function(){n.current=t}),n},lF=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},_Y=function(t,n){var r=be.exports.useRef();return be.exports.useCallback(function(i){t.current=i,r.current&&lF(r.current,null),r.current=n,!!n&&lF(n,i)},[n])},cF={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},fF=function(t){Object.keys(cF).forEach(function(n){t.style.setProperty(n,cF[n],"important")})},Tr=null,AY=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function TY(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Tr||(Tr=document.createElement("textarea"),Tr.setAttribute("tabindex","-1"),Tr.setAttribute("aria-hidden","true"),fF(Tr)),Tr.parentNode===null&&document.body.appendChild(Tr);var i=e.paddingSize,o=e.borderSize,a=e.sizingStyle,s=a.boxSizing;Object.keys(a).forEach(function(d){var h=d;Tr.style[h]=a[h]}),fF(Tr),Tr.value=t;var u=AY(Tr,e);Tr.value="x";var l=Tr.scrollHeight-i,c=l*n;s==="border-box"&&(c=c+i+o),u=Math.max(c,u);var f=l*r;return s==="border-box"&&(f=f+i+o),u=Math.min(f,u),[u,l]}var dF=function(){},NY=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},MY=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],FY=!!document.documentElement.currentStyle,DY=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=NY(MY,n),i=r.boxSizing;if(i==="")return null;FY&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var o=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),a=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:o,borderSize:a}},RY=function(t){var n=CY(t);be.exports.useLayoutEffect(function(){var r=function(o){n.current(o)};return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}},[])},PY=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,o=t.minRows,a=t.onChange,s=a===void 0?dF:a,u=t.onHeightChange,l=u===void 0?dF:u,c=OY(t,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),f=c.value!==void 0,d=be.exports.useRef(null),h=_Y(d,n),p=be.exports.useRef(0),g=be.exports.useRef(),m=function(){var b=d.current,x=r&&g.current?g.current:DY(b);if(!!x){g.current=x;var w=TY(x,b.value||b.placeholder||"x",o,i),E=w[0],S=w[1];p.current!==E&&(p.current=E,b.style.setProperty("height",E+"px","important"),l(E,{rowHeight:S}))}},y=function(b){f||m(),s(b)};return be.exports.useLayoutEffect(m),RY(m),be.exports.createElement("textarea",Ad({},c,{onChange:y,ref:h}))},jY=be.exports.forwardRef(PY),PAe=jY;const hF={};function f2(e=hF,t=hF){const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */var IY=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),LY=Object.prototype.hasOwnProperty;function d2(e,t){return LY.call(e,t)}function h2(e){if(Array.isArray(e)){for(var n=new Array(e.length),t=0;t<n.length;t++)n[t]=""+t;return n}if(Object.keys)return Object.keys(e);var n=[];for(var r in e)d2(e,r)&&n.push(r);return n}function Nr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function p2(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function bu(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function pF(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function g2(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(g2(e[t]))return!0}else if(typeof e=="object"){for(var r=h2(e),i=r.length,t=0;t<i;t++)if(g2(e[r[t]]))return!0}}return!1}function gF(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i!="undefined"&&n.push(r+": "+i)}return n.join(`
`)}var mF=function(e){IY(t,e);function t(n,r,i,o,a){var s=this.constructor,u=e.call(this,gF(n,{name:r,index:i,operation:o,tree:a}))||this;return u.name=r,u.index=i,u.operation=o,u.tree=a,Object.setPrototypeOf(u,s.prototype),u.message=gF(n,{name:r,index:i,operation:o,tree:a}),u}return t}(Error),xt=mF,zY=Nr,rc={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Mm(n,this.path);r&&(r=Nr(r));var i=xu(n,{op:"remove",path:this.from}).removed;return xu(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Mm(n,this.from);return xu(n,{op:"add",path:this.path,value:Nr(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Md(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},$Y={add:function(e,t,n){return p2(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:rc.move,copy:rc.copy,test:rc.test,_get:rc._get};function Mm(e,t){if(t=="")return e;var n={op:"_get",path:t};return xu(e,n),n.value}function xu(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):Dm(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=Mm(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=Md(e,t.value),a.test===!1)throw new xt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new xt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}}else{r||(e=Nr(e));var s=t.path||"",u=s.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=Dm;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=pF(h)),i&&h=="__proto__")throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!p2(h))throw new xt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);p2(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new xt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var a=$Y[t.op].call(t,l,h,e);if(a.test===!1)throw new xt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(c>=f){var a=rc[t.op].call(t,l,h,e);if(a.test===!1)throw new xt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new xt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function Fm(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new xt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Nr(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=xu(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function BY(e,t,n){var r=xu(e,t);if(r.test===!1)throw new xt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Dm(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new xt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(rc[e.op]){if(typeof e.path!="string")throw new xt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new xt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new xt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new xt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&g2(e.value))throw new xt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new xt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new xt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},s=yF([a],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new xt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new xt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function yF(e,t,n){try{if(!Array.isArray(e))throw new xt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Fm(Nr(t),Nr(e),n||!0);else{n=n||Dm;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof xt)return i;throw i}}function Md(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,a;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!=0;)if(!Md(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var s=Object.keys(e);if(o=s.length,o!==Object.keys(t).length)return!1;for(i=o;i--!=0;)if(!t.hasOwnProperty(s[i]))return!1;for(i=o;i--!=0;)if(a=s[i],!Md(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}var UY=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",JsonPatchError:xt,deepClone:zY,getValueByPointer:Mm,applyOperation:xu,applyPatch:Fm,applyReducer:BY,validator:Dm,validate:yF,_areEquals:Md});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */var m2=new WeakMap,WY=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),HY=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function GY(e){return m2.get(e)}function qY(e,t){return e.observers.get(t)}function VY(e,t){e.observers.delete(t.callback)}function YY(e,t){t.unobserve()}function XY(e,t){var n=[],r,i=GY(e);if(!i)i=new WY(e),m2.set(e,i);else{var o=qY(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Nr(e),t){r.callback=t,r.next=null;var a=function(){y2(r)},s=function(){clearTimeout(r.next),r.next=setTimeout(a)};typeof window!="undefined"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return r.patches=n,r.object=e,r.unobserve=function(){y2(r),clearTimeout(r.next),VY(i,r),typeof window!="undefined"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},i.observers.set(t,new HY(t,r)),r}function y2(e,t){t===void 0&&(t=!1);var n=m2.get(e.object);v2(n.value,e.object,e.patches,"",t),e.patches.length&&Fm(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function v2(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=h2(t),a=h2(e),s=!1,u=a.length-1;u>=0;u--){var l=a[u],c=e[l];if(d2(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?v2(c,f,n,r+"/"+bu(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+bu(l),value:Nr(c)}),n.push({op:"replace",path:r+"/"+bu(l),value:Nr(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+bu(l),value:Nr(c)}),n.push({op:"remove",path:r+"/"+bu(l)}),s=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!s&&o.length==a.length))for(var u=0;u<o.length;u++){var l=o[u];!d2(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+bu(l),value:Nr(t[l])})}}}function KY(e,t,n){n===void 0&&(n=!1);var r=[];return v2(e,t,r,"",n),r}var QY=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",unobserve:YY,observe:XY,generate:y2,compare:KY});Object.assign({},UY,QY,{JsonPatchError:mF,deepClone:Nr,escapePathComponent:bu,unescapePathComponent:pF});var JY=/("(?:[^\\"]|\\.)*")|[:,]/g,b2=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function a(s,u,l){var c,f,d,h,p,g,m,y,v,b,x,w;if(s&&typeof s.toJSON=="function"&&(s=s.toJSON()),x=JSON.stringify(s,o),x===void 0)return x;if(m=i-u.length-l,x.length<=m&&(v=x.replace(JY,function(E,S){return S||E+" "}),v.length<=m))return v;if(o!=null&&(s=JSON.parse(x),o=void 0),typeof s=="object"&&s!==null){if(y=u+r,d=[],f=0,Array.isArray(s))for(b="[",c="]",m=s.length;f<m;f++)d.push(a(s[f],y,f===m-1?0:1)||"null");else for(b="{",c="}",g=Object.keys(s),m=g.length;f<m;f++)h=g[f],p=JSON.stringify(h)+": ",w=a(s[h],y,p.length+(f===m-1?0:1)),w!==void 0&&d.push(p+w);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return x}(t,"",0)};function nr(e,t,n){return e.fields=t||[],e.fname=n,e}function wt(e){return e==null?null:e.fname}function gn(e){return e==null?null:e.fields}function vF(e){return e.length===1?ZY(e[0]):eX(e)}const ZY=e=>function(t){return t[e]},eX=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Q(e){throw Error(e)}function io(e){const t=[],n=e.length;let r=null,i=0,o="",a,s,u;e=e+"";function l(){t.push(o+e.substring(a,s)),o="",a=s+1}for(a=s=0;s<n;++s)if(u=e[s],u==="\\")o+=e.substring(a,s),o+=e.substring(++s,++s),a=s;else if(u===r)l(),r=null,i=-1;else{if(r)continue;a===i&&u==='"'||a===i&&u==="'"?(a=s+1,r=u):u==="."&&!i?s>a?l():a=s+1:u==="["?(s>a&&l(),i=a=s+1):u==="]"&&(i||Q("Access path missing open bracket: "+e),i>0&&l(),i=0,a=s+1)}return i&&Q("Access path missing closing bracket: "+e),r&&Q("Access path missing closing quote: "+e),s>a&&(s++,l()),t}function rr(e,t,n){const r=io(e);return e=r.length===1?r[0]:e,nr((n&&n.get||vF)(r),[e],t||e)}const Fd=rr("id"),mn=nr(e=>e,[],"identity"),Wa=nr(()=>0,[],"zero"),ic=nr(()=>1,[],"one"),Kr=nr(()=>!0,[],"true"),Ha=nr(()=>!1,[],"false");function tX(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const bF=0,x2=1,w2=2,xF=3,wF=4;function S2(e,t,n=tX){let r=e||bF;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=x2&&n(t||"error","ERROR",arguments),this},warn(){return r>=w2&&n(t||"warn","WARN",arguments),this},info(){return r>=xF&&n(t||"log","INFO",arguments),this},debug(){return r>=wF&&n(t||"log","DEBUG",arguments),this}}}var J=Array.isArray;function ce(e){return e===Object(e)}const SF=e=>e!=="__proto__";function oc(...e){return e.reduce((t,n)=>{for(const r in n)if(r==="signals")t.signals=nX(t.signals,n.signals);else{const i=r==="legend"?{layout:1}:r==="style"?!0:null;ac(t,r,n[r],i)}return t},{})}function ac(e,t,n,r){if(!SF(t))return;let i,o;if(ce(n)&&!J(n)){o=ce(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?ac(o,i,n[i]):SF(i)&&(o[i]=n[i])}else e[t]=n}function nX(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function Re(e){return e[e.length-1]}function yn(e){return e==null||e===""?null:+e}const EF=e=>t=>e*Math.exp(t),OF=e=>t=>Math.log(e*t),kF=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),CF=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Rm=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Pm(e,t,n,r){const i=n(e[0]),o=n(Re(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function _F(e,t){return Pm(e,t,yn,mn)}function AF(e,t){var n=Math.sign(e[0]);return Pm(e,t,OF(n),EF(n))}function TF(e,t,n){return Pm(e,t,Rm(n),Rm(1/n))}function NF(e,t,n){return Pm(e,t,kF(n),CF(n))}function jm(e,t,n,r,i){const o=r(e[0]),a=r(Re(e)),s=t!=null?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function E2(e,t,n){return jm(e,t,n,yn,mn)}function O2(e,t,n){const r=Math.sign(e[0]);return jm(e,t,n,OF(r),EF(r))}function Im(e,t,n,r){return jm(e,t,n,Rm(r),Rm(1/r))}function k2(e,t,n,r){return jm(e,t,n,kF(r),CF(r))}function MF(e){return 1+~~(new Date(e).getMonth()/3)}function FF(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ue(e){return e!=null?J(e)?e:[e]:[]}function DF(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function _e(e){return typeof e=="function"}const rX="descending";function C2(e,t,n){n=n||{},t=ue(t)||[];const r=[],i=[],o={},a=n.comparator||iX;return ue(e).forEach((s,u)=>{s!=null&&(r.push(t[u]===rX?-1:1),i.push(s=_e(s)?s:rr(s,null,n)),(gn(s)||[]).forEach(l=>o[l]=1))}),i.length===0?null:nr(a(i,r),Object.keys(o))}const Lm=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),iX=(e,t)=>e.length===1?oX(e[0],t[0]):aX(e,t,e.length),oX=(e,t)=>function(n,r){return Lm(e(n),e(r))*t},aX=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;a===0&&++s<n;)o=e[s],a=Lm(o(r),o(i));return a*t[s]});function vn(e){return _e(e)?e:()=>e}function _2(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Ae(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function oo(e,t){let n=0,r,i,o,a;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=a=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>a&&(a=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=a=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>a&&(a=i))}return[o,a]}function RF(e,t){const n=e.length;let r=-1,i,o,a,s,u;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=u=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,u=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=u=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,u=r))}return[s,u]}const sX=Object.prototype.hasOwnProperty;function pe(e,t){return sX.call(e,t)}const zm={};function sc(e){let t={},n;function r(o){return pe(t,o)&&t[o]!==zm}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,a){return r(o)||(++i.size,t[o]===zm&&--i.empty),t[o]=a,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=zm),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let a=0;for(const s in t){const u=t[s];u!==zm&&(!n||!n(u))&&(o[s]=u,++a)}i.size=a,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function PF(e,t,n,r,i,o){if(!n&&n!==0)return o;const a=+n;let s=e[0],u=Re(e),l;u<s&&(l=s,s=u,u=l),l=Math.abs(t-s);const c=Math.abs(u-t);return l<c&&l<=a?r:c<=a?i:o}function ne(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Ae(r,n)}function uc(e,t,n,r){let i=t[0],o=t[t.length-1],a;return i>o&&(a=i,i=o,o=a),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function Ga(e){return typeof e=="boolean"}function qa(e){return Object.prototype.toString.call(e)==="[object Date]"}function jF(e){return e&&_e(e[Symbol.iterator])}function Qe(e){return typeof e=="number"}function IF(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function se(e){return typeof e=="string"}function A2(e,t,n){e&&(e=t?ue(e).map(s=>s.replace(/\\(.)/g,"$1")):ue(e));const r=e&&e.length,i=n&&n.get||vF,o=s=>i(t?[s]:io(s));let a;if(!r)a=function(){return""};else if(r===1){const s=o(e[0]);a=function(u){return""+s(u)}}else{const s=e.map(o);a=function(u){let l=""+s[0](u),c=0;for(;++c<r;)l+="|"+s[c](u);return l}}return nr(a,e,"key")}function LF(e,t){const n=e[0],r=Re(e),i=+t;return i?i===1?r:n+i*(r-n):n}const uX=1e4;function zF(e){e=+e||uX;let t,n,r;const i=()=>{t={},n={},r=0},o=(a,s)=>(++r>e&&(n=t,t={},r=1),t[a]=s);return i(),{clear:i,has:a=>pe(t,a)||pe(n,a),get:a=>pe(t,a)?t[a]:pe(n,a)?o(a,n[a]):void 0,set:(a,s)=>pe(t,a)?t[a]=s:o(a,s)}}function $F(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const a=r||new t.constructor(i+o);let s=0,u=0,l=0;for(;s<i&&u<o;++l)a[l]=e(t[s],n[u])>0?n[u++]:t[s++];for(;s<i;++s,++l)a[l]=t[s];for(;u<o;++u,++l)a[l]=n[u];return a}function Dd(e,t){let n="";for(;--t>=0;)n+=e;return n}function BF(e,t,n,r){const i=n||" ",o=e+"",a=t-o.length;return a<=0?o:r==="left"?Dd(i,a)+o:r==="center"?Dd(i,~~(a/2))+o+Dd(i,Math.ceil(a/2)):o+Dd(i,a)}function Rd(e){return e&&Re(e)-e[0]||0}function re(e){return J(e)?"["+e.map(re)+"]":ce(e)||se(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function T2(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const lX=e=>Qe(e)||qa(e)?e:Date.parse(e);function N2(e,t){return t=t||lX,e==null||e===""?null:t(e)}function M2(e){return e==null||e===""?null:e+""}function Oi(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function UF(e,t,n,r){const i=r!=null?r:"\u2026",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:n==="left"?i+o.slice(a-s):n==="center"?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function Va(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var WF={},F2={},D2=34,Pd=10,R2=13;function HF(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function cX(e,t){var n=HF(e);return function(r,i){return t(n(r),i,e)}}function GF(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function ir(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function fX(e){return e<0?"-"+ir(-e,6):e>9999?"+"+ir(e,6):ir(e,4)}function dX(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":fX(e.getUTCFullYear())+"-"+ir(e.getUTCMonth()+1,2)+"-"+ir(e.getUTCDate(),2)+(i?"T"+ir(t,2)+":"+ir(n,2)+":"+ir(r,2)+"."+ir(i,3)+"Z":r?"T"+ir(t,2)+":"+ir(n,2)+":"+ir(r,2)+"Z":n||t?"T"+ir(t,2)+":"+ir(n,2)+"Z":"")}function hX(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,g=i(f,function(m,y){if(h)return h(m,y-1);p=m,h=d?cX(m,d):HF(m)});return g.columns=p||[],g}function i(f,d){var h=[],p=f.length,g=0,m=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===Pd&&--p,f.charCodeAt(p-1)===R2&&--p;function x(){if(v)return F2;if(b)return b=!1,WF;var E,S=g,_;if(f.charCodeAt(S)===D2){for(;g++<p&&f.charCodeAt(g)!==D2||f.charCodeAt(++g)===D2;);return(E=g)>=p?v=!0:(_=f.charCodeAt(g++))===Pd?b=!0:_===R2&&(b=!0,f.charCodeAt(g)===Pd&&++g),f.slice(S+1,E-1).replace(/""/g,'"')}for(;g<p;){if((_=f.charCodeAt(E=g++))===Pd)b=!0;else if(_===R2)b=!0,f.charCodeAt(g)===Pd&&++g;else if(_!==n)continue;return f.slice(S,E)}return v=!0,f.slice(S,p)}for(;(y=x())!==F2;){for(var w=[];y!==WF&&y!==F2;)w.push(y),y=x();d&&(w=d(w,m++))==null||h.push(w)}return h}function o(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function a(f,d){return d==null&&(d=GF(f)),[d.map(c).join(e)].concat(o(f,d)).join(`
`)}function s(f,d){return d==null&&(d=GF(f)),o(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?dX(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:u,formatRow:l,formatValue:c}}function pX(e){return e}function gX(e){if(e==null)return pX;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(s,u){u||(t=n=0);var l=2,c=s.length,f=new Array(c);for(f[0]=(t+=s[0])*r+o,f[1]=(n+=s[1])*i+a;l<c;)f[l]=s[l],++l;return f}}function mX(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function yX(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return qF(e,n)})}:qF(e,t)}function qF(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=VF(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function VF(e,t){var n=gX(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&mX(f,p)}function o(c){return n(c)}function a(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function s(c){for(var f=a(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(s)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=o(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(o);break;case"LineString":d=a(c.arcs);break;case"MultiLineString":d=c.arcs.map(a);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function vX(e,t){var n={},r={},i={},o=[],a=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++a],t[a]=l,t[c]=d)}),t.forEach(function(l){var c=s(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var g=p===h?h:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var m=p===h?h:p.concat(h);r[m.start=p.start]=i[m.end=h.end]=m}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function s(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),o.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||o.push([l])}),o}function bX(e){return VF(e,xX.apply(this,arguments))}function xX(e,t,n){var r,i,o;if(arguments.length>1)r=wX(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:vX(e,r)}}function wX(e,t,n){var r=[],i=[],o;function a(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function s(f){f.forEach(a)}function u(f){f.forEach(s)}function l(f){f.forEach(u)}function c(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":s(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function lc(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function jd(e){let t=e,n=e;e.length===1&&(t=(a,s)=>e(a)-s,n=SX(e));function r(a,s,u,l){for(u==null&&(u=0),l==null&&(l=a.length);u<l;){const c=u+l>>>1;n(a[c],s)<0?u=c+1:l=c}return u}function i(a,s,u,l){for(u==null&&(u=0),l==null&&(l=a.length);u<l;){const c=u+l>>>1;n(a[c],s)>0?l=c:u=c+1}return u}function o(a,s,u,l){u==null&&(u=0),l==null&&(l=a.length);const c=r(a,s,u,l-1);return c>u&&t(a[c-1],s)>-t(a[c],s)?c-1:c}return{left:r,center:o,right:i}}function SX(e){return(t,n)=>lc(e(t),n)}function YF(e){return e===null?NaN:+e}function*EX(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const XF=jd(lc),$m=XF.right,OX=XF.left;jd(YF).center;var Id=$m;function kX(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i))}if(n>1)return o/(n-1)}function CX(e,t){const n=kX(e,t);return n&&Math.sqrt(n)}class Ln{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],a=t+o,s=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);s&&(n[r++]=s),t=a}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}function _X(e,t){return Array.from(t,n=>e[n])}var P2=Math.sqrt(50),j2=Math.sqrt(10),I2=Math.sqrt(2);function L2(e,t,n){var r,i=-1,o,a,s;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(o=e,e=t,t=o),(s=KF(e,t,n))===0||!isFinite(s))return[];if(s>0){let u=Math.round(e/s),l=Math.round(t/s);for(u*s<e&&++u,l*s>t&&--l,a=new Array(o=l-u+1);++i<o;)a[i]=(u+i)*s}else{s=-s;let u=Math.round(e*s),l=Math.round(t*s);for(u/s<e&&++u,l/s>t&&--l,a=new Array(o=l-u+1);++i<o;)a[i]=(u+i)/s}return r&&a.reverse(),a}function KF(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=P2?10:o>=j2?5:o>=I2?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=P2?10:o>=j2?5:o>=I2?2:1)}function Ya(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=P2?i*=10:o>=j2?i*=5:o>=I2&&(i*=2),t<e?-i:i}function wu(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function z2(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function QF(e,t,n=0,r=e.length-1,i=lc){for(;r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));QF(e,t,h,p,i)}const o=e[t];let a=n,s=r;for(Ld(e,n,t),i(e[r],o)>0&&Ld(e,n,r);a<s;){for(Ld(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}i(e[n],o)===0?Ld(e,n,s):(++s,Ld(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Ld(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function $2(e,t,n){if(e=Float64Array.from(EX(e,n)),!!(r=e.length)){if((t=+t)<=0||r<2)return z2(e);if(t>=1)return wu(e);var r,i=(r-1)*t,o=Math.floor(i),a=wu(QF(e,o).subarray(0,o+1)),s=z2(e.subarray(o+1));return a+(s-a)*(i-o)}}function JF(e,t,n=YF){if(!!(r=e.length)){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(i-o)}}function AX(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function ZF(e,t){return $2(e,.5,t)}function*TX(e){for(const t of e)yield*t}function eD(e){return Array.from(TX(e))}function Mr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function tD(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function NX(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Bm(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function cc(e){return e=Bm(Math.abs(e)),e?e[1]:NaN}function MX(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function FX(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var DX=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fc(e){if(!(t=DX.exec(e)))throw new Error("invalid format: "+e);var t;return new B2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}fc.prototype=B2.prototype;function B2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}B2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function RX(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var nD;function PX(e,t){var n=Bm(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(nD=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Bm(e,Math.max(0,t+o-1))[0]}function rD(e,t){var n=Bm(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var iD={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:NX,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>rD(e*100,t),r:rD,s:PX,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function oD(e){return e}var aD=Array.prototype.map,sD=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function uD(e){var t=e.grouping===void 0||e.thousands===void 0?oD:MX(aD.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?oD:FX(aD.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=fc(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,m=f.zero,y=f.width,v=f.comma,b=f.precision,x=f.trim,w=f.type;w==="n"?(v=!0,w="g"):iD[w]||(b===void 0&&(b=12),x=!0,w="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var E=g==="$"?n:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=g==="$"?r:/[%p]/.test(w)?a:"",_=iD[w],M=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function D(C){var A=E,k=S,N,T,F;if(w==="c")k=_(C)+k,C="";else{C=+C;var L=C<0||1/C<0;if(C=isNaN(C)?u:_(Math.abs(C),b),x&&(C=RX(C)),L&&+C==0&&p!=="+"&&(L=!1),A=(L?p==="("?p:s:p==="-"||p==="("?"":p)+A,k=(w==="s"?sD[8+nD/3]:"")+k+(L&&p==="("?")":""),M){for(N=-1,T=C.length;++N<T;)if(F=C.charCodeAt(N),48>F||F>57){k=(F===46?i+C.slice(N+1):C.slice(N))+k,C=C.slice(0,N);break}}}v&&!m&&(C=t(C,1/0));var R=A.length+C.length+k.length,B=R<y?new Array(y-R+1).join(d):"";switch(v&&m&&(C=t(B+C,B.length?y-k.length:1/0),B=""),h){case"<":C=A+C+k+B;break;case"=":C=A+B+C+k;break;case"^":C=B.slice(0,R=B.length>>1)+A+C+k+B.slice(R);break;default:C=B+A+C+k;break}return o(C)}return D.toString=function(){return f+""},D}function c(f,d){var h=l((f=fc(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(cc(d)/3)))*3,g=Math.pow(10,-p),m=sD[8+p/3];return function(y){return h(g*y)+m}}return{format:l,formatPrefix:c}}var Um,Wm,U2;jX({thousands:",",grouping:[3],currency:["$",""]});function jX(e){return Um=uD(e),Wm=Um.format,U2=Um.formatPrefix,Um}function lD(e){return Math.max(0,-cc(Math.abs(e)))}function cD(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cc(t)/3)))*3-cc(Math.abs(e)))}function fD(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,cc(t)-cc(e))+1}var W2=new Date,H2=new Date;function Ht(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=function(o){return e(o=new Date(+o)),o},i.ceil=function(o){return e(o=new Date(o-1)),t(o,1),e(o),o},i.round=function(o){var a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=function(o,a){return t(o=new Date(+o),a==null?1:Math.floor(a)),o},i.range=function(o,a,s){var u=[],l;if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return u;do u.push(l=new Date(+o)),t(o,s),e(o);while(l<o&&o<a);return u},i.filter=function(o){return Ht(function(a){if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},function(a,s){if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););})},n&&(i.count=function(o,a){return W2.setTime(+o),H2.setTime(+a),e(W2),e(H2),Math.floor(n(W2,H2))},i.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?function(a){return r(a)%o==0}:function(a){return i.count(0,a)%o==0}):i}),i}var G2=Ht(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});G2.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ht(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):G2};var q2=G2;const ea=1e3,Qr=ea*60,ta=Qr*60,Su=ta*24,V2=Su*7,dD=Su*30,Y2=Su*365;var IX=Ht(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*ea)},function(e,t){return(t-e)/ea},function(e){return e.getUTCSeconds()}),Xa=IX,LX=Ht(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*ea)},function(e,t){e.setTime(+e+t*Qr)},function(e,t){return(t-e)/Qr},function(e){return e.getMinutes()}),X2=LX,zX=Ht(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*ea-e.getMinutes()*Qr)},function(e,t){e.setTime(+e+t*ta)},function(e,t){return(t-e)/ta},function(e){return e.getHours()}),K2=zX,$X=Ht(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Qr)/Su,e=>e.getDate()-1),Ka=$X;function Eu(e){return Ht(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n*7)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Qr)/V2})}var zd=Eu(0),Q2=Eu(1);Eu(2);Eu(3);var $d=Eu(4);Eu(5);Eu(6);var BX=Ht(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()}),Hm=BX,hD=Ht(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});hD.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Ht(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};var Qa=hD,UX=Ht(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*Qr)},function(e,t){return(t-e)/Qr},function(e){return e.getUTCMinutes()}),J2=UX,WX=Ht(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*ta)},function(e,t){return(t-e)/ta},function(e){return e.getUTCHours()}),Z2=WX,HX=Ht(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/Su},function(e){return e.getUTCDate()-1}),Ja=HX;function Ou(e){return Ht(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n*7)},function(t,n){return(n-t)/V2})}var Bd=Ou(0),ew=Ou(1);Ou(2);Ou(3);var Ud=Ou(4);Ou(5);Ou(6);var GX=Ht(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()}),Gm=GX,pD=Ht(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});pD.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Ht(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};var Za=pD;function gD(e,t,n,r,i,o){const a=[[Xa,1,ea],[Xa,5,5*ea],[Xa,15,15*ea],[Xa,30,30*ea],[o,1,Qr],[o,5,5*Qr],[o,15,15*Qr],[o,30,30*Qr],[i,1,ta],[i,3,3*ta],[i,6,6*ta],[i,12,12*ta],[r,1,Su],[r,2,2*Su],[n,1,V2],[t,1,dD],[t,3,3*dD],[e,1,Y2]];function s(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=jd(([,,m])=>m).right(a,d);if(h===a.length)return e.every(Ya(l/Y2,c/Y2,f));if(h===0)return q2.every(Math.max(Ya(l,c,f),1));const[p,g]=a[d/a[h-1][2]<a[h][2]/d?h-1:h];return p.every(g)}return[s,u]}const[qX,VX]=gD(Za,Gm,Bd,Ja,Z2,J2),[YX,XX]=gD(Qa,Hm,zd,Ka,K2,X2),rn="year",or="quarter",bn="month",jt="week",ar="date",xn="day",ao="dayofyear",Fr="hours",Dr="minutes",Jr="seconds",ki="milliseconds",tw=[rn,or,bn,jt,ar,xn,ao,Fr,Dr,Jr,ki],nw=tw.reduce((e,t,n)=>(e[t]=1+n,e),{});function rw(e){const t=ue(e).slice(),n={};return t.length||Q("Missing time unit."),t.forEach(i=>{pe(nw,i)?n[i]=1:Q("Invalid time unit: ".concat(i,"."))}),(n[jt]||n[xn]?1:0)+(n[or]||n[bn]||n[ar]?1:0)+(n[ao]?1:0)>1&&Q("Incompatible time units: ".concat(e)),t.sort((i,o)=>nw[i]-nw[o]),t}const KX={[rn]:"%Y ",[or]:"Q%q ",[bn]:"%b ",[ar]:"%d ",[jt]:"W%U ",[xn]:"%a ",[ao]:"%j ",[Fr]:"%H:00",[Dr]:"00:%M",[Jr]:":%S",[ki]:".%L",["".concat(rn,"-").concat(bn)]:"%Y-%m ",["".concat(rn,"-").concat(bn,"-").concat(ar)]:"%Y-%m-%d ",["".concat(Fr,"-").concat(Dr)]:"%H:%M"};function mD(e,t){const n=Ae({},KX,t),r=rw(e),i=r.length;let o="",a=0,s,u;for(a=0;a<i;)for(s=r.length;s>a;--s)if(u=r.slice(a,s).join("-"),n[u]!=null){o+=n[u],a=s;break}return o.trim()}const ku=new Date;function iw(e){return ku.setFullYear(e),ku.setMonth(0),ku.setDate(1),ku.setHours(0,0,0,0),ku}function yD(e){return bD(new Date(e))}function vD(e){return ow(new Date(e))}function bD(e){return Ka.count(iw(e.getFullYear())-1,e)}function ow(e){return zd.count(iw(e.getFullYear())-1,e)}function aw(e){return iw(e).getDay()}function QX(e,t,n,r,i,o,a){if(0<=e&&e<100){const s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function xD(e){return SD(new Date(e))}function wD(e){return sw(new Date(e))}function SD(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Ja.count(t-1,e)}function sw(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Bd.count(t-1,e)}function uw(e){return ku.setTime(Date.UTC(e,0,1)),ku.getUTCDay()}function JX(e,t,n,r,i,o,a){if(0<=e&&e<100){const s=new Date(Date.UTC(-1,t,n,r,i,o,a));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(e,t,n,r,i,o,a))}function ED(e,t,n,r,i){const o=t||1,a=Re(e),s=(y,v,b)=>(b=b||y,ZX(n[b],r[b],y===a&&o,v)),u=new Date,l=Oi(e),c=l[rn]?s(rn):vn(2012),f=l[bn]?s(bn):l[or]?s(or):Wa,d=l[jt]&&l[xn]?s(xn,1,jt+xn):l[jt]?s(jt,1):l[xn]?s(xn,1):l[ar]?s(ar,1):l[ao]?s(ao,1):ic,h=l[Fr]?s(Fr):Wa,p=l[Dr]?s(Dr):Wa,g=l[Jr]?s(Jr):Wa,m=l[ki]?s(ki):Wa;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),g(u),m(u))}}function ZX(e,t,n,r){const i=n<=1?e:r?(o,a)=>r+n*Math.floor((e(o,a)-r)/n):(o,a)=>n*Math.floor(e(o,a)/n);return t?(o,a)=>t(i(o,a),a):i}function dc(e,t,n){return t+e*7-(n+6)%7}const eK={[rn]:e=>e.getFullYear(),[or]:e=>Math.floor(e.getMonth()/3),[bn]:e=>e.getMonth(),[ar]:e=>e.getDate(),[Fr]:e=>e.getHours(),[Dr]:e=>e.getMinutes(),[Jr]:e=>e.getSeconds(),[ki]:e=>e.getMilliseconds(),[ao]:e=>bD(e),[jt]:e=>ow(e),[jt+xn]:(e,t)=>dc(ow(e),e.getDay(),aw(t)),[xn]:(e,t)=>dc(1,e.getDay(),aw(t))},tK={[or]:e=>3*e,[jt]:(e,t)=>dc(e,0,aw(t))};function OD(e,t){return ED(e,t||1,eK,tK,QX)}const nK={[rn]:e=>e.getUTCFullYear(),[or]:e=>Math.floor(e.getUTCMonth()/3),[bn]:e=>e.getUTCMonth(),[ar]:e=>e.getUTCDate(),[Fr]:e=>e.getUTCHours(),[Dr]:e=>e.getUTCMinutes(),[Jr]:e=>e.getUTCSeconds(),[ki]:e=>e.getUTCMilliseconds(),[ao]:e=>SD(e),[jt]:e=>sw(e),[xn]:(e,t)=>dc(1,e.getUTCDay(),uw(t)),[jt+xn]:(e,t)=>dc(sw(e),e.getUTCDay(),uw(t))},rK={[or]:e=>3*e,[jt]:(e,t)=>dc(e,0,uw(t))};function kD(e,t){return ED(e,t||1,nK,rK,JX)}const iK={[rn]:Qa,[or]:Hm.every(3),[bn]:Hm,[jt]:zd,[ar]:Ka,[xn]:Ka,[ao]:Ka,[Fr]:K2,[Dr]:X2,[Jr]:Xa,[ki]:q2},oK={[rn]:Za,[or]:Gm.every(3),[bn]:Gm,[jt]:Bd,[ar]:Ja,[xn]:Ja,[ao]:Ja,[Fr]:Z2,[Dr]:J2,[Jr]:Xa,[ki]:q2};function hc(e){return iK[e]}function pc(e){return oK[e]}function CD(e,t,n){return e?e.offset(t,n):void 0}function _D(e,t,n){return CD(hc(e),t,n)}function AD(e,t,n){return CD(pc(e),t,n)}function TD(e,t,n,r){return e?e.range(t,n,r):void 0}function ND(e,t,n,r){return TD(hc(e),t,n,r)}function MD(e,t,n,r){return TD(pc(e),t,n,r)}const Wd=1e3,Hd=Wd*60,Gd=Hd*60,qm=Gd*24,aK=qm*7,FD=qm*30,lw=qm*365,DD=[rn,bn,ar,Fr,Dr,Jr,ki],qd=DD.slice(0,-1),Vd=qd.slice(0,-1),Yd=Vd.slice(0,-1),sK=Yd.slice(0,-1),uK=[rn,jt],RD=[rn,bn],PD=[rn],Xd=[[qd,1,Wd],[qd,5,5*Wd],[qd,15,15*Wd],[qd,30,30*Wd],[Vd,1,Hd],[Vd,5,5*Hd],[Vd,15,15*Hd],[Vd,30,30*Hd],[Yd,1,Gd],[Yd,3,3*Gd],[Yd,6,6*Gd],[Yd,12,12*Gd],[sK,1,qm],[uK,1,aK],[RD,1,FD],[RD,3,3*FD],[PD,1,lw]];function jD(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Rd(t))/n;let i=jd(s=>s[2]).right(Xd,r),o,a;return i===Xd.length?(o=PD,a=Ya(t[0]/lw,t[1]/lw,n)):i?(i=Xd[r/Xd[i-1][2]<Xd[i][2]/r?i-1:i],o=i[0],a=i[1]):(o=DD,a=Math.max(Ya(t[0],t[1],n),1)),{units:o,step:a}}function cw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function fw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Kd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function ID(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,u=e.shortMonths,l=Qd(i),c=Jd(i),f=Qd(o),d=Jd(o),h=Qd(a),p=Jd(a),g=Qd(s),m=Jd(s),y=Qd(u),v=Jd(u),b={a:L,A:R,b:B,B:O,c:null,d:WD,e:WD,f:MK,g:BK,G:WK,H:AK,I:TK,j:NK,L:HD,m:FK,M:DK,p:j,q:P,Q:KD,s:QD,S:RK,u:PK,U:jK,V:IK,w:LK,W:zK,x:null,X:null,y:$K,Y:UK,Z:HK,"%":XD},x={a:I,A:$,b:G,B:z,c:null,d:qD,e:qD,f:YK,g:iQ,G:aQ,H:GK,I:qK,j:VK,L:VD,m:XK,M:KK,p:V,q:Y,Q:KD,s:QD,S:QK,u:JK,U:ZK,V:eQ,w:tQ,W:nQ,x:null,X:null,y:rQ,Y:oQ,Z:sQ,"%":XD},w={a:D,A:C,b:A,B:k,c:N,d:BD,e:BD,f:OK,g:$D,G:zD,H:UD,I:UD,j:xK,L:EK,m:bK,M:wK,p:M,q:vK,Q:CK,s:_K,S:SK,u:hK,U:pK,V:gK,w:dK,W:mK,x:T,X:F,y:$D,Y:zD,Z:yK,"%":kK};b.x=E(n,b),b.X=E(r,b),b.c=E(t,b),x.x=E(n,x),x.X=E(r,x),x.c=E(t,x);function E(U,H){return function(X){var W=[],Se=-1,fe=0,he=U.length,ke,Te,Ve;for(X instanceof Date||(X=new Date(+X));++Se<he;)U.charCodeAt(Se)===37&&(W.push(U.slice(fe,Se)),(Te=LD[ke=U.charAt(++Se)])!=null?ke=U.charAt(++Se):Te=ke==="e"?" ":"0",(Ve=H[ke])&&(ke=Ve(X,Te)),W.push(ke),fe=Se+1);return W.push(U.slice(fe,Se)),W.join("")}}function S(U,H){return function(X){var W=Kd(1900,void 0,1),Se=_(W,U,X+="",0),fe,he;if(Se!=X.length)return null;if("Q"in W)return new Date(W.Q);if("s"in W)return new Date(W.s*1e3+("L"in W?W.L:0));if(H&&!("Z"in W)&&(W.Z=0),"p"in W&&(W.H=W.H%12+W.p*12),W.m===void 0&&(W.m="q"in W?W.q:0),"V"in W){if(W.V<1||W.V>53)return null;"w"in W||(W.w=1),"Z"in W?(fe=fw(Kd(W.y,0,1)),he=fe.getUTCDay(),fe=he>4||he===0?ew.ceil(fe):ew(fe),fe=Ja.offset(fe,(W.V-1)*7),W.y=fe.getUTCFullYear(),W.m=fe.getUTCMonth(),W.d=fe.getUTCDate()+(W.w+6)%7):(fe=cw(Kd(W.y,0,1)),he=fe.getDay(),fe=he>4||he===0?Q2.ceil(fe):Q2(fe),fe=Ka.offset(fe,(W.V-1)*7),W.y=fe.getFullYear(),W.m=fe.getMonth(),W.d=fe.getDate()+(W.w+6)%7)}else("W"in W||"U"in W)&&("w"in W||(W.w="u"in W?W.u%7:"W"in W?1:0),he="Z"in W?fw(Kd(W.y,0,1)).getUTCDay():cw(Kd(W.y,0,1)).getDay(),W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(he+5)%7:W.w+W.U*7-(he+6)%7);return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,fw(W)):cw(W)}}function _(U,H,X,W){for(var Se=0,fe=H.length,he=X.length,ke,Te;Se<fe;){if(W>=he)return-1;if(ke=H.charCodeAt(Se++),ke===37){if(ke=H.charAt(Se++),Te=w[ke in LD?H.charAt(Se++):ke],!Te||(W=Te(U,X,W))<0)return-1}else if(ke!=X.charCodeAt(W++))return-1}return W}function M(U,H,X){var W=l.exec(H.slice(X));return W?(U.p=c.get(W[0].toLowerCase()),X+W[0].length):-1}function D(U,H,X){var W=h.exec(H.slice(X));return W?(U.w=p.get(W[0].toLowerCase()),X+W[0].length):-1}function C(U,H,X){var W=f.exec(H.slice(X));return W?(U.w=d.get(W[0].toLowerCase()),X+W[0].length):-1}function A(U,H,X){var W=y.exec(H.slice(X));return W?(U.m=v.get(W[0].toLowerCase()),X+W[0].length):-1}function k(U,H,X){var W=g.exec(H.slice(X));return W?(U.m=m.get(W[0].toLowerCase()),X+W[0].length):-1}function N(U,H,X){return _(U,t,H,X)}function T(U,H,X){return _(U,n,H,X)}function F(U,H,X){return _(U,r,H,X)}function L(U){return a[U.getDay()]}function R(U){return o[U.getDay()]}function B(U){return u[U.getMonth()]}function O(U){return s[U.getMonth()]}function j(U){return i[+(U.getHours()>=12)]}function P(U){return 1+~~(U.getMonth()/3)}function I(U){return a[U.getUTCDay()]}function $(U){return o[U.getUTCDay()]}function G(U){return u[U.getUTCMonth()]}function z(U){return s[U.getUTCMonth()]}function V(U){return i[+(U.getUTCHours()>=12)]}function Y(U){return 1+~~(U.getUTCMonth()/3)}return{format:function(U){var H=E(U+="",b);return H.toString=function(){return U},H},parse:function(U){var H=S(U+="",!1);return H.toString=function(){return U},H},utcFormat:function(U){var H=E(U+="",x);return H.toString=function(){return U},H},utcParse:function(U){var H=S(U+="",!0);return H.toString=function(){return U},H}}}var LD={"-":"",_:" ","0":"0"},Gt=/^\s*\d+/,lK=/^%/,cK=/[\\^$*+?|[\]().{}]/g;function $e(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function fK(e){return e.replace(cK,"\\$&")}function Qd(e){return new RegExp("^(?:"+e.map(fK).join("|")+")","i")}function Jd(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function dK(e,t,n){var r=Gt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function hK(e,t,n){var r=Gt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function pK(e,t,n){var r=Gt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function gK(e,t,n){var r=Gt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function mK(e,t,n){var r=Gt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function zD(e,t,n){var r=Gt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function $D(e,t,n){var r=Gt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function yK(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function vK(e,t,n){var r=Gt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function bK(e,t,n){var r=Gt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function BD(e,t,n){var r=Gt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function xK(e,t,n){var r=Gt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function UD(e,t,n){var r=Gt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function wK(e,t,n){var r=Gt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function SK(e,t,n){var r=Gt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function EK(e,t,n){var r=Gt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function OK(e,t,n){var r=Gt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function kK(e,t,n){var r=lK.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function CK(e,t,n){var r=Gt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function _K(e,t,n){var r=Gt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function WD(e,t){return $e(e.getDate(),t,2)}function AK(e,t){return $e(e.getHours(),t,2)}function TK(e,t){return $e(e.getHours()%12||12,t,2)}function NK(e,t){return $e(1+Ka.count(Qa(e),e),t,3)}function HD(e,t){return $e(e.getMilliseconds(),t,3)}function MK(e,t){return HD(e,t)+"000"}function FK(e,t){return $e(e.getMonth()+1,t,2)}function DK(e,t){return $e(e.getMinutes(),t,2)}function RK(e,t){return $e(e.getSeconds(),t,2)}function PK(e){var t=e.getDay();return t===0?7:t}function jK(e,t){return $e(zd.count(Qa(e)-1,e),t,2)}function GD(e){var t=e.getDay();return t>=4||t===0?$d(e):$d.ceil(e)}function IK(e,t){return e=GD(e),$e($d.count(Qa(e),e)+(Qa(e).getDay()===4),t,2)}function LK(e){return e.getDay()}function zK(e,t){return $e(Q2.count(Qa(e)-1,e),t,2)}function $K(e,t){return $e(e.getFullYear()%100,t,2)}function BK(e,t){return e=GD(e),$e(e.getFullYear()%100,t,2)}function UK(e,t){return $e(e.getFullYear()%1e4,t,4)}function WK(e,t){var n=e.getDay();return e=n>=4||n===0?$d(e):$d.ceil(e),$e(e.getFullYear()%1e4,t,4)}function HK(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+$e(t/60|0,"0",2)+$e(t%60,"0",2)}function qD(e,t){return $e(e.getUTCDate(),t,2)}function GK(e,t){return $e(e.getUTCHours(),t,2)}function qK(e,t){return $e(e.getUTCHours()%12||12,t,2)}function VK(e,t){return $e(1+Ja.count(Za(e),e),t,3)}function VD(e,t){return $e(e.getUTCMilliseconds(),t,3)}function YK(e,t){return VD(e,t)+"000"}function XK(e,t){return $e(e.getUTCMonth()+1,t,2)}function KK(e,t){return $e(e.getUTCMinutes(),t,2)}function QK(e,t){return $e(e.getUTCSeconds(),t,2)}function JK(e){var t=e.getUTCDay();return t===0?7:t}function ZK(e,t){return $e(Bd.count(Za(e)-1,e),t,2)}function YD(e){var t=e.getUTCDay();return t>=4||t===0?Ud(e):Ud.ceil(e)}function eQ(e,t){return e=YD(e),$e(Ud.count(Za(e),e)+(Za(e).getUTCDay()===4),t,2)}function tQ(e){return e.getUTCDay()}function nQ(e,t){return $e(ew.count(Za(e)-1,e),t,2)}function rQ(e,t){return $e(e.getUTCFullYear()%100,t,2)}function iQ(e,t){return e=YD(e),$e(e.getUTCFullYear()%100,t,2)}function oQ(e,t){return $e(e.getUTCFullYear()%1e4,t,4)}function aQ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ud(e):Ud.ceil(e),$e(e.getUTCFullYear()%1e4,t,4)}function sQ(){return"+0000"}function XD(){return"%"}function KD(e){return+e}function QD(e){return Math.floor(+e/1e3)}var gc,dw,JD,hw,ZD;uQ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function uQ(e){return gc=ID(e),dw=gc.format,JD=gc.parse,hw=gc.utcFormat,ZD=gc.utcParse,gc}function Zd(e){const t={};return n=>t[n]||(t[n]=e(n))}function lQ(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=cQ(r,i);const a=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+a}}function cQ(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function e5(e){const t=Zd(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=fc(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return lQ(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,a){a=fc(a==null?",f":a);const s=Ya(r,i,o),u=Math.max(Math.abs(r),Math.abs(i));let l;if(a.precision==null)switch(a.type){case"s":return isNaN(l=cD(s,u))||(a.precision=l),n(a,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=fD(s,u))||(a.precision=l-(a.type==="e"));break}case"f":case"%":{isNaN(l=lD(s))||(a.precision=l-(a.type==="%")*2);break}}return t(a)}}}let pw;t5();function t5(){return pw=e5({format:Wm,formatPrefix:U2})}function n5(e){return e5(uD(e))}function Vm(e){return arguments.length?pw=n5(e):pw}function r5(e,t,n){n=n||{},ce(n)||Q("Invalid time multi-format specifier: ".concat(n));const r=t(Jr),i=t(Dr),o=t(Fr),a=t(ar),s=t(jt),u=t(bn),l=t(or),c=t(rn),f=e(n[ki]||".%L"),d=e(n[Jr]||":%S"),h=e(n[Dr]||"%I:%M"),p=e(n[Fr]||"%I %p"),g=e(n[ar]||n[xn]||"%a %d"),m=e(n[jt]||"%b %d"),y=e(n[bn]||"%B"),v=e(n[or]||"%B"),b=e(n[rn]||"%Y");return x=>(r(x)<x?f:i(x)<x?d:o(x)<x?h:a(x)<x?p:u(x)<x?s(x)<x?g:m:c(x)<x?l(x)<x?y:v:b)(x)}function i5(e){const t=Zd(e.format),n=Zd(e.utcFormat);return{timeFormat:r=>se(r)?t(r):r5(t,hc,r),utcFormat:r=>se(r)?n(r):r5(n,pc,r),timeParse:Zd(e.parse),utcParse:Zd(e.utcParse)}}let gw;o5();function o5(){return gw=i5({format:dw,parse:JD,utcFormat:hw,utcParse:ZD})}function a5(e){return i5(ID(e))}function eh(e){return arguments.length?gw=a5(e):gw}const mw=(e,t)=>Ae({},e,t);function s5(e,t){const n=e?n5(e):Vm(),r=t?a5(t):eh();return mw(n,r)}function yw(e,t){const n=arguments.length;return n&&n!==2&&Q("defaultLocale expects either zero or two arguments."),n?mw(Vm(e),eh(t)):mw(Vm(),eh())}function fQ(){return t5(),o5(),yw()}const dQ=/^(data:|([A-Za-z]+:)?\/\/)/,hQ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,pQ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,u5="file://";function gQ(e,t){return n=>({options:n||{},sanitize:yQ,load:mQ,fileAccess:!!t,file:vQ(t),http:xQ(e)})}async function mQ(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function yQ(e,t){t=Ae({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,a;const s=hQ.test(e.replace(pQ,""));(e==null||typeof e!="string"||!s)&&Q("Sanitize failure, invalid URI: "+re(e));const u=dQ.test(e);return(a=t.baseURL)&&!u&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),o=(i=e.startsWith(u5))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(u5.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function vQ(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):bQ}async function bQ(){Q("No file system access.")}function xQ(e){return e?async function(t,n){const r=Ae({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?_e(o[i])?o[i]():o.text():Q(o.status+""+o.statusText)}:wQ}async function wQ(){Q("No HTTP fetch method available.")}const SQ=e=>e!=null&&e===e,EQ=e=>e==="true"||e==="false"||e===!0||e===!1,OQ=e=>!Number.isNaN(Date.parse(e)),l5=e=>!Number.isNaN(+e)&&!(e instanceof Date),kQ=e=>l5(e)&&Number.isInteger(+e),vw={boolean:T2,integer:yn,number:yn,date:N2,string:M2,unknown:mn},Ym=[EQ,kQ,l5,OQ],CQ=["boolean","integer","number","date"];function c5(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=Ym.length,i=Ym.map((o,a)=>a+1);for(let o=0,a=0,s,u;o<n;++o)for(u=t?e[o][t]:e[o],s=0;s<r;++s)if(i[s]&&SQ(u)&&!Ym[s](u)&&(i[s]=0,++a,a===Ym.length))return"string";return CQ[i.reduce((o,a)=>o===0?a:o,0)-1]}function f5(e,t){return t.reduce((n,r)=>(n[r]=c5(e,r),n),{})}function d5(e){const t=function(n,r){const i={delimiter:e};return bw(n,r?Ae(r,i):i)};return t.responseType="text",t}function bw(e,t){return t.header&&(e=t.header.map(re).join(t.delimiter)+`
`+e),hX(t.delimiter).parse(e+"")}bw.responseType="text";function _Q(e){return typeof Buffer=="function"&&_e(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function xw(e,t){const n=t&&t.property?rr(t.property):mn;return ce(e)&&!_Q(e)?AQ(n(e),t):n(JSON.parse(e))}xw.responseType="json";function AQ(e,t){return!J(e)&&jF(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const TQ={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function h5(e,t){let n,r,i,o;return e=xw(e,t),t&&t.feature?(n=yX,i=t.feature):t&&t.mesh?(n=bX,i=t.mesh,o=TQ[t.filter]):Q("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):Q("Invalid TopoJSON object: "+i),r&&r.features||[r]}h5.responseType="json";const Xm={dsv:bw,csv:d5(","),tsv:d5("	"),json:xw,topojson:h5};function ww(e,t){return arguments.length>1?(Xm[e]=t,this):pe(Xm,e)?Xm[e]:null}function p5(e){const t=ww(e);return t&&t.responseType||"text"}function g5(e,t,n,r){t=t||{};const i=ww(t.type||"json");return i||Q("Unknown data format type: "+t.type),e=i(e,t),t.parse&&NQ(e,t.parse,n,r),pe(e,"columns")&&delete e.columns,e}function NQ(e,t,n,r){if(!e.length)return;const i=eh();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),a,s,u,l,c,f;t==="auto"&&(t=f5(e,o)),o=Object.keys(t);const d=o.map(h=>{const p=t[h];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?r:n)(m);if(!vw[p])throw Error("Illegal format pattern: "+h+":"+p);return vw[p]});for(u=0,c=e.length,f=o.length;u<c;++u)for(a=e[u],l=0;l<f;++l)s=o[l],a[s]=d[l](a[s])}const Km=gQ(typeof fetch!="undefined"&&fetch,null);function Qm(e){const t=e||mn,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}async function Jm(e,t){try{await t(e)}catch(n){e.error(n)}}const m5=Symbol("vega_id");let MQ=1;function Zm(e){return!!(e&&me(e))}function me(e){return e[m5]}function y5(e,t){return e[m5]=t,e}function He(e){const t=e===Object(e)?e:{data:e};return me(t)?t:y5(t,MQ++)}function Sw(e){return e0(e,He({}))}function e0(e,t){for(const n in e)t[n]=e[n];return t}function v5(e,t){return y5(t,me(e))}function Cu(e,t){return e?t?(n,r)=>e(n,r)||me(t(n))-me(t(r)):(n,r)=>e(n,r)||me(n)-me(r):null}function b5(e){return e&&e.constructor===_u}function _u(){const e=[],t=[],n=[],r=[],i=[];let o=null,a=!1;return{constructor:_u,insert(s){const u=ue(s),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(s){const u=_e(s)?r:t,l=ue(s),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(s,u,l){const c={field:u,value:vn(l)};return _e(s)?(c.filter=s,i.push(c)):(c.tuple=s,n.push(c)),this},encode(s,u){return _e(s)?i.push({filter:s,field:u}):n.push({tuple:s,field:u}),this},clean(s){return o=s,this},reflow(){return a=!0,this},pulse(s,u){const l={},c={};let f,d,h,p,g,m;for(f=0,d=u.length;f<d;++f)l[me(u[f])]=1;for(f=0,d=t.length;f<d;++f)g=t[f],l[me(g)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[me(v)]=-1)});for(f=0,d=e.length;f<d;++f)g=e[f],m=me(g),l[m]?l[m]=1:s.add.push(He(e[f]));for(f=0,d=u.length;f<d;++f)g=u[f],l[me(g)]<0&&s.rem.push(g);function y(v,b,x){x?v[b]=x(v):s.encode=b,a||(c[me(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],g=h.tuple,p=h.field,m=l[me(g)],m>0&&(y(g,p,h.value),s.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[me(v)]>0&&y(v,h.field,h.value)}),s.modifies(h.field);if(a)s.mod=t.length||r.length?u.filter(v=>l[me(v)]>0):u.slice();else for(m in c)s.mod.push(c[m]);return(o||o==null&&(t.length||r.length))&&s.clean(!0),s}}}const t0="_:mod:_";function n0(){Object.defineProperty(this,t0,{writable:!0,value:{}})}n0.prototype={set(e,t,n,r){const i=this,o=i[e],a=i[t0];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=J(n)?1+n.length:-1),i},modified(e,t){const n=this[t0];if(arguments.length){if(J(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[t0]={},this}};let FQ=0;const DQ="pulse",RQ=new n0,PQ=1,jQ=2;function nt(e,t,n,r){this.id=++FQ,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function x5(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}nt.prototype={targets(){return this._targets||(this._targets=Qm(Fd))},set(e){return this.value!==e?(this.value=e,1):0},skip:x5(PQ),modified:x5(jQ),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new n0,i=this._argops=this._argops||[],o=[];let a,s,u,l;const c=(f,d,h)=>{h instanceof nt?(h!==this&&(t&&h.targets().add(this),o.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(a in e)if(s=e[a],a===DQ)ue(s).forEach(f=>{f instanceof nt?f!==this&&(f.targets().add(this),o.push(f)):Q("Pulse parameters must be operator instances.")}),this.source=s;else if(J(s))for(r.set(a,-1,Array(u=s.length)),l=0;l<u;++l)c(a,l,s[l]);else c(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||RQ,n=this._argops;let r,i,o,a;if(n){const s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function IQ(e,t,n,r){let i=1,o;return e instanceof nt?o=e:e&&e.prototype instanceof nt?o=new e:_e(e)?o=new nt(null,e):(i=0,o=new nt(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function LQ(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let zQ=0;function r0(e,t,n){this.id=++zQ,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function es(e,t,n){return new r0(e,t,n)}r0.prototype={_filter:Kr,_apply:mn,targets(){return this._targets||(this._targets=Qm(Fd))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=es(e);return this.targets().add(t),t},apply(e){const t=es(null,e);return this.targets().add(t),t},merge(){const e=es();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=es();return this.targets().add(es(null,null,_2(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(es(null,null,()=>n=!0)),t.targets().add(es(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Kr,this._targets=null}};function $Q(e,t,n,r){const i=this,o=es(n,r),a=function(l){l.dataflow=i;try{o.receive(l)}catch(c){i.error(c)}finally{i.run()}};let s;typeof e=="string"&&typeof document!="undefined"?s=document.querySelectorAll(e):s=ue(e);const u=s.length;for(let l=0;l<u;++l)s[l].addEventListener(t,a);return o}function BQ(e,t){const n=this.locale();return g5(e,t,n.timeParse,n.utcParse)}function UQ(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function WQ(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:p5(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function HQ(e,t,n){const r=this,i=r._pending||GQ(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(Kr).insert(o.data||[])),i.done(),o}function GQ(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests==0&&(e._pending=null,t(e))},e._pending=n}const qQ={skip:!0};function VQ(e,t,n,r,i){return(e instanceof nt?XQ:YQ)(this,e,t,n,r,i),this}function YQ(e,t,n,r,i,o){const a=Ae({},o,qQ);let s,u;_e(n)||(n=vn(n)),r===void 0?s=l=>e.touch(n(l)):_e(r)?(u=new nt(null,r,i,!1),s=l=>{u.evaluate(l);const c=n(l),f=u.value;b5(f)?e.pulse(c,f,o):e.update(c,f,a)}):s=l=>e.update(n(l),r,a),t.apply(s)}function XQ(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const a=o||{},s=new nt(null,KQ(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}function KQ(e,t){return t=_e(t)?t:vn(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function QQ(e){e.rank=++this._rank}function JQ(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Q("Cycle detected in dataflow graph.")}const i0={},so=1<<0,ts=1<<1,na=1<<2,ZQ=so|ts,w5=so|na,mc=so|ts|na,S5=1<<3,th=1<<4,E5=1<<5,O5=1<<6;function ns(e,t,n){this.dataflow=e,this.stamp=t==null?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Ew(e,t){const n=[];return Va(e,t,r=>n.push(r)),n}function k5(e,t){const n={};return e.visit(t,r=>{n[me(r)]=1}),r=>n[me(r)]?null:r}function o0(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}ns.prototype={StopPropagation:i0,ADD:so,REM:ts,MOD:na,ADD_REM:ZQ,ADD_MOD:w5,ALL:mc,REFLOW:S5,SOURCE:th,NO_SOURCE:E5,NO_FIELDS:O5,fork(e){return new ns(this.dataflow).init(this,e)},clone(){const e=this.fork(mc);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(mc|th)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new ns(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&O5)&&(n.fields=e.fields),t&so?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&ts?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&na?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&E5?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||mc;return t&so&&this.add.length||t&ts&&this.rem.length||t&na&&this.mod.length},reflow(e){if(e)return this.fork(mc).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(na,k5(this,so))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return J(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?J(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&so&&(n.addF=o0(n.addF,t)),e&ts&&(n.remF=o0(n.remF,t)),e&na&&(n.modF=o0(n.modF,t)),e&th&&(n.srcF=o0(n.srcF,t)),n},materialize(e){e=e||mc;const t=this;return e&so&&t.addF&&(t.add=Ew(t.add,t.addF),t.addF=null),e&ts&&t.remF&&(t.rem=Ew(t.rem,t.remF),t.remF=null),e&na&&t.modF&&(t.mod=Ew(t.mod,t.modF),t.modF=null),e&th&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&th)return Va(n.source,n.srcF,r),n;e&so&&Va(n.add,n.addF,r),e&ts&&Va(n.rem,n.remF,r),e&na&&Va(n.mod,n.modF,r);const i=n.source;if(e&S5&&i){const o=n.add.length+n.mod.length;o===i.length||(o?Va(i,k5(n,w5),r):Va(i,n.srcF,r))}return n}};function Ow(e,t,n,r){const i=this,o=n.length;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(let s=0;s<o;++s){const u=n[s];if(u.stamp===t){if(u.fields){const l=i.fields||(i.fields={});for(const c in u.fields)l[c]=1}u.changed(i.ADD)&&(a|=i.ADD),u.changed(i.REM)&&(a|=i.REM),u.changed(i.MOD)&&(a|=i.MOD)}}this.changes=a}ne(Ow,ns,{fork(e){const t=new ns(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?J(e)?e.some(r=>n[r]):n[e]:0},filter(){Q("MultiPulse does not support filtering.")},materialize(){Q("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function eJ(e,t,n){const r=this,i=[];if(r._pulse)return C5(r);if(r._pending&&await r._pending,t&&await Jm(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new ns(r,o,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=Qm(Fd);let a=0,s,u,l;try{for(;r._heap.size()>0;){if(s=r._heap.pop(),s.rank!==s.qrank){r._enqueue(s,!0);continue}u=s.run(r._getPulse(s,e)),u.then?u=await u:u.async&&(i.push(u.async),u=i0),u!==i0&&s._targets&&s._targets.forEach(c=>r._enqueue(c)),++a}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${a} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await Jm(r,c[f].callback)}return n&&await Jm(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function tJ(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function nJ(e,t,n){return this._pulse?C5(this):(this.evaluate(e,t,n),this)}function rJ(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function C5(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function iJ(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function oJ(e,t){const n=e.source,r=this._clock;return n&&J(n)?new Ow(this,r,n.map(i=>i.pulse),t):this._input[e.id]||aJ(this._pulse,n&&n.pulse)}function aJ(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==i0&&(e.source=t.source),e)}const kw={skip:!1,force:!1};function sJ(e,t){const n=t||kw;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function uJ(e,t,n){const r=n||kw;return(e.set(t)||r.force)&&this.touch(e,r),this}function lJ(e,t,n){this.touch(e,n||kw);const r=new ns(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function cJ(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),_5(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,fJ(t,0,e)):r=n,r}}}function _5(e,t,n,r){let i,o;const a=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(a,i)<0){e[n]=i,n=o;continue}break}return e[n]=a}function fJ(e,t,n){const r=t,i=e.length,o=e[t];let a=(t<<1)+1,s;for(;a<i;)s=a+1,s<i&&n(e[a],e[s])>=0&&(a=s),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=o,_5(e,r,t,n)}function yc(){this.logger(S2()),this.logLevel(x2),this._clock=0,this._rank=0,this._locale=yw();try{this._loader=Km()}catch{}this._touched=Qm(Fd),this._input={},this._pulse=null,this._heap=cJ((e,t)=>e.qrank-t.qrank),this._postrun=[]}function nh(e){return function(){return this._log[e].apply(this,arguments)}}yc.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:nh("error"),warn:nh("warn"),info:nh("info"),debug:nh("debug"),logLevel:nh("level"),cleanThreshold:1e4,add:IQ,connect:LQ,rank:QQ,rerank:JQ,pulse:lJ,touch:sJ,update:uJ,changeset:_u,ingest:UQ,parse:BQ,preload:HQ,request:WQ,events:$Q,on:VQ,evaluate:eJ,run:nJ,runAsync:tJ,runAfter:rJ,_enqueue:iJ,_getPulse:oJ};function q(e,t){nt.call(this,e,null,t)}ne(q,nt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const vc={};function A5(e){const t=T5(e);return t&&t.Definition||null}function T5(e){return e=e&&e.toLowerCase(),pe(vc,e)?vc[e]:null}function*N5(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Cw(e,t,n){const r=Float64Array.from(N5(e,n));return r.sort(lc),t.map(i=>JF(r,i))}function _w(e,t){return Cw(e,[.25,.5,.75],t)}function Aw(e,t){const n=e.length,r=CX(e,t),i=_w(e,t),o=(i[2]-i[0])/1.34,a=Math.min(r,o)||r||Math.abs(i[0])||1;return 1.06*a*Math.pow(n,-.2)}function M5(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],a=e.extent[1],s,u,l,c,f,d;const h=e.span||a-o||Math.abs(o)||1;if(e.step)s=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);s=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,s=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/s)>t;)s*=n;for(f=0,d=i.length;f<d;++f)c=s/i[f],c>=l&&h/c<=t&&(s=c)}c=Math.log(s);const p=c>=0?0:~~(-c/r)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/s+g)*s,o=o<c?c-s:c,a=Math.ceil(a/s)*s),{start:o,stop:a===o?o+s:a,step:s}}var Zr=Math.random;function dJ(e){Zr=e}function F5(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(N5(e,r)),o=i.length,a=t;let s,u,l,c;for(l=0,c=Array(a);l<a;++l){for(s=0,u=0;u<o;++u)s+=i[~~(Zr()*o)];c[l]=s/o}return c.sort(lc),[$2(c,n/2),$2(c,1-n/2)]}function D5(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let a=0,s=1,u=r(e[0]),l=u,c=u+t,f;for(;s<i;++s){if(f=r(e[s]),f>=c){for(l=(u+l)/2;a<s;++a)o[a]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;a<s;++a)o[a]=l;return n?hJ(o,t+t/4):o}function hJ(e,t){const n=e.length;let r=0,i=1,o,a;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(a=i+(r+o-i-i>>1);a<i;)e[a++]=e[i];for(;a>i;)e[a--]=e[r]}r=i,i=o}return e}function pJ(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function gJ(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(a){return arguments.length?(n=a||0,i=r-n,o):n},max(a){return arguments.length?(r=a||0,i=r-n,o):r},sample(){return n+Math.floor(i*Zr())},pdf(a){return a===Math.floor(a)&&a>=n&&a<r?1/i:0},cdf(a){const s=Math.floor(a);return s<n?0:s>=r?1:(s-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return o.min(e).max(t)}const R5=Math.sqrt(2*Math.PI),mJ=Math.SQRT2;let rh=NaN;function a0(e,t){e=e||0,t=t==null?1:t;let n=0,r=0,i,o;if(rh===rh)n=rh,rh=NaN;else{do n=Zr()*2-1,r=Zr()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,rh=r*o}return e+n*t}function Tw(e,t,n){n=n==null?1:n;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*R5)}function s0(e,t,n){t=t||0,n=n==null?1:n;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const a=Math.exp(-i*i/2);let s;i<7.07106781186547?(s=.0352624965998911*i+.700383064443688,s=s*i+6.37396220353165,s=s*i+33.912866078383,s=s*i+112.079291497871,s=s*i+221.213596169931,s=s*i+220.206867912376,o=a*s,s=.0883883476483184*i+1.75566716318264,s=s*i+16.064177579207,s=s*i+86.7807322029461,s=s*i+296.564248779674,s=s*i+637.333633378831,s=s*i+793.826512519948,s=s*i+440.413735824752,o=o/s):(s=i+.65,s=i+4/s,s=i+3/s,s=i+2/s,s=i+1/s,o=a/s/2.506628274631)}return r>0?1-o:o}function u0(e,t,n){return e<0||e>1?NaN:(t||0)+(n==null?1:n)*mJ*yJ(2*e-1)}function yJ(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Nw(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o==null?1:o,i):r},sample:()=>a0(n,r),pdf:o=>Tw(o,n,r),cdf:o=>s0(o,n,r),icdf:o=>u0(o,n,r)};return i.mean(e).stdev(t)}function Mw(e,t){const n=Nw();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=Aw(e)),i):t},sample(){return e[~~(Zr()*r)]+t*n.sample()},pdf(o){let a=0,s=0;for(;s<r;++s)a+=n.pdf((o-e[s])/t);return a/t/r},cdf(o){let a=0,s=0;for(;s<r;++s)a+=n.cdf((o-e[s])/t);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Fw(e,t){return e=e||0,t=t==null?1:t,Math.exp(e+a0()*t)}function Dw(e,t,n){if(e<=0)return 0;t=t||0,n=n==null?1:n;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*R5*e)}function Rw(e,t,n){return s0(Math.log(e),t,n)}function Pw(e,t,n){return Math.exp(u0(e,t,n))}function P5(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o==null?1:o,i):r},sample:()=>Fw(n,r),pdf:o=>Dw(o,n,r),cdf:o=>Rw(o,n,r),icdf:o=>Pw(o,n,r)};return i.mean(e).stdev(t)}function j5(e,t){let n=0,r;function i(a){const s=[];let u=0,l;for(l=0;l<n;++l)u+=s[l]=a[l]==null?1:+a[l];for(l=0;l<n;++l)s[l]/=u;return s}const o={weights(a){return arguments.length?(r=i(t=a||[]),o):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),o.weights(t)):e},sample(){const a=Zr();let s=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(a<u){s=e[l];break}return s.sample()},pdf(a){let s=0,u=0;for(;u<n;++u)s+=r[u]*e[u].pdf(a);return s},cdf(a){let s=0,u=0;for(;u<n;++u)s+=r[u]*e[u].cdf(a);return s},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function jw(e,t){return t==null&&(t=e==null?1:e,e=0),e+(t-e)*Zr()}function Iw(e,t,n){return n==null&&(n=t==null?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function Lw(e,t,n){return n==null&&(n=t==null?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function zw(e,t,n){return n==null&&(n=t==null?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function I5(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o==null?1:o,i):r},sample:()=>jw(n,r),pdf:o=>Iw(o,n,r),cdf:o=>Lw(o,n,r),icdf:o=>zw(o,n,r)};return t==null&&(t=e==null?1:e,e=0),i.min(e).max(t)}function ih(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function l0(e,t,n,r){e=e.filter(h=>{let p=t(h),g=n(h);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,o=new Float64Array(i),a=new Float64Array(i);let s=0,u=0,l=0,c,f,d;for(d of e)o[s]=c=+t(d),a[s]=f=+n(d),++s,u+=(c-u)/s,l+=(f-l)/s;for(s=0;s<i;++s)o[s]-=u,a[s]-=l;return[o,a,u,l]}function oh(e,t,n,r){let i=-1,o,a;for(const s of e)o=t(s),a=n(s),o!=null&&(o=+o)>=o&&a!=null&&(a=+a)>=a&&r(o,a,++i)}function bc(e,t,n,r,i){let o=0,a=0;return oh(e,t,n,(s,u)=>{const l=u-i(s),c=u-r;o+=l*l,a+=c*c}),1-o/a}function $w(e,t,n){let r=0,i=0,o=0,a=0,s=0;oh(e,t,n,(c,f)=>{++s,r+=(c-r)/s,i+=(f-i)/s,o+=(c*f-o)/s,a+=(c*c-a)/s});const u=ih(r,i,o,a),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:bc(e,t,n,i,l)}}function L5(e,t,n){let r=0,i=0,o=0,a=0,s=0;oh(e,t,n,(c,f)=>{++s,c=Math.log(c),r+=(c-r)/s,i+=(f-i)/s,o+=(c*f-o)/s,a+=(c*c-a)/s});const u=ih(r,i,o,a),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:bc(e,t,n,i,l)}}function z5(e,t,n){const[r,i,o,a]=l0(e,t,n);let s=0,u=0,l=0,c=0,f=0,d,h,p;oh(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,s+=(b*h-s)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[g,m]=ih(u/a,s/a,l/a,c/a),y=v=>Math.exp(g+m*(v-o));return{coef:[Math.exp(g-m*o),m],predict:y,rSquared:bc(e,t,n,a,y)}}function $5(e,t,n){let r=0,i=0,o=0,a=0,s=0,u=0;oh(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,o+=(h*p-o)/u,a+=(h*h-a)/u,s+=(d-s)/u});const l=ih(r,i,o,a),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:bc(e,t,n,s,c)}}function Bw(e,t,n){const[r,i,o,a]=l0(e,t,n),s=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,g,m;for(h=0;h<s;)p=r[h],g=i[h++],m=p*p,u+=(m-u)/h,l+=(m*p-l)/h,c+=(m*m-c)/h,f+=(p*g-f)/h,d+=(m*g-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,x=(f*y-d*l)/v,w=-b*u,E=S=>(S=S-o,b*S*S+x*S+w+a);return{coef:[w-x*o+b*o*o+a,x-2*b*o,b],predict:E,rSquared:bc(e,t,n,a,E)}}function B5(e,t,n,r){if(r===1)return $w(e,t,n);if(r===2)return Bw(e,t,n);const[i,o,a,s]=l0(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,g,m;for(d=0;d<f;++d){for(p=0,g=0;p<u;++p)g+=Math.pow(i[p],d)*o[p];for(l.push(g),m=new Float64Array(f),h=0;h<f;++h){for(p=0,g=0;p<u;++p)g+=Math.pow(i[p],d+h);m[h]=g}c.push(m)}c.push(l);const y=bJ(c),v=b=>{b-=a;let x=s+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)x+=y[d]*Math.pow(b,d);return x};return{coef:vJ(f,y,-a,s),predict:v,rSquared:bc(e,t,n,s,v)}}function vJ(e,t,n,r){const i=Array(e);let o,a,s,u;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],u=1,i[o]+=s,a=1;a<=o;++a)u*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*u;return i[0]+=r,i}function bJ(e){const t=e.length-1,n=[];let r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}const U5=2,W5=1e-12;function H5(e,t,n,r){const[i,o,a,s]=l0(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=U5;){const p=[0,l-1];for(let m=0;m<u;++m){const y=i[m],v=p[0],b=p[1],x=y-i[v]>i[b]-y?v:b;let w=0,E=0,S=0,_=0,M=0;const D=1/Math.abs(i[x]-y||1);for(let k=v;k<=b;++k){const N=i[k],T=o[k],F=xJ(Math.abs(y-N)*D)*d[k],L=N*F;w+=F,E+=L,S+=T*F,_+=T*L,M+=N*L}const[C,A]=ih(E/w,S/w,_/w,M/w);c[m]=C+A*y,f[m]=Math.abs(o[m]-c[m]),wJ(i,m+1,p)}if(h===U5)break;const g=ZF(f);if(Math.abs(g)<W5)break;for(let m=0,y,v;m<u;++m)y=f[m]/(6*g),d[m]=y>=1?W5:(v=1-y*y)*v}return SJ(i,c,a,s)}function xJ(e){return(e=1-e*e*e)*e*e}function wJ(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function SJ(e,t,n,r){const i=e.length,o=[];let a=0,s=0,u=[],l;for(;a<i;++a)l=e[a]+n,u[0]===l?u[1]+=(t[a]-u[1])/++s:(s=0,u[1]+=r,u=[l,t[a]],o.push(u));return u[1]+=r,o}const EJ=.5*Math.PI/180;function c0(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],o=t[0],a=t[1],s=a-o,u=s/r,l=[i(o)],c=[];if(n===r){for(let g=1;g<r;++g)l.push(i(o+g/n*s));return l.push(i(a)),l}else{c.push(i(a));for(let g=n;--g>0;)c.push(i(o+g/n*s))}let f=l[0],d=c[c.length-1];const h=1/s,p=OJ(f[1],c);for(;d;){const g=i((f[0]+d[0])/2);g[0]-f[0]>=u&&kJ(f,g,d,h,p)>EJ?c.push(g):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function OJ(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const a=t[o][1];a<n&&(n=a),a>r&&(r=a)}return 1/(r-n)}function kJ(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),a=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-a)}function CJ(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function Uw(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:CJ(e)}function G5(e,t,n){return n||e+(t?"_"+t:"")}const Ww=()=>{},_J={init:Ww,add:Ww,rem:Ww,idx:0},ah={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},sh=Object.keys(ah);function AJ(e,t){return n=>Ae({name:e,out:n||e},_J,t)}sh.forEach(e=>{ah[e]=AJ(e,ah[e])});function q5(e,t){return ah[e](t)}function V5(e,t){return e.idx-t.idx}function TJ(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{!r.req||r.req.forEach(i=>{t[i]||n(t[i]=ah[i]())})};return e.forEach(n),Object.values(t).sort(V5)}function NJ(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.init(this))}function MJ(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function FJ(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function DJ(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function Y5(e,t){const n=t||mn,r=TJ(e),i=e.slice().sort(V5);function o(a){this._ops=r,this._out=i,this.cell=a,this.init()}return o.prototype.init=NJ,o.prototype.add=MJ,o.prototype.rem=FJ,o.prototype.set=DJ,o.prototype.get=n,o.fields=e.map(a=>a.out),o}function Hw(e){this._key=e?rr(e):me,this.reset()}const on=Hw.prototype;on.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};on.add=function(e){this._add.push(e)};on.rem=function(e){this._rem.push(e)};on.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={};let s,u,l;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,u=0;s<r;++s)a[n(l=e[s])]?a[n(l)]=0:o[u++]=l;return this._rem=[],this._add=o};on.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",pe(n,o)||(n[o]=1,++i);return i};on.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=RF(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};on.argmin=function(e){return this.extent(e)[0]||{}};on.argmax=function(e){return this.extent(e)[1]||{}};on.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};on.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};on.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=_w(this.values(),e),this._get=e),this._q};on.q1=function(e){return this.quartile(e)[0]};on.q2=function(e){return this.quartile(e)[1]};on.q3=function(e){return this.quartile(e)[2]};on.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=F5(this.values(),1e3,.05,e),this._get=e),this._ci};on.ci0=function(e){return this.ci(e)[0]};on.ci1=function(e){return this.ci(e)[1]};function rs(e){q.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}rs.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:sh},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ne(rs,q,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(s){let u,l,c,f;for(u in s)for(c=s[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}o(e._prev),o(t);function a(s,u,l){const c=n[l],f=r[l++];for(const d in f){const h=s?s+"|"+d:d;u[c]=f[d],l<i?a(h,u,l):t[h]||e.cell(h,u)}}a("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(m){const y=ue(gn(m)),v=y.length;let b=0,x;for(;b<v;++b)r[x=y[b]]||(r[x]=1,t.push(x))}this._dims=ue(e.groupby),this._dnames=this._dims.map(m=>{const y=wt(m);return i(m),n.push(y),y}),this.cellkey=e.key?e.key:Uw(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],a=e.ops||["count"],s=e.as||[],u=o.length,l={};let c,f,d,h,p,g;for(u!==a.length&&Q("Unmatched number of fields and aggregate ops."),g=0;g<u;++g){if(c=o[g],f=a[g],c==null&&f!=="count"&&Q("Null aggregate field specified."),h=wt(c),p=G5(f,h,s[g]),n.push(p),f==="count"){this._counts.push(p);continue}d=l[h],d||(i(c),d=l[h]=[],d.field=c,this._measures.push(d)),f!=="count"&&(this._countOnly=!1),d.push(q5(f,p))}return this._measures=this._measures.map(m=>Y5(m,m.field)),{}},cellkey:Uw(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new Hw),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let a=0;a<i;++a)o[n[a]]=r[a](e);return t?v5(t.tuple,o):He(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&a.push(u.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?a:s).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const RJ=1e-14;function Gw(e){q.call(this,null,e)}Gw.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ne(Gw,q,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,a=e.as||["bin0","bin1"],s=a[0],u=a[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(gn(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[s]=f,c[u]=f==null?null:i+o*(1+(f-i)/o)}:c=>c[s]=r(c)),t.modifies(n?a:s)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=M5(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,a,s;(a=e.anchor)!=null&&(s=a-(i+r*Math.floor((a-i)/r)),i+=s,o+=s);const u=function(l){let c=yn(t(l));return c==null?null:c<i?-1/0:c>o?1/0:(c=Math.max(i,Math.min(c,o-r)),i+r*Math.floor(RJ+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=nr(u,gn(t),e.name||"bin_"+wt(t))}});function X5(e,t,n){const r=e;let i=t||[],o=n||[],a={},s=0;return{add:u=>o.push(u),remove:u=>a[r(u)]=++s,size:()=>i.length,data:(u,l)=>(s&&(i=i.filter(c=>!a[r(c)]),a={},s=0),l&&u&&i.sort(u),o.length&&(i=u?$F(u,i,o.sort(u)):i.concat(o),o=[]),i)}}function qw(e){q.call(this,[],e)}qw.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ne(qw,q,{transform(e,t){const n=t.fork(t.ALL),r=X5(me,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(Cu(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function K5(e){nt.call(this,null,PJ,e)}ne(K5,nt);function PJ(e){return this.value&&!e.modified()?this.value:C2(e.fields,e.orders)}function Vw(e){q.call(this,null,e)}Vw.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function jJ(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ne(Vw,q,{transform(e,t){const n=f=>d=>{for(var h=jJ(s(d),e.case,o)||[],p,g=0,m=h.length;g<m;++g)a.test(p=h[g])||f(p)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let s,u,l;for(s in n)u=r[s],l=n[s]||0,!u&&l?(r[s]=u=He({}),u[i]=s,u[o]=l,a.add.push(u)):l===0?(u&&a.rem.push(u),n[s]=null,r[s]=null):u[o]!==l&&(u[o]=l,a.mod.push(u));return a.modifies(t)}});function Yw(e){q.call(this,null,e)}Yw.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ne(Yw,q,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=IJ(s,i,o,e.filter||Kr)):n.mod=s,n.source=this.value,n.modifies(r)}});function IJ(e,t,n,r){for(var i=[],o={},a=e.length,s=0,u,l;s<a;++s)for(o[t]=l=e[s],u=0;u<a;++u)o[n]=e[u],r(o)&&(i.push(He(o)),o={},o[t]=l);return i}const Q5={kde:Mw,mixture:j5,normal:Nw,lognormal:P5,uniform:I5},LJ="distributions",J5="function",zJ="field";function Z5(e,t){const n=e[J5];pe(Q5,n)||Q("Unknown distribution function: "+n);const r=Q5[n]();for(const i in e)i===zJ?r.data((e.from||t()).map(e[i])):i===LJ?r[i](e[i].map(o=>Z5(o,t))):typeof r[i]===J5&&r[i](e[i]);return r}function Xw(e){q.call(this,null,e)}const eR=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],$J={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:eR},{name:"weights",type:"number",array:!0}]};Xw.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:eR.concat($J)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ne(Xw,q,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=Z5(e.distribution,BJ(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&Q("Invalid density method: "+a),!e.extent&&!r.data&&Q("Missing density extent parameter."),a=r[a];const s=e.as||["value","density"],u=e.extent||oo(r.data()),l=c0(a,u,i,o).map(c=>{const f={};return f[s[0]]=c[0],f[s[1]]=c[1],He(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function BJ(e){return()=>e.materialize(e.SOURCE).source}function tR(e,t){return e?e.map((n,r)=>t[r]||wt(n)):null}function Kw(e,t,n){const r=[],i=f=>f(u);let o,a,s,u,l,c;if(t==null)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)u=e[a],l=t.map(i),c=o[l],c||(o[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const nR="bin";function Qw(e){q.call(this,null,e)}Qw.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:nR}]};const UJ=(e,t)=>Rd(oo(e,t))/30;ne(Qw,q,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Kw(t.source,e.groupby,mn),i=e.smooth||!1,o=e.field,a=e.step||UJ(n,o),s=Cu((p,g)=>o(p)-o(g)),u=e.as||nR,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(s);h=-1;for(const g of D5(p,a,i,o))g<c&&(c=g),g>f&&(f=g),p[++h][u]=g}return this.value={start:c,stop:f,step:a},t.reflow(!0).modifies(u)}});function rR(e){nt.call(this,null,WJ,e),this.modified(!0)}ne(rR,nt);function WJ(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:nr(n=>t(n,e),gn(t),wt(t))}function Jw(e){q.call(this,[void 0,void 0],e)}Jw.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ne(Jw,q,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],a=n[1];if((i||o==null)&&(o=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,s=>{const u=yn(r(s));u!=null&&(u<o&&(o=u),u>a&&(a=u))}),!Number.isFinite(o)||!Number.isFinite(a)){let s=wt(r);s&&(s=` for field "${s}"`),t.dataflow.warn(`Infinite extent${s}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}});function Zw(e,t){nt.call(this,e),this.parent=t,this.count=0}ne(Zw,nt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function f0(e){q.call(this,{},e),this._keys=sc();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ne(f0,q,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=pe(i,e)&&i[e],a,s;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(s=r||(s=this._group[e])&&s.tuple,a=n.dataflow,o=new Zw(n.fork(n.NO_SOURCE),this),a.add(o).connect(t(a,e,s)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,a=e.modified("key"),s=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=me(u),c=o.get(l);c!==void 0&&(o.delete(l),s(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);o.set(me(u),l),s(l).add(u)}),a||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=me(u),c=o.get(l),f=r(u);c===f?s(f).mod(u):(o.set(l,f),s(c).rem(u),s(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{s(o.get(me(u))).mod(u)}),a&&t.visit(t.REFLOW,u=>{const l=me(u),c=o.get(l),f=r(u);c!==f&&(o.set(l,f),s(c).rem(u),s(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function iR(e){nt.call(this,null,HJ,e)}ne(iR,nt);function HJ(e){return this.value&&!e.modified()?this.value:J(e.name)?ue(e.name).map(t=>rr(t)):rr(e.name,e.as)}function eS(e){q.call(this,sc(),e)}eS.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ne(eS,q,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=me(f);r.has(d)?r.delete(d):a.push(f)}),t.visit(t.ADD,f=>{u(f,e)?o.push(f):r.set(me(f),1)});function c(f){const d=me(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),o.push(f)):!h&&!p?(r.set(d,1),a.push(f)):l&&h&&!p&&s.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function tS(e){q.call(this,[],e)}tS.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ne(tS,q,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=tR(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,s=>{const u=r.map(p=>p(s)),l=u.reduce((p,g)=>Math.max(p,g.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=Sw(s),f=0;f<a;++f)d[i[f]]=(h=u[f][c])==null?null:h;o&&(d[o]=c),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function nS(e){q.call(this,[],e)}nS.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ne(nS,q,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(wt),o=e.as||["key","value"],a=o[0],s=o[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=Sw(l),f[a]=i[c],f[s]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function rS(e){q.call(this,null,e)}rS.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ne(rS,q,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,a=>a[r]=n(a,e))}});function oR(e){q.call(this,[],e)}ne(oR,q,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,a,s,u;if(o>0){for(a=[];--o>=0;)a.push(u=He(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else s=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(s):s,i=i.slice(-o);return n.source=this.value=i,n}});const d0={value:"value",median:ZF,mean:AX,min:z2,max:wu},GJ=[];function iS(e){q.call(this,[],e)}iS.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function qJ(e){var t=e.method||d0.value,n;if(d0[t]==null)Q("Unrecognized imputation method: "+t);else return t===d0.value?(n=e.value!==void 0?e.value:0,()=>n):d0[t]}function VJ(e){const t=e.field;return n=>n?t(n):NaN}ne(iS,q,{transform(e,t){var n=t.fork(t.ALL),r=qJ(e),i=VJ(e),o=wt(e.field),a=wt(e.key),s=(e.groupby||[]).map(wt),u=YJ(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,g,m,y,v,b,x,w;for(m=0,b=u.length;m<b;++m)for(d=u[m],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(g=u.domain[v],w={_impute:!0},y=0,x=p.length;y<x;++y)w[s[y]]=p[y];w[a]=g,w[o]=Number.isNaN(h)?h=r(d,i):h,l.push(He(w))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function YJ(e,t,n,r){var i=y=>y(m),o=[],a=r?r.slice():[],s={},u={},l,c,f,d,h,p,g,m;for(a.forEach((y,v)=>s[y]=v+1),d=0,g=e.length;d<g;++d)m=e[d],p=n(m),h=s[p]||(s[p]=a.push(p)),c=(l=t?t.map(i):GJ)+"",(f=u[c])||(f=u[c]=[],o.push(f),f.values=l),f[h-1]=m;return o.domain=a,o}function oS(e){rs.call(this,e)}oS.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:sh},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ne(oS,rs,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{Ae(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function aS(e){q.call(this,null,e)}aS.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ne(aS,q,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Kw(r,e.groupby,e.field),o=(e.groupby||[]).map(wt),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;s!=="pdf"&&s!=="cdf"&&Q("Invalid density method: "+s),e.resolve==="shared"&&(c||(c=oo(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=Mw(h,a)[s],g=e.counts?h.length:1,m=c||oo(h);c0(p,m,f,d).forEach(y=>{const v={};for(let b=0;b<o.length;++b)v[o[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*g,l.push(He(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function aR(e){nt.call(this,null,XJ,e)}ne(aR,nt);function XJ(e){return this.value&&!e.modified()?this.value:A2(e.fields,e.flat)}function sR(e){q.call(this,[],e),this._pending=null}ne(sR,q,{transform(e,t){const n=t.dataflow;return this._pending?sS(this,t,this._pending):KJ(e)?t.StopPropagation:e.values?sS(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ue(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>sS(this,t,ue(r.data)))}});function KJ(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function sS(e,t,n){n.forEach(He);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function uS(e){q.call(this,{},e)}uS.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ne(uS,q,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,a=e.modified(),s=n.length;let u=a?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,s>1&&!c&&Q('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==s*d&&Q('The "as" parameter has too few output field names.'),c=c||i.map(wt),f=function(p){for(var g=0,m=0,y,v;g<s;++g)if(v=r.get(n[g](p)),v==null)for(y=0;y<d;++y,++m)p[c[m]]=o;else for(y=0;y<d;++y,++m)p[c[m]]=i[y](v)}):(c||Q("Missing output field names."),f=function(p){for(var g=0,m;g<s;++g)m=r.get(n[g](p)),p[c[g]]=m==null?o:m}),a?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function uR(e){nt.call(this,null,QJ,e)}ne(uR,nt);function QJ(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,a;for(o=0;o<n;++o)a=t[o],a[0]<r&&(r=a[0]),a[1]>i&&(i=a[1]);return[r,i]}function lR(e){nt.call(this,null,JJ,e)}ne(lR,nt);function JJ(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function cR(e){q.call(this,null,e)}ne(cR,q,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function lS(e){rs.call(this,e)}lS.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:sh,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ne(lS,rs,{_transform:rs.prototype.transform,transform(e,t){return this._transform(ZJ(e,t),t)}});function ZJ(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=gn(n).concat(gn(r)),a=tZ(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>i),fields:a.map(s=>eZ(s,n,r,o)),as:a.map(s=>s+""),modified:e.modified.bind(e)}}function eZ(e,t,n,r){return nr(i=>t(i)===e?n(i):NaN,r,e+"")}function tZ(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const a=e(o);r[a]||(r[a]=1,i.push(a))}),i.sort(Lm),t?i.slice(0,t):i}function fR(e){f0.call(this,e)}ne(fR,f0,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(me(o),n,t,o);return(e.modified("field")||r&&t.modified(gn(r)))&&Q("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const a=i(o);r(o).forEach(s=>a.mod(s))}),t.visit(t.ADD,o=>{const a=i(o);r(o).forEach(s=>a.add(He(s)))}),t.visit(t.REM,o=>{const a=i(o);r(o).forEach(s=>a.rem(s))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function cS(e){q.call(this,null,e)}cS.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ne(cS,q,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=tR(e.fields,e.as||[]),o=r?(s,u)=>nZ(s,u,r,i):e0;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,s=>{const u=me(s);n.rem.push(a[u]),a[u]=null}),t.visit(t.ADD,s=>{const u=o(s,He({}));a[me(s)]=u,n.add.push(u)}),t.visit(t.MOD,s=>{n.mod.push(o(s,a[me(s)]))}),n}});function nZ(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function dR(e){q.call(this,null,e)}ne(dR,q,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function fS(e){q.call(this,null,e)}fS.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const rZ=1e-14;ne(fS,q,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=Kw(i,e.groupby,e.field),a=(e.groupby||[]).map(wt),s=[],u=e.step||.01,l=e.probs||Mr(u/2,1-rZ,u),c=l.length;return o.forEach(f=>{const d=Cw(f,l);for(let h=0;h<c;++h){const p={};for(let g=0;g<a.length;++g)p[a[g]]=f.dims[g];p[r[0]]=l[h],p[r[1]]=d[h],s.push(He(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}});function hR(e){q.call(this,null,e)}ne(hR,q,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=me(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=Sw(i);r[me(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[me(i)];for(const a in i)o[a]=i[a],n.modifies(a);n.mod.push(o)})),n}});function dS(e){q.call(this,[],e),this.count=0}dS.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ne(dS,q,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((c,f)=>(c[me(f)]=1,c),{});let a=this.value,s=this.count,u=0;function l(c){let f,d;a.length<i?a.push(c):(d=~~((s+1)*Zr()),d<a.length&&d>=u&&(f=a[d],o[me(f)]&&n.rem.push(f),a[d]=c)),++s}if(t.rem.length&&(t.visit(t.REM,c=>{const f=me(c);o[f]&&(o[f]=-1,n.rem.push(c)),--s}),a=a.filter(c=>o[me(c)]!==-1)),(t.rem.length||r)&&a.length<i&&t.source&&(u=s=a.length,t.visit(t.SOURCE,c=>{o[me(c)]||l(c)}),u=-1),r&&a.length>i){const c=a.length-i;for(let f=0;f<c;++f)o[me(a[f])]=-1,n.rem.push(a[f]);a=a.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[me(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=a.filter(c=>!o[me(c)])),this.count=s,this.value=n.source=a,n}});function hS(e){q.call(this,null,e)}hS.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ne(hS,q,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Mr(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,He(o)}),n.add=t.add.concat(this.value),n}});function pR(e){q.call(this,null,e),this.modified(!0)}ne(pR,q,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function pS(e){q.call(this,null,e)}const gR=["unit0","unit1"];pS.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:tw,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:gR}]};ne(pS,q,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),a=(i?pc:hc)(o.unit).offset,s=e.as||gR,u=s[0],l=s[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.modified(gn(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const g=n(p);let m,y;g==null?(p[u]=null,r&&(p[l]=null)):(p[u]=m=y=o(g),r&&(p[l]=y=a(m,c)),m<f&&(f=m),y>d&&(d=y))}),o.start=f,o.stop=d,t.modifies(r?s:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:jD({extent:e.extent||oo(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=rw(r),a=this.value||{},s=(n?kD:OD)(o,i);return s.unit=Re(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}});function mR(e){q.call(this,sc(),e)}ne(mR,q,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=s=>i.set(r(s),s);let a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,s=>i.delete(r(s))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function yR(e){q.call(this,null,e)}ne(yR,q,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Cu(e.sort)):t.source).map(e.field))}});function iZ(e,t,n,r){const i=uh[e](t,n);return{init:i.init||Wa,update:function(o,a){a[r]=i.next(o)}}}const uh={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=uh.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Q("ntile num must be greater than zero.");const n=uh.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Q("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=oZ(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function oZ(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const aZ=Object.keys(uh);function vR(e){const t=ue(e.ops),n=ue(e.fields),r=ue(e.params),i=ue(e.as),o=this.outputs=[],a=this.windows=[],s={},u={},l=[],c=[];let f=!0;function d(h){ue(gn(h)).forEach(p=>s[p]=1)}d(e.sort),t.forEach((h,p)=>{const g=n[p],m=wt(g),y=G5(h,m,i[p]);if(d(g),o.push(y),pe(uh,h))a.push(iZ(h,n[p],r[p],y));else{if(g==null&&h!=="count"&&Q("Null aggregate field specified."),h==="count"){l.push(y);return}f=!1;let v=u[m];v||(v=u[m]=[],v.field=g,c.push(v)),v.push(q5(h,y))}}),(l.length||c.length)&&(this.cell=sZ(c,l,f)),this.inputs=Object.keys(s)}const bR=vR.prototype;bR.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};bR.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)};function sZ(e,t,n){e=e.map(u=>Y5(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new Hw;return r.add=function(u){if(r.num+=1,!n){s&&s.add(u);for(let l=0;l<i;++l)o[l].add(o[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){s&&s.rem(u);for(let l=0;l<i;++l)o[l].rem(o[l].get(u),u)}},r.set=function(u){let l,c;for(s&&s.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=o.length;l<c;++l)o[l].set(u)},r.init=function(){r.num=0,s&&s.reset();for(let u=0;u<i;++u)o[u].init()},r}function gS(e){q.call(this,{},e),this._mlen=0,this._mods=[]}gS.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:aZ.concat(sh)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ne(gS,q,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Cu(e.sort),i=Uw(e.groupby),o=s=>this.group(i(s));let a=this.state;(!a||n)&&(a=this.state=new vR(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,s=>o(s).add(s))):(t.visit(t.REM,s=>o(s).remove(s)),t.visit(t.ADD,s=>o(s).add(s)));for(let s=0,u=this._mlen;s<u;++s)uZ(this._mods[s],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=X5(me),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function uZ(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),u=s.length,l=o?jd(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||vn(-1)};t.init();for(let f=0;f<u;++f)lZ(c,a,f,u),o&&cZ(c,l),t.update(c,s[f])}function lZ(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function cZ(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}var fZ=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",aggregate:rs,bin:Gw,collect:qw,compare:K5,countpattern:Vw,cross:Yw,density:Xw,dotbin:Qw,expression:rR,extent:Jw,facet:f0,field:iR,filter:eS,flatten:tS,fold:nS,formula:rS,generate:oR,impute:iS,joinaggregate:oS,kde:aS,key:aR,load:sR,lookup:uS,multiextent:uR,multivalues:lR,params:cR,pivot:lS,prefacet:fR,project:cS,proxy:dR,quantile:fS,relay:hR,sample:dS,sequence:hS,sieve:pR,subflow:Zw,timeunit:pS,tupleindex:mR,values:yR,window:gS});const mS=Math.PI,yS=2*mS,Au=1e-6,dZ=yS-Au;function vS(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Tu(){return new vS}vS.prototype=Tu.prototype={constructor:vS,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,u=r-t,l=o-e,c=a-t,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>Au)if(!(Math.abs(c*s-u*l)>Au)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var d=n-o,h=r-a,p=s*s+u*u,g=d*d+h*h,m=Math.sqrt(p),y=Math.sqrt(f),v=i*Math.tan((mS-Math.acos((p+f-g)/(2*m*y)))/2),b=v/y,x=v/m;Math.abs(b-1)>Au&&(this._+="L"+(e+b*l)+","+(t+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>l*h)+","+(this._x1=e+x*s)+","+(this._y1=t+x*u)}},arc:function(e,t,n,r,i,o){e=+e,t=+t,n=+n,o=!!o;var a=n*Math.cos(r),s=n*Math.sin(r),u=e+a,l=t+s,c=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+u+","+l:(Math.abs(this._x1-u)>Au||Math.abs(this._y1-l)>Au)&&(this._+="L"+u+","+l),!!n&&(f<0&&(f=f%yS+yS),f>dZ?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>Au&&(this._+="A"+n+","+n+",0,"+ +(f>=mS)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function Ge(e){return function(){return e}}var xR=Math.abs,wn=Math.atan2,Nu=Math.cos,hZ=Math.max,bS=Math.min,uo=Math.sin,xc=Math.sqrt,Sn=1e-12,wc=Math.PI,h0=wc/2,wR=2*wc;function pZ(e){return e>1?0:e<-1?wc:Math.acos(e)}function SR(e){return e>=1?h0:e<=-1?-h0:Math.asin(e)}function gZ(e){return e.innerRadius}function mZ(e){return e.outerRadius}function yZ(e){return e.startAngle}function vZ(e){return e.endAngle}function bZ(e){return e&&e.padAngle}function xZ(e,t,n,r,i,o,a,s){var u=n-e,l=r-t,c=a-i,f=s-o,d=f*u-c*l;if(!(d*d<Sn))return d=(c*(t-o)-f*(e-i))/d,[e+d*u,t+d*l]}function p0(e,t,n,r,i,o,a){var s=e-n,u=t-r,l=(a?o:-o)/xc(s*s+u*u),c=l*u,f=-l*s,d=e+c,h=t+f,p=n+c,g=r+f,m=(d+p)/2,y=(h+g)/2,v=p-d,b=g-h,x=v*v+b*b,w=i-o,E=d*g-p*h,S=(b<0?-1:1)*xc(hZ(0,w*w*x-E*E)),_=(E*b-v*S)/x,M=(-E*v-b*S)/x,D=(E*b+v*S)/x,C=(-E*v+b*S)/x,A=_-m,k=M-y,N=D-m,T=C-y;return A*A+k*k>N*N+T*T&&(_=D,M=C),{cx:_,cy:M,x01:-c,y01:-f,x11:_*(i/w-1),y11:M*(i/w-1)}}function wZ(){var e=gZ,t=mZ,n=Ge(0),r=null,i=yZ,o=vZ,a=bZ,s=null;function u(){var l,c,f=+e.apply(this,arguments),d=+t.apply(this,arguments),h=i.apply(this,arguments)-h0,p=o.apply(this,arguments)-h0,g=xR(p-h),m=p>h;if(s||(s=l=Tu()),d<f&&(c=d,d=f,f=c),!(d>Sn))s.moveTo(0,0);else if(g>wR-Sn)s.moveTo(d*Nu(h),d*uo(h)),s.arc(0,0,d,h,p,!m),f>Sn&&(s.moveTo(f*Nu(p),f*uo(p)),s.arc(0,0,f,p,h,m));else{var y=h,v=p,b=h,x=p,w=g,E=g,S=a.apply(this,arguments)/2,_=S>Sn&&(r?+r.apply(this,arguments):xc(f*f+d*d)),M=bS(xR(d-f)/2,+n.apply(this,arguments)),D=M,C=M,A,k;if(_>Sn){var N=SR(_/f*uo(S)),T=SR(_/d*uo(S));(w-=N*2)>Sn?(N*=m?1:-1,b+=N,x-=N):(w=0,b=x=(h+p)/2),(E-=T*2)>Sn?(T*=m?1:-1,y+=T,v-=T):(E=0,y=v=(h+p)/2)}var F=d*Nu(y),L=d*uo(y),R=f*Nu(x),B=f*uo(x);if(M>Sn){var O=d*Nu(v),j=d*uo(v),P=f*Nu(b),I=f*uo(b),$;if(g<wc&&($=xZ(F,L,P,I,O,j,R,B))){var G=F-$[0],z=L-$[1],V=O-$[0],Y=j-$[1],U=1/uo(pZ((G*V+z*Y)/(xc(G*G+z*z)*xc(V*V+Y*Y)))/2),H=xc($[0]*$[0]+$[1]*$[1]);D=bS(M,(f-H)/(U-1)),C=bS(M,(d-H)/(U+1))}}E>Sn?C>Sn?(A=p0(P,I,F,L,d,C,m),k=p0(O,j,R,B,d,C,m),s.moveTo(A.cx+A.x01,A.cy+A.y01),C<M?s.arc(A.cx,A.cy,C,wn(A.y01,A.x01),wn(k.y01,k.x01),!m):(s.arc(A.cx,A.cy,C,wn(A.y01,A.x01),wn(A.y11,A.x11),!m),s.arc(0,0,d,wn(A.cy+A.y11,A.cx+A.x11),wn(k.cy+k.y11,k.cx+k.x11),!m),s.arc(k.cx,k.cy,C,wn(k.y11,k.x11),wn(k.y01,k.x01),!m))):(s.moveTo(F,L),s.arc(0,0,d,y,v,!m)):s.moveTo(F,L),!(f>Sn)||!(w>Sn)?s.lineTo(R,B):D>Sn?(A=p0(R,B,O,j,f,-D,m),k=p0(F,L,P,I,f,-D,m),s.lineTo(A.cx+A.x01,A.cy+A.y01),D<M?s.arc(A.cx,A.cy,D,wn(A.y01,A.x01),wn(k.y01,k.x01),!m):(s.arc(A.cx,A.cy,D,wn(A.y01,A.x01),wn(A.y11,A.x11),!m),s.arc(0,0,f,wn(A.cy+A.y11,A.cx+A.x11),wn(k.cy+k.y11,k.cx+k.x11),m),s.arc(k.cx,k.cy,D,wn(k.y11,k.x11),wn(k.y01,k.x01),!m))):s.arc(0,0,f,x,b,m)}if(s.closePath(),l)return s=null,l+""||null}return u.centroid=function(){var l=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-wc/2;return[Nu(c)*l,uo(c)*l]},u.innerRadius=function(l){return arguments.length?(e=typeof l=="function"?l:Ge(+l),u):e},u.outerRadius=function(l){return arguments.length?(t=typeof l=="function"?l:Ge(+l),u):t},u.cornerRadius=function(l){return arguments.length?(n=typeof l=="function"?l:Ge(+l),u):n},u.padRadius=function(l){return arguments.length?(r=l==null?null:typeof l=="function"?l:Ge(+l),u):r},u.startAngle=function(l){return arguments.length?(i=typeof l=="function"?l:Ge(+l),u):i},u.endAngle=function(l){return arguments.length?(o=typeof l=="function"?l:Ge(+l),u):o},u.padAngle=function(l){return arguments.length?(a=typeof l=="function"?l:Ge(+l),u):a},u.context=function(l){return arguments.length?(s=l==null?null:l,u):s},u}function ER(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function OR(e){this._context=e}OR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function xS(e){return new OR(e)}function kR(e){return e[0]}function CR(e){return e[1]}function _R(e,t){var n=Ge(!0),r=null,i=xS,o=null;e=typeof e=="function"?e:e===void 0?kR:Ge(e),t=typeof t=="function"?t:t===void 0?CR:Ge(t);function a(s){var u,l=(s=ER(s)).length,c,f=!1,d;for(r==null&&(o=i(d=Tu())),u=0;u<=l;++u)!(u<l&&n(c=s[u],u,s))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(c,u,s),+t(c,u,s));if(d)return o=null,d+""||null}return a.x=function(s){return arguments.length?(e=typeof s=="function"?s:Ge(+s),a):e},a.y=function(s){return arguments.length?(t=typeof s=="function"?s:Ge(+s),a):t},a.defined=function(s){return arguments.length?(n=typeof s=="function"?s:Ge(!!s),a):n},a.curve=function(s){return arguments.length?(i=s,r!=null&&(o=i(r)),a):i},a.context=function(s){return arguments.length?(s==null?r=o=null:o=i(r=s),a):r},a}function AR(e,t,n){var r=null,i=Ge(!0),o=null,a=xS,s=null;e=typeof e=="function"?e:e===void 0?kR:Ge(+e),t=typeof t=="function"?t:Ge(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?CR:Ge(+n);function u(c){var f,d,h,p=(c=ER(c)).length,g,m=!1,y,v=new Array(p),b=new Array(p);for(o==null&&(s=a(y=Tu())),f=0;f<=p;++f){if(!(f<p&&i(g=c[f],f,c))===m)if(m=!m)d=f,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=f-1;h>=d;--h)s.point(v[h],b[h]);s.lineEnd(),s.areaEnd()}m&&(v[f]=+e(g,f,c),b[f]=+t(g,f,c),s.point(r?+r(g,f,c):v[f],n?+n(g,f,c):b[f]))}if(y)return s=null,y+""||null}function l(){return _R().defined(i).curve(a).context(o)}return u.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ge(+c),r=null,u):e},u.x0=function(c){return arguments.length?(e=typeof c=="function"?c:Ge(+c),u):e},u.x1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Ge(+c),u):r},u.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ge(+c),n=null,u):t},u.y0=function(c){return arguments.length?(t=typeof c=="function"?c:Ge(+c),u):t},u.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:Ge(+c),u):n},u.lineX0=u.lineY0=function(){return l().x(e).y(t)},u.lineY1=function(){return l().x(e).y(n)},u.lineX1=function(){return l().x(r).y(t)},u.defined=function(c){return arguments.length?(i=typeof c=="function"?c:Ge(!!c),u):i},u.curve=function(c){return arguments.length?(a=c,o!=null&&(s=a(o)),u):a},u.context=function(c){return arguments.length?(c==null?o=s=null:s=a(o=c),u):o},u}var SZ={draw:function(e,t){var n=Math.sqrt(t/wc);e.moveTo(n,0),e.arc(0,0,n,0,wR)}};function EZ(e,t){var n=null;e=typeof e=="function"?e:Ge(e||SZ),t=typeof t=="function"?t:Ge(t===void 0?64:+t);function r(){var i;if(n||(n=i=Tu()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return r.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ge(i),r):e},r.size=function(i){return arguments.length?(t=typeof i=="function"?i:Ge(+i),r):t},r.context=function(i){return arguments.length?(n=i==null?null:i,r):n},r}function is(){}function g0(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function m0(e){this._context=e}m0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:g0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:g0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function OZ(e){return new m0(e)}function TR(e){this._context=e}TR.prototype={areaStart:is,areaEnd:is,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:g0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kZ(e){return new TR(e)}function NR(e){this._context=e}NR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:g0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function CZ(e){return new NR(e)}function MR(e,t){this._basis=new m0(e),this._beta=t}MR.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,a=t[n]-i,s=-1,u;++s<=n;)u=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+u*o),this._beta*t[s]+(1-this._beta)*(i+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var _Z=function e(t){function n(r){return t===1?new m0(r):new MR(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function y0(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function wS(e,t){this._context=e,this._k=(1-t)/6}wS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:y0(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:y0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var AZ=function e(t){function n(r){return new wS(r,t)}return n.tension=function(r){return e(+r)},n}(0);function SS(e,t){this._context=e,this._k=(1-t)/6}SS.prototype={areaStart:is,areaEnd:is,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:y0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var TZ=function e(t){function n(r){return new SS(r,t)}return n.tension=function(r){return e(+r)},n}(0);function ES(e,t){this._context=e,this._k=(1-t)/6}ES.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:y0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var NZ=function e(t){function n(r){return new ES(r,t)}return n.tension=function(r){return e(+r)},n}(0);function OS(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>Sn){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Sn){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function FR(e,t){this._context=e,this._alpha=t}FR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:OS(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var MZ=function e(t){function n(r){return t?new FR(r,t):new wS(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function DR(e,t){this._context=e,this._alpha=t}DR.prototype={areaStart:is,areaEnd:is,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:OS(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var FZ=function e(t){function n(r){return t?new DR(r,t):new SS(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function RR(e,t){this._context=e,this._alpha=t}RR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:OS(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var DZ=function e(t){function n(r){return t?new RR(r,t):new ES(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function PR(e){this._context=e}PR.prototype={areaStart:is,areaEnd:is,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function RZ(e){return new PR(e)}function jR(e){return e<0?-1:1}function IR(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(jR(o)+jR(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function LR(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function kS(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function v0(e){this._context=e}v0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kS(this,this._t0,LR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,kS(this,LR(this,n=IR(this,e,t)),n);break;default:kS(this,this._t0,n=IR(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function zR(e){this._context=new $R(e)}(zR.prototype=Object.create(v0.prototype)).point=function(e,t){v0.prototype.point.call(this,t,e)};function $R(e){this._context=e}$R.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function PZ(e){return new v0(e)}function jZ(e){return new zR(e)}function BR(e){this._context=e}BR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=UR(e),i=UR(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function UR(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function IZ(e){return new BR(e)}function b0(e,t){this._context=e,this._t=t}b0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function LZ(e){return new b0(e,.5)}function zZ(e){return new b0(e,0)}function $Z(e){return new b0(e,1)}function Sc(e,t){if(typeof document!="undefined"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const BZ=()=>typeof Image!="undefined"?Image:null;function lo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function os(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const CS=Symbol("implicit");function _S(){var e=new Map,t=[],n=[],r=CS;function i(o){var a=o+"",s=e.get(a);if(!s){if(r!==CS)return r;e.set(a,s=t.push(o))}return n[(s-1)%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Map;for(const a of o){const s=a+"";e.has(s)||e.set(s,t.push(a))}return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return _S(t,n).unknown(r)},lo.apply(i,arguments),i}function Ec(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function lh(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function as(){}var Mu=.7,Oc=1/Mu,kc="\\s*([+-]?\\d+)\\s*",ch="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",co="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",UZ=/^#([0-9a-f]{3,8})$/,WZ=new RegExp("^rgb\\("+[kc,kc,kc]+"\\)$"),HZ=new RegExp("^rgb\\("+[co,co,co]+"\\)$"),GZ=new RegExp("^rgba\\("+[kc,kc,kc,ch]+"\\)$"),qZ=new RegExp("^rgba\\("+[co,co,co,ch]+"\\)$"),VZ=new RegExp("^hsl\\("+[ch,co,co]+"\\)$"),YZ=new RegExp("^hsla\\("+[ch,co,co,ch]+"\\)$"),WR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ec(as,fh,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:HR,formatHex:HR,formatHsl:XZ,formatRgb:GR,toString:GR});function HR(){return this.rgb().formatHex()}function XZ(){return KR(this).formatHsl()}function GR(){return this.rgb().formatRgb()}function fh(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=UZ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?qR(t):n===3?new an(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?x0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?x0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=WZ.exec(e))?new an(t[1],t[2],t[3],1):(t=HZ.exec(e))?new an(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=GZ.exec(e))?x0(t[1],t[2],t[3],t[4]):(t=qZ.exec(e))?x0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=VZ.exec(e))?XR(t[1],t[2]/100,t[3]/100,1):(t=YZ.exec(e))?XR(t[1],t[2]/100,t[3]/100,t[4]):WR.hasOwnProperty(e)?qR(WR[e]):e==="transparent"?new an(NaN,NaN,NaN,0):null}function qR(e){return new an(e>>16&255,e>>8&255,e&255,1)}function x0(e,t,n,r){return r<=0&&(e=t=n=NaN),new an(e,t,n,r)}function AS(e){return e instanceof as||(e=fh(e)),e?(e=e.rgb(),new an(e.r,e.g,e.b,e.opacity)):new an}function ss(e,t,n,r){return arguments.length===1?AS(e):new an(e,t,n,r==null?1:r)}function an(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ec(an,ss,lh(as,{brighter:function(e){return e=e==null?Oc:Math.pow(Oc,e),new an(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Mu:Math.pow(Mu,e),new an(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:VR,formatHex:VR,formatRgb:YR,toString:YR}));function VR(){return"#"+TS(this.r)+TS(this.g)+TS(this.b)}function YR(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function TS(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function XR(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new fo(e,t,n,r)}function KR(e){if(e instanceof fo)return new fo(e.h,e.s,e.l,e.opacity);if(e instanceof as||(e=fh(e)),!e)return new fo;if(e instanceof fo)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new fo(a,s,u,e.opacity)}function w0(e,t,n,r){return arguments.length===1?KR(e):new fo(e,t,n,r==null?1:r)}function fo(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ec(fo,w0,lh(as,{brighter:function(e){return e=e==null?Oc:Math.pow(Oc,e),new fo(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Mu:Math.pow(Mu,e),new fo(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new an(NS(e>=240?e-240:e+120,i,r),NS(e,i,r),NS(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function NS(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const QR=Math.PI/180,JR=180/Math.PI,S0=18,ZR=.96422,e4=1,t4=.82521,n4=4/29,Cc=6/29,r4=3*Cc*Cc,KZ=Cc*Cc*Cc;function i4(e){if(e instanceof ho)return new ho(e.l,e.a,e.b,e.opacity);if(e instanceof ra)return o4(e);e instanceof an||(e=AS(e));var t=RS(e.r),n=RS(e.g),r=RS(e.b),i=MS((.2225045*t+.7168786*n+.0606169*r)/e4),o,a;return t===n&&n===r?o=a=i:(o=MS((.4360747*t+.3850649*n+.1430804*r)/ZR),a=MS((.0139322*t+.0971045*n+.7141733*r)/t4)),new ho(116*i-16,500*(o-i),200*(i-a),e.opacity)}function E0(e,t,n,r){return arguments.length===1?i4(e):new ho(e,t,n,r==null?1:r)}function ho(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Ec(ho,E0,lh(as,{brighter:function(e){return new ho(this.l+S0*(e==null?1:e),this.a,this.b,this.opacity)},darker:function(e){return new ho(this.l-S0*(e==null?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=ZR*FS(t),e=e4*FS(e),n=t4*FS(n),new an(DS(3.1338561*t-1.6168667*e-.4906146*n),DS(-.9787684*t+1.9161415*e+.033454*n),DS(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function MS(e){return e>KZ?Math.pow(e,1/3):e/r4+n4}function FS(e){return e>Cc?e*e*e:r4*(e-n4)}function DS(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function RS(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function QZ(e){if(e instanceof ra)return new ra(e.h,e.c,e.l,e.opacity);if(e instanceof ho||(e=i4(e)),e.a===0&&e.b===0)return new ra(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*JR;return new ra(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function O0(e,t,n,r){return arguments.length===1?QZ(e):new ra(e,t,n,r==null?1:r)}function ra(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function o4(e){if(isNaN(e.h))return new ho(e.l,0,0,e.opacity);var t=e.h*QR;return new ho(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Ec(ra,O0,lh(as,{brighter:function(e){return new ra(this.h,this.c,this.l+S0*(e==null?1:e),this.opacity)},darker:function(e){return new ra(this.h,this.c,this.l-S0*(e==null?1:e),this.opacity)},rgb:function(){return o4(this).rgb()}}));var a4=-.14861,PS=1.78277,jS=-.29227,k0=-.90649,dh=1.97294,s4=dh*k0,u4=dh*PS,l4=PS*jS-k0*a4;function JZ(e){if(e instanceof Fu)return new Fu(e.h,e.s,e.l,e.opacity);e instanceof an||(e=AS(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(l4*r+s4*t-u4*n)/(l4+s4-u4),o=r-i,a=(dh*(n-i)-jS*o)/k0,s=Math.sqrt(a*a+o*o)/(dh*i*(1-i)),u=s?Math.atan2(a,o)*JR-120:NaN;return new Fu(u<0?u+360:u,s,i,e.opacity)}function IS(e,t,n,r){return arguments.length===1?JZ(e):new Fu(e,t,n,r==null?1:r)}function Fu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ec(Fu,IS,lh(as,{brighter:function(e){return e=e==null?Oc:Math.pow(Oc,e),new Fu(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Mu:Math.pow(Mu,e),new Fu(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*QR,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new an(255*(t+n*(a4*r+PS*i)),255*(t+n*(jS*r+k0*i)),255*(t+n*(dh*r)),this.opacity)}}));function c4(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function f4(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return c4((n-r/t)*t,a,i,o,s)}}function d4(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return c4((n-r/t)*t,i,o,a,s)}}var C0=e=>()=>e;function h4(e,t){return function(n){return e+n*t}}function ZZ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function _0(e,t){var n=t-e;return n?h4(e,n>180||n<-180?n-360*Math.round(n/360):n):C0(isNaN(e)?t:e)}function eee(e){return(e=+e)==1?qt:function(t,n){return n-t?ZZ(t,n,e):C0(isNaN(t)?n:t)}}function qt(e,t){var n=t-e;return n?h4(e,n):C0(isNaN(e)?t:e)}var LS=function e(t){var n=eee(t);function r(i,o){var a=n((i=ss(i)).r,(o=ss(o)).r),s=n(i.g,o.g),u=n(i.b,o.b),l=qt(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function p4(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=ss(t[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=e(r),i=e(i),o=e(o),s.opacity=1,function(u){return s.r=r(u),s.g=i(u),s.b=o(u),s+""}}}var tee=p4(f4),nee=p4(d4);function zS(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function g4(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ree(e,t){return(g4(t)?zS:m4)(e,t)}function m4(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=us(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function y4(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ci(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function v4(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=us(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var $S=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,BS=new RegExp($S.source,"g");function iee(e){return function(){return e}}function oee(e){return function(t){return e(t)+""}}function b4(e,t){var n=$S.lastIndex=BS.lastIndex=0,r,i,o,a=-1,s=[],u=[];for(e=e+"",t=t+"";(r=$S.exec(e))&&(i=BS.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:Ci(r,i)})),n=BS.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?oee(u[0].x):iee(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)s[(f=u[c]).i]=f.x(l);return s.join("")})}function us(e,t){var n=typeof t,r;return t==null||n==="boolean"?C0(t):(n==="number"?Ci:n==="string"?(r=fh(t))?(t=r,LS):b4:t instanceof fh?LS:t instanceof Date?y4:g4(t)?zS:Array.isArray(t)?m4:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?v4:Ci)(e,t)}function aee(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function see(e,t){var n=_0(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function hh(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var x4=180/Math.PI,US={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function w4(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*x4,skewX:Math.atan(u)*x4,scaleX:a,scaleY:s}}var A0;function uee(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?US:w4(t.a,t.b,t.c,t.d,t.e,t.f)}function lee(e){return e==null||(A0||(A0=document.createElementNS("http://www.w3.org/2000/svg","g")),A0.setAttribute("transform",e),!(e=A0.transform.baseVal.consolidate()))?US:(e=e.matrix,w4(e.a,e.b,e.c,e.d,e.e,e.f))}function S4(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,f,d,h,p){if(l!==f||c!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:Ci(l,f)},{i:g-2,x:Ci(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function a(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ci(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function s(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ci(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:Ci(l,f)},{i:g-2,x:Ci(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,f,d),a(l.rotate,c.rotate,f,d),s(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,g=d.length,m;++p<g;)f[(m=d[p]).i]=m.x(h);return f.join("")}}}var cee=S4(uee,"px, ","px)","deg)"),fee=S4(lee,", ",")",")"),dee=1e-12;function E4(e){return((e=Math.exp(e))+1/e)/2}function hee(e){return((e=Math.exp(e))-1/e)/2}function pee(e){return((e=Math.exp(2*e))-1)/(e+1)}var gee=function e(t,n,r){function i(o,a){var s=o[0],u=o[1],l=o[2],c=a[0],f=a[1],d=a[2],h=c-s,p=f-u,g=h*h+p*p,m,y;if(g<dee)y=Math.log(d/l)/t,m=function(S){return[s+S*h,u+S*p,l*Math.exp(t*S*y)]};else{var v=Math.sqrt(g),b=(d*d-l*l+r*g)/(2*l*n*v),x=(d*d-l*l-r*g)/(2*d*n*v),w=Math.log(Math.sqrt(b*b+1)-b),E=Math.log(Math.sqrt(x*x+1)-x);y=(E-w)/t,m=function(S){var _=S*y,M=E4(w),D=l/(n*v)*(M*pee(t*_+w)-hee(w));return[s+D*h,u+D*p,l*M/E4(t*_+w)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,u=s*s;return e(a,s,u)},i}(Math.SQRT2,2,4);function O4(e){return function(t,n){var r=e((t=w0(t)).h,(n=w0(n)).h),i=qt(t.s,n.s),o=qt(t.l,n.l),a=qt(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=o(s),t.opacity=a(s),t+""}}}var mee=O4(_0),yee=O4(qt);function vee(e,t){var n=qt((e=E0(e)).l,(t=E0(t)).l),r=qt(e.a,t.a),i=qt(e.b,t.b),o=qt(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=o(a),e+""}}function k4(e){return function(t,n){var r=e((t=O0(t)).h,(n=O0(n)).h),i=qt(t.c,n.c),o=qt(t.l,n.l),a=qt(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=o(s),t.opacity=a(s),t+""}}}var bee=k4(_0),xee=k4(qt);function C4(e){return function t(n){n=+n;function r(i,o){var a=e((i=IS(i)).h,(o=IS(o)).h),s=qt(i.s,o.s),u=qt(i.l,o.l),l=qt(i.opacity,o.opacity);return function(c){return i.h=a(c),i.s=s(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}var wee=C4(_0),See=C4(qt);function WS(e,t){t===void 0&&(t=e,e=us);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function Eee(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var Oee=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",interpolate:us,interpolateArray:ree,interpolateBasis:f4,interpolateBasisClosed:d4,interpolateDate:y4,interpolateDiscrete:aee,interpolateHue:see,interpolateNumber:Ci,interpolateNumberArray:zS,interpolateObject:v4,interpolateRound:hh,interpolateString:b4,interpolateTransformCss:cee,interpolateTransformSvg:fee,interpolateZoom:gee,interpolateRgb:LS,interpolateRgbBasis:tee,interpolateRgbBasisClosed:nee,interpolateHsl:mee,interpolateHslLong:yee,interpolateLab:vee,interpolateHcl:bee,interpolateHclLong:xee,interpolateCubehelix:wee,interpolateCubehelixLong:See,piecewise:WS,quantize:Eee});function kee(e){return function(){return e}}function HS(e){return+e}var _4=[0,1];function sr(e){return e}function GS(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:kee(isNaN(t)?NaN:.5)}function Cee(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function _ee(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=GS(i,r),o=n(a,o)):(r=GS(r,i),o=n(o,a)),function(s){return o(r(s))}}function Aee(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=GS(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var u=Id(e,s,1,r)-1;return o[u](i[u](s))}}function ph(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function T0(){var e=_4,t=_4,n=us,r,i,o,a=sr,s,u,l;function c(){var d=Math.min(e.length,t.length);return a!==sr&&(a=Cee(e[0],e[d-1])),s=d>2?Aee:_ee,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(u||(u=s(e.map(r),t,n)))(r(a(d)))}return f.invert=function(d){return a(i((l||(l=s(t,e.map(r),Ci)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,HS),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=hh,c()},f.clamp=function(d){return arguments.length?(a=d?!0:sr,c()):a!==sr},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function A4(){return T0()(sr,sr)}function T4(e,t,n,r){var i=Ya(e,t,n),o;switch(r=fc(r==null?",f":r),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=cD(i,a))&&(r.precision=o),U2(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=fD(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=lD(i))&&(r.precision=o-(r.type==="%")*2);break}}return Wm(r)}function Du(e){var t=e.domain;return e.ticks=function(n){var r=t();return L2(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return T4(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],s=r[o],u,l,c=10;for(s<a&&(l=a,a=s,s=l,l=i,i=o,o=l);c-- >0;){if(l=KF(a,s,n),l===u)return r[i]=a,r[o]=s,t(r);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;u=l}return e},e}function N4(){var e=A4();return e.copy=function(){return ph(e,N4())},lo.apply(e,arguments),Du(e)}function M4(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,HS),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return M4(e).unknown(t)},e=arguments.length?Array.from(e,HS):[0,1],Du(n)}function F4(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function D4(e){return Math.log(e)}function R4(e){return Math.exp(e)}function Tee(e){return-Math.log(-e)}function Nee(e){return-Math.exp(-e)}function Mee(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Fee(e){return e===10?Mee:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function Dee(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function P4(e){return function(t){return-e(-t)}}function qS(e){var t=e(D4,R4),n=t.domain,r=10,i,o;function a(){return i=Dee(r),o=Fee(r),n()[0]<0?(i=P4(i),o=P4(o),e(Tee,Nee)):e(D4,R4),t}return t.base=function(s){return arguments.length?(r=+s,a()):r},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=function(s){var u=n(),l=u[0],c=u[u.length-1],f;(f=c<l)&&(d=l,l=c,c=d);var d=i(l),h=i(c),p,g,m,y=s==null?10:+s,v=[];if(!(r%1)&&h-d<y){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(g=1,p=o(d);g<r;++g)if(m=p*g,!(m<l)){if(m>c)break;v.push(m)}}else for(;d<=h;++d)for(g=r-1,p=o(d);g>=1;--g)if(m=p*g,!(m<l)){if(m>c)break;v.push(m)}v.length*2<y&&(v=L2(l,c,y))}else v=L2(d,h,Math.min(h-d,y)).map(o);return f?v.reverse():v},t.tickFormat=function(s,u){if(u==null&&(u=r===10?".0e":","),typeof u!="function"&&(u=Wm(u)),s===1/0)return u;s==null&&(s=10);var l=Math.max(1,r*s/t.ticks().length);return function(c){var f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=function(){return n(F4(n(),{floor:function(s){return o(Math.floor(i(s)))},ceil:function(s){return o(Math.ceil(i(s)))}}))},t}function j4(){var e=qS(T0()).domain([1,10]);return e.copy=function(){return ph(e,j4()).base(e.base())},lo.apply(e,arguments),e}function I4(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function L4(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function VS(e){var t=1,n=e(I4(t),L4(t));return n.constant=function(r){return arguments.length?e(I4(t=+r),L4(t)):t},Du(n)}function z4(){var e=VS(T0());return e.copy=function(){return ph(e,z4()).constant(e.constant())},lo.apply(e,arguments)}function $4(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Ree(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Pee(e){return e<0?-e*e:e*e}function YS(e){var t=e(sr,sr),n=1;function r(){return n===1?e(sr,sr):n===.5?e(Ree,Pee):e($4(n),$4(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Du(t)}function XS(){var e=YS(T0());return e.copy=function(){return ph(e,XS()).exponent(e.exponent())},lo.apply(e,arguments),e}function jee(){return XS.apply(null,arguments).exponent(.5)}function B4(){var e=[],t=[],n=[],r;function i(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=JF(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:t[Id(n,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(lc),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return B4().domain(e).range(t).unknown(r)},lo.apply(o,arguments)}function U4(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function a(u){return u!=null&&u<=u?i[Id(r,u,0,n)]:o}function s(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return a}return a.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,s()):[e,t]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,s()):i.slice()},a.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},a.unknown=function(u){return arguments.length&&(o=u),a},a.thresholds=function(){return r.slice()},a.copy=function(){return U4().domain([e,t]).range(i).unknown(o)},lo.apply(Du(a),arguments)}function W4(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[Id(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return W4().domain(e).range(t).unknown(n)},lo.apply(i,arguments)}function Iee(e){return new Date(e)}function Lee(e){return e instanceof Date?+e:+new Date(+e)}function KS(e,t,n,r,i,o,a,s,u,l){var c=A4(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),g=l("%I:%M"),m=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),x=l("%Y");function w(E){return(u(E)<E?h:s(E)<E?p:a(E)<E?g:o(E)<E?m:r(E)<E?i(E)<E?y:v:n(E)<E?b:x)(E)}return c.invert=function(E){return new Date(f(E))},c.domain=function(E){return arguments.length?d(Array.from(E,Lee)):d().map(Iee)},c.ticks=function(E){var S=d();return e(S[0],S[S.length-1],E==null?10:E)},c.tickFormat=function(E,S){return S==null?w:l(S)},c.nice=function(E){var S=d();return(!E||typeof E.range!="function")&&(E=t(S[0],S[S.length-1],E==null?10:E)),E?d(F4(S,E)):c},c.copy=function(){return ph(c,KS(e,t,n,r,i,o,a,s,u,l))},c}function zee(){return lo.apply(KS(YX,XX,Qa,Hm,zd,Ka,K2,X2,Xa,dw).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function $ee(){return lo.apply(KS(qX,VX,Za,Gm,Bd,Ja,Z2,J2,Xa,hw).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function N0(){var e=0,t=1,n,r,i,o,a=sr,s=!1,u;function l(f){return f==null||isNaN(f=+f)?u:a(i===0?.5:(f=(o(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(s=!!f,l):s},l.interpolator=function(f){return arguments.length?(a=f,l):a};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,a=f(h,p),l):[a(0),a(1)]}}return l.range=c(us),l.rangeRound=c(hh),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function ls(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function QS(){var e=Du(N0()(sr));return e.copy=function(){return ls(e,QS())},os.apply(e,arguments)}function H4(){var e=qS(N0()).domain([1,10]);return e.copy=function(){return ls(e,H4()).base(e.base())},os.apply(e,arguments)}function G4(){var e=VS(N0());return e.copy=function(){return ls(e,G4()).constant(e.constant())},os.apply(e,arguments)}function JS(){var e=YS(N0());return e.copy=function(){return ls(e,JS()).exponent(e.exponent())},os.apply(e,arguments)}function Bee(){return JS.apply(null,arguments).exponent(.5)}function M0(){var e=0,t=.5,n=1,r=1,i,o,a,s,u,l=sr,c,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+c(g))-o)*(r*g<r*o?s:u),l(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=c(e=+e),o=c(t=+t),a=c(n=+n),s=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(l=g,h):l};function p(g){return function(m){var y,v,b;return arguments.length?([y,v,b]=m,l=WS(g,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(us),h.rangeRound=p(hh),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return c=g,i=g(e),o=g(t),a=g(n),s=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),r=o<i?-1:1,h}}function q4(){var e=Du(M0()(sr));return e.copy=function(){return ls(e,q4())},os.apply(e,arguments)}function V4(){var e=qS(M0()).domain([.1,1,10]);return e.copy=function(){return ls(e,V4()).base(e.base())},os.apply(e,arguments)}function Y4(){var e=VS(M0());return e.copy=function(){return ls(e,Y4()).constant(e.constant())},os.apply(e,arguments)}function ZS(){var e=YS(M0());return e.copy=function(){return ls(e,ZS()).exponent(e.exponent())},os.apply(e,arguments)}function Uee(){return ZS.apply(null,arguments).exponent(.5)}function eE(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const Wee="identity",_c="linear",ia="log",gh="pow",mh="sqrt",F0="symlog",Ru="time",Pu="utc",po="sequential",Ac="diverging",Tc="quantile",D0="quantize",R0="threshold",tE="ordinal",nE="point",X4="band",rE="bin-ordinal",It="continuous",yh="discrete",vh="discretizing",ei="interpolating",iE="temporal";function Hee(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Gee(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,a,s,u,l;for(i<r&&(s=r,r=i,i=s),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(o<0&&(o=u),a=u);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function oE(){const e=_S().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,a=!1,s=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=eE(f,s,u);let g=r[d-0];i=(h-g)/(p||1),a&&(i=Math.floor(i)),g+=(h-g-i*(f-s))*l,o=i*(1-s),a&&(g=Math.round(g),o=Math.round(o));const m=Mr(f).map(y=>g+i*y);return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,c()):a},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),s=u,c()):s},e.paddingInner=function(f){return arguments.length?(s=Math.max(0,Math.min(1,f)),c()):s},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let g=+f[0],m=+f[1],y,v,b;if(!(g!==g||m!==m)&&(m<g&&(b=g,g=m,m=b),!(m<h[0]||g>r[1-d])))return y=Math.max(0,$m(h,g)-1),v=g===m?y:$m(h,m)-1,g-h[y]>o+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return oE().domain(t()).range(r).round(a).paddingInner(s).paddingOuter(u).align(l)},c()}function K4(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return K4(t())},e}function qee(){return K4(oE().paddingInner(1))}var Vee=Array.prototype.map;function Yee(e){return Vee.call(e,yn)}const Xee=Array.prototype.slice;function Q4(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Id(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Yee(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Xee.call(r),n):t.slice()},n.tickFormat=function(r,i){return T4(e[0],Re(e),r==null?10:r,i)},n.copy=function(){return Q4().domain(n.domain()).range(n.range())},n}const P0={};function Kee(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?Hee(o):o.invertExtent?Gee(o):void 0),o.type=e,o};return r.metadata=Oi(ue(n)),r}function Be(e,t,n){return arguments.length>1?(P0[e]=Kee(e,t,n),this):J4(e)?P0[e]:void 0}Be(Wee,M4);Be(_c,N4,It);Be(ia,j4,[It,ia]);Be(gh,XS,It);Be(mh,jee,It);Be(F0,z4,It);Be(Ru,zee,[It,iE]);Be(Pu,$ee,[It,iE]);Be(po,QS,[It,ei]);Be("".concat(po,"-").concat(_c),QS,[It,ei]);Be("".concat(po,"-").concat(ia),H4,[It,ei,ia]);Be("".concat(po,"-").concat(gh),JS,[It,ei]);Be("".concat(po,"-").concat(mh),Bee,[It,ei]);Be("".concat(po,"-").concat(F0),G4,[It,ei]);Be("".concat(Ac,"-").concat(_c),q4,[It,ei]);Be("".concat(Ac,"-").concat(ia),V4,[It,ei,ia]);Be("".concat(Ac,"-").concat(gh),ZS,[It,ei]);Be("".concat(Ac,"-").concat(mh),Uee,[It,ei]);Be("".concat(Ac,"-").concat(F0),Y4,[It,ei]);Be(Tc,B4,[vh,Tc]);Be(D0,U4,vh);Be(R0,W4,vh);Be(rE,Q4,[yh,vh]);Be(tE,_S,yh);Be(X4,oE,yh);Be(nE,qee,yh);function J4(e){return pe(P0,e)}function ju(e,t){const n=P0[e];return n&&n.metadata[t]}function aE(e){return ju(e,It)}function Nc(e){return ju(e,yh)}function sE(e){return ju(e,vh)}function Z4(e){return ju(e,ia)}function Qee(e){return ju(e,iE)}function eP(e){return ju(e,ei)}function tP(e){return ju(e,Tc)}const Jee=["clamp","base","constant","exponent"];function nP(e,t){const n=t[0],r=Re(t)-n;return function(i){return e(n+i*r)}}function j0(e,t,n){return WS(uE(t||"rgb",n),e)}function rP(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function iP(e,t,n){const r=n-t;let i,o,a;return!r||!Number.isFinite(r)?vn(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=Be(o)().domain([t,n]).range([0,1]),Jee.forEach(s=>e[s]?a[s](e[s]()):0),a)}function uE(e,t){const n=Oee[Zee(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Zee(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const ete={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},tte={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function oP(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function aP(e,t){for(const n in e)lE(n,t(e[n]))}const sP={};aP(tte,oP);aP(ete,e=>j0(oP(e)));function lE(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(sP[e]=t,this):sP[e]}const I0="symbol",nte="discrete",rte="gradient",ite=e=>J(e)?e.map(t=>String(t)):String(e),ote=(e,t)=>e[1]-t[1],ate=(e,t)=>t[1]-e[1];function cE(e,t,n){let r;return Qe(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Rd(e.domain())/n||1)))),ce(t)&&(r=t.step,t=t.interval),se(t)&&(t=e.type===Ru?hc(t):e.type==Pu?pc(t):Q("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function uP(e,t,n){let r=e.range(),i=r[0],o=Re(r),a=ote;if(i>o&&(r=o,o=i,i=r,a=ate),i=Math.floor(i),o=Math.ceil(o),t=t.map(s=>[s,e(s)]).filter(s=>i<=s[1]&&s[1]<=o).sort(a).map(s=>s[0]),n>0&&t.length>1){const s=[t[0],Re(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=s)}return t}function fE(e,t){return e.bins?uP(e,e.bins):e.ticks?e.ticks(t):e.domain()}function lP(e,t,n,r,i,o){const a=t.type;let s=ite;if(a===Ru||i===Ru)s=e.timeFormat(r);else if(a===Pu||i===Pu)s=e.utcFormat(r);else if(Z4(a)){const u=e.formatFloat(r);if(o||t.bins)s=u;else{const l=cP(t,n,!1);s=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();s=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(s=e.format(r));return s}function cP(e,t,n){const r=fE(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/o));return l*i<i-.5&&(l*=i),l<=a};return n?r.filter(s):s}const dE={[Tc]:"quantiles",[D0]:"thresholds",[R0]:"domain"},fP={[Tc]:"quantiles",[D0]:"domain"};function dP(e,t){return e.bins?lte(e.bins):e.type===ia?cP(e,t,!0):dE[e.type]?ute(e[dE[e.type]]()):fE(e,t)}function ste(e,t,n){const r=t[fP[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],a;for(a=1;a<i;++a)o=Math.min(o,r[a]-r[a-1]);return e.formatSpan(0,o,3*10,n)}function ute(e){const t=[-1/0].concat(e);return t.max=1/0,t}function lte(e){const t=e.slice(0,-1);return t.max=Re(e),t}const cte=e=>dE[e.type]||e.bins;function hP(e,t,n,r,i,o,a){const s=fP[t.type]&&o!==Ru&&o!==Pu?ste(e,t,i):lP(e,t,n,i,o,a);return r===I0&&cte(t)?fte(s):r===nte?dte(s):hte(s)}const fte=e=>(t,n,r)=>{const i=pP(r[n+1],pP(r.max,1/0)),o=gP(t,e),a=gP(i,e);return o&&a?o+" \u2013 "+a:a?"< "+a:"\u2265 "+o},pP=(e,t)=>e!=null?e:t,dte=e=>(t,n)=>n?e(t):null,hte=e=>t=>e(t),gP=(e,t)=>Number.isFinite(e)?t(e):null;function pte(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Re(t),o=i-r;if(e.type===R0){const a=n?o/n:.1;r-=a,i+=a,o=i-r}return a=>(a-r)/o}function gte(e,t,n,r){const i=r||t.type;return se(n)&&Qee(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Ru?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Pu?e.utcFormat("%A, %d %B %Y, %X UTC"):hP(e,t,5,null,n,r,!0)}function mP(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=gte(e,t,n.format,n.formatType);if(sE(t.type)){const o=dP(t).slice(1).map(i),a=o.length;return"".concat(a," boundar").concat(a===1?"y":"ies",": ").concat(o.join(", "))}else if(Nc(t.type)){const o=t.domain(),a=o.length,s=a>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return"".concat(a," value").concat(a===1?"":"s",": ").concat(s)}else{const o=t.domain();return"values from ".concat(i(o[0])," to ").concat(i(Re(o)))}}let yP=0;function mte(){yP=0}const L0="p_";function hE(e){return e&&e.gradient}function vP(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?L0:"";return i||(i=e.id="gradient_"+yP++,r==="radial"?(e.x1=go(e.x1,.5),e.y1=go(e.y1,.5),e.r1=go(e.r1,0),e.x2=go(e.x2,.5),e.y2=go(e.y2,.5),e.r2=go(e.r2,.5),o=L0):(e.x1=go(e.x1,0),e.y1=go(e.y1,0),e.x2=go(e.x2,1),e.y2=go(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function go(e,t){return e!=null?e:t}function bP(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const xP={basis:{curve:OZ},"basis-closed":{curve:kZ},"basis-open":{curve:CZ},bundle:{curve:_Z,tension:"beta",value:.85},cardinal:{curve:AZ,tension:"tension",value:0},"cardinal-open":{curve:NZ,tension:"tension",value:0},"cardinal-closed":{curve:TZ,tension:"tension",value:0},"catmull-rom":{curve:MZ,tension:"alpha",value:.5},"catmull-rom-closed":{curve:FZ,tension:"alpha",value:.5},"catmull-rom-open":{curve:DZ,tension:"alpha",value:.5},linear:{curve:xS},"linear-closed":{curve:RZ},monotone:{horizontal:jZ,vertical:PZ},natural:{curve:IZ},step:{curve:LZ},"step-after":{curve:$Z},"step-before":{curve:zZ}};function pE(e,t,n){var r=pe(xP,e)&&xP[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const yte={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},bh=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function Mc(e){const t=[];let n,r,i,o,a,s,u,l,c,f;const d=e.slice().replace(bh[0],"###$1").split(bh[1]).slice(1);for(u=0,c=d.length;u<c;++u){for(n=d[u],r=n.slice(1).trim().replace(bh[2],"$1###$2").replace(bh[3],"$1###$2").split(bh[4]),a=n.charAt(0),i=[a],l=0,f=r.length;l<f;++l)(o=+r[l])===o&&i.push(o);if(s=yte[a.toLowerCase()],i.length-1>s){const h=i.length;for(l=1,t.push([a].concat(i.slice(l,l+=s))),a=a==="M"?"L":a==="m"?"l":a;l<h;l+=s)t.push([a].concat(i.slice(l,l+s)))}else t.push(i)}return t}const cs=Math.PI/180,vte=1e-14,Iu=Math.PI/2,mo=Math.PI*2,Fc=Math.sqrt(3)/2;var gE={},mE={},wP=[].join;function bte(e,t,n,r,i,o,a,s,u){const l=wP.call(arguments);if(gE[l])return gE[l];const c=a*cs,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(s-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(s-e)*.5;let g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const m=d/n,y=f/n,v=-f/r,b=d/r,x=m*s+y*u,w=v*s+b*u,E=m*e+y*t,S=v*e+b*t,_=(E-x)*(E-x)+(S-w)*(S-w);let M=1/_-.25;M<0&&(M=0);let D=Math.sqrt(M);o==i&&(D=-D);const C=.5*(x+E)-D*(S-w),A=.5*(w+S)+D*(E-x),k=Math.atan2(w-A,x-C);let T=Math.atan2(S-A,E-C)-k;T<0&&o===1?T+=mo:T>0&&o===0&&(T-=mo);const F=Math.ceil(Math.abs(T/(Iu+.001))),L=[];for(let R=0;R<F;++R){const B=k+R*T/F,O=k+(R+1)*T/F;L[R]=[C,A,B,O,n,r,f,d]}return gE[l]=L}function xte(e){const t=wP.call(e);if(mE[t])return mE[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7];const c=l*a,f=-u*s,d=u*a,h=l*s,p=Math.cos(i),g=Math.sin(i),m=Math.cos(o),y=Math.sin(o),v=.5*(o-i),b=Math.sin(v*.5),x=8/3*b*b/Math.sin(v),w=n+p-x*g,E=r+g+x*p,S=n+m,_=r+y,M=S+x*y,D=_-x*m;return mE[t]=[c*w+f*E,d*w+h*E,c*M+f*D,d*M+h*D,c*S+f*_,d*S+h*_]}const ti=["l",0,0,0,0,0,0,0];function wte(e,t,n){const r=ti[0]=e[0];if(r==="a"||r==="A")ti[1]=t*e[1],ti[2]=n*e[2],ti[3]=e[3],ti[4]=e[4],ti[5]=e[5],ti[6]=t*e[6],ti[7]=n*e[7];else if(r==="h"||r==="H")ti[1]=t*e[1];else if(r==="v"||r==="V")ti[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)ti[i]=(i%2==1?t:n)*e[i];return ti}function xh(e,t,n,r,i,o){var a,s=null,u=0,l=0,c=0,f=0,d,h,p,g;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var m=0,y=t.length;m<y;++m){switch(a=t[m],(i!==1||o!==1)&&(a=wte(a,i,o)),a[0]){case"l":u+=a[1],l+=a[2],e.lineTo(u+n,l+r);break;case"L":u=a[1],l=a[2],e.lineTo(u+n,l+r);break;case"h":u+=a[1],e.lineTo(u+n,l+r);break;case"H":u=a[1],e.lineTo(u+n,l+r);break;case"v":l+=a[1],e.lineTo(u+n,l+r);break;case"V":l=a[1],e.lineTo(u+n,l+r);break;case"m":u+=a[1],l+=a[2],e.moveTo(u+n,l+r);break;case"M":u=a[1],l=a[2],e.moveTo(u+n,l+r);break;case"c":d=u+a[5],h=l+a[6],c=u+a[3],f=l+a[4],e.bezierCurveTo(u+a[1]+n,l+a[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=a[5],l=a[6],c=a[3],f=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+a[3],h=l+a[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+a[1]+n,l+a[2]+r,d+n,h+r),c=u+a[1],f=l+a[2],u=d,l=h;break;case"S":d=a[3],h=a[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,a[1]+n,a[2]+r,d+n,h+r),u=d,l=h,c=a[1],f=a[2];break;case"q":d=u+a[3],h=l+a[4],c=u+a[1],f=l+a[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=a[3],h=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,d+n,h+r),u=d,l=h,c=a[1],f=a[2];break;case"t":d=u+a[1],h=l+a[2],s[0].match(/[QqTt]/)===null?(c=u,f=l):s[0]==="t"?(c=2*u-p,f=2*l-g):s[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,g=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+a[1],f=l+a[2];break;case"T":d=a[1],h=a[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":SP(e,u+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+u+n,a[7]+l+r]),u+=a[6],l+=a[7];break;case"A":SP(e,u+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),u=a[6],l=a[7];break;case"z":case"Z":e.closePath();break}s=a}}function SP(e,t,n,r){const i=bte(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const a=xte(i[o]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const EP=.5773502691896257,OP={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,mo)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Fc*n,i=r-n*EP,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Fc*n,i=r-n*EP;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Fc*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Fc*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Fc*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Fc*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function kP(e){return pe(OP,e)?OP[e]:Ste(e)}var yE={};function Ste(e){if(!pe(yE,e)){const t=Mc(e);yE[e]={draw:function(n,r){xh(n,t,0,0,Math.sqrt(r)/2)}}}return yE[e]}const fs=.448084975506;function Ete(e){return e.x}function Ote(e){return e.y}function kte(e){return e.width}function Cte(e){return e.height}function oa(e){return typeof e=="function"?e:()=>+e}function z0(e,t,n){return Math.max(t,Math.min(e,n))}function CP(){var e=Ete,t=Ote,n=kte,r=Cte,i=oa(0),o=i,a=i,s=i,u=null;function l(c,f,d){var h,p=f!=null?f:+e.call(this,c),g=d!=null?d:+t.call(this,c),m=+n.call(this,c),y=+r.call(this,c),v=Math.min(m,y)/2,b=z0(+i.call(this,c),0,v),x=z0(+o.call(this,c),0,v),w=z0(+a.call(this,c),0,v),E=z0(+s.call(this,c),0,v);if(u||(u=h=Tu()),b<=0&&x<=0&&w<=0&&E<=0)u.rect(p,g,m,y);else{var S=p+m,_=g+y;u.moveTo(p+b,g),u.lineTo(S-x,g),u.bezierCurveTo(S-fs*x,g,S,g+fs*x,S,g+x),u.lineTo(S,_-E),u.bezierCurveTo(S,_-fs*E,S-fs*E,_,S-E,_),u.lineTo(p+w,_),u.bezierCurveTo(p+fs*w,_,p,_-fs*w,p,_-w),u.lineTo(p,g+b),u.bezierCurveTo(p,g+fs*b,p+fs*b,g,p+b,g),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=oa(c),l):e},l.y=function(c){return arguments.length?(t=oa(c),l):t},l.width=function(c){return arguments.length?(n=oa(c),l):n},l.height=function(c){return arguments.length?(r=oa(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=oa(c),o=f!=null?oa(f):i,s=d!=null?oa(d):i,a=h!=null?oa(h):o,l):i},l.context=function(c){return arguments.length?(u=c==null?null:c,l):u},l}function _P(){var e,t,n,r,i=null,o,a,s,u;function l(f,d,h){const p=h/2;if(o){var g=s-d,m=f-a;if(g||m){var y=Math.sqrt(g*g+m*m),v=(g/=y)*u,b=(m/=y)*u,x=Math.atan2(m,g);i.moveTo(a-v,s-b),i.lineTo(f-g*p,d-m*p),i.arc(f,d,p,x-Math.PI,x),i.lineTo(a+v,s+b),i.arc(a,s,u,x,x+Math.PI)}else i.arc(f,d,p,0,mo);i.closePath()}else o=1;a=f,s=d,u=p}function c(f){var d,h=f.length,p,g=!1,m;for(i==null&&(i=m=Tu()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===g&&(g=!g)&&(o=0),g&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(m)return i=null,m+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function wh(e,t){return e!=null?e:t}const Sh=e=>e.x||0,Eh=e=>e.y||0,_te=e=>e.width||0,Ate=e=>e.height||0,Tte=e=>(e.x||0)+(e.width||0),Nte=e=>(e.y||0)+(e.height||0),Mte=e=>e.startAngle||0,Fte=e=>e.endAngle||0,Dte=e=>e.padAngle||0,Rte=e=>e.innerRadius||0,Pte=e=>e.outerRadius||0,jte=e=>e.cornerRadius||0,Ite=e=>wh(e.cornerRadiusTopLeft,e.cornerRadius)||0,Lte=e=>wh(e.cornerRadiusTopRight,e.cornerRadius)||0,zte=e=>wh(e.cornerRadiusBottomRight,e.cornerRadius)||0,$te=e=>wh(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Bte=e=>wh(e.size,64),Ute=e=>e.size||1,$0=e=>e.defined!==!1,Wte=e=>kP(e.shape||"circle"),Hte=wZ().startAngle(Mte).endAngle(Fte).padAngle(Dte).innerRadius(Rte).outerRadius(Pte).cornerRadius(jte),Gte=AR().x(Sh).y1(Eh).y0(Nte).defined($0),qte=AR().y(Eh).x1(Sh).x0(Tte).defined($0),Vte=_R().x(Sh).y(Eh).defined($0),Yte=CP().x(Sh).y(Eh).width(_te).height(Ate).cornerRadius(Ite,Lte,zte,$te),Xte=EZ().type(Wte).size(Bte),Kte=_P().x(Sh).y(Eh).defined($0).size(Ute);function vE(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Qte(e,t){return Hte.context(e)(t)}function Jte(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?qte:Gte).curve(pE(r,n.orient,n.tension)).context(e)(t)}function Zte(e,t){const n=t[0],r=n.interpolate||"linear";return Vte.curve(pE(r,n.orient,n.tension)).context(e)(t)}function Dc(e,t,n,r){return Yte.context(e)(t,n,r)}function ene(e,t){return(t.mark.shape||t.shape).context(e)(t)}function tne(e,t){return Xte.context(e)(t)}function nne(e,t){return Kte.context(e)(t)}var AP=1;function TP(){AP=1}function bE(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+AP++),a=i.clipping[o]||(i.clipping[o]={id:o});return _e(r)?a.path=r(null):vE(n)?a.path=Dc(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function Lt(e){this.clear(),e&&this.union(e)}Lt.prototype={clone(){return new Lt(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),u=Math.sin(e),l=t-t*s+n*u,c=n-t*u-n*s;return[s*r-u*i+l,u*r+s*i+c,s*r-u*a+l,u*r+s*a+c,s*o-u*i+l,u*o+s*i+c,s*o-u*a+l,u*o+s*a+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function B0(e){this.mark=e,this.bounds=this.bounds||new Lt}function U0(e){B0.call(this,e),this.items=this.items||[]}ne(U0,B0);function xE(e){this._pending=0,this._loader=e||Km()}function NP(e){e._pending+=1}function Oh(e){e._pending-=1}xE.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return NP(t),t._loader.sanitize(e,{context:"href"}).then(n=>(Oh(t),n)).catch(()=>(Oh(t),null))},loadImage(e){const t=this,n=BZ();return NP(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const o=new n,a=pe(r,"crossOrigin")?r.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>Oh(t),o.onerror=()=>Oh(t),o.src=i,o}).catch(r=>(Oh(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function aa(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?rne(t,r):0))}return e}function rne(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const ine=mo-1e-8;let W0,H0,G0,Lu,wE,q0,SE,EE;const ds=(e,t)=>W0.add(e,t),V0=(e,t)=>ds(H0=e,G0=t),MP=e=>ds(e,W0.y1),FP=e=>ds(W0.x1,e),zu=(e,t)=>wE*e+SE*t,$u=(e,t)=>q0*e+EE*t,OE=(e,t)=>ds(zu(e,t),$u(e,t)),kE=(e,t)=>V0(zu(e,t),$u(e,t));function kh(e,t){return W0=e,t?(Lu=t*cs,wE=EE=Math.cos(Lu),q0=Math.sin(Lu),SE=-q0):(wE=EE=1,Lu=q0=SE=0),one}const one={beginPath(){},closePath(){},moveTo:kE,lineTo:kE,rect(e,t,n,r){Lu?(OE(e+n,t),OE(e+n,t+r),OE(e,t+r),kE(e,t)):(ds(e+n,t+r),V0(e,t))},quadraticCurveTo(e,t,n,r){const i=zu(e,t),o=$u(e,t),a=zu(n,r),s=$u(n,r);DP(H0,i,a,MP),DP(G0,o,s,FP),V0(a,s)},bezierCurveTo(e,t,n,r,i,o){const a=zu(e,t),s=$u(e,t),u=zu(n,r),l=$u(n,r),c=zu(i,o),f=$u(i,o);RP(H0,a,u,c,MP),RP(G0,s,l,f,FP),V0(c,f)},arc(e,t,n,r,i,o){if(r+=Lu,i+=Lu,H0=n*Math.cos(i)+e,G0=n*Math.sin(i)+t,Math.abs(i-r)>ine)ds(e-n,t-n),ds(e+n,t+n);else{const a=l=>ds(n*Math.cos(l)+e,n*Math.sin(l)+t);let s,u;if(a(r),a(i),i!==r)if(r=r%mo,r<0&&(r+=mo),i=i%mo,i<0&&(i+=mo),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=mo,s=r-r%Iu,u=0;u<4&&s>i;++u,s-=Iu)a(s);else for(s=r-r%Iu+Iu,u=0;u<4&&s<i;++u,s=s+Iu)a(s)}}};function DP(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function RP(e,t,n,r,i){const o=r-e+3*t-3*n,a=e+n-2*t,s=e-t;let u=0,l=0,c;Math.abs(o)>vte?(c=a*a+s*o,c>=0&&(c=Math.sqrt(c),u=(-a+c)/o,l=(-a-c)/o)):u=.5*s/a,0<u&&u<1&&i(PP(u,e,t,n,r)),0<l&&l<1&&i(PP(l,e,t,n,r))}function PP(e,t,n,r,i){const o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var hs=(hs=Sc(1,1))?hs.getContext("2d"):null;const CE=new Lt;function _E(e){return function(t,n){if(!hs)return!0;e(hs,t),CE.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:a}=CE;for(let s=i;s<=a;++s)for(let u=r;u<=o;++u)if(hs.isPointInPath(u,s))return!0;return!1}}function AE(e,t){return t.contains(e.x||0,e.y||0)}function jP(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(CE.set(n,r,n+i,r+o))}function IP(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return Rc(t,n,r,i,o)}function Rc(e,t,n,r,i){const{x1:o,y1:a,x2:s,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,g,m;for(m=0;m<4;++m){if(m===0&&(h=-l,p=-(o-t)),m===1&&(h=l,p=s-t),m===2&&(h=-c,p=-(a-n)),m===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>d)return!1;g>f&&(f=g)}else if(h>0){if(g<f)return!1;g<d&&(d=g)}}return!0}function Pc(e,t){e.globalCompositeOperation=t.blend||"source-over"}function _i(e,t){return e==null?t:e}function LP(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function ane(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+_i(t.x1,.5)*r,n.y1+_i(t.y1,.5)*i,Math.max(r,i)*_i(t.r1,0),n.x1+_i(t.x2,.5)*r,n.y1+_i(t.y2,.5)*i,Math.max(r,i)*_i(t.r2,.5));else{const a=_i(t.x1,0),s=_i(t.y1,0),u=_i(t.x2,1),l=_i(t.y2,0);if(a===u||s===l||r===i)o=e.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+u*r,n.y1+l*i);else{const c=Sc(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=LP(f.createLinearGradient(a,s,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return LP(o,t.stops)}function zP(e,t,n){return hE(n)?ane(e,n,t.bounds):n}function Y0(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=zP(e,t,t.fill),!0):!1}var sne=[];function jc(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=zP(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||sne),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function une(e,t){return e.zindex-t.zindex||e.index-t.index}function TE(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(une)}function Ai(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=TE(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function X0(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=TE(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function NE(e){return function(t,n,r){Ai(n,i=>{(!r||r.intersects(i.bounds))&&$P(e,t,i,i)})}}function lne(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&$P(e,t,n.items[0],n.items)}}function $P(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Pc(t,n),n.fill&&Y0(t,n,i)&&t.fill(),n.stroke&&jc(t,n,i)&&t.stroke()))}function K0(e){return e=e||Kr,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,X0(n,s=>{const u=s.bounds;if(!(u&&!u.contains(o,a)||!u)&&e(t,s,r,i,o,a))return s})}}function Ch(e,t){return function(n,r,i,o){var a=Array.isArray(r)?r[0]:r,s=t==null?a.fill:t,u=a.stroke&&n.isPointInStroke,l,c;return u&&(l=a.strokeWidth,c=a.strokeCap,n.lineWidth=l!=null?l:1,n.lineCap=c!=null?c:"butt"),e(n,r)?!1:s&&n.isPointInPath(i,o)||u&&n.isPointInStroke(i,o)}}function ME(e){return K0(Ch(e))}function Bu(e,t){return"translate("+e+","+t+")"}function FE(e){return"rotate("+e+")"}function cne(e,t){return"scale("+e+","+t+")"}function BP(e){return Bu(e.x||0,e.y||0)}function fne(e){return Bu(e.x||0,e.y||0)+(e.angle?" "+FE(e.angle):"")}function dne(e){return Bu(e.x||0,e.y||0)+(e.angle?" "+FE(e.angle):"")+(e.scaleX||e.scaleY?" "+cne(e.scaleX||1,e.scaleY||1):"")}function DE(e,t,n){function r(a,s){a("transform",fne(s)),a("d",t(null,s))}function i(a,s){return t(kh(a,s.angle),s),aa(a,s).translate(s.x||0,s.y||0)}function o(a,s){var u=s.x||0,l=s.y||0,c=s.angle||0;a.translate(u,l),c&&a.rotate(c*=cs),a.beginPath(),t(a,s),c&&a.rotate(-c),a.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:NE(o),pick:ME(o),isect:n||_E(o)}}var hne=DE("arc",Qte);function pne(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,a,s;--i>=0;)e[i].defined!==!1&&(s=Math.abs(e[i][r]-n),s<o&&(o=s,a=e[i]));return a}function gne(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,a;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],a=i*i+o*o,a<n))return e[r];return null}function mne(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function RE(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(kh(u),c),aa(u,c[0]))}function o(u,l){u.beginPath(),t(u,l)}const a=Ch(o);function s(u,l,c,f,d,h){var p=l.items,g=l.bounds;return!p||!p.length||g&&!g.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,a(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:lne(o),pick:s,isect:AE,tip:n}}var yne=RE("area",Jte,pne);function vne(e,t){var n=t.clip;e.save(),_e(n)?(e.beginPath(),n(e),e.clip()):UP(e,t.group)}function UP(e,t){e.beginPath(),vE(t)?Dc(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function WP(e){const t=_i(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function bne(e,t){e("transform",BP(t))}function HP(e,t){const n=WP(t);e("d",Dc(null,t,n,n))}function xne(e,t){e("class","background"),e("aria-hidden",!0),HP(e,t)}function wne(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?HP(e,t):e("d","")}function Sne(e,t,n){const r=t.clip?bE(n,t,t):null;e("clip-path",r)}function Ene(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),aa(e,t),e.translate(t.x||0,t.y||0)}function _h(e,t,n,r){const i=WP(t);e.beginPath(),Dc(e,t,(n||0)+i,(r||0)+i)}const One=Ch(_h),kne=Ch(_h,!1),Cne=Ch(_h,!0);function _ne(e,t,n){Ai(t,r=>{const i=r.x||0,o=r.y||0,a=r.strokeForeground,s=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&s&&(_h(e,r,i,o),Pc(e,r),r.fill&&Y0(e,r,s)&&e.fill(),r.stroke&&!a&&jc(e,r,s)&&e.stroke()),e.save(),e.translate(i,o),r.clip&&UP(e,r),n&&n.translate(-i,-o),Ai(r,u=>{this.draw(e,u,n)}),n&&n.translate(i,o),e.restore(),a&&r.stroke&&s&&(_h(e,r,i,o),Pc(e,r),jc(e,r,s)&&e.stroke())})}function Ane(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const a=n*e.pixelRatio,s=r*e.pixelRatio;return X0(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,o))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),g=u.clip;if(g&&(i<c||i>h||o<f||o>p))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,g&&vE(u)&&!Cne(e,u,a,s))return e.restore(),null;const m=u.strokeForeground,y=t.interactive!==!1;return y&&m&&u.stroke&&kne(e,u,a,s)?(e.restore(),u):(l=X0(u,v=>Tne(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!m&&u.stroke)&&One(e,u,a,s)&&(l=u),e.restore(),l||null)})}function Tne(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Nne={type:"group",tag:"g",nested:!1,attr:bne,bound:Ene,draw:_ne,pick:Ane,isect:jP,content:Sne,background:xne,foreground:wne},Ah={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function PE(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function jE(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function IE(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function Q0(e,t){return e==="center"?t/2:e==="right"?t:0}function J0(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Mne(e,t,n){const r=PE(t,n),i=jE(t,r),o=IE(t,r),a=(t.x||0)-Q0(t.align,i),s=(t.y||0)-J0(t.baseline,o),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,Ah["xmlns:xlink"],"xlink:href"),e("transform",Bu(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Fne(e,t){const n=t.image,r=jE(t,n),i=IE(t,n),o=(t.x||0)-Q0(t.align,r),a=(t.y||0)-J0(t.baseline,i);return e.set(o,a,o+r,a+i)}function Dne(e,t,n){Ai(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=PE(r,this);let o=jE(r,i),a=IE(r,i);if(o===0||a===0)return;let s=(r.x||0)-Q0(r.align,o),u=(r.y||0)-J0(r.baseline,a),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=o/c,u+=(a-d)/2,a=d):(d=a*c,s+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(Pc(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,s,u,o,a))})}var Rne={type:"image",tag:"image",nested:!1,attr:Mne,bound:Fne,draw:Dne,pick:K0(),isect:Kr,get:PE,xOffset:Q0,yOffset:J0},Pne=RE("line",Zte,gne);function jne(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",dne(t)),e("d",t.path)}function Z0(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*cs,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=Mc(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),xh(e,u,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):xh(e,u,r,i,o,a)}function Ine(e,t){return Z0(kh(e,t.angle),t)?e.set(0,0,0,0):aa(e,t,!0)}var Lne={type:"path",tag:"path",nested:!1,attr:jne,bound:Ine,draw:NE(Z0),pick:ME(Z0),isect:_E(Z0)};function zne(e,t){e("d",Dc(null,t))}function $ne(e,t){var n,r;return aa(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function GP(e,t){e.beginPath(),Dc(e,t)}var Bne={type:"rect",tag:"path",nested:!1,attr:zne,bound:$ne,draw:NE(GP),pick:ME(GP),isect:jP};function Une(e,t){e("transform",BP(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Wne(e,t){var n,r;return aa(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function qP(e,t,n){var r,i,o,a;return t.stroke&&jc(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0):!1}function Hne(e,t,n){Ai(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&qP(e,r,i)&&(Pc(e,r),e.stroke())}})}function Gne(e,t,n,r){return e.isPointInStroke?qP(e,t,1)&&e.isPointInStroke(n,r):!1}var qne={type:"rule",tag:"line",nested:!1,attr:Une,bound:Wne,draw:Hne,pick:K0(Gne),isect:IP},Vne=DE("shape",ene),Yne=DE("symbol",tne,AE);const VP=zF();var yo={height:vo,measureWidth:zE,estimateWidth:LE,width:LE,canvas:YP};YP(!0);function YP(e){yo.width=e&&hs?zE:LE}function LE(e,t){return XP(gs(e,t),vo(e))}function XP(e,t){return~~(.8*e.length*t)}function zE(e,t){return vo(e)<=0||!(t=gs(e,t))?0:KP(t,ey(e))}function KP(e,t){const n=`(${t}) ${e}`;let r=VP.get(n);return r===void 0&&(hs.font=t,r=hs.measureText(e).width,VP.set(n,r)),r}function vo(e){return e.fontSize!=null?+e.fontSize||0:11}function ps(e){return e.lineHeight!=null?e.lineHeight:vo(e)+2}function Xne(e){return J(e)?e.length>1?e:e[0]:e}function Th(e){return Xne(e.lineBreak&&e.text&&!J(e.text)?e.text.split(e.lineBreak):e.text)}function $E(e){const t=Th(e);return(J(t)?t.length-1:0)*ps(e)}function gs(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Qne(e,n):n}function Kne(e){if(yo.width===zE){const t=ey(e);return n=>KP(n,t)}else{const t=vo(e);return n=>XP(n,t)}}function Qne(e,t){var n=+e.limit,r=Kne(e);if(r(t)<n)return t;var i=e.ellipsis||"\u2026",o=e.dir==="rtl",a=0,s=t.length,u;if(n-=r(i),o){for(;a<s;)u=a+s>>>1,r(t.slice(u))>n?a=u+1:s=u;return i+t.slice(a)}else{for(;a<s;)u=1+(a+s>>>1),r(t.slice(0,u))<n?a=u:s=u-1;return t.slice(0,a)+i}}function Nh(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function ey(e,t){return""+(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+vo(e)+"px "+Nh(e,t)}function BE(e){var t=e.baseline,n=vo(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*ps(e):t==="line-bottom"?.29*n-.5*ps(e):0)}const Jne={left:"start",center:"middle",right:"end"},Mh=new Lt;function ty(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Iu,t+=r*Math.cos(i),n+=r*Math.sin(i)),Mh.x1=t,Mh.y1=n,Mh}function Zne(e,t){var n=t.dx||0,r=(t.dy||0)+BE(t),i=ty(t),o=i.x1,a=i.y1,s=t.angle||0,u;e("text-anchor",Jne[t.align]||"start"),s?(u=Bu(o,a)+" "+FE(s),(n||r)&&(u+=" "+Bu(n,r))):u=Bu(o+n,a+r),e("transform",u)}function UE(e,t,n){var r=yo.height(t),i=t.align,o=ty(t),a=o.x1,s=o.y1,u=t.dx||0,l=(t.dy||0)+BE(t)-Math.round(.8*r),c=Th(t),f;if(J(c)?(r+=ps(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,yo.width(t,h)),0)):f=yo.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=a,l+=s,u+f,l+r),t.angle&&!n)e.rotate(t.angle*cs,a,s);else if(n===2)return e.rotatedPoints(t.angle*cs,a,s);return e}function ere(e,t,n){Ai(t,r=>{var i=r.opacity==null?1:r.opacity,o,a,s,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=ey(r),e.textAlign=r.align||"left",o=ty(r),a=o.x1,s=o.y1,r.angle&&(e.save(),e.translate(a,s),e.rotate(r.angle*cs),a=s=0),a+=r.dx||0,s+=(r.dy||0)+BE(r),c=Th(r),Pc(e,r),J(c))for(l=ps(r),u=0;u<c.length;++u)f=gs(r,c[u]),r.fill&&Y0(e,r,i)&&e.fillText(f,a,s),r.stroke&&jc(e,r,i)&&e.strokeText(f,a,s),s+=l;else f=gs(r,c),r.fill&&Y0(e,r,i)&&e.fillText(f,a,s),r.stroke&&jc(e,r,i)&&e.strokeText(f,a,s);r.angle&&e.restore()}})}function tre(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=ty(t),s=a.x1,u=a.y1,l=UE(Mh,t,1),c=-t.angle*cs,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(s-f*s+d*u),p=d*i+f*o+(u-d*s-f*u);return l.contains(h,p)}function nre(e,t){const n=UE(Mh,e,2);return Rc(t,n[0],n[1],n[2],n[3])||Rc(t,n[0],n[1],n[4],n[5])||Rc(t,n[4],n[5],n[6],n[7])||Rc(t,n[2],n[3],n[6],n[7])}var rre={type:"text",tag:"text",nested:!1,attr:Zne,bound:UE,draw:ere,pick:K0(tre),isect:nre},ire=RE("trail",nne,mne),Rr={arc:hne,area:yne,group:Nne,image:Rne,line:Pne,path:Lne,rect:Bne,rule:qne,shape:Vne,symbol:Yne,text:rre,trail:ire};function WE(e,t,n){var r=Rr[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Lt),e,n)}var QP={mark:null};function JP(e,t,n){var r=Rr[e.marktype],i=r.bound,o=e.items,a=o&&o.length,s,u,l,c;if(r.nested)return a?l=o[0]:(QP.mark=e,l=QP),c=WE(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Lt,a)for(s=0,u=o.length;s<u;++s)t.union(WE(o[s],i,n));return e.bounds=t}const ore=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function ZP(e,t){return JSON.stringify(e,ore,t)}function ej(e){const t=typeof e=="string"?JSON.parse(e):e;return tj(t)}function tj(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&tj(n[i]);return t&&JP(e),e}function HE(e){arguments.length?this.root=ej(e):(this.root=nj({marktype:"group",name:"root",role:"frame"}),this.root.items=[new U0(this.root)])}HE.prototype={toJSON(e){return ZP(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const r=nj(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function nj(e,t){const n={bounds:new Lt,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function ms(e,t,n){return!e&&typeof document!="undefined"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function GE(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function ur(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=ms(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function Ti(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function rj(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function ny(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function are(e,t,n,r){var i=e&&e.mark,o,a;if(i&&(o=Rr[i.marktype]).tip){for(a=ny(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=o.tip(i.items,a)}return e}function ys(e,t){this._active=null,this._handlers={},this._loader=e||Km(),this._tooltip=t||sre}function sre(e,t,n,r){e.element().setAttribute("title",r||"")}ys.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),o=ms(null,"a");for(const a in r)o.setAttribute(a,r[a]);o.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=are(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),a=i.height();let s=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,u+=e.y||0;return{x:s,y:u,width:o,height:a,left:s,top:u,right:s+o,bottom:u+a}}};function bo(e){this._el=null,this._bgcolor=null,this._loader=new xE(e)}bo.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render(){},renderAsync(e){const t=this.render(e);return this._ready?this._ready.then(()=>t):Promise.resolve(t)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(o=>{o&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const ure="keydown",lre="keypress",cre="keyup",ij="dragenter",ry="dragleave",oj="dragover",qE="mousedown",fre="mouseup",iy="mousemove",Fh="mouseout",aj="mouseover",oy="click",dre="dblclick",hre="wheel",sj="mousewheel",ay="touchstart",sy="touchmove",uy="touchend",pre=[ure,lre,cre,ij,ry,oj,qE,fre,iy,Fh,aj,oy,dre,hre,sj,ay,sy,uy],VE=iy,Dh=Fh,YE=oy;function Rh(e,t){ys.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const gre=e=>e===ay||e===sy||e===uy?[ay,sy,uy]:[e];function uj(e,t){gre(t).forEach(n=>mre(e,n))}function mre(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function lj(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?this.fire(e,r):((!i||!i.exit)&&this.fire(n,r),this._active=o,this.fire(t,r),this.fire(e,r))}}function cj(e){return function(t){this.fire(e,t),this._active=null}}ne(Rh,ys,{initialize(e,t,n){return this._canvas=e&&GE(e,"canvas"),[oy,qE,iy,Fh,ry].forEach(r=>uj(this,r)),ys.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:pre,DOMMouseScroll(e){this.fire(sj,e)},mousemove:lj(iy,aj,Fh),dragover:lj(oj,ij,ry),mouseout:cj(Fh),dragleave:cj(ry),mousedown(e){this._down=this._active,this.fire(qE,e)},click(e){this._down===this._active&&(this.fire(oy,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(ay,e,!0)},touchmove(e){this.fire(sy,e,!0)},touchend(e){this.fire(uy,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===YE&&r&&r.href?this.handleHref(t,r,r.href):(e===VE||e===Dh)&&this.handleTooltip(t,r,e!==Dh),i)for(let o=0,a=i.length;o<a;++o)i[o].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(uj(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=ny(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const o=this.context();return Rr[e.marktype].pick.call(this,o,e,t,n,r,i)}});function yre(){return typeof window!="undefined"&&window.devicePixelRatio||1}var vre=yre();function bre(e,t,n,r,i,o){const a=typeof HTMLElement!="undefined"&&e instanceof HTMLElement&&e.parentNode!=null,s=e.getContext("2d"),u=a?vre:i;e.width=t*u,e.height=n*u;for(const l in o)s[l]=o[l];return a&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=u,s.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function ly(e){bo.call(this,e),this._options={},this._redraw=!1,this._dirty=new Lt,this._tempb=new Lt}const fj=bo.prototype,xre=(e,t,n)=>new Lt().set(0,0,t,n).translate(-e[0],-e[1]);function wre(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}ne(ly,bo,{initialize(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Sc(1,1,this._options.type),e&&this._canvas&&(Ti(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),fj.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(fj.resize.call(this,e,t,n,r),this._canvas)bre(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||Q("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e){const t=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty,a=xre(n,r,i);t.save();const s=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):wre(t,a.intersect(o),n);return this.clear(-n[0],-n[1],r,i),this.draw(t,e,s),t.restore(),o.clear(),this},draw(e,t,n){const r=Rr[t.marktype];t.clip&&vne(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,o=this.context();i.type!=="pdf"&&!i.externalContext&&o.clearRect(e,t,n,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});function XE(e,t){ys.call(this,e,t);const n=this;n._hrefHandler=KE(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=KE(n,(r,i)=>{n.handleTooltip(r,i,r.type!==Dh)})}const KE=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};ne(XE,ys,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(YE,this._hrefHandler),r.removeEventListener(VE,this._tooltipHandler),r.removeEventListener(Dh,this._tooltipHandler)),this._svg=r=e&&GE(e,"svg"),r&&(r.addEventListener(YE,this._hrefHandler),r.addEventListener(VE,this._tooltipHandler),r.addEventListener(Dh,this._tooltipHandler)),ys.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const o={type:e,handler:t,listener:KE(this,t)};(r[n]||(r[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const dj="aria-hidden",QE="aria-label",JE="role",ZE="aria-roledescription",hj="graphics-object",eO="graphics-symbol",pj=(e,t,n)=>({[JE]:e,[ZE]:t,[QE]:n||void 0}),Sre=Oi(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),gj={axis:{desc:"axis",caption:kre},legend:{desc:"legend",caption:Cre},"title-text":{desc:"title",caption:e=>`Title text '${bj(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${bj(e)}'`}},mj={ariaRole:JE,ariaRoleDescription:ZE,description:QE};function yj(e,t){const n=t.aria===!1;if(e(dj,n||void 0),n||t.description==null)for(const r in mj)e(mj[r],void 0);else{const r=t.mark.marktype;e(QE,t.description),e(JE,t.ariaRole||(r==="group"?hj:eO)),e(ZE,t.ariaRoleDescription||`${r} mark`)}}function vj(e){return e.aria===!1?{[dj]:!0}:Sre[e.role]?null:gj[e.role]?Ore(e,gj[e.role]):Ere(e)}function Ere(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return pj(n?hj:eO,`${t} mark container`,e.description)}function Ore(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return pj(t.role||eO,t.desc,n.description||r(n))}catch{return null}}function bj(e){return ue(e.text).join(" ")}function kre(e){const t=e.datum,n=e.orient,r=t.title?xj(e):null,i=e.context,o=i.scales[t.scale].value,a=i.dataflow.locale(),s=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Nc(s)?"discrete":s} scale with ${mP(a,o,e)}`}function Cre(e){const t=e.datum,n=t.title?xj(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),a=e.context,s=a.scales[i[o[0]]].value,u=a.dataflow.locale();return Are(r)+(n?` titled '${n}'`:"")+` for ${_re(o)} with ${mP(u,s,e)}`}function xj(e){try{return ue(Re(e.items).items[0].text).join(" ")}catch{return null}}function _re(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Re(e)}function Are(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const wj=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Tre=e=>wj(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function tO(){let e="",t="",n="";const r=[],i=()=>t=n="",o=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},a=(u,l)=>(l!=null&&(t+=` ${u}="${Tre(l)}"`),s),s={open(u,...l){o(u),t="<"+u;for(const c of l)for(const f in c)a(f,c[f]);return s},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),s},attr:a,text:u=>(n+=wj(u),s),toString:()=>e};return s}const Sj=e=>Ej(tO(),e)+"";function Ej(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes,r=n.length;for(let i=0;i<r;i++){const o=n[i];o.nodeType===3?e.text(o.nodeValue):Ej(e,o)}}return e.close()}const cy={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},Oj={fill:"none","stroke-miterlimit":10},Ph=0,kj="http://www.w3.org/2000/xmlns/",zt=Ah.xmlns;function nO(e){bo.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const rO=bo.prototype;ne(nO,bo,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=ur(e,0,"svg",zt),this._svg.setAttributeNS(kj,"xmlns",zt),this._svg.setAttributeNS(kj,"xmlns:xlink",Ah["xmlns:xlink"]),this._svg.setAttribute("version",Ah.version),this._svg.setAttribute("class","marks"),Ti(e,1),this._root=ur(this._svg,Ph,"g",zt),vs(this._root,Oj),Ti(this._svg,Ph+1)),this.background(this._bgcolor),rO.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),rO.background.apply(this,arguments)},resize(e,t,n,r){return rO.resize.call(this,e,t,n,r),this._svg&&(vs(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=ur(e,Ph,"rect",zt),vs(n,{width:this._width,height:this._height,fill:t}));const r=Sj(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),Ti(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,o,a,s,u;for(a=0,s=e.length;a<s;++a)if(n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=Rr[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,Cj(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){o.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(o,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=o.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,Cj(n,t)):this._update(o,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n){if(!this.isDirty(t))return t._svg;const r=this._svg,i=Rr[t.marktype],o=t.interactive===!1?"none":null,a=i.tag==="g";let s=null,u=0;const l=_j(t,e,n,"g",r);l.setAttribute("class",rj(t));const c=vj(t);for(const d in c)zn(l,d,c[d]);a||zn(l,"pointer-events",o),zn(l,"clip-path",t.clip?bE(this,t,t.group):null);const f=d=>{const h=this.isDirty(d),p=_j(d,l,s,i.tag,r);h&&(this._update(i,p,d),a&&Fre(this,p,d)),s=p,++u};return i.nested?t.items.length&&f(t.items[0]):Ai(t,f),Ti(l,u),l},_update(e,t,n){sa=t,En=t.__values__,yj(jh,n),e.attr(jh,n,this);const r=Rre[e.type];r&&r.call(this,e,t,n),sa&&this.style(sa,n)},style(e,t){if(t!=null)for(const n in cy){let r=n==="font"?Nh(t):t[n];if(r===En[n])continue;const i=cy[n];r==null?e.removeAttribute(i):(hE(r)&&(r=vP(r,this._defs.gradient,Aj())),e.setAttribute(i,r+"")),En[n]=r}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=ur(e,Ph+1,"defs",zt)),r=Nre(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=ur(e,Ph+1,"defs",zt)),r=Mre(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):Ti(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function Cj(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Nre(e,t,n){let r,i,o;if(t.gradient==="radial"){let a=ur(e,n++,"pattern",zt);vs(a,{id:L0+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=ur(a,0,"rect",zt),vs(a,{width:1,height:1,fill:`url(${Aj()}#${t.id})`}),e=ur(e,n++,"radialGradient",zt),vs(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ur(e,n++,"linearGradient",zt),vs(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=ur(e,r,"stop",zt),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return Ti(e,r),n}function Mre(e,t,n){let r;return e=ur(e,n,"clipPath",zt),e.setAttribute("id",t.id),t.path?(r=ur(e,0,"path",zt),r.setAttribute("d",t.path)):(r=ur(e,0,"rect",zt),vs(r,{x:0,y:0,width:t.width,height:t.height})),Ti(e,1),n+1}function Fre(e,t,n){t=t.lastChild.previousSibling;let r,i=0;Ai(n,o=>{r=e.mark(t,o,r),++i}),Ti(t,1+i)}function _j(e,t,n,r,i){let o=e._svg,a;if(!o&&(a=t.ownerDocument,o=ms(a,r,zt),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const s=ms(a,"path",zt);o.appendChild(s),s.__data__=e;const u=ms(a,"g",zt);o.appendChild(u),u.__data__=e;const l=ms(a,"path",zt);o.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(o.ownerSVGElement!==i||Dre(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function Dre(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let sa=null,En=null;const Rre={group(e,t,n){const r=sa=t.childNodes[2];En=r.__values__,e.foreground(jh,n,this),En=t.__values__,sa=t.childNodes[1],e.content(jh,n,this);const i=sa=t.childNodes[0];e.background(jh,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==En.events&&(zn(r,"pointer-events",o),zn(i,"pointer-events",o),En.events=o),n.strokeForeground&&n.stroke){const a=n.fill;zn(r,"display",null),this.style(i,n),zn(i,"stroke",null),a&&(n.fill=null),En=r.__values__,this.style(r,n),a&&(n.fill=a),sa=null}else zn(r,"display","none")},image(e,t,n){n.smooth===!1?(iO(t,"image-rendering","optimizeSpeed"),iO(t,"image-rendering","pixelated")):iO(t,"image-rendering",null)},text(e,t,n){const r=Th(n);let i,o,a,s;J(r)?(o=r.map(u=>gs(n,u)),i=o.join(`
`),i!==En.text&&(Ti(t,0),a=t.ownerDocument,s=ps(n),o.forEach((u,l)=>{const c=ms(a,"tspan",zt);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",s)),t.appendChild(c)}),En.text=i)):(o=gs(n,r),o!==En.text&&(t.textContent=o,En.text=o)),zn(t,"font-family",Nh(n)),zn(t,"font-size",vo(n)+"px"),zn(t,"font-style",n.fontStyle),zn(t,"font-variant",n.fontVariant),zn(t,"font-weight",n.fontWeight)}};function jh(e,t,n){t!==En[e]&&(n?Pre(sa,e,t,n):zn(sa,e,t),En[e]=t)}function iO(e,t,n){n!==En[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),En[t]=n)}function vs(e,t){for(const n in t)zn(e,n,t[n])}function zn(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Pre(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function Aj(){let e;return typeof window=="undefined"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function oO(e){bo.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}ne(oO,bo,{svg(){return this._text},_render(e){const t=tO();t.open("svg",Ae({},Ah,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",Oj,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=Rr[t.marktype],r=n.tag,i=[yj,n.attr];e.open("g",{class:rj(t),"clip-path":t.clip?bE(this,t,t.group):null},vj(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const o=a=>{const s=this.href(a);if(s&&e.open("a",s),e.open(r,this.attr(t,a,i,r!=="g"?r:null)),r==="text"){const u=Th(a);if(J(u)){const l={x:0,dy:ps(a)};for(let c=0;c<u.length;++c)e.open("tspan",c?l:null).text(gs(a,u[c])).close()}else e.text(gs(a,u))}else if(r==="g"){const u=a.strokeForeground,l=a.fill,c=a.stroke;u&&c&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),Ai(a,f=>this.mark(e,f)),e.close(),u&&c?(l&&(a.fill=null),a.stroke=c,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),l&&(a.fill=l)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),s&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):Ai(t,o),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},o=(a,s,u,l)=>{i[l||a]=s};return Array.isArray(n)?n.forEach(a=>a(o,t,this)):n(o,t,this),r&&jre(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const o=t[i],a=o.stops;o.gradient==="radial"?(e.open("pattern",{id:L0+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:i,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let s=0;s<a.length;++s)e.open("stop",{offset:a[s].offset,"stop-color":a[s].color}).close();e.close()}for(const i in n){const o=n[i];e.open("clipPath",{id:i}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});function jre(e,t,n,r,i){if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(e.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),r==="text"&&(e["font-family"]=Nh(t),e["font-size"]=vo(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in cy){let a=t[o];const s=cy[o];a==="transparent"&&(s==="fill"||s==="stroke")||a!=null&&(hE(a)&&(a=vP(a,i.gradient,"")),e[s]=a)}return e}const Tj="canvas",Nj="png",Mj="svg",Fj="none",bs={Canvas:Tj,PNG:Nj,SVG:Mj,None:Fj},Ic={};Ic[Tj]=Ic[Nj]={renderer:ly,headless:ly,handler:Rh};Ic[Mj]={renderer:nO,headless:oO,handler:XE};Ic[Fj]={};function fy(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Ic[e]=t,this):Ic[e]}function Dj(e,t,n){const r=[],i=new Lt().union(t),o=e.marktype;return o?Rj(e,i,n,r):o==="group"?Pj(e,i,n,r):Q("Intersect scene must be mark node or group item.")}function Rj(e,t,n,r){if(Ire(e,t,n)){const i=e.items,o=e.marktype,a=i.length;let s=0;if(o==="group")for(;s<a;++s)Pj(i[s],t,n,r);else for(const u=Rr[o].isect;s<a;++s){const l=i[s];jj(l,t,u)&&r.push(l)}}return r}function Ire(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function Pj(e,t,n,r){n&&n(e.mark)&&jj(e,t,Rr.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let u=0;u<o;++u)Rj(i[u],t,n,r);t.translate(a,s)}return r}function jj(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const aO=new Lt;function Ij(e){const t=e.clip;if(_e(t))t(kh(aO.clear()));else if(t)aO.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(aO)}const Lre=1e-9;function sO(e,t,n){return e===t?!0:n==="path"?Lj(e,t):e instanceof Date&&t instanceof Date?+e==+t:Qe(e)&&Qe(t)?Math.abs(e-t)<=Lre:!e||!t||!ce(e)&&!ce(t)?e==t:zre(e,t)}function Lj(e,t){return sO(Mc(e),Mc(t))}function zre(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!sO(e[i],t[i],i))return!1;return typeof e==typeof t}function $re(){TP(),mte()}const Lc="top",Ni="left",Mi="right",xs="bottom",Bre="top-left",Ure="top-right",Wre="bottom-left",Hre="bottom-right",uO="start",lO="middle",$n="end",Gre="x",qre="y",dy="group",cO="axis",fO="title",Vre="frame",Yre="scope",dO="legend",zj="row-header",$j="row-footer",Bj="row-title",Uj="column-header",Wj="column-footer",Hj="column-title",Xre="padding",Kre="symbol",Gj="fit",Qre="fit-x",Jre="fit-y",Zre="pad",hO="none",hy="all",pO="each",gO="flush",ws="column",Ss="row";function qj(e){q.call(this,null,e)}ne(qj,q,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=Rr[i],a=o.bound;let s=r.bounds,u;if(o.nested)r.items.length&&n.dirty(r.items[0]),s=py(r,a),r.items.forEach(l=>{l.bounds.clear().union(s)});else if(i===dy||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),s.clear(),r.items.forEach(l=>s.union(py(l,a))),r.role){case cO:case dO:case fO:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{s.union(py(l,a))}),t.visit(t.MOD,l=>{u=u||s.alignsWith(l.bounds),n.dirty(l),s.union(py(l,a))}),u&&(s.clear(),r.items.forEach(l=>s.union(l.bounds)));return Ij(r),t.modifies("bounds")}});function py(e,t,n){return t(e.bounds.clear(),e,n)}const Vj=":vega_identifier:";function mO(e){q.call(this,0,e)}mO.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ne(mO,q,{transform(e,t){const n=eie(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function eie(e){return e._signals[Vj]||(e._signals[Vj]=e.add(0))}function Yj(e){q.call(this,null,e)}ne(Yj,q,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,tie(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===dy?U0:B0;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function tie(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Xj(e){q.call(this,null,e)}const Kj={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!Qj(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},Qj=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Jj=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(Qj(i,o=e[n].bounds,t))return!0},nie=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},rie=(e,t,n)=>{var r=e.range(),i=new Lt;return t===Lc||t===xs?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},Zj=e=>(e.forEach(t=>t.opacity=1),e),e6=(e,t)=>e.reflow(t.modified()).modifies("opacity");ne(Xj,q,{transform(e,t){const n=Kj[e.method]||Kj.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,a;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Zj(i),t=e6(t,e)),t;if(i=i.filter(nie),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=Zj(i),t=e6(t,e),o.length>=3&&Jj(o,r)){do o=n(o,r);while(o.length>=3&&Jj(o,r));o.length<3&&!Re(i).opacity&&(o.length>1&&(Re(o).opacity=0),Re(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=rie(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{a(u)||(u.opacity=0)}));const s=o[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&s.union(u.bounds)}),t}});function t6(e){q.call(this,null,e)}ne(t6,q,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const On=new Lt;function zc(e,t,n){return e[t]===n?0:(e[t]=n,1)}function iie(e){var t=e.items[0].orient;return t===Ni||t===Mi}function oie(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function aie(e,t,n,r){var i=t.items[0],o=i.datum,a=i.translate!=null?i.translate:.5,s=i.orient,u=oie(o),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=o.title&&i.items[u[2]].items[0],g=i.titlePadding,m=i.bounds,y=p&&$E(p),v=0,b=0,x,w;switch(On.clear().union(m),m.clear(),(x=u[0])>-1&&m.union(i.items[x].bounds),(x=u[1])>-1&&m.union(i.items[x].bounds),s){case Lc:v=f||0,b=-c,w=Math.max(d,Math.min(h,-m.y1)),m.add(0,-w).add(l,0),p&&gy(e,p,w,g,y,0,-1,m);break;case Ni:v=-c,b=f||0,w=Math.max(d,Math.min(h,-m.x1)),m.add(-w,0).add(0,l),p&&gy(e,p,w,g,y,1,-1,m);break;case Mi:v=n+c,b=f||0,w=Math.max(d,Math.min(h,m.x2)),m.add(0,0).add(w,l),p&&gy(e,p,w,g,y,1,1,m);break;case xs:v=f||0,b=r+c,w=Math.max(d,Math.min(h,m.y2)),m.add(0,0).add(l,w),p&&gy(e,p,w,g,0,0,1,m);break;default:v=i.x,b=i.y}return aa(m.translate(v,b),i),zc(i,"x",v+a)|zc(i,"y",b+a)&&(i.bounds=On,e.dirty(i),i.bounds=m,e.dirty(i)),i.mark.bounds.clear().union(m)}function gy(e,t,n,r,i,o,a,s){const u=t.bounds;if(t.auto){const l=a*(n+i+r);let c=0,f=0;e.dirty(t),o?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}s.union(u)}const n6=(e,t)=>Math.floor(Math.min(e,t)),r6=(e,t)=>Math.ceil(Math.max(e,t));function sie(e){var t=e.items,n=t.length,r=0,i,o;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===dy)switch(i.role){case cO:case dO:case fO:break;case zj:a.rowheaders.push(...o);break;case $j:a.rowfooters.push(...o);break;case Uj:a.colheaders.push(...o);break;case Wj:a.colfooters.push(...o);break;case Bj:a.rowtitle=o[0];break;case Hj:a.coltitle=o[0];break;default:a.marks.push(...o)}return a}function uie(e){return new Lt().set(0,0,e.width||0,e.height||0)}function lie(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function dt(e,t,n){const r=ce(e)?e[t]:e;return r!=null?r:n!==void 0?n:0}function i6(e){return e<0?Math.ceil(-e):0}function o6(e,t,n){var r=!n.nodirty,i=n.bounds===gO?uie:lie,o=On.set(0,0,0,0),a=dt(n.align,ws),s=dt(n.align,Ss),u=dt(n.padding,ws),l=dt(n.padding,Ss),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),g=0,m=Array(d),y=Array(f),v=0,b=Array(d),x=Array(d),w=Array(d),E,S,_,M,D,C,A,k,N,T,F;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)y[S]=0;for(S=0;S<d;++S)C=t[S],D=w[S]=i(C),C.x=C.x||0,b[S]=0,C.y=C.y||0,x[S]=0,_=S%c,M=~~(S/c),g=Math.max(g,A=Math.ceil(D.x2)),v=Math.max(v,k=Math.ceil(D.y2)),p[_]=Math.max(p[_],A),y[M]=Math.max(y[M],k),h[S]=u+i6(D.x1),m[S]=l+i6(D.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c==0&&(h[S]=0),S<c&&(m[S]=0);if(a===pO)for(_=1;_<c;++_){for(F=0,S=_;S<d;S+=c)F<h[S]&&(F=h[S]);for(S=_;S<d;S+=c)h[S]=F+p[_-1]}else if(a===hy){for(F=0,S=0;S<d;++S)S%c&&F<h[S]&&(F=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=F+g)}else for(a=!1,_=1;_<c;++_)for(S=_;S<d;S+=c)h[S]+=p[_-1];if(s===pO)for(M=1;M<f;++M){for(F=0,S=M*c,E=S+c;S<E;++S)F<m[S]&&(F=m[S]);for(S=M*c;S<E;++S)m[S]=F+y[M-1]}else if(s===hy){for(F=0,S=c;S<d;++S)F<m[S]&&(F=m[S]);for(S=c;S<d;++S)m[S]=F+v}else for(s=!1,M=1;M<f;++M)for(S=M*c,E=S+c;S<E;++S)m[S]+=y[M-1];for(N=0,S=0;S<d;++S)N=h[S]+(S%c?N:0),b[S]+=N-t[S].x;for(_=0;_<c;++_)for(T=0,S=_;S<d;S+=c)T+=m[S],x[S]+=T-t[S].y;if(a&&dt(n.center,ws)&&f>1)for(S=0;S<d;++S)D=a===hy?g:p[S%c],N=D-w[S].x2-t[S].x-b[S],N>0&&(b[S]+=N/2);if(s&&dt(n.center,Ss)&&c!==1)for(S=0;S<d;++S)D=s===hy?v:y[~~(S/c)],T=D-w[S].y2-t[S].y-x[S],T>0&&(x[S]+=T/2);for(S=0;S<d;++S)o.union(w[S].translate(b[S],x[S]));switch(N=dt(n.anchor,Gre),T=dt(n.anchor,qre),dt(n.anchor,ws)){case $n:N-=o.width();break;case lO:N-=o.width()/2}switch(dt(n.anchor,Ss)){case $n:T-=o.height();break;case lO:T-=o.height()/2}for(N=Math.round(N),T=Math.round(T),o.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)C=t[S],C.x+=b[S]+=N,C.y+=x[S]+=T,o.union(C.mark.bounds.union(C.bounds.translate(b[S],x[S]))),r&&e.dirty(C);return o}function cie(e,t,n){var r=sie(t),i=r.marks,o=n.bounds===gO?fie:die,a=n.offset,s=n.columns||i.length,u=s<=0?1:Math.ceil(i.length/s),l=u*s,c,f,d,h,p,g,m;const y=o6(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(g=dt(n.headerBand,Ss,null),c=my(e,r.rowheaders,i,s,u,-dt(a,"rowHeader"),n6,0,o,"x1",0,s,1,g)),r.colheaders&&(g=dt(n.headerBand,ws,null),f=my(e,r.colheaders,i,s,s,-dt(a,"columnHeader"),n6,1,o,"y1",0,1,s,g)),r.rowfooters&&(g=dt(n.footerBand,Ss,null),d=my(e,r.rowfooters,i,s,u,dt(a,"rowFooter"),r6,0,o,"x2",s-1,s,1,g)),r.colfooters&&(g=dt(n.footerBand,ws,null),h=my(e,r.colfooters,i,s,s,dt(a,"columnFooter"),r6,1,o,"y2",l-s,1,s,g)),r.rowtitle&&(p=dt(n.titleAnchor,Ss),m=dt(a,"rowTitle"),m=p===$n?d+m:c-m,g=dt(n.titleBand,Ss,.5),a6(e,r.rowtitle,m,0,y,g)),r.coltitle&&(p=dt(n.titleAnchor,ws),m=dt(a,"columnTitle"),m=p===$n?h+m:f-m,g=dt(n.titleBand,ws,.5),a6(e,r.coltitle,m,1,y,g))}function fie(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function die(e,t){return e.bounds[t]}function my(e,t,n,r,i,o,a,s,u,l,c,f,d,h){var p=n.length,g=0,m=0,y,v,b,x,w,E,S,_,M;if(!p)return g;for(y=c;y<p;y+=f)n[y]&&(g=a(g,u(n[y],l)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=o,v=0,x=t.length;v<x;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,x=t.length;v<x;++v,y+=f){for(E=t[v],w=E.mark.bounds,b=y;b>=0&&(S=n[b])==null;b-=d);s?(_=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),M=g):(_=g,M=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),w.union(E.bounds.translate(_-(E.x||0),M-(E.y||0))),E.x=_,E.y=M,e.dirty(E),m=a(m,w[l])}return m}function a6(e,t,n,r,i,o){if(!!t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function hie(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function pie(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function gie(e,t,n,r,i,o,a){const s=hie(n,t),u=pie(e,s("offset",0)),l=s("anchor",uO),c=l===$n?1:l===lO?.5:0,f={align:pO,bounds:s("bounds",gO),columns:s("direction")==="vertical"?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case Ni:f.anchor={x:Math.floor(r.x1)-u,column:$n,y:c*(a||r.height()+2*r.y1),row:l};break;case Mi:f.anchor={x:Math.ceil(r.x2)+u,y:c*(a||r.height()+2*r.y1),row:l};break;case Lc:f.anchor={y:Math.floor(i.y1)-u,row:$n,x:c*(o||i.width()+2*i.x1),column:l};break;case xs:f.anchor={y:Math.ceil(i.y2)+u,x:c*(o||i.width()+2*i.x1),column:l};break;case Bre:f.anchor={x:u,y:u};break;case Ure:f.anchor={x:o-u,y:u,column:$n};break;case Wre:f.anchor={x:u,y:a-u,row:$n};break;case Hre:f.anchor={x:o-u,y:a-u,column:$n,row:$n};break}return f}function mie(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,a=n.x,s=n.y,u,l;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),vie(e,n,n.items[0].items[0]),o=yie(n,o),u=2*n.padding,l=2*n.padding,o.empty()||(u=Math.ceil(o.width()+u),l=Math.ceil(o.height()+l)),r.type===Kre&&bie(n.items[0].items[0].items[0].items),i!==hO&&(n.x=a=0,n.y=s=0),n.width=u,n.height=l,aa(o.set(a,s,a+u,s+l),n),n.mark.bounds.clear().union(o),n}function yie(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function vie(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&Ih(e,n,i,o);else{var a=t.items[1].items[0],s=a.anchor,u=t.titlePadding||0,l=r-a.x,c=r-a.y;switch(a.orient){case Ni:i+=Math.ceil(a.bounds.width())+u;break;case Mi:case xs:break;default:o+=a.bounds.height()+u}switch((i||o)&&Ih(e,n,i,o),a.orient){case Ni:c+=$c(t,n,a,s,1,1);break;case Mi:l+=$c(t,n,a,$n,0,0)+u,c+=$c(t,n,a,s,1,1);break;case xs:l+=$c(t,n,a,s,0,0),c+=$c(t,n,a,$n,-1,0,1)+u;break;default:l+=$c(t,n,a,s,0,0)}(l||c)&&Ih(e,a,l,c),(l=Math.round(a.bounds.x1-r))<0&&(Ih(e,n,-l,0),Ih(e,a,-l,0))}}function $c(e,t,n,r,i,o,a){const s=e.datum.type!=="symbol",u=n.datum.vgrad,l=s&&(o||!u)&&!a?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&o?c:0,d=u&&o?0:c,h=i<=0?0:$E(n);return Math.round(r===uO?f:r===$n?d-h:.5*(c-h))}function Ih(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function bie(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function xie(e,t,n,r,i){var o=t.items[0],a=o.frame,s=o.orient,u=o.anchor,l=o.offset,c=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],h=s===Ni||s===Mi?r:n,p=0,g=0,m=0,y=0,v=0,b;if(a!==dy?s===Ni?(p=i.y2,h=i.y1):s===Mi?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):s===Ni&&(p=r,h=0),b=u===uO?p:u===$n?h:(p+h)/2,d&&d.text){switch(s){case Lc:case xs:v=f.bounds.height()+c;break;case Ni:y=f.bounds.width()+c;break;case Mi:y=-f.bounds.width()-c;break}On.clear().union(d.bounds),On.translate(y-(d.x||0),v-(d.y||0)),zc(d,"x",y)|zc(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(On),d.mark.bounds.clear().union(On),e.dirty(d)),On.clear().union(d.bounds)}else On.clear();switch(On.union(f.bounds),s){case Lc:g=b,m=i.y1-On.height()-l;break;case Ni:g=i.x1-On.width()-l,m=b;break;case Mi:g=i.x2+On.width()+l,m=b;break;case xs:g=b,m=i.y2+l;break;default:g=o.x,m=o.y}return zc(o,"x",g)|zc(o,"y",m)&&(On.translate(g,m),e.dirty(o),o.bounds.clear().union(On),t.bounds.clear().union(On),e.dirty(o)),o.bounds}function s6(e){q.call(this,null,e)}ne(s6,q,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&cie(n,r,e.layout),Sie(n,r,e)}),wie(e.mark.group)?t.reflow():t}});function wie(e){return e&&e.mark.role!=="legend-entry"}function Sie(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),a=new Lt().set(0,0,i,o),s=a.clone(),u=a.clone(),l=[],c,f,d,h,p,g;for(p=0,g=r.length;p<g;++p)switch(f=r[p],f.role){case cO:h=iie(f)?s:u,h.union(aie(e,f,i,o));break;case fO:c=f;break;case dO:l.push(mie(e,f));break;case Vre:case Yre:case zj:case $j:case Bj:case Uj:case Wj:case Hj:s.union(f.bounds),u.union(f.bounds);break;default:a.union(f.bounds)}if(l.length){const m={};l.forEach(y=>{d=y.orient||Mi,d!==hO&&(m[d]||(m[d]=[])).push(y)});for(const y in m){const v=m[y];o6(e,v,gie(v,y,n.legends,s,u,i,o))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&n.autosize.type===Gj)switch(y.orient){case Ni:case Mi:a.add(v.x1,0).add(v.x2,0);break;case Lc:case xs:a.add(0,v.y1).add(0,v.y2)}else a.union(v)})}a.union(s).union(u),c&&a.union(xie(e,c,i,o,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),Eie(e,t,a,n)}function Eie(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===Xre){const p=e.padding();a-=p.left+p.right,s-=p.top+p.bottom}o===hO?(l=0,f=0,u=a,c=s):o===Gj?(u=Math.max(0,a-l-d),c=Math.max(0,s-f-h)):o===Qre?(u=Math.max(0,a-l-d),s=c+f+h):o===Jre?(a=u+l+d,c=Math.max(0,s-f-h)):o===Zre&&(a=u+l+d,s=c+f+h),e._resizeView(a,s,u,c,[l,f],i.resize)}var Oie=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",bound:qj,identifier:mO,mark:Yj,overlap:Xj,render:t6,viewlayout:s6});function u6(e){q.call(this,null,e)}ne(u6,q,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,s=cE(o,a,e.minstep),u=e.format||lP(n,o,s,e.formatSpecifier,e.formatType,!!e.values),l=e.values?uP(o,e.values,s):fE(o,s);return i&&(r.rem=i),i=l.map((c,f)=>He({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(He({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function l6(e){q.call(this,null,e)}function kie(){return He({})}function Cie(e){const t=sc().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ne(l6,q,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||kie,o=e.key||me,a=this.value;return J(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&Q("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=Cie(o)),t.visit(t.ADD,s=>{const u=o(s);let l=a.get(u);l?l.exit?(a.empty--,r.add.push(l)):r.mod.push(l):(l=i(s),a.set(u,l),r.add.push(l)),l.datum=s,l.exit=!1}),t.visit(t.MOD,s=>{const u=o(s),l=a.get(u);l&&(l.datum=s,r.mod.push(l))}),t.visit(t.REM,s=>{const u=o(s),l=a.get(u);s===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}});function c6(e){q.call(this,null,e)}ne(c6,q,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(J(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var a=o==="enter",s=i.update||Ha,u=i.enter||Ha,l=i.exit||Ha,c=(o&&!a?i[o]:s)||Ha;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),s(f,e)}),n.modifies(u.output),n.modifies(s.output),c!==Ha&&c!==s&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Ha&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),a||c!==Ha){const f=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function f6(e){q.call(this,[],e)}ne(f6,q,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||I0,a=e.scale,s=+e.limit,u=cE(a,e.count==null?5:e.count,e.minstep),l=!!e.values||o===I0,c=e.format||hP(n,a,u,o,e.formatSpecifier,e.formatType,l),f=e.values||dP(a,u),d,h,p,g,m;return i&&(r.rem=i),o===I0?(s&&f.length>s?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,s-1),m=!0):i=f,_e(p=e.size)?(!e.values&&a(i[0])===0&&(i=i.slice(1)),g=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=vn(g=p||8),i=i.map((y,v)=>He({index:v,label:c(y,v,i),value:y,offset:g,size:p(y,e)})),m&&(m=f[i.length],i.push(He({index:i.length,label:"\u2026".concat(f.length-i.length," entries"),value:m,offset:g,size:p(m,e)})))):o===rte?(d=a.domain(),h=iP(a,d[0],Re(d)),f.length<3&&!e.values&&d[0]!==Re(d)&&(f=[d[0],Re(d)]),i=f.map((y,v)=>He({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=pte(a),i=f.map((y,v)=>He({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const _ie=e=>e.source.x,Aie=e=>e.source.y,Tie=e=>e.target.x,Nie=e=>e.target.y;function yO(e){q.call(this,{},e)}yO.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ne(yO,q,{transform(e,t){var n=e.sourceX||_ie,r=e.sourceY||Aie,i=e.targetX||Tie,o=e.targetY||Nie,a=e.as||"path",s=e.orient||"vertical",u=e.shape||"line",l=g6.get(u+"-"+s)||g6.get(u);return l||Q("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[a]=l(n(c),r(c),i(c),o(c))}),t.reflow(e.modified()).modifies(a)}});const d6=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,Mie=(e,t,n,r)=>d6(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),h6=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.sqrt(i*i+o*o)/2,s=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+s+" 0 1 "+n+","+r},Fie=(e,t,n,r)=>h6(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),p6=(e,t,n,r)=>{const i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},Die=(e,t,n,r)=>p6(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Rie=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,Pie=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,jie=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},Iie=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},Lie=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},zie=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*o+"C"+u*i+","+u*o+" "+u*a+","+u*s+" "+r*a+","+r*s},g6=sc({line:d6,"line-radial":Mie,arc:h6,"arc-radial":Fie,curve:p6,"curve-radial":Die,"orthogonal-horizontal":Rie,"orthogonal-vertical":Pie,"orthogonal-radial":jie,"diagonal-horizontal":Iie,"diagonal-vertical":Lie,"diagonal-radial":zie});function vO(e){q.call(this,null,e)}vO.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ne(vO,q,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||ic,a=e.startAngle||0,s=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(o),c=l.length,f=a,d=(s-a)/tD(l),h=Mr(c),p,g,m;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)m=l[h[p]],g=u[h[p]],g[r]=f,g[i]=f+=m*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const $ie=5;function Bie(e){const t=e.type;return!e.bins&&(t===_c||t===gh||t===mh)}function m6(e){return aE(e)&&e!==po}const Uie=Oi(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function y6(e){q.call(this,null,e),this.modified(!0)}ne(y6,q,{transform(e,t){var n=t.dataflow,r=this.value,i=Wie(e);(!r||i!==r.type)&&(this.value=r=Be(i)());for(i in e)if(!Uie[i]){if(i==="padding"&&m6(r.type))continue;_e(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Xie(r,e,Yie(r,e,Gie(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Wie(e){var t=e.type,n="",r;return t===po?po+"-"+_c:(Hie(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?po+"-":r===3?Ac+"-":""),(n+t||_c).toLowerCase())}function Hie(e){const t=e.type;return aE(t)&&t!==Ru&&t!==Pu&&(e.scheme||e.range&&e.range.length&&e.range.every(se))}function Gie(e,t,n){const r=qie(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,a=t.zero||t.zero===void 0&&Bie(e),s,u;if(!i)return 0;if(m6(o)&&t.padding&&i[0]!==Re(i)&&(i=Vie(o,i,t.range,t.padding,t.exponent,t.constant)),(a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(s=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[s]<0&&(i[s]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[s]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[s]?s+1:u<i[0]?0:s;l!==s&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return e.domain(v6(o,i,n)),o===tE&&e.unknown(t.domainImplicit?CS:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&cE(e,t.nice)||null),i.length}function qie(e,t,n){return t?(e.domain(v6(e.type,t,n)),t.length):-1}function Vie(e,t,n,r,i,o){var a=Math.abs(Re(n)-n[0]),s=a/(a-2*r),u=e===ia?O2(t,null,s):e===mh?Im(t,null,s,.5):e===gh?Im(t,null,s,i||1):e===F0?k2(t,null,s,o||1):E2(t,null,s);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function v6(e,t,n){if(Z4(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+re(t))}return t}function Yie(e,t,n){let r=t.bins;if(r&&!J(r)){const i=e.domain(),o=i[0],a=Re(i),s=r.step;let u=r.start==null?o:r.start,l=r.stop==null?a:r.stop;s||Q("Scale bins parameter missing step property."),u<o&&(u=s*Math.ceil(o/s)),l>a&&(l=s*Math.floor(a/s)),r=Mr(u,l+s/2,s)}return r?e.bins=r:e.bins&&delete e.bins,e.type===rE&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Xie(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=Kie(r,t,n);else if(t.scheme&&(o=Qie(r,t,n),_e(o))){if(e.interpolator)return e.interpolator(o);Q("Scale type ".concat(r," does not support interpolating color schemes."))}if(o&&eP(r))return e.interpolator(j0(bO(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(uE(t.interpolate,t.interpolateGamma)):_e(e.round)?e.round(i):_e(e.rangeRound)&&e.interpolate(i?hh:us),o&&e.range(bO(o,t.reverse))}function Kie(e,t,n){e!==X4&&e!==nE&&Q("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===nE?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*eE(n,i,r)]}function Qie(e,t,n){var r=t.schemeExtent,i,o;return J(t.scheme)?o=j0(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=lE(i),o||Q("Unrecognized scheme name: ".concat(t.scheme))),n=e===R0?n+1:e===rE?n-1:e===Tc||e===D0?+t.schemeCount||$ie:n,eP(e)?b6(o,r,t.reverse):_e(o)?rP(b6(o,r),n):e===tE?o:o.slice(0,n)}function b6(e,t,n){return _e(e)&&(t||n)?nP(e,bO(t||[0,1],n)):e}function bO(e,t){return t?e.slice().reverse():e}function x6(e){q.call(this,null,e)}ne(x6,q,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Cu(e.sort)),this.modified(n),t}});const w6="zero",S6="center",E6="normalize",O6=["y0","y1"];function xO(e){q.call(this,null,e)}xO.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:w6,values:[w6,S6,E6]},{name:"as",type:"string",array:!0,length:2,default:O6}]};ne(xO,q,{transform(e,t){var n=e.as||O6,r=n[0],i=n[1],o=Cu(e.sort),a=e.field||ic,s=e.offset===S6?Jie:e.offset===E6?Zie:eoe,u,l,c,f;for(u=toe(t.source,e.groupby,o,a),l=0,c=u.length,f=u.max;l<c;++l)s(u[l],f,a,r,i);return t.reflow(e.modified()).modifies(n)}});function Jie(e,t,n,r,i){for(var o=(t-e.sum)/2,a=e.length,s=0,u;s<a;++s)u=e[s],u[r]=o,u[i]=o+=Math.abs(n(u))}function Zie(e,t,n,r,i){for(var o=1/e.sum,a=0,s=e.length,u=0,l=0,c;u<s;++u)c=e[u],c[r]=a,c[i]=a=o*(l+=Math.abs(n(c)))}function eoe(e,t,n,r,i){for(var o=0,a=0,s=e.length,u=0,l,c;u<s;++u)c=e[u],l=+n(c),l<0?(c[r]=a,c[i]=a+=l):(c[r]=o,c[i]=o+=l)}function toe(e,t,n,r){var i=[],o=g=>g(c),a,s,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(a={},s=0,u=e.length;s<u;++s)c=e[s],f=t.map(o),d=a[f],d||(a[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],s=0,h=0,u=d.length;s<u;++s)h+=Math.abs(r(d[s]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}var noe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",axisticks:u6,datajoin:l6,encode:c6,legendentries:f6,linkpath:yO,pie:vO,scale:y6,sortitems:x6,stack:xO}),xe=1e-6,yy=1e-12,Me=Math.PI,St=Me/2,vy=Me/4,Bn=Me*2,At=180/Me,Fe=Me/180,Le=Math.abs,Bc=Math.atan,ni=Math.atan2,we=Math.cos,by=Math.ceil,k6=Math.exp,wO=Math.hypot,xy=Math.log,SO=Math.pow,ye=Math.sin,ri=Math.sign||function(e){return e>0?1:e<0?-1:0},Un=Math.sqrt,EO=Math.tan;function C6(e){return e>1?0:e<-1?Me:Math.acos(e)}function lr(e){return e>1?St:e<-1?-St:Math.asin(e)}function sn(){}function wy(e,t){e&&A6.hasOwnProperty(e.type)&&A6[e.type](e,t)}var _6={Feature:function(e,t){wy(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)wy(n[r].geometry,t)}},A6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){OO(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)OO(n[r],t,0)},Polygon:function(e,t){T6(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)T6(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)wy(n[r],t)}};function OO(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function T6(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)OO(e[n],t,1);t.polygonEnd()}function ua(e,t){e&&_6.hasOwnProperty(e.type)?_6[e.type](e,t):wy(e,t)}var Sy=new Ln,Ey=new Ln,N6,M6,kO,CO,_O,xo={point:sn,lineStart:sn,lineEnd:sn,polygonStart:function(){Sy=new Ln,xo.lineStart=roe,xo.lineEnd=ioe},polygonEnd:function(){var e=+Sy;Ey.add(e<0?Bn+e:e),this.lineStart=this.lineEnd=this.point=sn},sphere:function(){Ey.add(Bn)}};function roe(){xo.point=ooe}function ioe(){F6(N6,M6)}function ooe(e,t){xo.point=F6,N6=e,M6=t,e*=Fe,t*=Fe,kO=e,CO=we(t=t/2+vy),_O=ye(t)}function F6(e,t){e*=Fe,t*=Fe,t=t/2+vy;var n=e-kO,r=n>=0?1:-1,i=r*n,o=we(t),a=ye(t),s=_O*a,u=CO*o+s*we(i),l=s*r*ye(i);Sy.add(ni(l,u)),kO=e,CO=o,_O=a}function aoe(e){return Ey=new Ln,ua(e,xo),Ey*2}function Oy(e){return[ni(e[1],e[0]),lr(e[2])]}function Uu(e){var t=e[0],n=e[1],r=we(n);return[r*we(t),r*ye(t),ye(n)]}function ky(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Uc(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function AO(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Cy(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function _y(e){var t=Un(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var gt,cr,Et,Pr,Wu,D6,R6,Wc,Lh,Es,la,ca={point:TO,lineStart:j6,lineEnd:I6,polygonStart:function(){ca.point=L6,ca.lineStart=soe,ca.lineEnd=uoe,Lh=new Ln,xo.polygonStart()},polygonEnd:function(){xo.polygonEnd(),ca.point=TO,ca.lineStart=j6,ca.lineEnd=I6,Sy<0?(gt=-(Et=180),cr=-(Pr=90)):Lh>xe?Pr=90:Lh<-xe&&(cr=-90),la[0]=gt,la[1]=Et},sphere:function(){gt=-(Et=180),cr=-(Pr=90)}};function TO(e,t){Es.push(la=[gt=e,Et=e]),t<cr&&(cr=t),t>Pr&&(Pr=t)}function P6(e,t){var n=Uu([e*Fe,t*Fe]);if(Wc){var r=Uc(Wc,n),i=[r[1],-r[0],0],o=Uc(i,r);_y(o),o=Oy(o);var a=e-Wu,s=a>0?1:-1,u=o[0]*At*s,l,c=Le(a)>180;c^(s*Wu<u&&u<s*e)?(l=o[1]*At,l>Pr&&(Pr=l)):(u=(u+360)%360-180,c^(s*Wu<u&&u<s*e)?(l=-o[1]*At,l<cr&&(cr=l)):(t<cr&&(cr=t),t>Pr&&(Pr=t))),c?e<Wu?jr(gt,e)>jr(gt,Et)&&(Et=e):jr(e,Et)>jr(gt,Et)&&(gt=e):Et>=gt?(e<gt&&(gt=e),e>Et&&(Et=e)):e>Wu?jr(gt,e)>jr(gt,Et)&&(Et=e):jr(e,Et)>jr(gt,Et)&&(gt=e)}else Es.push(la=[gt=e,Et=e]);t<cr&&(cr=t),t>Pr&&(Pr=t),Wc=n,Wu=e}function j6(){ca.point=P6}function I6(){la[0]=gt,la[1]=Et,ca.point=TO,Wc=null}function L6(e,t){if(Wc){var n=e-Wu;Lh.add(Le(n)>180?n+(n>0?360:-360):n)}else D6=e,R6=t;xo.point(e,t),P6(e,t)}function soe(){xo.lineStart()}function uoe(){L6(D6,R6),xo.lineEnd(),Le(Lh)>xe&&(gt=-(Et=180)),la[0]=gt,la[1]=Et,Wc=null}function jr(e,t){return(t-=e)<0?t+360:t}function loe(e,t){return e[0]-t[0]}function z6(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function coe(e){var t,n,r,i,o,a,s;if(Pr=Et=-(gt=cr=1/0),Es=[],ua(e,ca),n=Es.length){for(Es.sort(loe),t=1,r=Es[0],o=[r];t<n;++t)i=Es[t],z6(r,i[0])||z6(r,i[1])?(jr(r[0],i[1])>jr(r[0],r[1])&&(r[1]=i[1]),jr(i[0],r[1])>jr(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(s=jr(r[1],i[0]))>a&&(a=s,gt=i[0],Et=r[1])}return Es=la=null,gt===1/0||cr===1/0?[[NaN,NaN],[NaN,NaN]]:[[gt,cr],[Et,Pr]]}var zh,Ay,Ty,Ny,My,Fy,Dy,Ry,NO,MO,FO,$6,B6,Wn,Hn,Gn,Fi={sphere:sn,point:DO,lineStart:U6,lineEnd:W6,polygonStart:function(){Fi.lineStart=hoe,Fi.lineEnd=poe},polygonEnd:function(){Fi.lineStart=U6,Fi.lineEnd=W6}};function DO(e,t){e*=Fe,t*=Fe;var n=we(t);$h(n*we(e),n*ye(e),ye(t))}function $h(e,t,n){++zh,Ty+=(e-Ty)/zh,Ny+=(t-Ny)/zh,My+=(n-My)/zh}function U6(){Fi.point=foe}function foe(e,t){e*=Fe,t*=Fe;var n=we(t);Wn=n*we(e),Hn=n*ye(e),Gn=ye(t),Fi.point=doe,$h(Wn,Hn,Gn)}function doe(e,t){e*=Fe,t*=Fe;var n=we(t),r=n*we(e),i=n*ye(e),o=ye(t),a=ni(Un((a=Hn*o-Gn*i)*a+(a=Gn*r-Wn*o)*a+(a=Wn*i-Hn*r)*a),Wn*r+Hn*i+Gn*o);Ay+=a,Fy+=a*(Wn+(Wn=r)),Dy+=a*(Hn+(Hn=i)),Ry+=a*(Gn+(Gn=o)),$h(Wn,Hn,Gn)}function W6(){Fi.point=DO}function hoe(){Fi.point=goe}function poe(){H6($6,B6),Fi.point=DO}function goe(e,t){$6=e,B6=t,e*=Fe,t*=Fe,Fi.point=H6;var n=we(t);Wn=n*we(e),Hn=n*ye(e),Gn=ye(t),$h(Wn,Hn,Gn)}function H6(e,t){e*=Fe,t*=Fe;var n=we(t),r=n*we(e),i=n*ye(e),o=ye(t),a=Hn*o-Gn*i,s=Gn*r-Wn*o,u=Wn*i-Hn*r,l=wO(a,s,u),c=lr(l),f=l&&-c/l;NO.add(f*a),MO.add(f*s),FO.add(f*u),Ay+=c,Fy+=c*(Wn+(Wn=r)),Dy+=c*(Hn+(Hn=i)),Ry+=c*(Gn+(Gn=o)),$h(Wn,Hn,Gn)}function moe(e){zh=Ay=Ty=Ny=My=Fy=Dy=Ry=0,NO=new Ln,MO=new Ln,FO=new Ln,ua(e,Fi);var t=+NO,n=+MO,r=+FO,i=wO(t,n,r);return i<yy&&(t=Fy,n=Dy,r=Ry,Ay<xe&&(t=Ty,n=Ny,r=My),i=wO(t,n,r),i<yy)?[NaN,NaN]:[ni(n,t)*At,lr(r/i)*At]}function RO(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function PO(e,t){return[Le(e)>Me?e+Math.round(-e/Bn)*Bn:e,t]}PO.invert=PO;function G6(e,t,n){return(e%=Bn)?t||n?RO(V6(e),Y6(t,n)):V6(e):t||n?Y6(t,n):PO}function q6(e){return function(t,n){return t+=e,[t>Me?t-Bn:t<-Me?t+Bn:t,n]}}function V6(e){var t=q6(e);return t.invert=q6(-e),t}function Y6(e,t){var n=we(e),r=ye(e),i=we(t),o=ye(t);function a(s,u){var l=we(u),c=we(s)*l,f=ye(s)*l,d=ye(u),h=d*n+c*r;return[ni(f*i-h*o,c*n-d*r),lr(h*i+f*o)]}return a.invert=function(s,u){var l=we(u),c=we(s)*l,f=ye(s)*l,d=ye(u),h=d*i-f*o;return[ni(f*i+d*o,c*n+h*r),lr(h*n-c*r)]},a}function yoe(e){e=G6(e[0]*Fe,e[1]*Fe,e.length>2?e[2]*Fe:0);function t(n){return n=e(n[0]*Fe,n[1]*Fe),n[0]*=At,n[1]*=At,n}return t.invert=function(n){return n=e.invert(n[0]*Fe,n[1]*Fe),n[0]*=At,n[1]*=At,n},t}function voe(e,t,n,r,i,o){if(!!n){var a=we(t),s=ye(t),u=r*n;i==null?(i=t+r*Bn,o=t-u/2):(i=X6(a,i),o=X6(a,o),(r>0?i<o:i>o)&&(i+=r*Bn));for(var l,c=i;r>0?c>o:c<o;c-=u)l=Oy([a,-s*we(c),-s*ye(c)]),e.point(l[0],l[1])}}function X6(e,t){t=Uu(t),t[0]-=e,_y(t);var n=C6(-t[1]);return((-t[2]<0?-n:n)+Bn-xe)%Bn}function K6(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:sn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Py(e,t){return Le(e[0]-t[0])<xe&&Le(e[1]-t[1])<xe}function jy(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Q6(e,t,n,r,i){var o=[],a=[],s,u;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],y=p[g],v;if(Py(m,y)){if(!m[2]&&!y[2]){for(i.lineStart(),s=0;s<g;++s)i.point((m=p[s])[0],m[1]);i.lineEnd();return}y[0]+=2*xe}o.push(v=new jy(m,p,null,!0)),a.push(v.o=new jy(m,null,v,!1)),o.push(v=new jy(y,p,null,!1)),a.push(v.o=new jy(y,null,v,!0))}}),!!o.length){for(a.sort(t),J6(o),J6(a),s=0,u=a.length;s<u;++s)a[s].e=n=!n;for(var l=o[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(s=0,u=c.length;s<u;++s)i.point((f=c[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,s=c.length-1;s>=0;--s)i.point((f=c[s])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function J6(e){if(!!(t=e.length)){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function jO(e){return Le(e[0])<=Me?e[0]:ri(e[0])*((Le(e[0])+Me)%Bn-Me)}function boe(e,t){var n=jO(t),r=t[1],i=ye(r),o=[ye(n),-we(n),0],a=0,s=0,u=new Ln;i===1?r=St+xe:i===-1&&(r=-St-xe);for(var l=0,c=e.length;l<c;++l)if(!!(d=(f=e[l]).length))for(var f,d,h=f[d-1],p=jO(h),g=h[1]/2+vy,m=ye(g),y=we(g),v=0;v<d;++v,p=x,m=E,y=S,h=b){var b=f[v],x=jO(b),w=b[1]/2+vy,E=ye(w),S=we(w),_=x-p,M=_>=0?1:-1,D=M*_,C=D>Me,A=m*E;if(u.add(ni(A*M*ye(D),y*S+A*we(D))),a+=C?_+M*Bn:_,C^p>=n^x>=n){var k=Uc(Uu(h),Uu(b));_y(k);var N=Uc(o,k);_y(N);var T=(C^_>=0?-1:1)*lr(N[2]);(r>T||r===T&&(k[0]||k[1]))&&(s+=C^_>=0?1:-1)}}return(a<-xe||a<xe&&u<-yy)^s&1}function Z6(e,t,n,r){return function(i){var o=t(i),a=K6(),s=t(a),u=!1,l,c,f,d={point:h,lineStart:g,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=m,c=eD(c);var x=boe(l,r);c.length?(u||(i.polygonStart(),u=!0),Q6(c,woe,x,n,i)):x&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(x,w){e(x,w)&&i.point(x,w)}function p(x,w){o.point(x,w)}function g(){d.point=p,o.lineStart()}function m(){d.point=h,o.lineEnd()}function y(x,w){f.push([x,w]),s.point(x,w)}function v(){s.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),s.lineEnd();var x=s.clean(),w=a.result(),E,S=w.length,_,M,D;if(f.pop(),l.push(f),f=null,!!S){if(x&1){if(M=w[0],(_=M.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),E=0;E<_;++E)i.point((D=M[E])[0],D[1]);i.lineEnd()}return}S>1&&x&2&&w.push(w.pop().concat(w.shift())),c.push(w.filter(xoe))}}return d}}function xoe(e){return e.length>1}function woe(e,t){return((e=e.x)[0]<0?e[1]-St-xe:St-e[1])-((t=t.x)[0]<0?t[1]-St-xe:St-t[1])}var eI=Z6(function(){return!0},Soe,Ooe,[-Me,-St]);function Soe(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var s=o>0?Me:-Me,u=Le(o-t);Le(u-Me)<xe?(e.point(t,n=(n+a)/2>0?St:-St),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),i=0):r!==s&&u>=Me&&(Le(t-r)<xe&&(t-=r*xe),Le(o-s)<xe&&(o-=s*xe),n=Eoe(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=o,n=a),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Eoe(e,t,n,r){var i,o,a=ye(e-n);return Le(a)>xe?Bc((ye(t)*(o=we(r))*ye(n)-ye(r)*(i=we(t))*ye(e))/(i*o*a)):(t+r)/2}function Ooe(e,t,n,r){var i;if(e==null)i=n*St,r.point(-Me,i),r.point(0,i),r.point(Me,i),r.point(Me,0),r.point(Me,-i),r.point(0,-i),r.point(-Me,-i),r.point(-Me,0),r.point(-Me,i);else if(Le(e[0]-t[0])>xe){var o=e[0]<t[0]?Me:-Me;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function koe(e){var t=we(e),n=6*Fe,r=t>0,i=Le(t)>xe;function o(c,f,d,h){voe(h,e,n,d,c,f)}function a(c,f){return we(c)*we(f)>t}function s(c){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(m,y){var v=[m,y],b,x=a(m,y),w=r?x?0:l(m,y):x?l(m+(m<0?Me:-Me),y):0;if(!f&&(p=h=x)&&c.lineStart(),x!==h&&(b=u(f,v),(!b||Py(f,b)||Py(v,b))&&(v[2]=1)),x!==h)g=0,x?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^x){var E;!(w&d)&&(E=u(v,f,!0))&&(g=0,r?(c.lineStart(),c.point(E[0][0],E[0][1]),c.point(E[1][0],E[1][1]),c.lineEnd()):(c.point(E[1][0],E[1][1]),c.lineEnd(),c.lineStart(),c.point(E[0][0],E[0][1],3)))}x&&(!f||!Py(f,v))&&c.point(v[0],v[1]),f=v,h=x,d=w},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function u(c,f,d){var h=Uu(c),p=Uu(f),g=[1,0,0],m=Uc(h,p),y=ky(m,m),v=m[0],b=y-v*v;if(!b)return!d&&c;var x=t*y/b,w=-t*v/b,E=Uc(g,m),S=Cy(g,x),_=Cy(m,w);AO(S,_);var M=E,D=ky(S,M),C=ky(M,M),A=D*D-C*(ky(S,S)-1);if(!(A<0)){var k=Un(A),N=Cy(M,(-D-k)/C);if(AO(N,S),N=Oy(N),!d)return N;var T=c[0],F=f[0],L=c[1],R=f[1],B;F<T&&(B=T,T=F,F=B);var O=F-T,j=Le(O-Me)<xe,P=j||O<xe;if(!j&&R<L&&(B=L,L=R,R=B),P?j?L+R>0^N[1]<(Le(N[0]-T)<xe?L:R):L<=N[1]&&N[1]<=R:O>Me^(T<=N[0]&&N[0]<=F)){var I=Cy(M,(-D+k)/C);return AO(I,S),[N,Oy(I)]}}}function l(c,f){var d=r?e:Me-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return Z6(a,s,o,r?[0,-e]:[-Me,e-Me])}function Coe(e,t,n,r,i,o){var a=e[0],s=e[1],u=t[0],l=t[1],c=0,f=1,d=u-a,h=l-s,p;if(p=n-a,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-a,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-s,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=o-s,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=a+c*d,e[1]=s+c*h),f<1&&(t[0]=a+f*d,t[1]=s+f*h),!0}}}}}var Bh=1e9,Iy=-Bh;function tI(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function o(l,c,f,d){var h=0,p=0;if(l==null||(h=a(l,f))!==(p=a(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function a(l,c){return Le(l[0]-e)<xe?c>0?0:3:Le(l[0]-n)<xe?c>0?2:1:Le(l[1]-t)<xe?c>0?1:0:c>0?3:2}function s(l,c){return u(l.x,c.x)}function u(l,c){var f=a(l,1),d=a(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=K6(),d,h,p,g,m,y,v,b,x,w,E,S={point:_,lineStart:A,lineEnd:k,polygonStart:D,polygonEnd:C};function _(T,F){i(T,F)&&c.point(T,F)}function M(){for(var T=0,F=0,L=h.length;F<L;++F)for(var R=h[F],B=1,O=R.length,j=R[0],P,I,$=j[0],G=j[1];B<O;++B)P=$,I=G,j=R[B],$=j[0],G=j[1],I<=r?G>r&&($-P)*(r-I)>(G-I)*(e-P)&&++T:G<=r&&($-P)*(r-I)<(G-I)*(e-P)&&--T;return T}function D(){c=f,d=[],h=[],E=!0}function C(){var T=M(),F=E&&T,L=(d=eD(d)).length;(F||L)&&(l.polygonStart(),F&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),L&&Q6(d,s,T,o,l),l.polygonEnd()),c=l,d=h=p=null}function A(){S.point=N,h&&h.push(p=[]),w=!0,x=!1,v=b=NaN}function k(){d&&(N(g,m),y&&x&&f.rejoin(),d.push(f.result())),S.point=_,x&&c.lineEnd()}function N(T,F){var L=i(T,F);if(h&&p.push([T,F]),w)g=T,m=F,y=L,w=!1,L&&(c.lineStart(),c.point(T,F));else if(L&&x)c.point(T,F);else{var R=[v=Math.max(Iy,Math.min(Bh,v)),b=Math.max(Iy,Math.min(Bh,b))],B=[T=Math.max(Iy,Math.min(Bh,T)),F=Math.max(Iy,Math.min(Bh,F))];Coe(R,B,e,t,n,r)?(x||(c.lineStart(),c.point(R[0],R[1])),c.point(B[0],B[1]),L||c.lineEnd(),E=!1):L&&(c.lineStart(),c.point(T,F),E=!1)}v=T,b=F,x=L}return S}}function nI(e,t,n){var r=Mr(e,t-xe,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function rI(e,t,n){var r=Mr(e,t-xe,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function _oe(){var e,t,n,r,i,o,a,s,u=10,l=u,c=90,f=360,d,h,p,g,m=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Mr(by(r/c)*c,n,c).map(p).concat(Mr(by(s/f)*f,a,f).map(g)).concat(Mr(by(t/u)*u,e,u).filter(function(b){return Le(b%c)>xe}).map(d)).concat(Mr(by(o/l)*l,i,l).filter(function(b){return Le(b%f)>xe}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(a).slice(1),p(n).reverse().slice(1),g(s).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],s=+b[0][1],a=+b[1][1],r>n&&(b=r,r=n,n=b),s>a&&(b=s,s=a,a=b),y.precision(m)):[[r,s],[n,a]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],o=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),o>i&&(b=o,o=i,i=b),y.precision(m)):[[t,o],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(m=+b,d=nI(o,i,90),h=rI(t,e,m),p=nI(s,a,90),g=rI(r,n,m),y):m},y.extentMajor([[-180,-90+xe],[180,90-xe]]).extentMinor([[-180,-80-xe],[180,80+xe]])}var Uh=e=>e,IO=new Ln,LO=new Ln,iI,oI,zO,$O,Os={point:sn,lineStart:sn,lineEnd:sn,polygonStart:function(){Os.lineStart=Aoe,Os.lineEnd=Noe},polygonEnd:function(){Os.lineStart=Os.lineEnd=Os.point=sn,IO.add(Le(LO)),LO=new Ln},result:function(){var e=IO/2;return IO=new Ln,e}};function Aoe(){Os.point=Toe}function Toe(e,t){Os.point=aI,iI=zO=e,oI=$O=t}function aI(e,t){LO.add($O*e-zO*t),zO=e,$O=t}function Noe(){aI(iI,oI)}var sI=Os,Hc=1/0,Ly=Hc,Wh=-Hc,zy=Wh,Moe={point:Foe,lineStart:sn,lineEnd:sn,polygonStart:sn,polygonEnd:sn,result:function(){var e=[[Hc,Ly],[Wh,zy]];return Wh=zy=-(Ly=Hc=1/0),e}};function Foe(e,t){e<Hc&&(Hc=e),e>Wh&&(Wh=e),t<Ly&&(Ly=t),t>zy&&(zy=t)}var $y=Moe,BO=0,UO=0,Hh=0,By=0,Uy=0,Gc=0,WO=0,HO=0,Gh=0,uI,lI,wo,So,Di={point:Hu,lineStart:cI,lineEnd:fI,polygonStart:function(){Di.lineStart=Poe,Di.lineEnd=joe},polygonEnd:function(){Di.point=Hu,Di.lineStart=cI,Di.lineEnd=fI},result:function(){var e=Gh?[WO/Gh,HO/Gh]:Gc?[By/Gc,Uy/Gc]:Hh?[BO/Hh,UO/Hh]:[NaN,NaN];return BO=UO=Hh=By=Uy=Gc=WO=HO=Gh=0,e}};function Hu(e,t){BO+=e,UO+=t,++Hh}function cI(){Di.point=Doe}function Doe(e,t){Di.point=Roe,Hu(wo=e,So=t)}function Roe(e,t){var n=e-wo,r=t-So,i=Un(n*n+r*r);By+=i*(wo+e)/2,Uy+=i*(So+t)/2,Gc+=i,Hu(wo=e,So=t)}function fI(){Di.point=Hu}function Poe(){Di.point=Ioe}function joe(){dI(uI,lI)}function Ioe(e,t){Di.point=dI,Hu(uI=wo=e,lI=So=t)}function dI(e,t){var n=e-wo,r=t-So,i=Un(n*n+r*r);By+=i*(wo+e)/2,Uy+=i*(So+t)/2,Gc+=i,i=So*e-wo*t,WO+=i*(wo+e),HO+=i*(So+t),Gh+=i*3,Hu(wo=e,So=t)}var hI=Di;function pI(e){this._context=e}pI.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Bn);break}}},result:sn};var GO=new Ln,qO,gI,mI,qh,Vh,Wy={point:sn,lineStart:function(){Wy.point=Loe},lineEnd:function(){qO&&yI(gI,mI),Wy.point=sn},polygonStart:function(){qO=!0},polygonEnd:function(){qO=null},result:function(){var e=+GO;return GO=new Ln,e}};function Loe(e,t){Wy.point=yI,gI=qh=e,mI=Vh=t}function yI(e,t){qh-=e,Vh-=t,GO.add(Un(qh*qh+Vh*Vh)),qh=e,Vh=t}var vI=Wy;function bI(){this._string=[]}bI.prototype={_radius:4.5,_circle:xI(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=xI(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function xI(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function wI(e,t){var n=4.5,r,i;function o(a){return a&&(typeof n=="function"&&i.pointRadius(+n.apply(this,arguments)),ua(a,r(i))),i.result()}return o.area=function(a){return ua(a,r(sI)),sI.result()},o.measure=function(a){return ua(a,r(vI)),vI.result()},o.bounds=function(a){return ua(a,r($y)),$y.result()},o.centroid=function(a){return ua(a,r(hI)),hI.result()},o.projection=function(a){return arguments.length?(r=a==null?(e=null,Uh):(e=a).stream,o):e},o.context=function(a){return arguments.length?(i=a==null?(t=null,new bI):new pI(t=a),typeof n!="function"&&i.pointRadius(n),o):t},o.pointRadius=function(a){return arguments.length?(n=typeof a=="function"?a:(i.pointRadius(+a),+a),o):n},o.projection(e).context(t)}function Hy(e){return function(t){var n=new VO;for(var r in e)n[r]=e[r];return n.stream=t,n}}function VO(){}VO.prototype={constructor:VO,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function YO(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),ua(n,e.stream($y)),t($y.result()),r!=null&&e.clipExtent(r),e}function Gy(e,t,n){return YO(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,u])},n)}function XO(e,t,n){return Gy(e,[[0,0],t],n)}function KO(e,t,n){return YO(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];e.scale(150*o).translate([a,s])},n)}function QO(e,t,n){return YO(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,s])},n)}var SI=16,zoe=we(30*Fe);function EI(e,t){return+t?Boe(e,t):$oe(e)}function $oe(e){return Hy({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Boe(e,t){function n(r,i,o,a,s,u,l,c,f,d,h,p,g,m){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&g--){var x=a+d,w=s+h,E=u+p,S=Un(x*x+w*w+E*E),_=lr(E/=S),M=Le(Le(E)-1)<xe||Le(o-f)<xe?(o+f)/2:ni(w,x),D=e(M,_),C=D[0],A=D[1],k=C-r,N=A-i,T=v*k-y*N;(T*T/b>t||Le((y*k+v*N)/b-.5)>.3||a*d+s*h+u*p<zoe)&&(n(r,i,o,a,s,u,C,A,M,x/=S,w/=S,E,g,m),m.point(C,A),n(C,A,M,x,w,E,l,c,f,d,h,p,g,m))}}return function(r){var i,o,a,s,u,l,c,f,d,h,p,g,m={point:y,lineStart:v,lineEnd:x,polygonStart:function(){r.polygonStart(),m.lineStart=w},polygonEnd:function(){r.polygonEnd(),m.lineStart=v}};function y(_,M){_=e(_,M),r.point(_[0],_[1])}function v(){f=NaN,m.point=b,r.lineStart()}function b(_,M){var D=Uu([_,M]),C=e(_,M);n(f,d,c,h,p,g,f=C[0],d=C[1],c=_,h=D[0],p=D[1],g=D[2],SI,r),r.point(f,d)}function x(){m.point=y,r.lineEnd()}function w(){v(),m.point=E,m.lineEnd=S}function E(_,M){b(i=_,M),o=f,a=d,s=h,u=p,l=g,m.point=b}function S(){n(f,d,c,h,p,g,o,a,i,s,u,l,SI,r),m.lineEnd=x,x()}return m}}var Uoe=Hy({point:function(e,t){this.stream.point(e*Fe,t*Fe)}});function Woe(e){return Hy({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Hoe(e,t,n,r,i){function o(a,s){return a*=r,s*=i,[t+e*a,n-e*s]}return o.invert=function(a,s){return[(a-t)/e*r,(n-s)/e*i]},o}function OI(e,t,n,r,i,o){if(!o)return Hoe(e,t,n,r,i);var a=we(o),s=ye(o),u=a*e,l=s*e,c=a/e,f=s/e,d=(s*n-a*t)/e,h=(s*t+a*n)/e;function p(g,m){return g*=r,m*=i,[u*g-l*m+t,n-l*g-u*m]}return p.invert=function(g,m){return[r*(c*g-f*m+d),i*(h-f*g-c*m)]},p}function Eo(e){return kI(function(){return e})()}function kI(e){var t,n=150,r=480,i=250,o=0,a=0,s=0,u=0,l=0,c,f=0,d=1,h=1,p=null,g=eI,m=null,y,v,b,x=Uh,w=.5,E,S,_,M,D;function C(T){return _(T[0]*Fe,T[1]*Fe)}function A(T){return T=_.invert(T[0],T[1]),T&&[T[0]*At,T[1]*At]}C.stream=function(T){return M&&D===T?M:M=Uoe(Woe(c)(g(E(x(D=T)))))},C.preclip=function(T){return arguments.length?(g=T,p=void 0,N()):g},C.postclip=function(T){return arguments.length?(x=T,m=y=v=b=null,N()):x},C.clipAngle=function(T){return arguments.length?(g=+T?koe(p=T*Fe):(p=null,eI),N()):p*At},C.clipExtent=function(T){return arguments.length?(x=T==null?(m=y=v=b=null,Uh):tI(m=+T[0][0],y=+T[0][1],v=+T[1][0],b=+T[1][1]),N()):m==null?null:[[m,y],[v,b]]},C.scale=function(T){return arguments.length?(n=+T,k()):n},C.translate=function(T){return arguments.length?(r=+T[0],i=+T[1],k()):[r,i]},C.center=function(T){return arguments.length?(o=T[0]%360*Fe,a=T[1]%360*Fe,k()):[o*At,a*At]},C.rotate=function(T){return arguments.length?(s=T[0]%360*Fe,u=T[1]%360*Fe,l=T.length>2?T[2]%360*Fe:0,k()):[s*At,u*At,l*At]},C.angle=function(T){return arguments.length?(f=T%360*Fe,k()):f*At},C.reflectX=function(T){return arguments.length?(d=T?-1:1,k()):d<0},C.reflectY=function(T){return arguments.length?(h=T?-1:1,k()):h<0},C.precision=function(T){return arguments.length?(E=EI(S,w=T*T),N()):Un(w)},C.fitExtent=function(T,F){return Gy(C,T,F)},C.fitSize=function(T,F){return XO(C,T,F)},C.fitWidth=function(T,F){return KO(C,T,F)},C.fitHeight=function(T,F){return QO(C,T,F)};function k(){var T=OI(n,0,0,d,h,f).apply(null,t(o,a)),F=OI(n,r-T[0],i-T[1],d,h,f);return c=G6(s,u,l),S=RO(t,F),_=RO(c,S),E=EI(S,w),N()}function N(){return M=D=null,C}return function(){return t=e.apply(this,arguments),C.invert=t.invert&&A,k()}}function JO(e){var t=0,n=Me/3,r=kI(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Fe,n=o[1]*Fe):[t*At,n*At]},i}function Goe(e){var t=we(e);function n(r,i){return[r*t,ye(i)/t]}return n.invert=function(r,i){return[r/t,lr(i*t)]},n}function qoe(e,t){var n=ye(e),r=(n+ye(t))/2;if(Le(r)<xe)return Goe(e);var i=1+n*(2*r-n),o=Un(i)/r;function a(s,u){var l=Un(i-2*r*ye(u))/r;return[l*ye(s*=r),o-l*we(s)]}return a.invert=function(s,u){var l=o-u,c=ni(s,Le(l))*ri(l);return l*r<0&&(c-=Me*ri(s)*ri(l)),[c/r,lr((i-(s*s+l*l)*r*r)/(2*r))]},a}function qy(){return JO(qoe).scale(155.424).center([0,33.6442])}function CI(){return qy().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Voe(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Yoe(){var e,t,n=CI(),r,i=qy().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=qy().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(o.point(h,p),u)||(s.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,m=(d[1]-p[1])/h;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?i:m>=.166&&m<.234&&g>=-.214&&g<-.115?a:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Voe([n.stream(t=d),i.stream(d),a.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),a.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),a.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(l),o=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+xe,g+.12*h+xe],[p-.214*h-xe,g+.234*h-xe]]).stream(l),s=a.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+xe,g+.166*h+xe],[p-.115*h-xe,g+.234*h-xe]]).stream(l),f()},c.fitExtent=function(d,h){return Gy(c,d,h)},c.fitSize=function(d,h){return XO(c,d,h)},c.fitWidth=function(d,h){return KO(c,d,h)},c.fitHeight=function(d,h){return QO(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function _I(e){return function(t,n){var r=we(t),i=we(n),o=e(r*i);return o===1/0?[2,0]:[o*i*ye(t),o*ye(n)]}}function Yh(e){return function(t,n){var r=Un(t*t+n*n),i=e(r),o=ye(i),a=we(i);return[ni(t*o,r*a),lr(r&&n*o/r)]}}var AI=_I(function(e){return Un(2/(1+e))});AI.invert=Yh(function(e){return 2*lr(e/2)});function Xoe(){return Eo(AI).scale(124.75).clipAngle(180-.001)}var TI=_I(function(e){return(e=C6(e))&&e/ye(e)});TI.invert=Yh(function(e){return e});function Koe(){return Eo(TI).scale(79.4188).clipAngle(180-.001)}function Vy(e,t){return[e,xy(EO((St+t)/2))]}Vy.invert=function(e,t){return[e,2*Bc(k6(t))-St]};function Qoe(){return NI(Vy).scale(961/Bn)}function NI(e){var t=Eo(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,s,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?a=s=u=l=null:(a=+f[0][0],s=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):a==null?null:[[a,s],[u,l]]};function c(){var f=Me*r(),d=t(yoe(t.rotate()).invert([0,0]));return o(a==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===Vy?[[Math.max(d[0]-f,a),s],[Math.min(d[0]+f,u),l]]:[[a,Math.max(d[1]-f,s)],[u,Math.min(d[1]+f,l)]])}return c()}function Yy(e){return EO((St+e)/2)}function Joe(e,t){var n=we(e),r=e===t?ye(e):xy(n/we(t))/xy(Yy(t)/Yy(e)),i=n*SO(Yy(e),r)/r;if(!r)return Vy;function o(a,s){i>0?s<-St+xe&&(s=-St+xe):s>St-xe&&(s=St-xe);var u=i/SO(Yy(s),r);return[u*ye(r*a),i-u*we(r*a)]}return o.invert=function(a,s){var u=i-s,l=ri(r)*Un(a*a+u*u),c=ni(a,Le(u))*ri(u);return u*r<0&&(c-=Me*ri(a)*ri(u)),[c/r,2*Bc(SO(i/l,1/r))-St]},o}function Zoe(){return JO(Joe).scale(109.5).parallels([30,30])}function Xy(e,t){return[e,t]}Xy.invert=Xy;function eae(){return Eo(Xy).scale(152.63)}function tae(e,t){var n=we(e),r=e===t?ye(e):(n-we(t))/(t-e),i=n/r+e;if(Le(r)<xe)return Xy;function o(a,s){var u=i-s,l=r*a;return[u*ye(l),i-u*we(l)]}return o.invert=function(a,s){var u=i-s,l=ni(a,Le(u))*ri(u);return u*r<0&&(l-=Me*ri(a)*ri(u)),[l/r,i-ri(r)*Un(a*a+u*u)]},o}function nae(){return JO(tae).scale(131.154).center([0,13.9389])}var Xh=1.340264,Kh=-.081106,Qh=893e-6,Jh=.003796,Ky=Un(3)/2,rae=12;function MI(e,t){var n=lr(Ky*ye(t)),r=n*n,i=r*r*r;return[e*we(n)/(Ky*(Xh+3*Kh*r+i*(7*Qh+9*Jh*r))),n*(Xh+Kh*r+i*(Qh+Jh*r))]}MI.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,s,u;o<rae&&(s=n*(Xh+Kh*r+i*(Qh+Jh*r))-t,u=Xh+3*Kh*r+i*(7*Qh+9*Jh*r),n-=a=s/u,r=n*n,i=r*r*r,!(Le(a)<yy));++o);return[Ky*e*(Xh+3*Kh*r+i*(7*Qh+9*Jh*r))/we(n),lr(ye(n)/Ky)]};function iae(){return Eo(MI).scale(177.158)}function FI(e,t){var n=we(t),r=we(e)*n;return[n*ye(e)/r,ye(t)/r]}FI.invert=Yh(Bc);function oae(){return Eo(FI).scale(144.049).clipAngle(60)}function aae(){var e=1,t=0,n=0,r=1,i=1,o=0,a,s,u=null,l,c,f,d=1,h=1,p=Hy({point:function(x,w){var E=b([x,w]);this.stream.point(E[0],E[1])}}),g=Uh,m,y;function v(){return d=e*r,h=e*i,m=y=null,b}function b(x){var w=x[0]*d,E=x[1]*h;if(o){var S=E*a-w*s;w=w*a+E*s,E=S}return[w+t,E+n]}return b.invert=function(x){var w=x[0]-t,E=x[1]-n;if(o){var S=E*a+w*s;w=w*a-E*s,E=S}return[w/d,E/h]},b.stream=function(x){return m&&y===x?m:m=p(g(y=x))},b.postclip=function(x){return arguments.length?(g=x,u=l=c=f=null,v()):g},b.clipExtent=function(x){return arguments.length?(g=x==null?(u=l=c=f=null,Uh):tI(u=+x[0][0],l=+x[0][1],c=+x[1][0],f=+x[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(x){return arguments.length?(e=+x,v()):e},b.translate=function(x){return arguments.length?(t=+x[0],n=+x[1],v()):[t,n]},b.angle=function(x){return arguments.length?(o=x%360*Fe,s=ye(o),a=we(o),v()):o*At},b.reflectX=function(x){return arguments.length?(r=x?-1:1,v()):r<0},b.reflectY=function(x){return arguments.length?(i=x?-1:1,v()):i<0},b.fitExtent=function(x,w){return Gy(b,x,w)},b.fitSize=function(x,w){return XO(b,x,w)},b.fitWidth=function(x,w){return KO(b,x,w)},b.fitHeight=function(x,w){return QO(b,x,w)},b}function DI(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}DI.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,a=o*o;n-=i=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(Le(i)>xe&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function sae(){return Eo(DI).scale(175.295)}function RI(e,t){return[we(t)*ye(e),ye(t)]}RI.invert=Yh(lr);function uae(){return Eo(RI).scale(249.5).clipAngle(90+xe)}function PI(e,t){var n=we(t),r=1+we(e)*n;return[n*ye(e)/r,ye(t)/r]}PI.invert=Yh(function(e){return 2*Bc(e)});function lae(){return Eo(PI).scale(250).clipAngle(142)}function jI(e,t){return[xy(EO((St+t)/2)),-e]}jI.invert=function(e,t){return[-t,2*Bc(k6(e))-St]};function cae(){var e=NI(jI),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var fae=Math.abs,ZO=Math.cos,Qy=Math.sin,dae=1e-6,II=Math.PI,ek=II/2,LI=hae(2);function zI(e){return e>1?ek:e<-1?-ek:Math.asin(e)}function hae(e){return e>0?Math.sqrt(e):0}function pae(e,t){var n=e*Qy(t),r=30,i;do t-=i=(t+Qy(t)-n)/(1+ZO(t));while(fae(i)>dae&&--r>0);return t/2}function gae(e,t,n){function r(i,o){return[e*i*ZO(o=pae(n,o)),t*Qy(o)]}return r.invert=function(i,o){return o=zI(o/t),[i/(e*ZO(o)),zI((2*o+Qy(2*o))/n)]},r}var mae=gae(LI/ek,LI,II);function yae(){return Eo(mae).scale(169.529)}const vae=wI(),tk=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function bae(e,t){return function n(){const r=t();return r.type=e,r.path=wI().projection(r),r.copy=r.copy||function(){const i=n();return tk.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},r}}function nk(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Jy[e]=bae(e,t),this):Jy[e]||null}function $I(e){return e&&e.path||vae}const Jy={albers:CI,albersusa:Yoe,azimuthalequalarea:Xoe,azimuthalequidistant:Koe,conicconformal:Zoe,conicequalarea:qy,conicequidistant:nae,equalEarth:iae,equirectangular:eae,gnomonic:oae,identity:aae,mercator:Qoe,mollweide:yae,naturalEarth1:sae,orthographic:uae,stereographic:lae,transversemercator:cae};for(const e in Jy)nk(e,Jy[e]);function xae(){}const fa=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function BI(){var e=1,t=1,n=s;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return o(u,l,d=>{n(d,u,l),wae(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,g;h<p;++h)if(Sae((g=c[h])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function o(u,l,c){var f=new Array,d=new Array,h,p,g,m,y,v;for(h=p=-1,m=u[0]>=l,fa[m<<1].forEach(b);++h<e-1;)g=m,m=u[h+1]>=l,fa[g|m<<1].forEach(b);for(fa[m<<0].forEach(b);++p<t-1;){for(h=-1,m=u[p*e+e]>=l,y=u[p*e]>=l,fa[m<<1|y<<2].forEach(b);++h<e-1;)g=m,m=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,fa[g|m<<1|y<<2|v<<3].forEach(b);fa[m|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,fa[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,fa[y<<2|v<<3].forEach(b);fa[y<<3].forEach(b);function b(x){var w=[x[0][0]+h,x[0][1]+p],E=[x[1][0]+h,x[1][1]+p],S=a(w),_=a(E),M,D;(M=d[S])?(D=f[_])?(delete d[M.end],delete f[D.start],M===D?(M.ring.push(E),c(M.ring)):f[M.start]=d[D.end]={start:M.start,end:D.end,ring:M.ring.concat(D.ring)}):(delete d[M.end],M.ring.push(E),d[M.end=_]=M):(M=f[_])?(D=d[S])?(delete f[M.start],delete d[D.end],M===D?(M.ring.push(E),c(M.ring)):f[D.start]=d[M.end]={start:D.start,end:M.end,ring:D.ring.concat(M.ring)}):(delete f[M.start],M.ring.unshift(w),f[M.start=S]=M):f[S]=d[_]={start:S,end:_,ring:[w,E]}}}function a(u){return u[0]*2+u[1]*(e+1)*4}function s(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,g=h|0,m,y=l[g*e+p];d>0&&d<e&&p===d&&(m=l[g*e+p-1],f[0]=d+(c-m)/(y-m)-.5),h>0&&h<t&&g===h&&(m=l[(g-1)*e+p],f[1]=h+(c-m)/(y-m)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Q("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?s:xae,r):n===s},r}function wae(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Sae(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Eae(e,t[n]))return i;return 0}function Eae(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var u=e[o],l=u[0],c=u[1],f=e[s],d=f[0],h=f[1];if(Oae(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function Oae(e,t,n){var r;return kae(e,t,n)&&Cae(e[r=+(e[0]===t[0])],n[r],t[r])}function kae(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}function Cae(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function UI(e,t,n){return function(r){var i=oo(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,u=t?Ya(o,a,e):s/(e+1);return Mr(o+u,a,u)}}function rk(e){q.call(this,null,e)}rk.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ne(rk,q,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||mn,o=BI().smooth(e.smooth!==!1),a=e.thresholds||_ae(r,i,e),s=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=o.size([c.width,c.height])(c.values,J(a)?a:a(c.values));Aae(f,c,l,e),f.forEach(d=>{u.push(e0(l,He(s!=null?{[s]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function _ae(e,t,n){const r=UI(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>wu(t(i).values)))}function Aae(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(_e(i)&&(i=i(n,r)),_e(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const a=(Qe(i)?i:i[0])||1,s=(Qe(i)?i:i[1])||1,u=o&&o[0]||0,l=o&&o[1]||0;e.forEach(WI(t,a,s,u,l))}function WI(e,t,n,r,i){const o=e.x1||0,a=e.y1||0,s=t*n<0;function u(f){f.forEach(l)}function l(f){s&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-a)*n+i}return function(f){return f.coordinates.forEach(u),f}}function HI(e,t,n){const r=e>=0?e:Aw(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function ik(e){return _e(e)?e:vn(+e)}function GI(){var e=u=>u[0],t=u=>u[1],n=ic,r=[-1,-1],i=960,o=500,a=2;function s(u,l){const c=HI(r[0],u,e)>>a,f=HI(r[1],u,t)>>a,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>a),g=2*h+(o>>a),m=new Float32Array(p*g),y=new Float32Array(p*g);let v=m;u.forEach(x=>{const w=d+(+e(x)>>a),E=h+(+t(x)>>a);w>=0&&w<p&&E>=0&&E<g&&(m[w+E*p]+=+n(x))}),c>0&&f>0?(qc(p,g,m,y,c),Vc(p,g,y,m,f),qc(p,g,m,y,c),Vc(p,g,y,m,f),qc(p,g,m,y,c),Vc(p,g,y,m,f)):c>0?(qc(p,g,m,y,c),qc(p,g,y,m,c),qc(p,g,m,y,c),v=y):f>0&&(Vc(p,g,m,y,f),Vc(p,g,y,m,f),Vc(p,g,m,y,f),v=y);const b=l?Math.pow(2,-2*a):1/tD(v);for(let x=0,w=p*g;x<w;++x)v[x]*=b;return{values:v,scale:1<<a,width:p,height:g,x1:d,y1:h,x2:d+(i>>a),y2:h+(o>>a)}}return s.x=function(u){return arguments.length?(e=ik(u),s):e},s.y=function(u){return arguments.length?(t=ik(u),s):t},s.weight=function(u){return arguments.length?(n=ik(u),s):n},s.size=function(u){if(!arguments.length)return[i,o];var l=+u[0],c=+u[1];return l>=0&&c>=0||Q("invalid size"),i=l,o=c,s},s.cellSize=function(u){return arguments.length?((u=+u)>=1||Q("invalid cell size"),a=Math.floor(Math.log(u)/Math.LN2),s):1<<a},s.bandwidth=function(u){return arguments.length?(u=ue(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Q("invalid bandwidth"),r=u,s):r},s}function qc(e,t,n,r,i){const o=(i<<1)+1;for(let a=0;a<t;++a)for(let s=0,u=0;s<e+i;++s)s<e&&(u+=n[s+a*e]),s>=i&&(s>=o&&(u-=n[s-o+a*e]),r[s-i+a*e]=u/Math.min(s+1,e-1+o-s,o))}function Vc(e,t,n,r,i){const o=(i<<1)+1;for(let a=0;a<e;++a)for(let s=0,u=0;s<t+i;++s)s<t&&(u+=n[a+s*e]),s>=i&&(s>=o&&(u-=n[a+(s-o)*e]),r[a+(s-i)*e]=u/Math.min(s+1,t-1+o-s,o))}function ok(e){q.call(this,null,e)}ok.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Tae=["x","y","weight","size","cellSize","bandwidth"];function qI(e,t){return Tae.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ne(ok,q,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Nae(r,e.groupby),o=(e.groupby||[]).map(wt),a=qI(GI(),e),s=e.as||"grid",u=[];function l(c,f){for(let d=0;d<o.length;++d)c[o[d]]=f[d];return c}return u=i.map(c=>He(l({[s]:a(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Nae(e,t){var n=[],r=c=>c(s),i,o,a,s,u,l;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(s);return n}function ak(e){q.call(this,null,e)}ak.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ne(ak,q,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=BI().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||UI(e.count||10,e.nice,!!i),a=e.size,s,u;return i||(i=t.materialize(t.SOURCE).source,s=qI(GI(),e)(i,!0),u=WI(s,s.scale||1,s.scale||1,0,0),a=[s.width,s.height],i=s.values),o=J(o)?o:o(i),i=r.size(a)(i,o),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(He),n}});const sk="Feature",uk="FeatureCollection",Mae="MultiPoint";function lk(e){q.call(this,null,e)}lk.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ne(lk,q,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],a=i&&i[1],s=e.geojson||!i&&mn,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(gn(s))||o&&t.modified(gn(o))||a&&t.modified(gn(a)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),s&&t.visit(u,c=>n.push(s(c))),o&&a&&(t.visit(u,c=>{var f=o(c),d=a(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:sk,geometry:{type:Mae,coordinates:r}})),this.value={type:uk,features:n}}});function ck(e){q.call(this,null,e)}ck.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ne(ck,q,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||mn,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=$I(e.projection),n.materialize().reflow()):a=i===mn||t.modified(i.fields)?n.ADD_MOD:n.ADD;const s=Fae(r,e.pointRadius);return n.visit(a,u=>u[o]=r(i(u))),r.pointRadius(s),n.modifies(o)}});function Fae(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function fk(e){q.call(this,null,e)}fk.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ne(fk,q,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],a=o[0],s=o[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[a]=f[0],c[s]=f[1]):(c[a]=void 0,c[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(o)}});function dk(e){q.call(this,null,e)}dk.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ne(dk,q,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=Dae($I(e.projection),e.field||rr("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,a=>a[i]=r),n.modifies(i)}});function Dae(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),a=e.pointRadius(n)(t(i));return e.pointRadius(o),a};return r.context=i=>(e.context(i),r),r}function hk(e){q.call(this,[],e),this.generator=_oe()}hk.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ne(hk,q,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)_e(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(v5(n[0],i)):t.add.push(He(i)),n[0]=i,t}});function pk(e){q.call(this,null,e)}pk.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ne(pk,q,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||mn,o=Pae(e.opacity,e),a=Rae(e.color,e),s=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?wu(n.map(l=>wu(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=Ae({},l,u);r||(f.$max=wu(c.values||[])),l[s]=jae(c,f,a.dep?a:vn(a(f)),o.dep?o:vn(o(f)))}),t.reflow(!0).modifies(s)}});function Rae(e,t){let n;return _e(e)?(n=r=>ss(e(r,t)),n.dep=VI(e)):n=vn(ss(e||"#888")),n}function Pae(e,t){let n;return _e(e)?(n=r=>e(r,t),n.dep=VI(e)):e?n=vn(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function VI(e){if(!_e(e))return!1;const t=Oi(gn(e));return t.$x||t.$y||t.$value||t.$max}function jae(e,t,n,r){const i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,u=e.x2||i,l=e.y2||o,c=e.values,f=c?m=>c[m]:Wa,d=Sc(u-a,l-s),h=d.getContext("2d"),p=h.getImageData(0,0,u-a,l-s),g=p.data;for(let m=s,y=0;m<l;++m){t.$y=m-s;for(let v=a,b=m*i;v<u;++v,y+=4){t.$x=v-a,t.$value=f(v+b);const x=n(t);g[y+0]=x.r,g[y+1]=x.g,g[y+2]=x.b,g[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function YI(e){q.call(this,null,e),this.modified(!0)}ne(YI,q,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Lae(e.type),tk.forEach(r=>{e[r]!=null&&XI(n,r,e[r])})):tk.forEach(r=>{e.modified(r)&&XI(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Iae(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Iae(e,t){const n=zae(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Lae(e){const t=nk((e||"mercator").toLowerCase());return t||Q("Unrecognized projection type: "+e),t()}function XI(e,t,n){_e(e[t])&&e[t](n)}function zae(e){return e=ue(e),e.length===1?e[0]:{type:uk,features:e.reduce((t,n)=>t.concat($ae(n)),[])}}function $ae(e){return e.type===uk?e.features:ue(e).filter(t=>t!=null).map(t=>t.type===sk?t:{type:sk,geometry:t})}var Bae=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",contour:ak,geojson:lk,geopath:ck,geopoint:fk,geoshape:dk,graticule:hk,heatmap:pk,isocontour:rk,kde2d:ok,projection:YI});function Uae(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,a=n.length,s,u=0,l=0;for(o=0;o<a;++o)s=n[o],u+=s.x,l+=s.y;for(u=(u/a-e)*r,l=(l/a-t)*r,o=0;o<a;++o)s=n[o],s.x-=u,s.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function Wae(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return KI(this.cover(t,n),t,n,e)}function KI(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,a={data:r},s=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,g,m,y,v;if(!o)return e._root=a,e;for(;o.length;)if((g=t>=(f=(s+l)/2))?s=f:l=f,(m=n>=(d=(u+c)/2))?u=d:c=d,i=o,!(o=o[y=m<<1|g]))return i[y]=a,e;if(h=+e._x.call(null,o.data),p=+e._y.call(null,o.data),t===h&&n===p)return a.next=o,i?i[y]=a:e._root=a,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(g=t>=(f=(s+l)/2))?s=f:l=f,(m=n>=(d=(u+c)/2))?u=d:c=d;while((y=m<<1|g)==(v=(p>=d)<<1|h>=f));return i[v]=o,i[y]=a,e}function Hae(e){var t,n,r=e.length,i,o,a=new Array(r),s=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=i,s[n]=o,i<u&&(u=i),i>c&&(c=i),o<l&&(l=o),o>f&&(f=o));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)KI(this,a[n],s[n],e[n]);return this}function Gae(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a=i-n||1,s=this._root,u,l;n>e||e>=i||r>t||t>=o;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=s,s=u,a*=2,l){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function qae(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Vae(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function qn(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Yae(e,t,n){var r,i=this._x0,o=this._y0,a,s,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new qn(h,i,o,c,f)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(a=p.x0)>c||(s=p.y0)>f||(u=p.x1)<i||(l=p.y1)<o))if(h.length){var m=(a+u)/2,y=(s+l)/2;d.push(new qn(h[3],m,y,u,l),new qn(h[2],a,y,m,l),new qn(h[1],m,s,u,y),new qn(h[0],a,s,m,y)),(g=(t>=y)<<1|e>=m)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),x=v*v+b*b;if(x<n){var w=Math.sqrt(n=x);i=e-w,o=t-w,c=e+w,f=t+w,r=h.data}}return r}function Xae(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,a=this._x0,s=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,g,m,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(a+u)/2))?a=d:u=d,(g=f>=(h=(s+l)/2))?s=h:l=h,t=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(r=t,y=m)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[m]=o:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function Kae(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Qae(){return this._root}function Jae(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Zae(e){var t=[],n,r=this._root,i,o,a,s,u;for(r&&t.push(new qn(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,a=n.y0,s=n.x1,u=n.y1)&&r.length){var l=(o+s)/2,c=(a+u)/2;(i=r[3])&&t.push(new qn(i,l,c,s,u)),(i=r[2])&&t.push(new qn(i,o,c,l,u)),(i=r[1])&&t.push(new qn(i,l,a,s,c)),(i=r[0])&&t.push(new qn(i,o,a,l,c))}return this}function ese(e){var t=[],n=[],r;for(this._root&&t.push(new qn(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,u=r.x1,l=r.y1,c=(a+u)/2,f=(s+l)/2;(o=i[0])&&t.push(new qn(o,a,s,c,f)),(o=i[1])&&t.push(new qn(o,c,s,u,f)),(o=i[2])&&t.push(new qn(o,a,f,c,l)),(o=i[3])&&t.push(new qn(o,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function tse(e){return e[0]}function nse(e){return arguments.length?(this._x=e,this):this._x}function rse(e){return e[1]}function ise(e){return arguments.length?(this._y=e,this):this._y}function gk(e,t,n){var r=new mk(t==null?tse:t,n==null?rse:n,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function mk(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function QI(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Vn=gk.prototype=mk.prototype;Vn.copy=function(){var e=new mk(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=QI(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=QI(r));return e};Vn.add=Wae;Vn.addAll=Hae;Vn.cover=Gae;Vn.data=qae;Vn.extent=Vae;Vn.find=Yae;Vn.remove=Xae;Vn.removeAll=Kae;Vn.root=Qae;Vn.size=Jae;Vn.visit=Zae;Vn.visitAfter=ese;Vn.x=nse;Vn.y=ise;function Yn(e){return function(){return e}}function ks(e){return(e()-.5)*1e-6}function ose(e){return e.x+e.vx}function ase(e){return e.y+e.vy}function sse(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=Yn(e==null?1:+e));function a(){for(var l,c=t.length,f,d,h,p,g,m,y=0;y<o;++y)for(f=gk(t,ose,ase).visitAfter(s),l=0;l<c;++l)d=t[l],g=n[d.index],m=g*g,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,x,w,E,S){var _=b.data,M=b.r,D=g+M;if(_){if(_.index>d.index){var C=h-_.x-_.vx,A=p-_.y-_.vy,k=C*C+A*A;k<D*D&&(C===0&&(C=ks(r),k+=C*C),A===0&&(A=ks(r),k+=A*A),k=(D-(k=Math.sqrt(k)))/k*i,d.vx+=(C*=k)*(D=(M*=M)/(m+M)),d.vy+=(A*=k)*D,_.vx-=C*(D=1-D),_.vy-=A*D)}return}return x>h+D||E<h-D||w>p+D||S<p-D}}function s(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(!!t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return a.initialize=function(l,c){t=l,r=c,u()},a.iterations=function(l){return arguments.length?(o=+l,a):o},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Yn(+l),u(),a):e},a}function use(e){return e.index}function JI(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function lse(e){var t=use,n=f,r,i=Yn(30),o,a,s,u,l,c=1;e==null&&(e=[]);function f(m){return 1/Math.min(s[m.source.index],s[m.target.index])}function d(m){for(var y=0,v=e.length;y<c;++y)for(var b=0,x,w,E,S,_,M,D;b<v;++b)x=e[b],w=x.source,E=x.target,S=E.x+E.vx-w.x-w.vx||ks(l),_=E.y+E.vy-w.y-w.vy||ks(l),M=Math.sqrt(S*S+_*_),M=(M-o[b])/M*m*r[b],S*=M,_*=M,E.vx-=S*(D=u[b]),E.vy-=_*D,w.vx+=S*(D=1-D),w.vy+=_*D}function h(){if(!!a){var m,y=a.length,v=e.length,b=new Map(a.map((w,E)=>[t(w,E,a),w])),x;for(m=0,s=new Array(y);m<v;++m)x=e[m],x.index=m,typeof x.source!="object"&&(x.source=JI(b,x.source)),typeof x.target!="object"&&(x.target=JI(b,x.target)),s[x.source.index]=(s[x.source.index]||0)+1,s[x.target.index]=(s[x.target.index]||0)+1;for(m=0,u=new Array(v);m<v;++m)x=e[m],u[m]=s[x.source.index]/(s[x.source.index]+s[x.target.index]);r=new Array(v),p(),o=new Array(v),g()}}function p(){if(!!a)for(var m=0,y=e.length;m<y;++m)r[m]=+n(e[m],m,e)}function g(){if(!!a)for(var m=0,y=e.length;m<y;++m)o[m]=+i(e[m],m,e)}return d.initialize=function(m,y){a=m,l=y,h()},d.links=function(m){return arguments.length?(e=m,h(),d):e},d.id=function(m){return arguments.length?(t=m,d):t},d.iterations=function(m){return arguments.length?(c=+m,d):c},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Yn(+m),p(),d):n},d.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Yn(+m),g(),d):i},d}var cse={value:()=>{}};function ZI(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Zy(n)}function Zy(e){this._=e}function fse(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Zy.prototype=ZI.prototype={constructor:Zy,on:function(e,t){var n=this._,r=fse(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=dse(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=eL(n[i],e.name,t);else if(t==null)for(i in n)n[i]=eL(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Zy(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function dse(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function eL(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=cse,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Yc=0,Zh=0,ep=0,tL=1e3,e1,tp,t1=0,Gu=0,n1=0,np=typeof performance=="object"&&performance.now?performance:Date,nL=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function yk(){return Gu||(nL(hse),Gu=np.now()+n1)}function hse(){Gu=0}function r1(){this._call=this._time=this._next=null}r1.prototype=rL.prototype={constructor:r1,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?yk():+n)+(t==null?0:+t),!this._next&&tp!==this&&(tp?tp._next=this:e1=this,tp=this),this._call=e,this._time=n,vk()},stop:function(){this._call&&(this._call=null,this._time=1/0,vk())}};function rL(e,t,n){var r=new r1;return r.restart(e,t,n),r}function pse(){yk(),++Yc;for(var e=e1,t;e;)(t=Gu-e._time)>=0&&e._call.call(null,t),e=e._next;--Yc}function iL(){Gu=(t1=np.now())+n1,Yc=Zh=0;try{pse()}finally{Yc=0,mse(),Gu=0}}function gse(){var e=np.now(),t=e-t1;t>tL&&(n1-=t,t1=e)}function mse(){for(var e,t=e1,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:e1=n);tp=e,vk(r)}function vk(e){if(!Yc){Zh&&(Zh=clearTimeout(Zh));var t=e-Gu;t>24?(e<1/0&&(Zh=setTimeout(iL,e-np.now()-n1)),ep&&(ep=clearInterval(ep))):(ep||(t1=np.now(),ep=setInterval(gse,tL)),Yc=1,nL(iL))}}function yse(e,t,n){var r=new r1,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,a,s){a=+a,s=s==null?yk():+s,r._restart(function u(l){l+=i,r._restart(u,i+=a,s),o(l)},a,s)},r.restart(e,t,n),r)}const vse=1664525,bse=1013904223,oL=4294967296;function xse(){let e=1;return()=>(e=(vse*e+bse)%oL)/oL}function wse(e){return e.x}function Sse(e){return e.y}var Ese=10,Ose=Math.PI*(3-Math.sqrt(5));function kse(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=rL(f),l=ZI("tick","end"),c=xse();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(g){var m,y=e.length,v;g===void 0&&(g=1);for(var b=0;b<g;++b)for(n+=(o-n)*i,s.forEach(function(x){x(n)}),m=0;m<y;++m)v=e[m],v.fx==null?v.x+=v.vx*=a:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=a:(v.y=v.fy,v.vy=0);return t}function h(){for(var g=0,m=e.length,y;g<m;++g){if(y=e[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=Ese*Math.sqrt(.5+g),b=g*Ose;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(g){return g.initialize&&g.initialize(e,c),g}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),s.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(o=+g,t):o},velocityDecay:function(g){return arguments.length?(a=1-g,t):1-a},randomSource:function(g){return arguments.length?(c=g,s.forEach(p),t):c},force:function(g,m){return arguments.length>1?(m==null?s.delete(g):s.set(g,p(m)),t):s.get(g)},find:function(g,m,y){var v=0,b=e.length,x,w,E,S,_;for(y==null?y=1/0:y*=y,v=0;v<b;++v)S=e[v],x=g-S.x,w=m-S.y,E=x*x+w*w,E<y&&(_=S,y=E);return _},on:function(g,m){return arguments.length>1?(l.on(g,m),t):l.on(g)}}}function Cse(){var e,t,n,r,i=Yn(-30),o,a=1,s=1/0,u=.81;function l(h){var p,g=e.length,m=gk(e,wse,Sse).visitAfter(f);for(r=h,p=0;p<g;++p)t=e[p],m.visit(d)}function c(){if(!!e){var h,p=e.length,g;for(o=new Array(p),h=0;h<p;++h)g=e[h],o[g.index]=+i(g,h,e)}}function f(h){var p=0,g,m,y=0,v,b,x;if(h.length){for(v=b=x=0;x<4;++x)(g=h[x])&&(m=Math.abs(g.value))&&(p+=g.value,y+=m,v+=m*g.x,b+=m*g.y);h.x=v/y,h.y=b/y}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=o[g.data.index];while(g=g.next)}h.value=p}function d(h,p,g,m){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=m-p,x=y*y+v*v;if(b*b/u<x)return x<s&&(y===0&&(y=ks(n),x+=y*y),v===0&&(v=ks(n),x+=v*v),x<a&&(x=Math.sqrt(a*x)),t.vx+=y*h.value*r/x,t.vy+=v*h.value*r/x),!0;if(h.length||x>=s)return;(h.data!==t||h.next)&&(y===0&&(y=ks(n),x+=y*y),v===0&&(v=ks(n),x+=v*v),x<a&&(x=Math.sqrt(a*x)));do h.data!==t&&(b=o[h.data.index]*r/x,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Yn(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.distanceMax=function(h){return arguments.length?(s=h*h,l):Math.sqrt(s)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function _se(e){var t=Yn(.1),n,r,i;typeof e!="function"&&(e=Yn(e==null?0:+e));function o(s){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*s}function a(){if(!!n){var s,u=n.length;for(r=new Array(u),i=new Array(u),s=0;s<u;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:Yn(+s),a(),o):t},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:Yn(+s),a(),o):e},o}function Ase(e){var t=Yn(.1),n,r,i;typeof e!="function"&&(e=Yn(e==null?0:+e));function o(s){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*s}function a(){if(!!n){var s,u=n.length;for(r=new Array(u),i=new Array(u),s=0;s<u;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:Yn(+s),a(),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:Yn(+s),a(),o):e},o}const aL={center:Uae,collide:sse,nbody:Cse,link:lse,x:_se,y:Ase},rp="forces",bk=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Tse=["static","iterations"],sL=["x","y","vx","vy"];function xk(e){q.call(this,null,e)}xk.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:sL}]};ne(xk,q,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(bk),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&uL(n,e,0,t)):(this.value=n=Mse(t.source,e),n.on("tick",Nse(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Tse)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let s=this._argops,u=0,l=s.length,c;u<l;++u)if(c=s[u],!(c.name!==rp||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,o=r.length,a;i<o;++i)if(r[i].name==="links"&&(a=r[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(sL)}});function Nse(e,t){return()=>e.touch(t).run()}function Mse(e,t){const n=kse(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),uL(n,t,!0).on("end",()=>o=!0)}function uL(e,t,n,r){var i=ue(t.forces),o,a,s,u;for(o=0,a=bk.length;o<a;++o)s=bk[o],s!==rp&&t.modified(s)&&e[s](t[s]);for(o=0,a=i.length;o<a;++o)u=rp+o,s=n||t.modified(rp,o)?Dse(i[o]):r&&Fse(i[o],r)?e.force(u):null,s&&e.force(u,s);for(a=e.numForces||0;o<a;++o)e.force(rp+o,null);return e.numForces=i.length,e}function Fse(e,t){var n,r;for(n in e)if(_e(r=e[n])&&t.modified(gn(r)))return 1;return 0}function Dse(e){var t,n;pe(aL,e.force)||Q("Unrecognized force: "+e.force),t=aL[e.force]();for(n in e)_e(t[n])&&Rse(t[n],e[n],e);return t}function Rse(e,t,n){e(_e(t)?r=>t(r,n):t)}var Pse=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",force:xk});function jse(e,t){return e.parent===t.parent?1:2}function Ise(e){return e.reduce(Lse,0)/e.length}function Lse(e,t){return e+t.x}function zse(e){return 1+e.reduce($se,0)}function $se(e,t){return Math.max(e,t.y)}function Bse(e){for(var t;t=e.children;)e=t[0];return e}function Use(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Wse(){var e=jse,t=1,n=1,r=!1;function i(o){var a,s=0;o.eachAfter(function(d){var h=d.children;h?(d.x=Ise(h),d.y=zse(h)):(d.x=a?s+=e(d,a):0,d.y=0,a=d)});var u=Bse(o),l=Use(o),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function Hse(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Gse(){return this.eachAfter(Hse)}function qse(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Vse(e,t){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function Yse(e,t){for(var n=this,r=[n],i=[],o,a,s,u=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function Xse(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Kse(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Qse(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Jse(e){for(var t=this,n=Zse(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Zse(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function eue(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function tue(){return Array.from(this)}function nue(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function rue(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*iue(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function wk(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=sue)):t===void 0&&(t=aue);for(var n=new Xc(e),r,i=[n],o,a,s,u;r=i.pop();)if((a=t(r.data))&&(u=(a=Array.from(a)).length))for(r.children=a,s=u-1;s>=0;--s)i.push(o=a[s]=new Xc(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(lL)}function oue(){return wk(this).eachBefore(uue)}function aue(e){return e.children}function sue(e){return Array.isArray(e)?e[1]:null}function uue(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function lL(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Xc(e){this.data=e,this.depth=this.height=0,this.parent=null}Xc.prototype=wk.prototype={constructor:Xc,count:Gse,each:qse,eachAfter:Yse,eachBefore:Vse,find:Xse,sum:Kse,sort:Qse,path:Jse,ancestors:eue,descendants:tue,leaves:nue,links:rue,copy:oue,[Symbol.iterator]:iue};function lue(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function cue(e){for(var t=e.length,n,r;t;)r=Math.random()*t--|0,n=e[t],e[t]=e[r],e[r]=n;return e}function fue(e){for(var t=0,n=(e=cue(Array.from(e))).length,r=[],i,o;t<n;)i=e[t],o&&cL(o,i)?++t:(o=hue(r=due(r,i)),t=0);return o}function due(e,t){var n,r;if(Sk(t,e))return[t];for(n=0;n<e.length;++n)if(i1(t,e[n])&&Sk(ip(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(i1(ip(e[n],e[r]),t)&&i1(ip(e[n],t),e[r])&&i1(ip(e[r],t),e[n])&&Sk(fL(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function i1(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function cL(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Sk(e,t){for(var n=0;n<t.length;++n)if(!cL(e,t[n]))return!1;return!0}function hue(e){switch(e.length){case 1:return pue(e[0]);case 2:return ip(e[0],e[1]);case 3:return fL(e[0],e[1],e[2])}}function pue(e){return{x:e.x,y:e.y,r:e.r}}function ip(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,u=o-n,l=a-r,c=s-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+a+l/f*c)/2,r:(f+i+s)/2}}function fL(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-a,h=r-l,p=i-s,g=i-c,m=u-o,y=f-o,v=r*r+i*i-o*o,b=v-a*a-s*s+u*u,x=v-l*l-c*c+f*f,w=h*p-d*g,E=(p*x-g*b)/(w*2)-r,S=(g*m-p*y)/w,_=(h*b-d*x)/(w*2)-i,M=(d*y-h*m)/w,D=S*S+M*M-1,C=2*(o+E*S+_*M),A=E*E+_*_-o*o,k=-(D?(C+Math.sqrt(C*C-4*D*A))/(2*D):A/C);return{x:r+E+S*k,y:i+_+M*k,r:k}}function dL(e,t,n){var r=e.x-t.x,i,o,a=e.y-t.y,s,u,l=r*r+a*a;l?(o=t.r+n.r,o*=o,u=e.r+n.r,u*=u,o>u?(i=(l+u-o)/(2*l),s=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-s*a,n.y=e.y-i*a+s*r):(i=(l+o-u)/(2*l),s=Math.sqrt(Math.max(0,o/l-i*i)),n.x=t.x+i*r-s*a,n.y=t.y+i*a+s*r)):(n.x=t.x+n.r,n.y=t.y)}function hL(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function pL(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function o1(e){this._=e,this.next=null,this.previous=null}function gue(e){if(!(i=(e=lue(e)).length))return 0;var t,n,r,i,o,a,s,u,l,c,f;if(t=e[0],t.x=0,t.y=0,!(i>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(i>2))return t.r+n.r;dL(n,t,r=e[2]),t=new o1(t),n=new o1(n),r=new o1(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(s=3;s<i;++s){dL(t._,n._,r=e[s]),r=new o1(r),u=n.next,l=t.previous,c=n._.r,f=t._.r;do if(c<=f){if(hL(u._,r._)){n=u,t.next=n,n.previous=t,--s;continue e}c+=u._.r,u=u.next}else{if(hL(l._,r._)){t=l,t.next=n,n.previous=t,--s;continue e}f+=l._.r,l=l.previous}while(u!==l.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,o=pL(t);(r=r.next)!==n;)(a=pL(r))<o&&(t=r,o=a);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=fue(t),s=0;s<i;++s)t=e[s],t.x-=r.x,t.y-=r.y;return r.r}function mue(e){return e==null?null:a1(e)}function a1(e){if(typeof e!="function")throw new Error;return e}function qu(){return 0}function Kc(e){return function(){return e}}function yue(e){return Math.sqrt(e.value)}function vue(){var e=null,t=1,n=1,r=qu;function i(o){return o.x=t/2,o.y=n/2,e?o.eachBefore(gL(e)).eachAfter(Ek(r,.5)).eachBefore(mL(1)):o.eachBefore(gL(yue)).eachAfter(Ek(qu,1)).eachAfter(Ek(r,o.r/Math.min(t,n))).eachBefore(mL(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=mue(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:Kc(+o),i):r},i}function gL(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Ek(e,t){return function(n){if(r=n.children){var r,i,o=r.length,a=e(n)*t||0,s;if(a)for(i=0;i<o;++i)r[i].r+=a;if(s=gue(r),a)for(i=0;i<o;++i)r[i].r-=a;n.r=s+a}}}function mL(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function yL(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function op(e,t,n,r,i){for(var o=e.children,a,s=-1,u=o.length,l=e.value&&(r-t)/e.value;++s<u;)a=o[s],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*l}function bue(){var e=1,t=1,n=0,r=!1;function i(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/s,a.eachBefore(o(t,s)),r&&a.eachBefore(yL),a}function o(a,s){return function(u){u.children&&op(u,u.x0,a*(u.depth+1)/s,u.x1,a*(u.depth+2)/s);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var xue={depth:-1},vL={};function wue(e){return e.id}function Sue(e){return e.parentId}function bL(){var e=wue,t=Sue;function n(r){var i=Array.from(r),o=i.length,a,s,u,l,c,f,d,h=new Map;for(s=0;s<o;++s)a=i[s],c=i[s]=new Xc(a),(f=e(a,s,r))!=null&&(f+="")&&(d=c.id=f,h.set(d,h.has(d)?vL:c)),(f=t(a,s,r))!=null&&(f+="")&&(c.parent=f);for(s=0;s<o;++s)if(c=i[s],f=c.parent){if(l=h.get(f),!l)throw new Error("missing: "+f);if(l===vL)throw new Error("ambiguous: "+f);l.children?l.children.push(c):l.children=[c],c.parent=l}else{if(u)throw new Error("multiple roots");u=c}if(!u)throw new Error("no root");if(u.parent=xue,u.eachBefore(function(p){p.depth=p.parent.depth+1,--o}).eachBefore(lL),u.parent=null,o>0)throw new Error("cycle");return u}return n.id=function(r){return arguments.length?(e=a1(r),n):e},n.parentId=function(r){return arguments.length?(t=a1(r),n):t},n}function Eue(e,t){return e.parent===t.parent?1:2}function Ok(e){var t=e.children;return t?t[0]:e.t}function kk(e){var t=e.children;return t?t[t.length-1]:e.t}function Oue(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function kue(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function Cue(e,t,n){return e.a.parent===t.parent?e.a:n}function s1(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}s1.prototype=Object.create(Xc.prototype);function _ue(e){for(var t=new s1(e,0),n,r=[t],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new s1(o[a],a)),i.parent=n;return(t.parent=new s1(null,0)).children=[t],t}function Aue(){var e=Eue,t=1,n=1,r=null;function i(l){var c=_ue(l);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(a),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,g=p-f.x,m=t/(d.x+p+g),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+g)*m,v.y=v.depth*y})}return l}function o(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){kue(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=s(l,d,l.parent.A||f[0])}function a(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function s(l,c,f){if(c){for(var d=l,h=l,p=c,g=d.parent.children[0],m=d.m,y=h.m,v=p.m,b=g.m,x;p=kk(p),d=Ok(d),p&&d;)g=Ok(g),h=kk(h),h.a=l,x=p.z+v-d.z-m+e(p._,d._),x>0&&(Oue(Cue(p,l,f),l,x),m+=x,y+=x),v+=p.m,m+=d.m,b+=g.m,y+=h.m;p&&!kk(h)&&(h.t=p,h.m+=v-y),d&&!Ok(g)&&(g.t=d,g.m+=m-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function u1(e,t,n,r,i){for(var o=e.children,a,s=-1,u=o.length,l=e.value&&(i-n)/e.value;++s<u;)a=o[s],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*l}var xL=(1+Math.sqrt(5))/2;function wL(e,t,n,r,i,o){for(var a=[],s=t.children,u,l,c=0,f=0,d=s.length,h,p,g=t.value,m,y,v,b,x,w,E;c<d;){h=i-n,p=o-r;do m=s[f++].value;while(!m&&f<d);for(y=v=m,w=Math.max(p/h,h/p)/(g*e),E=m*m*w,x=Math.max(v/E,E/y);f<d;++f){if(m+=l=s[f].value,l<y&&(y=l),l>v&&(v=l),E=m*m*w,b=Math.max(v/E,E/y),b>x){m-=l;break}x=b}a.push(u={value:m,dice:h<p,children:s.slice(c,f)}),u.dice?op(u,n,r,i,g?r+=p*m/g:o):u1(u,n,r,g?n+=h*m/g:i,o),g-=m,c=f}return a}var SL=function e(t){function n(r,i,o,a,s){wL(t,r,i,o,a,s)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(xL);function Tue(){var e=SL,t=!1,n=1,r=1,i=[0],o=qu,a=qu,s=qu,u=qu,l=qu;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(yL),d}function f(d){var h=i[d.depth],p=d.x0+h,g=d.y0+h,m=d.x1-h,y=d.y1-h;m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),d.x0=p,d.y0=g,d.x1=m,d.y1=y,d.children&&(h=i[d.depth+1]=o(d)/2,p+=l(d)-h,g+=a(d)-h,m-=s(d)-h,y-=u(d)-h,m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),e(d,p,g,m,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=a1(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:Kc(+d),c):o},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:Kc(+d),c):a},c.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:Kc(+d),c):s},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:Kc(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:Kc(+d),c):l},c}function Nue(e,t,n,r,i){var o=e.children,a,s=o.length,u,l=new Array(s+1);for(l[0]=u=a=0;a<s;++a)l[a+1]=u+=o[a].value;c(0,s,e.value,t,n,r,i);function c(f,d,h,p,g,m,y){if(f>=d-1){var v=o[f];v.x0=p,v.y0=g,v.x1=m,v.y1=y;return}for(var b=l[f],x=h/2+b,w=f+1,E=d-1;w<E;){var S=w+E>>>1;l[S]<x?w=S+1:E=S}x-l[w-1]<l[w]-x&&f+1<w&&--w;var _=l[w]-b,M=h-_;if(m-p>y-g){var D=h?(p*M+m*_)/h:m;c(f,w,_,p,g,D,y),c(w,d,M,D,g,m,y)}else{var C=h?(g*M+y*_)/h:y;c(f,w,_,p,g,m,C),c(w,d,M,p,C,m,y)}}}function Mue(e,t,n,r,i){(e.depth&1?u1:op)(e,t,n,r,i)}var Fue=function e(t){function n(r,i,o,a,s){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,g=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?op(l,i,o,a,g?o+=(s-o)*l.value/g:s):u1(l,i,o,g?i+=(a-i)*l.value/g:a,s),g-=l.value}else r._squarify=u=wL(t,r,i,o,a,s),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(xL);function Ck(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function _k(e){q.call(this,null,e)}_k.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Due=e=>e.values;ne(_k,q,{transform(e,t){t.source||Q("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(a=>{a.children&&Zm(a.data)&&i.rem.push(a.data)}),this.value=o=wk({values:ue(e.keys).reduce((a,s)=>(a.key(s),a),Rue()).entries(i.source)},Due),n&&o.each(a=>{a.children&&(a=He(a.data),i.add.push(a),i.source.push(a))}),Ck(o,me,me)),i.source.root=o,i}});function Rue(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const a=i.length,s=e[o++],u={},l={};let c=-1,f,d,h;for(;++c<a;)f=s(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],o);return l}function r(i,o){if(++o>e.length)return i;const a=[];for(const s in i)a.push({key:s,values:r(i[s],o)});return a}return t}function da(e){q.call(this,null,e)}const Pue=(e,t)=>e.parent===t.parent?1:2;ne(da,q,{transform(e,t){(!t.source||!t.source.root)&&Q(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Cu(e.sort,a=>a.data)),jue(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Pue:ic);try{this.value=n(i)}catch(a){Q(a)}return i.each(a=>Iue(a,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function jue(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function Iue(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const Ak=["x","y","r","depth","children"];function Tk(e){da.call(this,e)}Tk.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Ak.length,default:Ak}]};ne(Tk,da,{layout:vue,params:["radius","size","padding"],fields:Ak});const Nk=["x0","y0","x1","y1","depth","children"];function Mk(e){da.call(this,e)}Mk.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Nk.length,default:Nk}]};ne(Mk,da,{layout:bue,params:["size","round","padding"],fields:Nk});function Fk(e){q.call(this,null,e)}Fk.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ne(Fk,q,{transform(e,t){t.source||Q("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?Ck(bL().id(e.key).parentId(e.parentKey)(i.source),e.key,Kr):Ck(bL()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const EL={tidy:Aue,cluster:Wse},Dk=["x","y","depth","children"];function Rk(e){da.call(this,e)}Rk.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Dk.length,default:Dk}]};ne(Rk,da,{layout(e){const t=e||"tidy";if(pe(EL,t))return EL[t]();Q("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Dk});function Pk(e){q.call(this,[],e)}Pk.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ne(Pk,q,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||Q("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,a=>o[me(a)]=1),r.each(a=>{const s=a.data,u=a.parent&&a.parent.data;u&&o[me(s)]&&o[me(u)]&&i.add.push(He({source:u,target:s}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>o[me(a)]=1),n.forEach(a=>{(o[me(a.source)]||o[me(a.target)])&&i.mod.push(a)})),i}});const OL={binary:Nue,dice:op,slice:u1,slicedice:Mue,squarify:SL,resquarify:Fue},jk=["x0","y0","x1","y1","depth","children"];function Ik(e){da.call(this,e)}Ik.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:jk.length,default:jk}]};ne(Ik,da,{layout(){const e=Tue();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{pe(OL,t)?e.tile(OL[t]):Q("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:jk});var Lue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",nest:_k,pack:Tk,partition:Mk,stratify:Fk,tree:Rk,treelinks:Pk,treemap:Ik});const zue=4278190080,$ue=268435456,Bue=.0625;function Uue(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function Wue(e,t,n,r){const i=e.width,o=e.height,a=n||r,s=Sc(i,o).getContext("2d");t.forEach(m=>kL(s,m,a));const u=new Uint32Array(s.getImageData(0,0,i,o).data.buffer),l=e.bitmap(),c=a&&e.bitmap();let f,d,h,p,g;for(d=0;d<o;++d)for(f=0;f<i;++f)g=u[d*i+f]&zue,g&&(h=e(f),p=e(d),r||l.set(h,p),a&&g^$ue&&c.set(h,p));return[l,c]}function kL(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>kL(e,o.items,n))}):Rr[r].draw(e,{items:n?t.map(Hue):t})}function Hue(e){const t=e0(e,{});return t.stroke&&(t.strokeOpacity=1),t.fill&&(t.fillOpacity=Bue,t.stroke="#000",t.strokeOpacity=1,t.strokeWidth=2),t}const ha=5,Xn=31,ap=32,Cs=new Uint32Array(ap+1),Ri=new Uint32Array(ap+1);Ri[0]=0;Cs[0]=~Ri[0];for(let e=1;e<=ap;++e)Ri[e]=Ri[e-1]<<1|1,Cs[e]=~Ri[e];function Gue(e,t){const n=new Uint32Array(~~((e*t+ap)/ap));function r(o,a){n[o]|=a}function i(o,a){n[o]&=a}return{array:n,get:(o,a)=>{const s=a*e+o;return n[s>>>ha]&1<<(s&Xn)},set:(o,a)=>{const s=a*e+o;r(s>>>ha,1<<(s&Xn))},clear:(o,a)=>{const s=a*e+o;i(s>>>ha,~(1<<(s&Xn)))},getRange:(o,a,s,u)=>{let l=u,c,f,d,h;for(;l>=a;--l)if(c=l*e+o,f=l*e+s,d=c>>>ha,h=f>>>ha,d===h){if(n[d]&Cs[c&Xn]&Ri[(f&Xn)+1])return!0}else{if(n[d]&Cs[c&Xn]||n[h]&Ri[(f&Xn)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(o,a,s,u)=>{let l,c,f,d,h;for(;a<=u;++a)if(l=a*e+o,c=a*e+s,f=l>>>ha,d=c>>>ha,f===d)r(f,Cs[l&Xn]&Ri[(c&Xn)+1]);else for(r(f,Cs[l&Xn]),r(d,Ri[(c&Xn)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(o,a,s,u)=>{let l,c,f,d,h;for(;a<=u;++a)if(l=a*e+o,c=a*e+s,f=l>>>ha,d=c>>>ha,f===d)i(f,Ri[l&Xn]|Cs[(c&Xn)+1]);else for(i(f,Ri[l&Xn]),i(d,Cs[(c&Xn)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(o,a,s,u)=>o<0||a<0||u>=t||s>=e}}function que(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=s=>~~((s+n)/r);return a.invert=s=>s*r-n,a.bitmap=()=>Gue(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function Vue(e,t,n,r){const i=e.width,o=e.height;return function(a){const s=a.datum.datum.items[r].items,u=s.length,l=a.datum.fontSize,c=yo.width(a.datum,a.datum.text);let f=0,d,h,p,g,m,y,v;for(let b=0;b<u;++b)d=s[b].x,p=s[b].y,h=s[b].x2===void 0?d:s[b].x2,g=s[b].y2===void 0?p:s[b].y2,m=(d+h)/2,y=(p+g)/2,v=Math.abs(h-d+g-p),v>=f&&(f=v,a.x=m,a.y=y);return m=c/2,y=l/2,d=a.x-m,h=a.x+m,p=a.y-y,g=a.y+y,a.align="center",d<0&&h<=i?a.align="left":0<=d&&i<h&&(a.align="right"),a.baseline="middle",p<0&&g<=o?a.baseline="top":0<=p&&o<g&&(a.baseline="bottom"),!0}}function Yue(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function Xue(){return!1}function Kue(e,t,n,r,i,o,a,s){const u=i*o/(r*2),l=e(t-u),c=e(t+u),f=e(n-(o=o/2)),d=e(n+o);return a.outOfBounds(l,f,c,d)||a.getRange(l,f,c,d)||s&&s.getRange(l,f,c,d)}function Que(e,t,n,r,i,o,a,s){const u=i*o/(r*2);let l=e(t-u),c=e(t+u),f=e(n-(o=o/2)),d=e(n+o);return l=l>0?l:0,f=f>0?f:0,c=c<e.width?c:e.width-1,d=d<e.height?d:e.height-1,a.getRange(l,f,c,d)||s&&s.getRange(l,f,c,d)}function CL(e){return e?[Que,Xue]:[Kue,Yue]}function Jue(e,t,n,r,i){const o=e.width,a=e.height,[s,u]=CL(i),l=t[0],c=t[1];function f(d,h,p,g,m){const y=e.invert(d),v=e.invert(h);let b=p,x=a,w;if(!u(y,v,g,m,o,a)&&!s(e,y,v,m,g,b,l,c)&&!s(e,y,v,m,g,m,l,null)){for(;x-b>=1;)w=(b+x)/2,s(e,y,v,m,g,w,l,c)?x=w:b=w;if(b>p)return[y,v,b,!0]}}return function(d){const h=d.datum.datum.items[r].items,p=h.length,g=d.datum.fontSize,m=yo.width(d.datum,d.datum.text);let y=n?g:0,v=!1,b=!1,x=0,w,E,S,_,M,D,C,A,k,N,T,F,L,R,B,O,j;for(let P=0;P<p;++P){for(w=h[P].x,S=h[P].y,E=h[P].x2===void 0?w:h[P].x2,_=h[P].y2===void 0?S:h[P].y2,w>E&&(j=w,w=E,E=j),S>_&&(j=S,S=_,_=j),k=e(w),T=e(E),N=~~((k+T)/2),F=e(S),R=e(_),L=~~((F+R)/2),C=N;C>=k;--C)for(A=L;A>=F;--A)O=f(C,A,y,m,g),O&&([d.x,d.y,y,v]=O);for(C=N;C<=T;++C)for(A=L;A<=R;++A)O=f(C,A,y,m,g),O&&([d.x,d.y,y,v]=O);!v&&!n&&(B=Math.abs(E-w+_-S),M=(w+E)/2,D=(S+_)/2,B>=x&&!u(M,D,m,g,o,a)&&!s(e,M,D,g,m,g,l,null)&&(x=B,d.x=M,d.y=D,b=!0))}return v||b?(M=m/2,D=g/2,l.setRange(e(d.x-M),e(d.y-D),e(d.x+M),e(d.y+D)),d.align="center",d.baseline="middle",!0):!1}}const Zue=[-1,-1,1,1],ele=[-1,1,-1,1];function tle(e,t,n,r,i){const o=e.width,a=e.height,[s,u]=CL(i),l=t[0],c=t[1],f=e.bitmap();return function(d){const h=d.datum.datum.items[r].items,p=h.length,g=d.datum.fontSize,m=yo.width(d.datum,d.datum.text),y=[];let v=n?g:0,b=!1,x=!1,w=0,E,S,_,M,D,C,A,k,N,T,F,L;for(let R=0;R<p;++R){for(E=h[R].x,_=h[R].y,S=h[R].x2===void 0?E:h[R].x2,M=h[R].y2===void 0?_:h[R].y2,y.push([e((E+S)/2),e((_+M)/2)]);y.length;)if([A,k]=y.pop(),!(l.get(A,k)||c.get(A,k)||f.get(A,k))){f.set(A,k);for(let B=0;B<4;++B)D=A+Zue[B],C=k+ele[B],f.outOfBounds(D,C,D,C)||y.push([D,C]);if(D=e.invert(A),C=e.invert(k),N=v,T=a,!u(D,C,m,g,o,a)&&!s(e,D,C,g,m,N,l,c)&&!s(e,D,C,g,m,g,l,null)){for(;T-N>=1;)F=(N+T)/2,s(e,D,C,g,m,F,l,c)?T=F:N=F;N>v&&(d.x=D,d.y=C,v=N,b=!0)}}!b&&!n&&(L=Math.abs(S-E+M-_),D=(E+S)/2,C=(_+M)/2,L>=w&&!u(D,C,m,g,o,a)&&!s(e,D,C,g,m,g,l,null)&&(w=L,d.x=D,d.y=C,x=!0))}return b||x?(D=m/2,C=g/2,l.setRange(e(d.x-D),e(d.y-C),e(d.x+D),e(d.y+C)),d.align="center",d.baseline="middle",!0):!1}}const nle=["right","center","left"],rle=["bottom","middle","top"];function ile(e,t,n,r,i){const o=e.width,a=e.height,s=t[0],u=t[1],l=r.length;return function(c){const f=c.boundary,d=c.datum.fontSize;if(!i&&(f[2]<0||f[5]<0||f[0]>o||f[3]>a))return!1;let h=0,p,g,m,y,v,b,x,w,E,S,_,M,D,C,A;for(let k=0;k<l;++k){if(p=(n[k]&3)-1,g=(n[k]>>>2&3)-1,m=p===0&&g===0||r[k]<0,y=p&&g?Math.SQRT1_2:1,v=r[k]<0?-1:1,b=f[1+p]+r[k]*p*y,_=f[4+g]+v*d*g/2+r[k]*g*y,w=_-d/2,E=_+d/2,M=e(b),C=e(w),A=e(E),i&&(M=M<0?0:M,C=C<0?0:C,A=A>=e.height?e.height-1:A),!h)if(_L(M,M,C,A,s,u,b,b,w,E,f,m))h=yo.width(c.datum,c.datum.text);else continue;if(S=b+v*h*p/2,b=S-h/2,x=S+h/2,M=e(b),D=e(x),i&&(M=M<0?0:M,D=D>=e.width?e.width-1:D),_L(M,D,C,A,s,u,b,x,w,E,f,m))return c.x=p?p*v<0?x:b:S,c.y=g?g*v<0?E:w:_,c.align=nle[p*v+1],c.baseline=rle[g*v+1],s.setRange(M,C,D,A),!0}return!1}}function _L(e,t,n,r,i,o,a,s,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o?o.getRange(e,n,t,r)||!ole(a,u,s,l,c):i.getRange(e,n,t,r)))}function ole(e,t,n,r,i){return i[0]<=e&&n<=i[2]&&i[3]<=t&&r<=i[5]}const Lk=0,zk=4,$k=8,Bk=0,Uk=1,Wk=2,ale={"top-left":Lk+Bk,top:Lk+Uk,"top-right":Lk+Wk,left:zk+Bk,middle:zk+Uk,right:zk+Wk,"bottom-left":$k+Bk,bottom:$k+Uk,"bottom-right":$k+Wk},sle={naive:Vue,"reduced-search":Jue,floodfill:tle};function ule(e,t,n,r,i,o,a,s,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=lle(r,f),h=cle(i,f),p=fle(e[0].datum),g=p==="group"&&e[0].datum.items[u].marktype,m=g==="area",y=dle(p,g,s,u),v=l===null||l===1/0,b=que(t[0],t[1],v?0:l),x=m&&c==="naive",w=e.map(_=>({datum:_,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(_)}));let E;if(!x){n&&w.sort((M,D)=>n(M.datum,D.datum));let _=!1;for(let M=0;M<h.length&&!_;++M)_=h[M]===5||d[M]<0;p&&(a||m)&&(o=[e.map(M=>M.datum)].concat(o)),E=o.length?Wue(b,o,_,m):Uue(b,a&&w)}const S=m?sle[c](b,E,a,u,v):ile(b,E,h,d,v);return w.forEach(_=>_.opacity=+S(_)),w}function lle(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function cle(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=ale[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function fle(e){return e&&e.mark&&e.mark.marktype}function dle(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const a=o.datum.items[r].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:o=>{const a=o.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}const Hk=["x","y","opacity","align","baseline"],AL=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Gk(e){q.call(this,null,e)}Gk.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:AL},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:Hk.length,default:Hk}]};ne(Gk,q,{transform(e,t){function n(o){const a=e[o];return _e(a)&&t.modified(a.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Q("Size parameter should be specified as a [width, height] array.");const i=e.as||Hk;return ule(t.materialize(t.SOURCE).source||[],e.size,e.sort,ue(e.offset==null?1:e.offset),ue(e.anchor||AL),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const a=o.datum;a[i[0]]=o.x,a[i[1]]=o.y,a[i[2]]=o.opacity,a[i[3]]=o.align,a[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});var hle=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",label:Gk});function TL(e,t){var n=[],r=function(c){return c(s)},i,o,a,s,u,l;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(s);return n}function qk(e){q.call(this,null,e)}qk.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ne(qk,q,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=TL(r,e.groupby),o=(e.groupby||[]).map(wt),a=o.length,s=e.as||[wt(e.x),wt(e.y)],u=[];i.forEach(l=>{H5(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<a;++d)f[o[d]]=l.dims[d];f[s[0]]=c[0],f[s[1]]=c[1],u.push(He(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const Vk={linear:$w,log:L5,exp:z5,pow:$5,quad:Bw,poly:B5},ple=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Yk(e){q.call(this,null,e)}Yk.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Vk)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ne(Yk,q,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=TL(r,e.groupby),o=(e.groupby||[]).map(wt),a=e.method||"linear",s=e.order||3,u=ple(a,s),l=e.as||[wt(e.x),wt(e.y)],c=Vk[a],f=[];let d=e.extent;pe(Vk,a)||Q("Invalid regression method: "+a),d!=null&&a==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=c(h,e.x,e.y,s);if(e.params){f.push(He({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const m=d||oo(h,e.x),y=v=>{const b={};for(let x=0;x<o.length;++x)b[o[x]]=h.dims[x];b[l[0]]=v[0],b[l[1]]=v[1],f.push(He(b))};a==="linear"?m.forEach(v=>y([v,g.predict(v)])):c0(g.predict,m,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});var gle=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",loess:qk,regression:Yk});const NL=Math.pow(2,-52),l1=new Uint32Array(512);class c1{static from(t,n=xle,r=wle){const i=t.length,o=new Float64Array(i*2);for(let a=0;a<i;a++){const s=t[a];o[2*a]=n(s),o[2*a+1]=r(s)}return new c1(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,a=t.length>>1;let s=1/0,u=1/0,l=-1/0,c=-1/0;for(let D=0;D<a;D++){const C=t[2*D],A=t[2*D+1];C<s&&(s=C),A<u&&(u=A),C>l&&(l=C),A>c&&(c=A),this._ids[D]=D}const f=(s+l)/2,d=(u+c)/2;let h=1/0,p,g,m;for(let D=0;D<a;D++){const C=Xk(f,d,t[2*D],t[2*D+1]);C<h&&(p=D,h=C)}const y=t[2*p],v=t[2*p+1];h=1/0;for(let D=0;D<a;D++){if(D===p)continue;const C=Xk(y,v,t[2*D],t[2*D+1]);C<h&&C>0&&(g=D,h=C)}let b=t[2*g],x=t[2*g+1],w=1/0;for(let D=0;D<a;D++){if(D===p||D===g)continue;const C=vle(y,v,b,x,t[2*D],t[2*D+1]);C<w&&(m=D,w=C)}let E=t[2*m],S=t[2*m+1];if(w===1/0){for(let A=0;A<a;A++)this._dists[A]=t[2*A]-t[0]||t[2*A+1]-t[1];Qc(this._ids,this._dists,0,a-1);const D=new Uint32Array(a);let C=0;for(let A=0,k=-1/0;A<a;A++){const N=this._ids[A];this._dists[N]>k&&(D[C++]=N,k=this._dists[N])}this.hull=D.subarray(0,C),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(f1(y,v,b,x,E,S)){const D=g,C=b,A=x;g=m,b=E,x=S,m=D,E=C,S=A}const _=ble(y,v,b,x,E,S);this._cx=_.x,this._cy=_.y;for(let D=0;D<a;D++)this._dists[D]=Xk(t[2*D],t[2*D+1],_.x,_.y);Qc(this._ids,this._dists,0,a-1),this._hullStart=p;let M=3;r[p]=n[m]=g,r[g]=n[p]=m,r[m]=n[g]=p,i[p]=0,i[g]=1,i[m]=2,o.fill(-1),o[this._hashKey(y,v)]=p,o[this._hashKey(b,x)]=g,o[this._hashKey(E,S)]=m,this.trianglesLen=0,this._addTriangle(p,g,m,-1,-1,-1);for(let D=0,C,A;D<this._ids.length;D++){const k=this._ids[D],N=t[2*k],T=t[2*k+1];if(D>0&&Math.abs(N-C)<=NL&&Math.abs(T-A)<=NL||(C=N,A=T,k===p||k===g||k===m))continue;let F=0;for(let j=0,P=this._hashKey(N,T);j<this._hashSize&&(F=o[(P+j)%this._hashSize],!(F!==-1&&F!==r[F]));j++);F=n[F];let L=F,R;for(;R=r[L],!f1(N,T,t[2*L],t[2*L+1],t[2*R],t[2*R+1]);)if(L=R,L===F){L=-1;break}if(L===-1)continue;let B=this._addTriangle(L,k,r[L],-1,-1,i[L]);i[k]=this._legalize(B+2),i[L]=B,M++;let O=r[L];for(;R=r[O],f1(N,T,t[2*O],t[2*O+1],t[2*R],t[2*R+1]);)B=this._addTriangle(O,k,R,i[k],-1,i[O]),i[k]=this._legalize(B+2),r[O]=O,M--,O=R;if(L===F)for(;R=n[L],f1(N,T,t[2*R],t[2*R+1],t[2*L],t[2*L+1]);)B=this._addTriangle(R,k,L,-1,i[L],i[R]),this._legalize(B+2),i[R]=B,r[L]=L,M--,L=R;this._hullStart=n[k]=L,r[L]=n[O]=k,r[k]=O,o[this._hashKey(N,T)]=k,o[this._hashKey(t[2*L],t[2*L+1])]=L}this.hull=new Uint32Array(M);for(let D=0,C=this._hullStart;D<M;D++)this.hull[D]=C,C=r[C];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(mle(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,a=0;for(;;){const s=r[t],u=t-t%3;if(a=u+(t+2)%3,s===-1){if(o===0)break;t=l1[--o];continue}const l=s-s%3,c=u+(t+1)%3,f=l+(s+2)%3,d=n[a],h=n[t],p=n[c],g=n[f];if(yle(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[s]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(s,r[a]),this._link(a,f);const v=l+(s+1)%3;o<l1.length&&(l1[o++]=v)}else{if(o===0)break;t=l1[--o]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,a){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=n,this._triangles[s+2]=r,this._link(s,i),this._link(s+1,o),this._link(s+2,a),this.trianglesLen+=3,s}}function mle(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Xk(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function Kk(e,t,n,r,i,o){const a=(r-t)*(i-e),s=(n-e)*(o-t);return Math.abs(a-s)>=33306690738754716e-32*Math.abs(a+s)?a-s:0}function f1(e,t,n,r,i,o){return(Kk(i,o,e,t,n,r)||Kk(e,t,n,r,i,o)||Kk(n,r,i,o,e,t))<0}function yle(e,t,n,r,i,o,a,s){const u=e-a,l=t-s,c=n-a,f=r-s,d=i-a,h=o-s,p=u*u+l*l,g=c*c+f*f,m=d*d+h*h;return u*(f*m-g*h)-l*(c*m-g*d)+p*(c*h-f*d)<0}function vle(e,t,n,r,i,o){const a=n-e,s=r-t,u=i-e,l=o-t,c=a*a+s*s,f=u*u+l*l,d=.5/(a*l-s*u),h=(l*c-s*f)*d,p=(a*f-u*c)*d;return h*h+p*p}function ble(e,t,n,r,i,o){const a=n-e,s=r-t,u=i-e,l=o-t,c=a*a+s*s,f=u*u+l*l,d=.5/(a*l-s*u),h=e+(l*c-s*f)*d,p=t+(a*f-u*c)*d;return{x:h,y:p}}function Qc(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],a=t[o];let s=i-1;for(;s>=n&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=o}else{const i=n+r>>1;let o=n+1,a=r;sp(e,i,o),t[e[n]]>t[e[r]]&&sp(e,n,r),t[e[o]]>t[e[r]]&&sp(e,o,r),t[e[n]]>t[e[o]]&&sp(e,n,o);const s=e[o],u=t[s];for(;;){do o++;while(t[e[o]]<u);do a--;while(t[e[a]]>u);if(a<o)break;sp(e,o,a)}e[n+1]=e[a],e[a]=s,r-o+1>=a-n?(Qc(e,t,o,r),Qc(e,t,n,a-1)):(Qc(e,t,n,a-1),Qc(e,t,o,r))}}function sp(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function xle(e){return e[0]}function wle(e){return e[1]}const ML=1e-6;class Vu{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>ML||Math.abs(this._y1-o)>ML)&&(this._+="L"+i+","+o),!!r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Qk{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class Sle{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this,o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let h=0,p=0,g=r.length,m,y;h<g;h+=3,p+=2){const v=r[h]*2,b=r[h+1]*2,x=r[h+2]*2,w=t[v],E=t[v+1],S=t[b],_=t[b+1],M=t[x],D=t[x+1],C=S-w,A=_-E,k=M-w,N=D-E,T=C*C+A*A,F=k*k+N*N,L=(C*N-A*k)*2;if(!L)m=(w+M)/2-1e8*N,y=(E+D)/2+1e8*k;else if(Math.abs(L)<1e-8)m=(w+M)/2,y=(E+D)/2;else{const R=1/L;m=w+(N*T-A*F)*R,y=E+(C*F-k*T)*R}o[p]=m,o[p+1]=y}let a=n[n.length-1],s,u=a*4,l,c=t[2*a],f,d=t[2*a+1];i.fill(0);for(let h=0;h<n.length;++h)a=n[h],s=u,l=c,f=d,u=a*4,c=t[2*a],d=t[2*a+1],i[s+2]=i[u]=f-d,i[s+3]=i[u+1]=c-l}render(t){const n=t==null?t=new Vu:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:a,vectors:s}=this;if(o.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,g=a[h],m=a[h+1],y=a[p],v=a[p+1];this._renderSegment(g,m,y,v,t)}let u,l=o[o.length-1];for(let c=0;c<o.length;++c){u=l,l=o[c];const f=Math.floor(i[l]/3)*2,d=a[f],h=a[f+1],p=u*4,g=this._project(d,h,s[p+2],s[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Vu:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Vu:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let a=2;a<o;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Qk;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let a;const s=this._regioncode(t,n),u=this._regioncode(r,i);s===0&&u===0?(o.moveTo(t,n),o.lineTo(r,i)):(a=this._clipSegment(t,n,r,i,s,u))&&(o.moveTo(a[0],a[1]),o.lineTo(a[2],a[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i)e:for(let o=0,a=n.length;o<a;o+=2)for(let s=0,u=i.length;s<u;s+=2)if(n[o]==i[s]&&n[o+1]==i[s+1]&&n[(o+2)%a]==i[(s+u-2)%u]&&n[(o+3)%a]==i[(s+u-1)%u]){yield r;break e}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,a=r[t];if(a===-1)return null;const s=[];let u=a;do{const l=Math.floor(u/3);if(s.push(n[l*2],n[l*2+1]),u=u%3==2?u-2:u+1,o[u]!==t)break;u=i[u]}while(u!==a&&u!==-1);return s}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n)}_clipFinite(t,n){const r=n.length;let i=null,o,a,s=n[r-2],u=n[r-1],l,c=this._regioncode(s,u),f,d;for(let h=0;h<r;h+=2)if(o=s,a=u,s=n[h],u=n[h+1],l=c,c=this._regioncode(s,u),l===0&&c===0)f=d,d=0,i?i.push(s,u):i=[s,u];else{let p,g,m,y,v;if(l===0){if((p=this._clipSegment(o,a,s,u,l,c))===null)continue;[g,m,y,v]=p}else{if((p=this._clipSegment(s,u,o,a,c,l))===null)continue;[y,v,g,m]=p,f=d,d=this._edgecode(g,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,m):i=[g,m]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,a){for(;;){if(o===0&&a===0)return[t,n,r,i];if(o&a)return null;let s,u,l=o||a;l&8?(s=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):l&4?(s=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):l&2?(u=n+(i-n)*(this.xmax-t)/(r-t),s=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),s=this.xmin),o?(t=s,n=u,o=this._regioncode(t,n)):(r=s,i=u,a=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,a){let s=Array.from(n),u;if((u=this._project(s[0],s[1],r,i))&&s.unshift(u[0],u[1]),(u=this._project(s[s.length-2],s[s.length-1],o,a))&&s.push(u[0],u[1]),s=this._clipFinite(t,s))for(let l=0,c=s.length,f,d=this._edgecode(s[c-2],s[c-1]);l<c;l+=2)f=d,d=this._edgecode(s[l],s[l+1]),f&&d&&(l=this._edge(t,f,d,s,l),c=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,n,r,i,o){for(;n!==r;){let a,s;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,s=this.ymin;break}(i[o]!==a||i[o+1]!==s)&&this.contains(t,a,s)&&(i.splice(o,0,a,s),o+=2)}if(i.length>4)for(let a=0;a<i.length;a+=2){const s=(a+2)%i.length,u=(a+4)%i.length;(i[a]===i[s]&&i[s]===i[u]||i[a+1]===i[s+1]&&i[s+1]===i[u+1])&&(i.splice(s,2),a-=2)}return o}_project(t,n,r,i){let o=1/0,a,s,u;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<o&&(u=this.ymin,s=t+(o=a)*r)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<o&&(u=this.ymax,s=t+(o=a)*r)}if(r>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/r)<o&&(s=this.xmax,u=n+(o=a)*i)}else if(r<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/r)<o&&(s=this.xmin,u=n+(o=a)*i)}return[s,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const Ele=2*Math.PI,Jc=Math.pow;function Ole(e){return e[0]}function kle(e){return e[1]}function Cle(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],a=2*t[r+2];if((n[a]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function _le(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Jk{static from(t,n=Ole,r=kle,i){return new Jk("length"in t?Ale(t,n,r,i):Float64Array.from(Tle(t,n,r,i)))}constructor(t){this._delaunator=new c1(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Cle(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=_le(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new c1(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=o[u%3==2?u-2:u+1];(r[u]===-1||a[c]===-1)&&(a[c]=u)}for(let u=0,l=i.length;u<l;++u)s[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],this.triangles[1]=i[1],this.triangles[2]=i[1],a[i[0]]=1,i.length===2&&(a[i[1]]=0))}voronoi(t){return new Sle(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:a,collinear:s}=this;if(s){const f=s.indexOf(t);f>0&&(yield s[f-1]),f<s.length-1&&(yield s[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=a[l],l=l%3==2?l-2:l+1,a[l]!==t)return;if(l=o[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:a,halfedges:s,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=Jc(n-l[t*2],2)+Jc(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const g=Jc(n-l[p*2],2)+Jc(r-l[p*2+1],2);if(g<f&&(f=g,c=p),h=h%3==2?h-2:h+1,u[h]!==t)break;if(h=s[h],h===-1){if(h=o[(a[t]+1)%o.length],h!==p&&Jc(n-l[h*2],2)+Jc(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Vu:void 0,{points:r,halfedges:i,triangles:o}=this;for(let a=0,s=i.length;a<s;++a){const u=i[a];if(u<a)continue;const l=o[a]*2,c=o[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n=2){const r=t==null?t=new Vu:void 0,{points:i}=this;for(let o=0,a=i.length;o<a;o+=2){const s=i[o],u=i[o+1];t.moveTo(s+n,u),t.arc(s,u,n,0,Ele)}return r&&r.value()}renderHull(t){const n=t==null?t=new Vu:void 0,{hull:r,points:i}=this,o=r[0]*2,a=r.length;t.moveTo(i[o],i[o+1]);for(let s=1;s<a;++s){const u=2*r[s];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Qk;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Vu:void 0,{points:i,triangles:o}=this,a=o[t*=3]*2,s=o[t+1]*2,u=o[t+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[s],i[s+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Qk;return this.renderTriangle(t,n),n.value()}}function Ale(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let a=0;a<i;++a){const s=e[a];o[a*2]=t.call(r,s,a,e),o[a*2+1]=n.call(r,s,a,e)}return o}function*Tle(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function Zk(e){q.call(this,null,e)}Zk.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Nle=[-1e5,-1e5,1e5,1e5];ne(Zk,q,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Nle;const o=this.value=Jk.from(r,e.x,e.y).voronoi(i);for(let a=0,s=r.length;a<s;++a){const u=o.cellPolygon(a);r[a][n]=u?Mle(u):null}return t.reflow(e.modified()).modifies(n)}});function Mle(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}var Fle=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",voronoi:Zk}),eC=Math.PI/180,up=1<<11>>5,d1=1<<11;function Dle(){var e=[256,256],t,n,r,i,o,a,s,u=FL,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(Sc()),g=zle((e[0]>>5)*e[1]),m=null,y=l.length,v=-1,b=[],x=l.map(E=>({text:t(E),font:n(E),style:i(E),weight:o(E),rotate:a(E),size:~~(r(E)+1e-14),padding:s(E),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:E})).sort((E,S)=>S.size-E.size);++v<y;){var w=x[v];w.x=e[0]*(c()+.5)>>1,w.y=e[1]*(c()+.5)>>1,Rle(p,w,x,v),w.hasText&&h(g,w,m)&&(b.push(w),m?jle(m,w):m=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=e[0]>>1,w.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(up<<5)/g,p.height=d1/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}function h(p,g,m){for(var y=g.x,v=g.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),x=u(e),w=c()<.5?1:-1,E=-w,S,_,M;(S=x(E+=w))&&(_=~~S[0],M=~~S[1],!(Math.min(Math.abs(_),Math.abs(M))>=b));)if(g.x=y+_,g.y=v+M,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!m||!Ple(g,p,e[0]))&&(!m||Ile(g,m))){for(var D=g.sprite,C=g.width>>5,A=e[0]>>5,k=g.x-(C<<4),N=k&127,T=32-N,F=g.y1-g.y0,L=(g.y+g.y0)*A+(k>>5),R,B=0;B<F;B++){R=0;for(var O=0;O<=C;O++)p[L+O]|=R<<T|(O<C?(R=D[B*C+O])>>>N:0);L+=A}return g.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Yu(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Yu(p),f):i},f.fontWeight=function(p){return arguments.length?(o=Yu(p),f):o},f.rotate=function(p){return arguments.length?(a=Yu(p),f):a},f.text=function(p){return arguments.length?(t=Yu(p),f):t},f.spiral=function(p){return arguments.length?(u=$le[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=Yu(p),f):r},f.padding=function(p){return arguments.length?(s=Yu(p),f):s},f.random=function(p){return arguments.length?(c=p,f):c},f}function Rle(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(up<<5)/o,d1/o);var a=0,s=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*eC),m=Math.cos(t.rotate*eC),y=c*m,v=c*g,b=d*m,x=d*g;c=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),a+c>=up<<5&&(a=0,s+=u,u=0),s+d>=d1)break;i.translate((a+(c>>1))/o,(s+(d>>1))/o),t.rotate&&i.rotate(t.rotate*eC),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=a,t.yoff=s,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=c}for(var w=i.getImageData(0,0,(up<<5)/o,d1/o).data,E=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)E[h]=0;if(a=t.xoff,a==null)return;s=t.yoff;var S=0,_=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var M=f*p+(h>>5),D=w[(s+p)*(up<<5)+(a+h)<<2]?1<<31-h%32:0;E[M]|=D,S|=D}S?_=p:(t.y0++,d--,p--,s++)}t.y1=t.y0+_,t.sprite=E.slice(0,(t.y1-t.y0)*f)}}}function Ple(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),a=o&127,s=32-a,u=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<s|(d<i?(c=r[f*i+d])>>>a:0))&t[l+d])return!0;l+=n}return!1}function jle(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Ile(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function FL(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Lle(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var a=o<0?-1:1;switch(Math.sqrt(1+4*a*o)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function zle(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Yu(e){return typeof e=="function"?e:function(){return e}}var $le={archimedean:FL,rectangular:Lle};const DL=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Ble=["text","font","rotate","fontSize","fontStyle","fontWeight"];function tC(e){q.call(this,Dle(),e)}tC.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:DL}]};ne(tC,q,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Q("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return _e(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Ble.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,a=e.as||DL;let s=e.fontSize||14,u;if(_e(s)?u=e.fontSizeRange:s=vn(s),u){const p=s,g=Be("sqrt")().domain(oo(i,p)).range(u);s=m=>g(p(m))}i.forEach(p=>{p[a[0]]=NaN,p[a[1]]=NaN,p[a[3]]=0});const l=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(Zr).layout(),c=o.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,g,m;p<h;++p)g=l[p],m=g.datum,m[a[0]]=g.x+f,m[a[1]]=g.y+d,m[a[2]]=g.font,m[a[3]]=g.size,m[a[4]]=g.style,m[a[5]]=g.weight,m[a[6]]=g.rotate;return t.reflow(r).modifies(a)}});var Ule=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",wordcloud:tC});const Wle=e=>new Uint8Array(e),Hle=e=>new Uint16Array(e),lp=e=>new Uint32Array(e);function Gle(){let e=8,t=[],n=lp(0),r=h1(0,e),i=h1(0,e);return{data:()=>t,seen:()=>n=qle(n,t.length),add(o){for(let a=0,s=t.length,u=o.length,l;a<u;++a)l=o[a],l._index=s++,t.push(l)},remove(o,a){const s=t.length,u=Array(s-o),l=t;let c,f,d;for(f=0;!a[f]&&f<s;++f)u[f]=t[f],l[f]=f;for(d=f;f<s;++f)c=t[f],a[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,a){r[o]|=a},clear(o,a){r[o]&=~a},resize(o,a){const s=r.length;(o>s||a>e)&&(e=Math.max(a,e),r=h1(o,e,r),i=h1(o,e))}}}function qle(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function h1(e,t,n){const r=(t<257?Wle:t<65537?Hle:lp)(e);return n&&r.set(n),r}function RL(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const a=this,s=a.bisect(a.range,i.value),u=i.index,l=s[0],c=s[1],f=u.length;let d;for(d=0;d<l;++d)o[u[d]]|=r;for(d=c;d<f;++d)o[u[d]]|=r;return a}}}function PL(){let e=lp(0),t=[],n=0;function r(s,u,l){if(!u.length)return[];const c=n,f=u.length,d=lp(f);let h=Array(f),p,g,m;for(m=0;m<f;++m)h[m]=s(u[m]),d[m]=m;if(h=Vle(h,d),c)p=t,g=e,t=Array(c+f),e=lp(c+f),Yle(l,p,g,c,h,d,f,t,e);else{if(l>0)for(m=0;m<f;++m)d[m]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(s,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-s}function o(s){for(let u=0,l=n;u<l;++u)e[u]=s[e[u]]}function a(s,u){let l;return u?l=u.length:(u=t,l=n),[OX(u,s[0],0,l),$m(u,s[1],0,l)]}return{insert:r,remove:i,bisect:a,reindex:o,index:()=>e,size:()=>n}}function Vle(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),_X(e,t)}function Yle(e,t,n,r,i,o,a,s,u){let l=0,c=0,f;for(f=0;l<r&&c<a;++f)t[l]<i[c]?(s[f]=t[l],u[f]=n[l++]):(s[f]=i[c],u[f]=o[c++]+e);for(;l<r;++l,++f)s[f]=t[l],u[f]=n[l];for(;c<a;++c,++f)s[f]=i[c],u[f]=o[c]+e}function nC(e){q.call(this,Gle(),e),this._indices=null,this._dims=null}nC.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ne(nC,q,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length;let s=0,u,l;for(;s<a;++s)u=n[s].fname,l=i[u]||(i[u]=PL()),o.push(RL(l,s,r[s]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,u=s.curr(),l=s.prev(),c=s.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let g,m,y,v,b,x,w,E,S;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(x={},v=t.mod,w=0,E=v.length;w<E;++w)x[v[w]._index]=1;for(w=0;w<h;++w)S=r[w],(!a[w]||e.modified("fields",w)||t.modified(S.fields))&&(y=S.fname,(g=p[y])||(o[y]=m=PL(),p[y]=g=m.insert(S,t.source,0)),a[w]=RL(m,w,i[w]).onAdd(g,u));for(w=0,E=s.data().length;w<E;++w)b[w]||(l[w]!==u[w]?f.push(w):x[w]&&u[w]!==c&&d.push(w));return s.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,u={},l=n.add,c=i.size()+r.length,f=o.length;let d=i.size(),h,p,g;i.resize(c,f),i.add(r);const m=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=s[h].fname,g=u[p]||(u[p]=a[p].insert(s[h],r,d)),o[h].onAdd(g,m);for(;d<c;++d)y[d]=v,m[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod;let s,u,l;for(s=0,u=a.length;s<u;++s)l=a[s]._index,i[l]!==o&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,a[h]=p=o[h],o[h]=s,p!==s&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const a in r)r[a].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,a=r.length;let s=0,u,l;for(n.filters=0,l=0;l<a;++l)e.modified("query",l)&&(u=l,++s);if(s===1)s=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,s=0;l<a;++l)!e.modified("query",l)||(s|=r[l].one,this.incrementAll(r[l],i[l],o,n.add),n.rem=n.add);return s},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],g=e.one;let m,y,v;if(f<h)for(m=f,y=Math.min(h,d);m<y;++m)v=u[m],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=g;else if(f>h)for(m=h,y=Math.min(f,p);m<y;++m)v=u[m],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=g;if(d>p)for(m=Math.max(f,p),y=d;m<y;++m)v=u[m],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=g;else if(d<p)for(m=Math.max(h,d),y=p;m<y;++m)v=u[m],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),a=e.index(),s=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=s[0],d=s[1],h=e.one;let p,g,m;if(l<f)for(p=l,g=Math.min(f,c);p<g;++p)m=a[p],o[m]^=h,n.push(m);else if(l>f)for(p=f,g=Math.min(l,d);p<g;++p)m=a[p],o[m]^=h,r.push(m);if(c>d)for(p=Math.max(l,d),g=c;p<g;++p)m=a[p],o[m]^=h,n.push(m);else if(c<d)for(p=Math.max(f,c),g=d;p<g;++p)m=a[p],o[m]^=h,r.push(m);e.range=t.slice()}});function rC(e){q.call(this,null,e)}rC.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ne(rC,q,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if((i&n)==0)return t.StopPropagation;const o=t.fork(t.ALL),a=r.data(),s=r.curr(),u=r.prev(),l=c=>s[c]&n?null:a[c];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,c=>{const f=s[c]&n;return!f&&f^u[c]&n?a[c]:null}),o.filter(o.REM,c=>{const f=s[c]&n;return f&&!(f^(f^u[c]&n))?a[c]:null})):(o.filter(o.ADD,l),o.filter(o.REM,c=>(s[c]&n)===i?a[c]:null)),o.filter(o.SOURCE,c=>l(c._index))}});var Xle=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",crossfilter:nC,resolvefilter:rC});const Kle="RawCode",Xu="Literal",Qle="Property",Jle="Identifier",Zle="ArrayExpression",ece="BinaryExpression",jL="CallExpression",tce="ConditionalExpression",nce="LogicalExpression",rce="MemberExpression",ice="ObjectExpression",oce="UnaryExpression";function Pi(e){this.type=e}Pi.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=ace(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function ace(e){switch(e.type){case Zle:return e.elements;case ece:case nce:return[e.left,e.right];case jL:return[e.callee].concat(e.arguments);case tce:return[e.test,e.consequent,e.alternate];case rce:return[e.object,e.property];case ice:return e.properties;case Qle:return[e.key,e.value];case oce:return[e.argument];case Jle:case Xu:case Kle:default:return[]}}var Oo,de,K,kn,Xe,p1=1,cp=2,Ku=3,_s=4,g1=5,Qu=6,fr=7,fp=8,sce=9;Oo={};Oo[p1]="Boolean";Oo[cp]="<end>";Oo[Ku]="Identifier";Oo[_s]="Keyword";Oo[g1]="Null";Oo[Qu]="Numeric";Oo[fr]="Punctuator";Oo[fp]="String";Oo[sce]="RegularExpression";var uce="ArrayExpression",lce="BinaryExpression",cce="CallExpression",fce="ConditionalExpression",IL="Identifier",dce="Literal",hce="LogicalExpression",pce="MemberExpression",gce="ObjectExpression",mce="Property",yce="UnaryExpression",Vt="Unexpected token %0",vce="Unexpected number",bce="Unexpected string",xce="Unexpected identifier",wce="Unexpected reserved word",Sce="Unexpected end of input",iC="Invalid regular expression",oC="Invalid regular expression: missing /",LL="Octal literals are not allowed in strict mode.",Ece="Duplicate data property in object literal not allowed in strict mode",un="ILLEGAL",dp="Disabled.",Oce=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),kce=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function m1(e,t){if(!e)throw new Error("ASSERT: "+t)}function pa(e){return e>=48&&e<=57}function aC(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function hp(e){return"01234567".indexOf(e)>=0}function Cce(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function pp(e){return e===10||e===13||e===8232||e===8233}function gp(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Oce.test(String.fromCharCode(e))}function y1(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&kce.test(String.fromCharCode(e))}const _ce={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function zL(){for(;K<kn;){const e=de.charCodeAt(K);if(Cce(e)||pp(e))++K;else break}}function sC(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)K<kn&&aC(de[K])?(r=de[K++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Ue({},Vt,un);return String.fromCharCode(i)}function Ace(){var e,t,n,r;for(e=de[K],t=0,e==="}"&&Ue({},Vt,un);K<kn&&(e=de[K++],!!aC(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Ue({},Vt,un),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function $L(){var e,t;for(e=de.charCodeAt(K++),t=String.fromCharCode(e),e===92&&(de.charCodeAt(K)!==117&&Ue({},Vt,un),++K,e=sC("u"),(!e||e==="\\"||!gp(e.charCodeAt(0)))&&Ue({},Vt,un),t=e);K<kn&&(e=de.charCodeAt(K),!!y1(e));)++K,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),de.charCodeAt(K)!==117&&Ue({},Vt,un),++K,e=sC("u"),(!e||e==="\\"||!y1(e.charCodeAt(0)))&&Ue({},Vt,un),t+=e);return t}function Tce(){var e,t;for(e=K++;K<kn;){if(t=de.charCodeAt(K),t===92)return K=e,$L();if(y1(t))++K;else break}return de.slice(e,K)}function Nce(){var e,t,n;return e=K,t=de.charCodeAt(K)===92?$L():Tce(),t.length===1?n=Ku:_ce.hasOwnProperty(t)?n=_s:t==="null"?n=g1:t==="true"||t==="false"?n=p1:n=Ku,{type:n,value:t,start:e,end:K}}function uC(){var e=K,t=de.charCodeAt(K),n,r=de[K],i,o,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++K,{type:fr,value:String.fromCharCode(t),start:e,end:K};default:if(n=de.charCodeAt(K+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return K+=2,{type:fr,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:K};case 33:case 61:return K+=2,de.charCodeAt(K)===61&&++K,{type:fr,value:de.slice(e,K),start:e,end:K}}}if(a=de.substr(K,4),a===">>>=")return K+=4,{type:fr,value:a,start:e,end:K};if(o=a.substr(0,3),o===">>>"||o==="<<="||o===">>=")return K+=3,{type:fr,value:o,start:e,end:K};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return K+=2,{type:fr,value:i,start:e,end:K};if(i==="//"&&Ue({},Vt,un),"<>=!+-*%&|^/".indexOf(r)>=0)return++K,{type:fr,value:r,start:e,end:K};Ue({},Vt,un)}function Mce(e){let t="";for(;K<kn&&aC(de[K]);)t+=de[K++];return t.length===0&&Ue({},Vt,un),gp(de.charCodeAt(K))&&Ue({},Vt,un),{type:Qu,value:parseInt("0x"+t,16),start:e,end:K}}function Fce(e){let t="0"+de[K++];for(;K<kn&&hp(de[K]);)t+=de[K++];return(gp(de.charCodeAt(K))||pa(de.charCodeAt(K)))&&Ue({},Vt,un),{type:Qu,value:parseInt(t,8),octal:!0,start:e,end:K}}function BL(){var e,t,n;if(n=de[K],m1(pa(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=K,e="",n!=="."){if(e=de[K++],n=de[K],e==="0"){if(n==="x"||n==="X")return++K,Mce(t);if(hp(n))return Fce(t);n&&pa(n.charCodeAt(0))&&Ue({},Vt,un)}for(;pa(de.charCodeAt(K));)e+=de[K++];n=de[K]}if(n==="."){for(e+=de[K++];pa(de.charCodeAt(K));)e+=de[K++];n=de[K]}if(n==="e"||n==="E")if(e+=de[K++],n=de[K],(n==="+"||n==="-")&&(e+=de[K++]),pa(de.charCodeAt(K)))for(;pa(de.charCodeAt(K));)e+=de[K++];else Ue({},Vt,un);return gp(de.charCodeAt(K))&&Ue({},Vt,un),{type:Qu,value:parseFloat(e),start:t,end:K}}function Dce(){var e="",t,n,r,i,o=!1;for(t=de[K],m1(t==="'"||t==='"',"String literal must starts with a quote"),n=K,++K;K<kn;)if(r=de[K++],r===t){t="";break}else if(r==="\\")if(r=de[K++],!r||!pp(r.charCodeAt(0)))switch(r){case"u":case"x":de[K]==="{"?(++K,e+=Ace()):e+=sC(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:hp(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),K<kn&&hp(de[K])&&(o=!0,i=i*8+"01234567".indexOf(de[K++]),"0123".indexOf(r)>=0&&K<kn&&hp(de[K])&&(i=i*8+"01234567".indexOf(de[K++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&de[K]===`
`&&++K;else{if(pp(r.charCodeAt(0)))break;e+=r}return t!==""&&Ue({},Vt,un),{type:fp,value:e,octal:o,start:n,end:K}}function Rce(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Ue({},iC)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ue({},iC)}try{return new RegExp(e,t)}catch{return null}}function Pce(){var e,t,n,r,i;for(e=de[K],m1(e==="/","Regular expression literal must start with a slash"),t=de[K++],n=!1,r=!1;K<kn;)if(e=de[K++],t+=e,e==="\\")e=de[K++],pp(e.charCodeAt(0))&&Ue({},oC),t+=e;else if(pp(e.charCodeAt(0)))Ue({},oC);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Ue({},oC),i=t.substr(1,t.length-2),{value:i,literal:t}}function jce(){var e,t,n;for(t="",n="";K<kn&&(e=de[K],!!y1(e.charCodeAt(0)));)++K,e==="\\"&&K<kn?Ue({},Vt,un):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ue({},iC,n),{value:n,literal:t}}function Ice(){var e,t,n,r;return Xe=null,zL(),e=K,t=Pce(),n=jce(),r=Rce(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:K}}function Lce(e){return e.type===Ku||e.type===_s||e.type===p1||e.type===g1}function UL(){if(zL(),K>=kn)return{type:cp,start:K,end:K};const e=de.charCodeAt(K);return gp(e)?Nce():e===40||e===41||e===59?uC():e===39||e===34?Dce():e===46?pa(de.charCodeAt(K+1))?BL():uC():pa(e)?BL():uC()}function dr(){const e=Xe;return K=e.end,Xe=UL(),K=e.end,e}function WL(){const e=K;Xe=UL(),K=e}function zce(e){const t=new Pi(uce);return t.elements=e,t}function HL(e,t,n){const r=new Pi(e==="||"||e==="&&"?hce:lce);return r.operator=e,r.left=t,r.right=n,r}function $ce(e,t){const n=new Pi(cce);return n.callee=e,n.arguments=t,n}function Bce(e,t,n){const r=new Pi(fce);return r.test=e,r.consequent=t,r.alternate=n,r}function lC(e){const t=new Pi(IL);return t.name=e,t}function mp(e){const t=new Pi(dce);return t.value=e.value,t.raw=de.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function GL(e,t,n){const r=new Pi(pce);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Uce(e){const t=new Pi(gce);return t.properties=e,t}function qL(e,t,n){const r=new Pi(mce);return r.key=t,r.value=n,r.kind=e,r}function Wce(e,t){const n=new Pi(yce);return n.operator=e,n.argument=t,n.prefix=!0,n}function Ue(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,a)=>(m1(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=K,n.description=i,n}function v1(e){e.type===cp&&Ue(e,Sce),e.type===Qu&&Ue(e,vce),e.type===fp&&Ue(e,bce),e.type===Ku&&Ue(e,xce),e.type===_s&&Ue(e,wce),Ue(e,Vt,e.value)}function Cn(e){const t=dr();(t.type!==fr||t.value!==e)&&v1(t)}function ut(e){return Xe.type===fr&&Xe.value===e}function cC(e){return Xe.type===_s&&Xe.value===e}function Hce(){const e=[];for(K=Xe.start,Cn("[");!ut("]");)ut(",")?(dr(),e.push(null)):(e.push(Ju()),ut("]")||Cn(","));return dr(),zce(e)}function VL(){K=Xe.start;const e=dr();return e.type===fp||e.type===Qu?(e.octal&&Ue(e,LL),mp(e)):lC(e.value)}function Gce(){var e,t,n,r;if(K=Xe.start,e=Xe,e.type===Ku)return n=VL(),Cn(":"),r=Ju(),qL("init",n,r);if(e.type===cp||e.type===fr)v1(e);else return t=VL(),Cn(":"),r=Ju(),qL("init",t,r)}function qce(){var e=[],t,n,r,i={},o=String;for(K=Xe.start,Cn("{");!ut("}");)t=Gce(),t.key.type===IL?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Ue({},Ece):i[r]=!0,e.push(t),ut("}")||Cn(",");return Cn("}"),Uce(e)}function Vce(){Cn("(");const e=fC();return Cn(")"),e}const Yce={if:1};function Xce(){var e,t,n;if(ut("("))return Vce();if(ut("["))return Hce();if(ut("{"))return qce();if(e=Xe.type,K=Xe.start,e===Ku||Yce[Xe.value])n=lC(dr().value);else if(e===fp||e===Qu)Xe.octal&&Ue(Xe,LL),n=mp(dr());else{if(e===_s)throw new Error(dp);e===p1?(t=dr(),t.value=t.value==="true",n=mp(t)):e===g1?(t=dr(),t.value=null,n=mp(t)):ut("/")||ut("/=")?(n=mp(Ice()),WL()):v1(dr())}return n}function Kce(){const e=[];if(Cn("("),!ut(")"))for(;K<kn&&(e.push(Ju()),!ut(")"));)Cn(",");return Cn(")"),e}function Qce(){K=Xe.start;const e=dr();return Lce(e)||v1(e),lC(e.value)}function Jce(){return Cn("."),Qce()}function Zce(){Cn("[");const e=fC();return Cn("]"),e}function efe(){var e,t,n;for(e=Xce();;)if(ut("."))n=Jce(),e=GL(".",e,n);else if(ut("("))t=Kce(),e=$ce(e,t);else if(ut("["))n=Zce(),e=GL("[",e,n);else break;return e}function YL(){const e=efe();if(Xe.type===fr&&(ut("++")||ut("--")))throw new Error(dp);return e}function b1(){var e,t;if(Xe.type!==fr&&Xe.type!==_s)t=YL();else{if(ut("++")||ut("--"))throw new Error(dp);if(ut("+")||ut("-")||ut("~")||ut("!"))e=dr(),t=b1(),t=Wce(e.value,t);else{if(cC("delete")||cC("void")||cC("typeof"))throw new Error(dp);t=YL()}}return t}function XL(e){let t=0;if(e.type!==fr&&e.type!==_s)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function tfe(){var e,t,n,r,i,o,a,s,u,l;if(e=Xe,u=b1(),r=Xe,i=XL(r),i===0)return u;for(r.prec=i,dr(),t=[e,Xe],a=b1(),o=[u,r,a];(i=XL(Xe))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,u=o.pop(),t.pop(),n=HL(s,u,a),o.push(n);r=dr(),r.prec=i,o.push(r),t.push(Xe),n=b1(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=HL(o[l-1].value,o[l-2],n),l-=2;return n}function Ju(){var e,t,n;return e=tfe(),ut("?")&&(dr(),t=Ju(),Cn(":"),n=Ju(),e=Bce(e,t,n)),e}function fC(){const e=Ju();if(ut(","))throw new Error(dp);return e}function dC(e){de=e,K=0,kn=de.length,Xe=null,WL();const t=fC();if(Xe.type!==cp)throw new Error("Unexpect token after expression.");return t}var KL={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function QL(e){function t(a,s,u,l){let c=e(s[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+a+(l<0?"":l===0?"()":"("+s.slice(1).map(e).join(",")+")")}function n(a,s,u){return l=>t(a,l,s,u)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&Q("Missing arguments to clamp function."),a.length>3&&Q("Too many arguments to clamp function.");const s=a.map(e);return"Math.max("+s[1]+", Math.min("+s[2]+","+s[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(a){a.length<3&&Q("Missing arguments to if function."),a.length>3&&Q("Too many arguments to if function.");const s=a.map(e);return"("+s[0]+"?"+s[1]+":"+s[2]+")"}}}function nfe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function JL(e){e=e||{};const t=e.allowed?Oi(e.allowed):{},n=e.forbidden?Oi(e.forbidden):{},r=e.constants||KL,i=(e.functions||QL)(f),o=e.globalvar,a=e.fieldvar,s=_e(o)?o:p=>`${o}["${p}"]`;let u={},l={},c=0;function f(p){if(se(p))return p;const g=d[p.type];return g==null&&Q("Unsupported type: "+p.type),g(p)}const d={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:pe(n,g)?Q("Illegal identifier: "+g):pe(r,g)?r[g]:pe(t,g)?g:(u[g]=1,s(g))},MemberExpression:p=>{const g=!p.computed,m=f(p.object);g&&(c+=1);const y=f(p.property);return m===a&&(l[nfe(y)]=1),g&&(c-=1),m+(g?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Q("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,y=pe(i,g)&&i[g];return y||Q("Unrecognized function: "+g),_e(y)?y(m):y+"("+m.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const g=f(p.key);return c-=1,g+":"+f(p.value)}};function h(p){const g={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},g}return h.functions=i,h.constants=r,h}function rfe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ife(e){let t=e,n=e;e.length===1&&(t=(a,s)=>e(a)-s,n=ofe(e));function r(a,s,u,l){for(u==null&&(u=0),l==null&&(l=a.length);u<l;){const c=u+l>>>1;n(a[c],s)<0?u=c+1:l=c}return u}function i(a,s,u,l){for(u==null&&(u=0),l==null&&(l=a.length);u<l;){const c=u+l>>>1;n(a[c],s)>0?l=c:u=c+1}return u}function o(a,s,u,l){u==null&&(u=0),l==null&&(l=a.length);const c=r(a,s,u,l-1);return c>u&&t(a[c-1],s)>-t(a[c],s)?c-1:c}return{left:r,center:o,right:i}}function ofe(e){return(t,n)=>rfe(e(t),n)}const hC="intersect",ZL="union",afe="vlMulti",sfe="vlPoint",e8="or",ufe="and",lfe="_vgsid_",cfe="E",ffe="R",dfe="R-E",hfe="R-LE",pfe="R-RE",x1="index:unit";function t8(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,a,s;o<i;++o)if(s=n[o],s.getter=rr.getter||rr(s.field),a=s.getter(e),qa(a)&&(a=yn(a)),qa(r[o])&&(r[o]=yn(r[o])),qa(r[o][0])&&(r[o]=r[o].map(yn)),s.type===cfe){if(J(r[o])?r[o].indexOf(a)<0:a!==r[o])return!1}else if(s.type===ffe){if(!uc(a,r[o]))return!1}else if(s.type===pfe){if(!uc(a,r[o],!0,!1))return!1}else if(s.type===dfe){if(!uc(a,r[o],!1,!1))return!1}else if(s.type===hfe&&!uc(a,r[o],!1,!0))return!1;return!0}function gfe(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[x1]&&r[x1].value:void 0,a=n===hC,s=i.length,u=0,l,c,f,d,h;u<s;++u)if(l=i[u],o&&a){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=t8(t,l),c[d]=h?-1:++f,h&&o.size===1)return!0;if(!h&&f===o.get(d).count)return!1}else if(h=t8(t,l),a^h)return h;return s&&a}const pC=rr(lfe),n8=ife(pC),mfe=n8.left,yfe=n8.right;function vfe(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[x1]&&r[x1].value:void 0,a=n===hC,s=pC(t),u=mfe(i,s);if(u===i.length||pC(i[u])!==s)return!1;if(o&&a){if(o.size===1)return!0;if(yfe(i,s)-u<o.size)return!1}return!0}function bfe(e,t){return e.map(n=>Ae({values:t.fields.map(r=>(r.getter||(r.getter=rr(r.field)))(n.datum))},t))}function xfe(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],a={},s={},u={},l,c,f,d,h,p,g,m,y,v=o.length,b=0,x,w;b<v;++b){for(l=o[b],d=l.unit,c=l.fields,f=l.values,x=0,w=c.length;x<w;++x)h=c[x],p=a[h.field]||(a[h.field]={}),g=p[d]||(p[d]=[]),u[h.field]=m=h.type.charAt(0),y=r8[m+"_union"],p[d]=y(g,ue(f[x]));n&&(g=s[d]||(s[d]=[]),g.push(ue(f).reduce((E,S,_)=>(E[c[_].field]=S,E),{})))}if(t=t||ZL,Object.keys(a).forEach(E=>{a[E]=Object.keys(a[E]).map(S=>a[E][S]).reduce((S,_)=>S===void 0?_:r8[u[E]+"_"+t](S,_))}),o=Object.keys(s),n&&o.length){const E=r?sfe:afe;a[E]=t===ZL?{[e8]:o.reduce((S,_)=>(S.push(...s[_]),S),[])}:{[ufe]:o.map(S=>({[e8]:s[S]}))}}return a}var r8={E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=yn(t[0]),r=yn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=yn(t[0]),r=yn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const wfe=":",Sfe="@";function gC(e,t,n,r){t[0].type!==Xu&&Q("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&Re(t).value,a="unit",s=Sfe+a,u=wfe+i;o===hC&&!pe(r,s)&&(r[s]=n.getData(i).indataRef(n,a)),pe(r,u)||(r[u]=n.getData(i).tuplesRef())}function i8(e){const t=this.context.data[e];return t?t.values.value:[]}function Efe(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function Ofe(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Kr).insert(t)),1}function kfe(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const yp=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},Cfe=yp("format"),o8=yp("timeFormat"),_fe=yp("utcFormat"),Afe=yp("timeParse"),Tfe=yp("utcParse"),w1=new Date(2e3,0,1);function S1(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(w1.setYear(2e3),w1.setMonth(e),w1.setDate(t),o8.call(this,w1,n))}function Nfe(e){return S1.call(this,e,1,"%B")}function Mfe(e){return S1.call(this,e,1,"%b")}function Ffe(e){return S1.call(this,0,2+e,"%A")}function Dfe(e){return S1.call(this,0,2+e,"%a")}const Rfe=":",Pfe="@",mC="%",a8="$";function yC(e,t,n,r){t[0].type!==Xu&&Q("First argument to data functions must be a string literal.");const i=t[0].value,o=Rfe+i;if(!pe(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function jfe(e,t,n,r){t[0].type!==Xu&&Q("First argument to indata must be a string literal."),t[1].type!==Xu&&Q("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,a=Pfe+o;pe(a,r)||(r[a]=n.getData(i).indataRef(n,o))}function hr(e,t,n,r){if(t[0].type===Xu)s8(n,r,t[0].value);else for(e in n.scales)s8(n,r,e)}function s8(e,t,n){const r=mC+n;if(!pe(t,r))try{t[r]=e.scaleRef(n)}catch{}}function ga(e,t){let n;return _e(e)?e:se(e)?(n=t.scales[e])&&n.value:void 0}function Ife(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=hr,n._range=hr,n._scale=hr;const r=i=>"_["+(i.type===Xu?re(mC+i.value):re(mC)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function vC(e,t){return function(n,r,i){if(n){const o=ga(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const Lfe=vC("area",aoe),zfe=vC("bounds",coe),$fe=vC("centroid",moe);function Bfe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function bC(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Ufe(){return bC(this.context.dataflow,"warn",arguments)}function Wfe(){return bC(this.context.dataflow,"info",arguments)}function Hfe(){return bC(this.context.dataflow,"debug",arguments)}function xC(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function wC(e){const t=ss(e),n=xC(t.r),r=xC(t.g),i=xC(t.b);return .2126*n+.7152*r+.0722*i}function Gfe(e,t){const n=wC(e),r=wC(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function qfe(){const e=[].slice.call(arguments);return e.unshift({}),Ae(...e)}function u8(e,t){return e===t||e!==e&&t!==t?!0:J(e)?J(t)&&e.length===t.length?Vfe(e,t):!1:ce(e)&&ce(t)?l8(e,t):!1}function Vfe(e,t){for(let n=0,r=e.length;n<r;++n)if(!u8(e[n],t[n]))return!1;return!0}function l8(e,t){for(const n in e)if(!u8(e[n],t[n]))return!1;return!0}function c8(e){return t=>l8(e,t)}function Yfe(e,t,n,r,i,o){const a=this.context.dataflow,s=this.context.data[e],u=s.input,l=a.stamp();let c=s.changes,f,d;if(a._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(s.changes=c=a.changeset(),c.stamp=l,a.runAfter(()=>{s.modified=!0,a.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Kr:J(n)||Zm(n)?n:c8(n),c.remove(f)),t&&c.insert(t),r&&(f=c8(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in o)c.modify(i,d,o[d]);return 1}function Xfe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)}function Kfe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const f8={};function Qfe(e,t){const n=f8[t]||(f8[t]=rr(t));return J(e)?e.map(n):n(e)}function SC(e){return J(e)||ArrayBuffer.isView(e)?e:null}function EC(e){return SC(e)||(se(e)?e:null)}function Jfe(e,...t){return SC(e).join(...t)}function Zfe(e,...t){return EC(e).indexOf(...t)}function ede(e,...t){return EC(e).lastIndexOf(...t)}function tde(e,...t){return EC(e).slice(...t)}function nde(e,t,n){return _e(n)&&Q("Function argument passed to replace."),String(e).replace(t,n)}function rde(e){return SC(e).slice().reverse()}function ide(e,t,n){return eE(e||0,t||0,n||0)}function ode(e,t){const n=ga(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function ade(e,t){const n=ga(e,(t||this).context);return n?n.copy():void 0}function sde(e,t){const n=ga(e,(t||this).context);return n?n.domain():[]}function ude(e,t,n){const r=ga(e,(n||this).context);return r?J(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function lde(e,t){const n=ga(e,(t||this).context);return n&&n.range?n.range():[]}function cde(e,t,n){const r=ga(e,(n||this).context);return r?r(t):void 0}function fde(e,t,n,r,i){e=ga(e,(i||this).context);const o=bP(t,n);let a=e.domain(),s=a[0],u=Re(a),l=mn;return u-s?l=iP(e,s,u):e=(e.interpolator?Be("sequential")().interpolator(e.interpolator()):Be("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,u=1]),e.ticks&&(a=e.ticks(+r||15),s!==a[0]&&a.unshift(s),u!==Re(a)&&a.push(u)),a.forEach(c=>o.stop(l(c),e(c))),o}function dde(e,t,n){const r=ga(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function hde(e){let t=null;return function(n){return n?xh(n,t=t||Mc(e)):e}}const d8=e=>e.data;function h8(e,t){const n=i8.call(t,e);return n.root&&n.root.lookup||{}}function pde(e,t,n){const r=h8(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(d8):void 0}function gde(e,t){const n=h8(e,this)[t];return n?n.ancestors().map(d8):void 0}const p8=()=>typeof window!="undefined"&&window||null;function mde(){const e=p8();return e?e.screen:{}}function yde(){const e=p8();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function vde(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function bde(e,t,n){if(!e)return[];const[r,i]=e,o=new Lt().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return Dj(a,o,xde(t))}function xde(e){let t=null;if(e){const n=ue(e.marktype),r=ue(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}const vp={random(){return Zr()},cumulativeNormal:s0,cumulativeLogNormal:Rw,cumulativeUniform:Lw,densityNormal:Tw,densityLogNormal:Dw,densityUniform:Iw,quantileNormal:u0,quantileLogNormal:Pw,quantileUniform:zw,sampleNormal:a0,sampleLogNormal:Fw,sampleUniform:jw,isArray:J,isBoolean:Ga,isDate:qa,isDefined(e){return e!==void 0},isNumber:Qe,isObject:ce,isRegExp:IF,isString:se,isTuple:Zm,isValid(e){return e!=null&&e===e},toBoolean:T2,toDate:N2,toNumber:yn,toString:M2,indexof:Zfe,join:Jfe,lastindexof:ede,replace:nde,reverse:rde,slice:tde,flush:PF,lerp:LF,merge:qfe,pad:BF,peek:Re,pluck:Qfe,span:Rd,inrange:uc,truncate:UF,rgb:ss,lab:E0,hcl:O0,hsl:w0,luminance:wC,contrast:Gfe,sequence:Mr,format:Cfe,utcFormat:_fe,utcParse:Tfe,utcOffset:AD,utcSequence:MD,timeFormat:o8,timeParse:Afe,timeOffset:_D,timeSequence:ND,timeUnitSpecifier:mD,monthFormat:Nfe,monthAbbrevFormat:Mfe,dayFormat:Ffe,dayAbbrevFormat:Dfe,quarter:MF,utcquarter:FF,week:vD,utcweek:wD,dayofyear:yD,utcdayofyear:xD,warn:Ufe,info:Wfe,debug:Hfe,extent:oo,inScope:Bfe,intersect:bde,clampRange:DF,pinchDistance:Xfe,pinchAngle:Kfe,screen:mde,containerSize:vde,windowSize:yde,bandspace:ide,setdata:Ofe,pathShape:hde,panLinear:_F,panLog:AF,panPow:TF,panSymlog:NF,zoomLinear:E2,zoomLog:O2,zoomPow:Im,zoomSymlog:k2,encode:kfe,modify:Yfe},wde=["view","item","group","xy","x","y"],Sde="event.vega.",g8="this.",OC={},m8={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${re(a8+e)}]`,functions:Ede,constants:KL,visitors:OC},kC=JL(m8);function Ede(e){const t=QL(e);wde.forEach(n=>t[n]=Sde+n);for(const n in vp)t[n]=g8+n;return Ae(t,Ife(e,vp,OC)),t}function Mt(e,t,n){return arguments.length===1?vp[e]:(vp[e]=t,n&&(OC[e]=n),kC&&(kC.functions[e]=g8+e),this)}Mt("bandwidth",ode,hr);Mt("copy",ade,hr);Mt("domain",sde,hr);Mt("range",lde,hr);Mt("invert",ude,hr);Mt("scale",cde,hr);Mt("gradient",fde,hr);Mt("geoArea",Lfe,hr);Mt("geoBounds",zfe,hr);Mt("geoCentroid",$fe,hr);Mt("geoShape",dde,hr);Mt("indata",Efe,jfe);Mt("data",i8,yC);Mt("treePath",pde,yC);Mt("treeAncestors",gde,yC);Mt("vlSelectionTest",gfe,gC);Mt("vlSelectionIdTest",vfe,gC);Mt("vlSelectionResolve",xfe,gC);Mt("vlSelectionTuples",bfe);function ko(e,t){const n={};let r;try{e=se(e)?e:re(e)+"",r=dC(e)}catch{Q("Expression parse error: "+e)}r.visit(o=>{if(o.type!==jL)return;const a=o.callee.name,s=m8.visitors[a];s&&s(a,o.arguments,t,n)});const i=kC(r);return i.globals.forEach(o=>{const a=a8+o;!pe(n,a)&&t.getSignal(o)&&(n[a]=t.signalRef(o))}),{$expr:Ae({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Ode(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const kde=Oi(["rule"]),y8=Oi(["group","image","rect"]);function Cde(e,t){let n="";return kde[t]||(e.x2&&(e.x?(y8[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(y8[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function CC(e){return(e+"").toLowerCase()}function _de(e){return CC(e)==="operator"}function Ade(e){return CC(e)==="collect"}function bp(e,t,n){n[n.length-1]!==";"&&(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Tde(e,t,n,r){return"((u = ".concat(e,") < (v = ").concat(t,") || u == null) && v != null ? ").concat(n,`
  : (u > v || v == null) && u != null ? `).concat(r,`
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? `).concat(n,`
  : v !== v && u === u ? `).concat(r," : ")}var Nde={operator:(e,t)=>bp(e,["_"],t.code),parameter:(e,t)=>bp(e,["datum","_"],t.code),event:(e,t)=>bp(e,["event"],t.code),handler:(e,t)=>{const n="var datum=event.item&&event.item.datum;return ".concat(t.code,";");return bp(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const a="o["+re(o)+"]";i+="$=".concat(r[o].code,";if(").concat(a,"!==$)").concat(a,"=$,m=1;")}return i+=Cde(r,n),i+="return m;",bp(e,["item","_"],i)},codegen:{get(e){const t="[".concat(e.map(re).join("]["),"]"),n=Function("_","return _".concat(t,";"));return n.path=t,n},comparator(e,t){let n;const r=(o,a)=>{const s=t[a];let u,l;return o.path?(u="a".concat(o.path),l="b".concat(o.path)):((n=n||{})["f"+a]=o,u="this.f".concat(a,"(a)"),l="this.f".concat(a,"(b)")),Tde(u,l,-s,s)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Mde(e){const t=this;_de(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Fde(e){const t=this;if(e.params){const n=t.get(e.id);n||Q("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Dde(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=J(i)?i.map(o=>v8(o,n,t)):v8(i,n,t)}return t}function v8(e,t,n){if(!e||!ce(e))return e;for(let r=0,i=b8.length,o;r<i;++r)if(o=b8[r],pe(e,o.key))return o.parse(e,t,n);return e}var b8=[{key:"$ref",parse:Rde},{key:"$key",parse:jde},{key:"$expr",parse:Pde},{key:"$field",parse:Ide},{key:"$encode",parse:zde},{key:"$compare",parse:Lde},{key:"$context",parse:$de},{key:"$subflow",parse:Bde},{key:"$tupleid",parse:Ude}];function Rde(e,t){return t.get(e.$ref)||Q("Operator not defined: "+e.$ref)}function Pde(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code+"_"+e.$name;return t.fn[r]||(t.fn[r]=nr(t.parameterExpression(e.$expr),e.$fields,e.$name))}function jde(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=A2(e.$key,e.$flat,t.expr.codegen))}function Ide(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=rr(e.$field,e.$name,t.expr.codegen))}function Lde(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ue(e.$compare).map(i=>i&&i.$tupleid?me:i);return t.fn[n]||(t.fn[n]=C2(r,e.$order,t.expr.codegen))}function zde(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=nr(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function $de(e,t){return t}function Bde(e,t){const n=e.$subflow;return function(r,i,o){const a=t.fork().parse(n),s=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(o),s.detachSubflow=()=>t.detach(a),s}}function Ude(){return me}function Wde(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Q("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Hde(e){var t=this,n=ce(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,a=void 0;r||Q("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(a=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,a)}const Gde={skip:!0};function qde(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const a=t.signals[o];e.signals(o,a)&&(r[o]=a.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const a=t.data[o];e.data(o,a)&&(i[o]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function Vde(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],Gde)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(Kr).insert(r[o]))}),(e.subcontext||[]).forEach((o,a)=>{const s=t.subcontext[a];s&&s.setState(o)})}function x8(e,t,n,r){return new w8(e,t,n,r)}function w8(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Nde,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function S8(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}w8.prototype=S8.prototype={fork(){const e=new S8(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Ade(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const a=n.data[o]||(n.data[o]={});e.data[o].forEach(s=>a[s]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[CC(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Ode,parseOperator:Mde,parseOperatorParameters:Fde,parseParameters:Dde,parseStream:Wde,parseUpdate:Hde,getState:qde,setState:Vde};function Yde(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),E8(t,e.description()))}function E8(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Xde(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const _C="default";function Kde(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:_C,item:null}));e.on(e.events("view","mousemove"),t,(n,r)=>{const i=t.value,o=i?se(i)?i:i.user:_C,a=r.item&&r.item.cursor||null;return i&&o===i.user&&a==i.item?i:{user:o,item:a}}),e.add(null,function(n){let r=n.cursor,i=this.value;return se(r)||(i=r.item,r=r.user),AC(e,r&&r!==_C?r:i||r),i},{cursor:t})}function AC(e,t){const n=e.globalCursor()?typeof document!="undefined"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function E1(e,t){var n=e._runtime.data;return pe(n,t)||Q("Unrecognized data set: "+t),n[t]}function Qde(e,t){return arguments.length<2?E1(this,e).values.value:O1.call(this,e,_u().remove(Kr).insert(t))}function O1(e,t){b5(t)||Q("Second argument to changes must be a changeset.");const n=E1(this,e);return n.modified=!0,this.pulse(n.input,t)}function Jde(e,t){return O1.call(this,e,_u().insert(t))}function Zde(e,t){return O1.call(this,e,_u().remove(t))}function O8(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function k8(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function k1(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function ehe(e){var t=k1(e),n=O8(e),r=k8(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function the(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,a,s;return i&&(s=k1(e),a=t.changedTouches?t.changedTouches[0]:t,o=ny(a,i),o[0]-=s[0],o[1]-=s[1]),t.dataflow=e,t.item=n,t.vega=nhe(e,n,o),t}function nhe(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(a){var s=r,u;if(a){for(u=t;u;u=u.mark.group)if(u.mark.name===a){s=u;break}}return s&&s.mark&&s.mark.interactive?s:{}}function o(a){if(!a)return n;se(a)&&(a=i(a));const s=n.slice();for(;a;)s[0]-=a.x||0,s[1]-=a.y||0,a=a.mark&&a.mark.group;return s}return{view:vn(e),item:vn(t||{}),group:i,xy:o,x:a=>o(a)[0],y:a=>o(a)[1]}}const C8="view",rhe="timer",ihe="window",ohe={trap:!1};function ahe(e){const t=Ae({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{J(r[o])&&(r[o]=Oi(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function _8(e,t,n,r){e._eventListeners.push({type:n,sources:ue(t),handler:r})}function she(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function C1(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||ce(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function uhe(e,t,n){var r=this,i=new r0(n),o=function(l,c){r.runAsync(null,()=>{e===C8&&she(r,t)&&l.preventDefault(),i.receive(the(r,l,c))})},a;if(e===rhe)C1(r,"timer",t)&&r.timer(o,t);else if(e===C8)C1(r,"view",t)&&r.addEventListener(t,o,ohe);else if(e===ihe?C1(r,"window",t)&&typeof window!="undefined"&&(a=[window]):typeof document!="undefined"&&C1(r,"selector",t)&&(a=document.querySelectorAll(e)),!a)r.warn("Can not resolve event source: "+e);else{for(var s=0,u=a.length;s<u;++s)a[s].addEventListener(t,o);_8(r,a,t,o)}return i}function A8(e){return e.item}function T8(e){return e.item.mark.source}function N8(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function lhe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","mouseover",A8),T8,N8(e)),this.on(this.events("view","mouseout",A8),T8,N8(t)),this}function che(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,o;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(o=n[r],i=o.sources.length;--i>=0;)o.sources[i].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this}function Ir(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const fhe="vega-bind",dhe="vega-bind-name",hhe="vega-bind-radio";function phe(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,a)})}},r.debounce&&(i.update=_2(r.debounce,i.update))),(r.input==null&&r.element?ghe:yhe)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function ghe(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),_8(r,t,i,o),e.set=a=>{t.value=a,t.dispatchEvent(mhe(i))}}function mhe(e){return typeof Event!="undefined"?new Event(e):{type:e}}function yhe(e,t,n,r){const i=r.signal(n.signal),o=Ir("div",{class:fhe}),a=n.input==="radio"?o:o.appendChild(Ir("label"));a.appendChild(Ir("span",{class:dhe},n.name||n.signal)),t.appendChild(o);let s=vhe;switch(n.input){case"checkbox":s=bhe;break;case"select":s=xhe;break;case"radio":s=whe;break;case"range":s=She;break}s(e,a,n,i)}function vhe(e,t,n,r){const i=Ir("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function bhe(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=Ir("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=a=>o.checked=!!a||null}function xhe(e,t,n,r){const i=Ir("select",{name:n.signal}),o=n.labels||[];n.options.forEach((a,s)=>{const u={value:a};_1(a,r)&&(u.selected=!0),i.appendChild(Ir("option",u,(o[s]||a)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=a=>{for(let s=0,u=n.options.length;s<u;++s)if(_1(n.options[s],a)){i.selectedIndex=s;return}}}function whe(e,t,n,r){const i=Ir("span",{class:hhe}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((a,s)=>{const u={type:"radio",name:n.signal,value:a};_1(a,r)&&(u.checked=!0);const l=Ir("input",u);l.addEventListener("change",()=>e.update(a));const c=Ir("label",{},(o[s]||a)+"");return c.prepend(l),i.appendChild(c),l}),e.set=a=>{const s=e.elements,u=s.length;for(let l=0;l<u;++l)_1(s[l].value,a)&&(s[l].checked=!0)}}function She(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||Ya(o,i,100),s=Ir("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;const u=Ir("span",{},+r);t.appendChild(s),t.appendChild(u);const l=()=>{u.textContent=s.value,e.update(+s.value)};s.addEventListener("input",l),s.addEventListener("change",l),e.elements=[s],e.set=c=>{s.value=c,u.textContent=c}}function _1(e,t){return e===t||e+""==t+""}function M8(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,O8(e),k8(e),k1(e),i,o).background(e.background())}function TC(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Ehe(e,t,n,r){const i=new r(e.loader(),TC(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,k1(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function Ohe(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=fy(r);e=n._el=e?NC(n,e,!0):null,Yde(n),o||n.error("Unrecognized renderer type: "+r);const a=o.handler||Rh,s=e?o.renderer:o.headless;return n._renderer=s?M8(n,n._renderer,e,s):null,n._handler=Ehe(n,n._handler,e,a),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=NC(n,t,!0):e.appendChild(Ir("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=NC(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{phe(n,u.element||t,u)})),n}function NC(e,t,n){if(typeof t=="string")if(typeof document!="undefined"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.innerHTML=""}catch(r){t=null,e.error(r)}return t}const xp=e=>+e||0,khe=e=>({top:e,bottom:e,left:e,right:e});function F8(e){return ce(e)?{top:xp(e.top),bottom:xp(e.bottom),left:xp(e.left),right:xp(e.right)}:khe(xp(e))}async function MC(e,t,n,r){const i=fy(t),o=i&&i.headless;return o||Q("Unrecognized renderer type: "+t),await e.runAsync(),M8(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function Che(e,t){e!==bs.Canvas&&e!==bs.SVG&&e!==bs.PNG&&Q("Unrecognized image type: "+e);const n=await MC(this,e,t);return e===bs.SVG?_he(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function _he(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Ahe(e,t){return(await MC(this,bs.Canvas,e,t)).canvas()}async function The(e){return(await MC(this,bs.SVG,e)).svg()}function Nhe(e,t,n){return x8(e,vc,vp,n).parse(t)}function Mhe(e){var t=this._runtime.scales;return pe(t,e)||Q("Unrecognized scale or projection: "+e),t[e].value}var D8="width",R8="height",FC="padding",P8={skip:!0};function j8(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===FC?r.left+r.right:0)}function I8(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===FC?r.top+r.bottom:0)}function Fhe(e){var t=e._signals,n=t[D8],r=t[R8],i=t[FC];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,s=>{e._width=s.size,e._viewWidth=j8(e,s.size),o()},{size:n}),e._resizeHeight=e.add(null,s=>{e._height=s.size,e._viewHeight=I8(e,s.size),o()},{size:r});const a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function Dhe(e,t,n,r,i,o){this.runAfter(a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(D8,n,P8),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(R8,r,P8),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter(u=>u.resize())},!1,1)}function Rhe(e){return this._runtime.getState(e||{data:Phe,signals:jhe,recurse:!0})}function Phe(e,t){return t.modified&&J(t.input.value)&&e.indexOf("_:vega:_")}function jhe(e,t){return!(e==="parent"||t instanceof vc.proxy)}function Ihe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Lhe(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(yse(n,t))}function zhe(e,t,n,r){const i=e.element();i&&i.setAttribute("title",$he(r))}function $he(e){return e==null?"":J(e)?L8(e):ce(e)&&!qa(e)?Bhe(e):e+""}function Bhe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(J(n)?L8(n):z8(n))}).join(`
`)}function L8(e){return"["+e.map(z8).join(", ")+"]"}function z8(e){return J(e)?"[\u2026]":ce(e)&&!qa(e)?"{\u2026}":e}function $8(e,t){const n=this;if(t=t||{},yc.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=Ae({},e.locale,t.locale);n.locale(s5(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||bs.Canvas,n._scenegraph=new HE;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||zhe,n._redraw=!0,n._handler=new Rh().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=ahe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Nhe(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:Ae({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=j8(n,n._width),n._viewHeight=I8(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Fhe(n),Xde(n),Kde(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function A1(e,t){return pe(e._signals,t)?e._signals[t]:Q("Unrecognized signal name: "+re(t))}function B8(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function U8(e,t,n,r){let i=B8(n,r);return i||(i=TC(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function W8(e,t,n){const r=B8(t,n);return r&&t._targets.remove(r),e}ne($8,yc,{async evaluate(e,t,n){if(await yc.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,ehe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&Jm(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&E8(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=A1(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",F8(e)):F8(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(fy(e)||Q("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(yc.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(A1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Dhe,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=TC(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return U8(this,e,A1(this,e),t)},removeSignalListener(e,t){return W8(this,A1(this,e),t)},addDataListener(e,t){return U8(this,e,E1(this,e).values,t)},removeDataListener(e,t){return W8(this,E1(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=AC(this,null);this._globalCursor=!!e,t&&AC(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Lhe,events:uhe,finalize:che,hover:lhe,data:Qde,change:O1,insert:Jde,remove:Zde,scale:Mhe,initialize:Ohe,toImageURL:Che,toCanvas:Ahe,toSVG:The,getState:Rhe,setState:Ihe});const Uhe="view",T1="[",N1="]",H8="{",G8="}",Whe=":",q8=",",Hhe="@",Ghe=">",qhe=/[[\]{}]/,Vhe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let V8,Y8;function As(e,t,n){return V8=t||Uhe,Y8=n||Vhe,X8(e.trim()).map(DC)}function Yhe(e){return Y8[e]}function wp(e,t,n,r,i){const o=e.length;let a=0,s;for(;t<o;++t){if(s=e[t],!a&&s===n)return t;i&&i.indexOf(s)>=0?--a:r&&r.indexOf(s)>=0&&++a}return t}function X8(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=wp(e,i,q8,T1+H8,N1+G8),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function DC(e){return e[0]==="["?Xhe(e):Khe(e)}function Xhe(e){const t=e.length;let n=1,r;if(n=wp(e,n,N1,T1,N1),n===t)throw"Empty between selector: "+e;if(r=X8(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Ghe)throw"Expected '>' after between selector: "+e;r=r.map(DC);const i=DC(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Khe(e){const t={source:V8},n=[];let r=[0,0],i=0,o=0,a=e.length,s=0,u,l;if(e[a-1]===G8){if(s=e.lastIndexOf(H8),s>=0){try{r=Qhe(e.substring(s+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,s).trim(),a=e.length}else throw"Unmatched right brace: "+e;s=0}if(!a)throw e;if(e[0]===Hhe&&(i=++s),u=wp(e,s,Whe),u<a&&(n.push(e.substring(o,u).trim()),o=s=++u),s=wp(e,s,T1),s===a)n.push(e.substring(o,a).trim());else if(n.push(e.substring(o,s).trim()),l=[],o=++s,o===a)throw"Unmatched left bracket: "+e;for(;s<a;){if(s=wp(e,s,N1),s===a)throw"Unmatched left bracket: "+e;if(l.push(e.substring(o,s).trim()),s<a-1&&e[++s]!==T1)throw"Expected left bracket: "+e;o=++s}if(!(a=n.length)||qhe.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],i?t.markname=n[0].slice(1):Yhe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Qhe(e){const t=e.split(q8);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Jhe(e){return ce(e)?e:{type:e||"pad"}}const Sp=e=>+e||0,Zhe=e=>({top:e,bottom:e,left:e,right:e});function epe(e){return ce(e)?e.signal?e:{top:Sp(e.top),bottom:Sp(e.bottom),left:Sp(e.left),right:Sp(e.right)}:Zhe(Sp(e))}const Yt=e=>ce(e)&&!J(e)?Ae({},e):{value:e};function K8(e,t,n,r){return n!=null?(ce(n)&&!J(n)||J(n)&&n.length&&ce(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function ln(e,t,n){for(const r in t)K8(e,r,t[r]);for(const r in n)K8(e,r,n[r],"update")}function Zc(e,t,n){for(const r in t)n&&pe(n,r)||(e[r]=Ae(e[r]||{},t[r]));return e}function ef(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const RC="mark",PC="frame",jC="scope",tpe="axis",npe="axis-domain",rpe="axis-grid",ipe="axis-label",ope="axis-tick",ape="axis-title",spe="legend",upe="legend-band",lpe="legend-entry",cpe="legend-gradient",Q8="legend-label",fpe="legend-symbol",dpe="legend-title",hpe="title",ppe="title-text",gpe="title-subtitle";function mpe(e,t,n,r,i){const o={},a={};let s,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!ef(u,e)&&IC(o,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===PC?i.group:n===RC?Ae({},i.mark,i[t]):null;for(u in c)l=ef(u,e)||(u==="fill"||u==="stroke")&&(ef("fill",e)||ef("stroke",e)),l||IC(o,u,c[u]);ue(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)ef(h,e)||IC(o,h,d[h])}),e=Ae({},e);for(u in o)c=o[u],c.signal?(s=s||{})[u]=c:a[u]=c;return e.enter=Ae(a,e.enter),s&&(e.update=Ae(s,e.update)),e}function IC(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const J8=e=>se(e)?re(e):e.signal?`(${e.signal})`:Z8(e);function M1(e){if(e.gradient!=null)return vpe(e);let t=e.signal?`(${e.signal})`:e.color?ype(e.color):e.field!=null?Z8(e.field):e.value!==void 0?re(e.value):void 0;return e.scale!=null&&(t=bpe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${D1(e.exponent)})`),e.mult!=null&&(t+=`*${D1(e.mult)}`),e.offset!=null&&(t+=`+${D1(e.offset)}`),e.round&&(t=`round(${t})`),t}const F1=(e,t,n,r)=>`(${e}(${[t,n,r].map(M1).join(",")})+'')`;function ype(e){return e.c?F1("hcl",e.h,e.c,e.l):e.h||e.s?F1("hsl",e.h,e.s,e.l):e.l||e.a?F1("lab",e.l,e.a,e.b):e.r||e.g||e.b?F1("rgb",e.r,e.g,e.b):null}function vpe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:re(n));for(;t.length&&Re(t)==null;)t.pop();return t.unshift(J8(e.gradient)),`gradient(${t.join(",")})`}function D1(e){return ce(e)?"("+M1(e)+")":e}function Z8(e){return ez(ce(e)?e:{datum:e})}function ez(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Q("Invalid field reference: "+re(e));return e.signal||(r=se(r)?io(r).map(re).join("]["):ez(r)),t+"["+r+"]"}function bpe(e,t){const n=J8(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+D1(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function xpe(e){let t="";return e.forEach(n=>{const r=M1(n);t+=n.test?`(${n.test})?${r}:`:r}),Re(t)===":"&&(t+="null"),t}function tz(e,t,n,r,i,o){const a={};o=o||{},o.encoders={$encode:a},e=mpe(e,t,n,r,i.config);for(const s in e)a[s]=wpe(e[s],t,o,i);return o}function wpe(e,t,n,r){const i={},o={};for(const a in e)e[a]!=null&&(i[a]=Epe(Spe(e[a]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function Spe(e){return J(e)?xpe(e):M1(e)}function Epe(e,t,n,r){const i=ko(e,t);return i.$fields.forEach(o=>r[o]=1),Ae(n,i.$params),i.$expr}const Ope="outer",kpe=["value","update","init","react","bind"];function nz(e,t){Q(e+' for "outer" push: '+re(t))}function rz(e,t){const n=e.name;if(e.push===Ope)t.signals[n]||nz("No prior signal definition",n),kpe.forEach(r=>{e[r]!==void 0&&nz("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function LC(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function R1(e,t,n,r){return new LC(e,t,n,r)}function P1(e,t){return R1("operator",e,t)}function ve(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Ep(e,t){return t?{$field:e,$name:t}:{$field:e}}const zC=Ep("key");function iz(e,t){return{$compare:e,$order:t}}function Cpe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const _pe="ascending",Ape="descending";function Tpe(e){return ce(e)?(e.order===Ape?"-":"+")+j1(e.op,e.field):""}function j1(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const $C="scope",BC="view";function $t(e){return e&&e.signal}function Npe(e){return e&&e.expr}function I1(e){if($t(e))return!0;if(ce(e)){for(const t in e)if(I1(e[t]))return!0}return!1}function ji(e,t){return e!=null?e:t}function Zu(e){return e&&e.signal||e}const oz="timer";function Op(e,t){return(e.merge?Fpe:e.stream?Dpe:e.type?Rpe:Q("Invalid stream specification: "+re(e)))(e,t)}function Mpe(e){return e===$C?BC:e||BC}function Fpe(e,t){const n=e.merge.map(i=>Op(i,t)),r=UC({merge:n},e,t);return t.addStream(r).id}function Dpe(e,t){const n=Op(e.stream,t),r=UC({stream:n},e,t);return t.addStream(r).id}function Rpe(e,t){let n;e.type===oz?(n=t.event(oz,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Mpe(e.source),e.type);const r=UC({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function UC(e,t,n){let r=t.between;return r&&(r.length!==2&&Q('Stream "between" parameter must have 2 entries: '+re(t)),e.between=[Op(r[0],n),Op(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Ppe(t.marktype,t.markname,t.markrole)),t.source===$C&&r.push("inScope(event.item)"),r.length&&(e.filter=ko("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Ppe(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const jpe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Ipe(e,t,n){const r=e.encode,i={target:n};let o=e.events,a=e.update,s=[];o||Q("Signal update missing events specification."),se(o)&&(o=As(o,t.isSubscope()?$C:BC)),o=ue(o).filter(u=>u.signal||u.scale?(s.push(u),0):1),s.length>1&&(s=[zpe(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),r!=null&&(a&&Q("Signal encode and update are mutually exclusive."),a="encode(item(),"+re(r)+")"),i.update=se(a)?ko(a,t):a.expr!=null?ko(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:jpe,$params:{$value:t.signalRef(a.signal)}}:Q("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach(u=>t.addUpdate(Ae(Lpe(u,t),i)))}function Lpe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Op(e,t)}}function zpe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function $pe(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Q("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=ko(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Ipe(i,t,n.id))}const Je=e=>(t,n,r)=>R1(e,n,t||void 0,r),az=Je("aggregate"),Bpe=Je("axisticks"),sz=Je("bound"),Ii=Je("collect"),uz=Je("compare"),Upe=Je("datajoin"),lz=Je("encode"),Wpe=Je("expression"),Hpe=Je("facet"),Gpe=Je("field"),qpe=Je("key"),Vpe=Je("legendentries"),Ype=Je("load"),Xpe=Je("mark"),Kpe=Je("multiextent"),Qpe=Je("multivalues"),Jpe=Je("overlap"),Zpe=Je("params"),cz=Je("prefacet"),ege=Je("projection"),tge=Je("proxy"),nge=Je("relay"),fz=Je("render"),rge=Je("scale"),el=Je("sieve"),ige=Je("sortitems"),dz=Je("viewlayout"),oge=Je("values");let age=0;const hz={min:"min",max:"max",count:"sum"};function sge(e,t){const n=e.type||"linear";J4(n)||Q("Unrecognized scale type: "+re(n)),t.addScale(e.name,{type:n,domain:void 0})}function uge(e,t){const n=t.getScale(e.name).params;let r;n.domain=pz(e.domain,e,t),e.range!=null&&(n.range=mz(e,t,n)),e.interpolate!=null&&vge(e.interpolate,n),e.nice!=null&&(n.nice=yge(e.nice)),e.bins!=null&&(n.bins=mge(e.bins,t));for(r in e)pe(n,r)||r==="name"||(n[r]=ii(e[r],t))}function ii(e,t){return ce(e)?e.signal?t.signalRef(e.signal):Q("Unsupported object: "+re(e)):e}function L1(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>ii(n,t))}function z1(e){Q("Can not find data set: "+re(e))}function pz(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Q("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(J(e)?lge:e.fields?fge:cge)(e,t,n)}function lge(e,t,n){return e.map(r=>ii(r,n))}function cge(e,t,n){const r=n.getData(e.data);return r||z1(e.data),Nc(t.type)?r.valuesRef(n,e.field,gz(e.sort,!1)):tP(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function fge(e,t,n){const r=e.data,i=e.fields.reduce((o,a)=>(a=se(a)?{data:r,field:a}:J(a)||a.signal?dge(a,n):a,o.push(a),o),[]);return(Nc(t.type)?hge:tP(t.type)?pge:gge)(e,n,i)}function dge(e,t){const n="_:vega:_"+age++,r=Ii({});if(J(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+re(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,el({})]),{data:n,field:"data"}}function hge(e,t,n){const r=gz(e.sort,!0);let i,o;const a=n.map(l=>{const c=t.getData(l.data);return c||z1(l.data),c.countsRef(t,l.field,r)}),s={groupby:zC,pulse:a};r&&(i=r.op||"count",o=r.field?j1(i,r.field):"count",s.ops=[hz[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(az(s));const u=t.add(Ii({pulse:ve(i)}));return o=t.add(oge({field:zC,sort:t.sortRef(r),pulse:ve(u)})),ve(o)}function gz(e,t){return e&&(!e.field&&!e.op?ce(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Q("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!hz[e.op]&&Q("Multiple domain scales can not be sorted using "+e.op)),e}function pge(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||z1(i.data),o.domainRef(t,i.field)});return ve(t.add(Qpe({values:r})))}function gge(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||z1(i.data),o.extentRef(t,i.field)});return ve(t.add(Kpe({extents:r})))}function mge(e,t){return e.signal||J(e)?L1(e,t):t.objectProperty(e)}function yge(e){return ce(e)?{interval:ii(e.interval),step:ii(e.step)}:ii(e)}function vge(e,t){t.interpolate=ii(e.type||e),e.gamma!=null&&(t.interpolateGamma=ii(e.gamma))}function mz(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(se(i)){if(r&&pe(r,i))return e=Ae({},e,{range:r[i]}),mz(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Nc(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Q("Unrecognized scale range value: "+re(i))}else if(i.scheme){n.scheme=J(i.scheme)?L1(i.scheme,t):ii(i.scheme,t),i.extent&&(n.schemeExtent=L1(i.extent,t)),i.count&&(n.schemeCount=ii(i.count,t));return}else if(i.step){n.rangeStep=ii(i.step,t);return}else{if(Nc(e.type)&&!J(i))return pz(i,e,t);J(i)||Q("Unsupported range type: "+re(i))}return i.map(o=>(J(o)?L1:ii)(o,t))}function bge(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=WC(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=WC(n[i],i,t));t.addProjection(e.name,r)}function WC(e,t,n){return J(e)?e.map(r=>WC(r,t,n)):ce(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Q("Unsupported parameter object: "+re(e)):e}const Li="top",tf="left",nf="right",Ts="bottom",yz="center",xge="vertical",wge="start",Sge="middle",Ege="end",HC="index",GC="label",Oge="offset",rf="perc",kge="perc2",oi="value",kp="guide-label",qC="guide-title",Cge="group-title",_ge="group-subtitle",vz="symbol",$1="gradient",VC="discrete",YC="size",Age="shape",Tge="fill",Nge="stroke",Mge="strokeWidth",Fge="strokeDash",Dge="opacity",XC=[YC,Age,Tge,Nge,Mge,Fge,Dge],Cp={name:1,style:1,interactive:1},ze={value:0},ai={value:1},B1="group",bz="rect",KC="rule",Rge="symbol",tl="text";function _p(e){return e.type=B1,e.interactive=e.interactive||!1,e}function pr(e,t){const n=(r,i)=>ji(e[r],ji(t[r],i));return n.isVertical=r=>xge===ji(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>ji(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>ji(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>ji(e.columns,ji(t.columns,+n.isVertical(!0))),n}function xz(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Pge(e,t,n){const r=t.config.style[n];return r&&r[e]}function U1(e,t,n){return`item.anchor === '${wge}' ? ${e} : item.anchor === '${Ege}' ? ${t} : ${n}`}const QC=U1(re(tf),re(nf),re(yz));function jge(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ce(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function wz(e,t){return t?e?ce(e)?Object.assign({},e,{offset:wz(e.offset,t)}):{value:e,offset:t}:t:e}function Lr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Zc(e.encode,t,Cp)):e.interactive=!1,e}function Ige(e,t,n,r){const i=pr(e,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength();let u,l,c,f,d;o?(l=[0,1],c=[0,0],f=a,d=s):(l=[0,0],c=[1,0],f=s,d=a);const h={enter:u={opacity:ze,x:ze,y:ze,width:Yt(f),height:Yt(d)},update:Ae({},u,{opacity:ai,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:ze}};return ln(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Lr({type:bz,role:cpe,encode:h},r)}function Lge(e,t,n,r,i){const o=pr(e,n),a=o.isVertical(),s=o.gradientThickness(),u=o.gradientLength();let l,c,f,d,h="";a?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:ze,fill:{scale:t,field:oi}};p[l]={signal:h+"datum."+rf,mult:u},p[c]=ze,p[f]={signal:h+"datum."+kge,mult:u},p[d]=Yt(s);const g={enter:p,update:Ae({},p,{opacity:ai}),exit:{opacity:ze}};return ln(g,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),Lr({type:bz,role:upe,key:oi,from:i,encode:g},r)}const zge=`datum.${rf}<=0?"${tf}":datum.${rf}>=1?"${nf}":"${yz}"`,$ge=`datum.${rf}<=0?"${Ts}":datum.${rf}>=1?"${Li}":"${Sge}"`;function Sz(e,t,n,r){const i=pr(e,t),o=i.isVertical(),a=Yt(i.gradientThickness()),s=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:ze},update:c={opacity:ai,text:{field:GC}},exit:{opacity:ze}};return ln(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:ji(e.labelLimit,t.gradientLabelLimit)}),o?(l.align={value:"left"},l.baseline=c.baseline={signal:$ge},f="y",d="x",h="1-"):(l.align=c.align={signal:zge},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+rf,mult:s},l[d]=c[d]=a,a.offset=ji(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+HC}:void 0,Lr({type:tl,role:Q8,style:kp,key:oi,from:r,encode:p,overlap:u},n)}function Bge(e,t,n,r,i){const o=pr(e,t),a=n.entries,s=!!(a&&a.interactive),u=a?a.name:void 0,l=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Oge} : datum.${YC}`,h=l?Yt(l):{field:YC},p=`datum.${HC}`,g=`max(1, ${i})`;let m,y,v,b,x;h.mult=.5,m={enter:y={opacity:ze,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:ai,x:y.x,y:y.y},exit:{opacity:ze}};let w=null,E=null;e.fill||(w=t.symbolBaseFillColor,E=t.symbolBaseStrokeColor),ln(m,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",E),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),XC.forEach(D=>{e[D]&&(v[D]=y[D]={scale:e[D],field:oi})});const S=Lr({type:Rge,role:fpe,key:oi,from:f,clip:l?!0:void 0,encode:m},n.symbols),_=Yt(c);_.offset=o("labelOffset"),m={enter:y={opacity:ze,x:{signal:d,offset:_},y:h},update:v={opacity:ai,text:{field:GC},x:y.x,y:y.y},exit:{opacity:ze}},ln(m,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const M=Lr({type:tl,role:Q8,style:kp,key:oi,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!l},width:ze,height:l?Yt(l):ze,opacity:ze},exit:{opacity:ze},update:v={opacity:ai,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(b=`ceil(item.mark.items.length / ${g})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,x={field:["row",p]}):(v.row.signal=`floor(${p} / ${g})`,v.column.signal=`${p} % ${g}`,x={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:HC}},_p({role:jC,from:r,encode:Zc(m,a,Cp),marks:[S,M],name:u,interactive:s,sort:x})}function Uge(e,t){const n=pr(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const JC='item.orient === "left"',ZC='item.orient === "right"',W1=`(${JC} || ${ZC})`,Wge=`datum.vgrad && ${W1}`,Hge=U1('"top"','"bottom"','"middle"'),Gge=U1('"right"','"left"','"center"'),qge=`datum.vgrad && ${ZC} ? (${Gge}) : (${W1} && !(datum.vgrad && ${JC})) ? "left" : ${QC}`,Vge=`item._anchor || (${W1} ? "middle" : "start")`,Yge=`${Wge} ? (${JC} ? -90 : 90) : 0`,Xge=`${W1} ? (datum.vgrad ? (${ZC} ? "bottom" : "top") : ${Hge}) : "top"`;function Kge(e,t,n,r){const i=pr(e,t),o={enter:{opacity:ze},update:{opacity:ai,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:ze}};return ln(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Vge},angle:{signal:Yge},align:{signal:qge},baseline:{signal:Xge},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Lr({type:tl,role:dpe,style:qC,from:r,encode:o},n)}function Qge(e,t){let n;return ce(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Ez(e.path)+")":e.sphere&&(n="geoShape("+Ez(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Ez(e){return ce(e)&&e.signal?e.signal:re(e)}function Oz(e){const t=e.role||"";return!t.indexOf("axis")||!t.indexOf("legend")||!t.indexOf("title")?t:e.type===B1?jC:t||RC}function Jge(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Oz(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Zge(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function e_(e,t){const n=A5(e.type);n||Q("Unrecognized transform type: "+re(e.type));const r=R1(n.type.toLowerCase(),null,kz(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function kz(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const a=e.params[o];r[a.name]=eme(a,t,n)}return r}function eme(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return tme(e,t,n);if(i===void 0){e.required&&Q("Missing required "+re(t.type)+" parameter: "+re(e.name));return}else{if(r==="param")return nme(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!$t(i)?i.map(o=>Cz(e,o,n)):Cz(e,i,n)}function Cz(e,t,n){const r=e.type;if($t(t))return Az(r)?Q("Expression references can not be signals."):t_(r)?n.fieldRef(t):Tz(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||t_(r);return i&&rme(t)?n.exprRef(t.expr,t.as):i&&ime(t)?Ep(t.field,t.as):Az(r)?ko(t,n):ome(r)?ve(n.getData(t).values):t_(r)?Ep(t):Tz(r)?n.compareRef(t):t}}function tme(e,t,n){return se(t.from)||Q('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function nme(e,t,n){const r=t[e.name];return e.array?(J(r)||Q("Expected an array of sub-parameters. Instead: "+re(r)),r.map(i=>_z(e,i,n))):_z(e,r,n)}function _z(e,t,n){const r=e.params.length;let i;for(let a=0;a<r;++a){i=e.params[a];for(const s in i.key)if(i.key[s]!==t[s]){i=null;break}if(i)break}i||Q("Unsupported parameter: "+re(t));const o=Ae(kz(i,t,n),i.key);return ve(n.add(Zpe(o)))}const rme=e=>e&&e.expr,ime=e=>e&&e.field,ome=e=>e==="data",Az=e=>e==="expr",t_=e=>e==="field",Tz=e=>e==="compare";function ame(e,t,n){let r,i,o,a,s;return e?(r=e.facet)&&(t||Q("Only group marks can be faceted."),r.field!=null?a=s=H1(r,n):(e.data?s=ve(n.getData(e.data).aggregate):(o=e_(Ae({type:"aggregate",groupby:ue(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=H1(r,n),a=s=ve(n.add(o))),i=n.keyRef(r.groupby,!0))):a=ve(n.add(Ii(null,[{}]))),a||(a=H1(e,n)),{key:i,pulse:a,parent:s}}function H1(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:ve(t.getData(e.data).output)}function nl(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}nl.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],a=null,s=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=ve(t[s-1]),e.add(t[s]),t[s].type==="aggregate"&&(a=t[s]);return new nl(e,o,i,r,a)};function Nz(e){return se(e)?e:null}function Mz(e,t,n){const r=j1(n.op,n.field);let i;if(t.ops){for(let o=0,a=t.as.length;o<a;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function Ap(e,t,n,r,i,o,a){const s=t[n]||(t[n]={}),u=Tpe(o);let l=Nz(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=s[l]),!c){const d=o?{field:zC,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:ve(t.output)};u&&(d.sort=e.sortRef(o)),f=e.add(R1(r,void 0,d)),a&&(t.index[i]=f),c=ve(f),l!=null&&(s[l]=c)}return c}nl.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=Nz(t);let a,s,u;return o!=null&&(e=r.scope,a=i[o]),a?n&&n.field&&Mz(e,a.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:ve(r.output)},n&&n.field&&Mz(e,u,n),s=e.add(az(u)),a=e.add(Ii({pulse:ve(s)})),a={agg:s,ref:ve(a)},o!=null&&(i[o]=a)),a.ref},tuplesRef(){return ve(this.values)},extentRef(e,t){return Ap(e,this,"extent","extent",t,!1)},domainRef(e,t){return Ap(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Ap(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Ap(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Ap(e,this,"indata","tupleindex",t,!0,!0)}};function sme(e,t,n){const r=e.from.facet,i=r.name,o=H1(r,t);let a;r.name||Q("Facet must have a name: "+re(r)),r.data||Q("Facet must reference a data set: "+re(r)),r.field?a=t.add(cz({field:t.fieldRef(r.field),pulse:o})):r.groupby?a=t.add(Hpe({key:t.keyRef(r.groupby),group:ve(t.proxy(n.parent)),pulse:o})):Q("Facet must specify groupby or field: "+re(r));const s=t.fork(),u=s.add(Ii()),l=s.add(el({pulse:ve(u)}));s.addData(i,new nl(s,u,u,l)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}function ume(e,t,n){const r=t.add(cz({pulse:n.pulse})),i=t.fork();i.add(el()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function Fz(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,a=e.modify,s=e.values,u=t.add(P1()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,o,a,s].map(f=>f==null?"null":f).join(",")+"),0)",c=ko(l,t);u.update=c.$expr,u.params=c.$params}function G1(e,t){const n=Oz(e),r=e.type===B1,i=e.from&&e.from.facet,o=e.overlap;let a=e.layout||n===jC||n===PC,s,u,l,c,f,d,h;const p=n===RC||a||i,g=ame(e.from,r,t);u=t.add(Upe({key:g.key||(e.key?Ep(e.key):void 0),pulse:g.pulse,clean:!r}));const m=ve(u);u=l=t.add(Ii({pulse:m})),u=t.add(Xpe({markdef:Jge(e),interactive:Zge(e.interactive,t),clip:Qge(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:ve(u)}));const y=ve(u);u=c=t.add(lz(tz(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(E=>{const S=e_(E,t),_=S.metadata;(_.generates||_.changes)&&Q("Mark transforms should not generate new data."),_.nomod||(c.params.mod=!0),S.params.pulse=ve(u),t.add(u=S)}),e.sort&&(u=t.add(ige({sort:t.compareRef(e.sort),pulse:ve(u)})));const v=ve(u);(i||a)&&(a=t.add(dz({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=ve(a));const b=t.add(sz({mark:y,pulse:d||v}));h=ve(b),r&&(p&&(s=t.operators,s.pop(),a&&s.pop()),t.pushState(v,d||h,m),i?sme(e,t,g):p?ume(e,t,g):t.parse(e),t.popState(),p&&(a&&s.push(a),s.push(b))),o&&(h=lme(o,h,t));const x=t.add(fz({pulse:h})),w=t.add(el({pulse:ve(x)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new nl(t,l,x,w)),e.on&&e.on.forEach(E=>{(E.insert||E.remove||E.toggle)&&Q("Marks only support modify triggers."),Fz(E,t,f)}))}function lme(e,t,n){const r=e.method,i=e.bound,o=e.separation,a={separation:$t(o)?n.signalRef(o.signal):o,method:$t(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),i){const s=i.tolerance;a.boundTolerance=$t(s)?n.signalRef(s.signal):+s,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return ve(n.add(Jpe(a)))}function cme(e,t){const n=t.config.legend,r=e.encode||{},i=pr(e,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,u=o.style,l={};let c=0,f,d,h;XC.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Q("Missing valid scale for legend.");const p=fme(e,t.scaleType(c)),g={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},m=ve(t.add(Ii(null,[g]))),y={enter:{x:{value:0},y:{value:0}}},v=ve(t.add(Vpe(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===$1?(h=[Ige(e,c,n,r.gradient),Sz(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${Zu(i.gradientLength())})/100))`)):p===VC?h=[Lge(e,c,n,r.gradient,v),Sz(e,n,r.labels,v)]:(f=Uge(e,n),h=[Bge(e,n,r,v,Zu(f.columns))],d.size=pme(e,t,h[0].marks)),h=[_p({role:lpe,from:m,encode:y,marks:h,layout:f,interactive:s})],g.title&&h.push(Kge(e,n,r.title,m)),G1(_p({role:spe,from:m,encode:Zc(hme(i,e,n),o,Cp),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:u}),t)}function fme(e,t){let n=e.type||vz;return!e.type&&dme(e)===1&&(e.fill||e.stroke)&&(n=aE(t)?$1:sE(t)?VC:vz),n!==$1?n:sE(t)?VC:$1}function dme(e){return XC.reduce((t,n)=>t+(e[n]?1:0),0)}function hme(e,t,n){const r={enter:{},update:{}};return ln(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function pme(e,t,n){const r=Zu(Dz("size",e,n)),i=Zu(Dz("strokeWidth",e,n)),o=Zu(gme(n[1].encode,t,kp));return ko(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function Dz(e,t,n){return t[e]?`scale("${t[e]}",datum)`:xz(e,n[0].encode)}function gme(e,t,n){return xz("fontSize",e)||Pge("fontSize",t,n)}const mme=`item.orient==="${tf}"?-90:item.orient==="${nf}"?90:0`;function yme(e,t){e=se(e)?{text:e}:e;const n=pr(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,u=[],l={},c=ve(t.add(Ii(null,[l])));return u.push(xme(e,n,vme(e),c)),e.subtitle&&u.push(wme(e,n,r.subtitle,c)),G1(_p({role:hpe,from:c,encode:bme(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function vme(e){const t=e.encode;return t&&t.title||Ae({name:e.name,interactive:e.interactive,style:e.style},t)}function bme(e,t){const n={enter:{},update:{}};return ln(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:QC},angle:{signal:mme},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Zc(n,t,Cp)}function xme(e,t,n,r){const i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ln(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Lr({type:tl,role:ppe,style:Cge,from:r,encode:a},n)}function wme(e,t,n,r){const i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ln(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Lr({type:tl,role:gpe,style:_ge,from:r,encode:a},n)}function Sme(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(e_(r,t))}),e.on&&e.on.forEach(r=>{Fz(r,t,e.name)}),t.addDataPipeline(e.name,Eme(e,t,n))}function Eme(e,t,n){const r=[];let i=null,o=!1,a=!1,s,u,l,c,f;for(e.values?$t(e.values)||I1(e.format)?(r.push(Rz(t,e)),r.push(i=rl())):r.push(i=rl({$ingest:e.values,$format:e.format})):e.url?I1(e.url)||I1(e.format)?(r.push(Rz(t,e)),r.push(i=rl())):r.push(i=rl({$request:e.url,$format:e.format})):e.source&&(i=s=ue(e.source).map(d=>ve(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=rl()),r.push(c),f.generates&&(a=!0),f.modifies&&!a&&(o=!0),f.source?i=c:f.changes&&(i=null);return s&&(l=s.length-1,r[0]=nge({derive:o,pulse:l?s:s[0]}),(o||l)&&r.splice(1,0,rl())),i||r.push(rl()),r.push(el({})),r}function rl(e){const t=Ii({},e);return t.metadata={source:!0},t}function Rz(e,t){return Ype({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Pz=e=>e===Ts||e===Li,q1=(e,t,n)=>$t(e)?_me(e.signal,t,n):e===tf||e===Li?t:n,Xt=(e,t,n)=>$t(e)?kme(e.signal,t,n):Pz(e)?t:n,zi=(e,t,n)=>$t(e)?Cme(e.signal,t,n):Pz(e)?n:t,jz=(e,t,n)=>$t(e)?Ame(e.signal,t,n):e===Li?{value:t}:{value:n},Ome=(e,t,n)=>$t(e)?Tme(e.signal,t,n):e===nf?{value:t}:{value:n},kme=(e,t,n)=>Iz(`${e} === '${Li}' || ${e} === '${Ts}'`,t,n),Cme=(e,t,n)=>Iz(`${e} !== '${Li}' && ${e} !== '${Ts}'`,t,n),_me=(e,t,n)=>n_(`${e} === '${tf}' || ${e} === '${Li}'`,t,n),Ame=(e,t,n)=>n_(`${e} === '${Li}'`,t,n),Tme=(e,t,n)=>n_(`${e} === '${nf}'`,t,n),Iz=(e,t,n)=>(t=t!=null?Yt(t):t,n=n!=null?Yt(n):n,Lz(t)&&Lz(n)?(t=t?t.signal||re(t.value):null,n=n?n.signal||re(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Ae({test:e},t)].concat(n||[])),Lz=e=>e==null||Object.keys(e).length===1,n_=(e,t,n)=>({signal:`${e} ? (${of(t)}) : (${of(n)})`}),Nme=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${tf}' ? (${of(r)}) : `:"")+(n!=null?`${e} === '${Ts}' ? (${of(n)}) : `:"")+(i!=null?`${e} === '${nf}' ? (${of(i)}) : `:"")+(t!=null?`${e} === '${Li}' ? (${of(t)}) : `:"")+"(null)"}),of=e=>$t(e)?e.signal:e==null?null:re(e),Mme=(e,t)=>t===0?0:$t(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},af=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function sf(e,t,n,r){let i;if(t&&pe(t,e))return t[e];if(pe(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[qC][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[kp][i]}return null}function zz(e){const t={};for(const n of e)if(!!n)for(const r in n)t[r]=1;return Object.keys(t)}function Fme(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,s,u,l;if($t(a)){const f=zz([n.axisX,n.axisY]),d=zz([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);s={};for(l of f)s[l]=Xt(a,sf(l,n.axisX,i,r),sf(l,n.axisY,i,r));u={};for(l of d)u[l]=Nme(a.signal,sf(l,n.axisTop,i,r),sf(l,n.axisBottom,i,r),sf(l,n.axisLeft,i,r),sf(l,n.axisRight,i,r))}else s=a===Li||a===Ts?n.axisX:n.axisY,u=n["axis"+a[0].toUpperCase()+a.slice(1)];return s||u||o?Ae({},i,s,u,o):i}function Dme(e,t,n,r){const i=pr(e,t),o=e.orient;let a,s;const u={enter:a={opacity:ze},update:s={opacity:ai},exit:{opacity:ze}};ln(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=$z(e,0),c=$z(e,1);return a.x=s.x=Xt(o,l,ze),a.x2=s.x2=Xt(o,c),a.y=s.y=zi(o,l,ze),a.y2=s.y2=zi(o,c),Lr({type:KC,role:npe,from:r,encode:u},n)}function $z(e,t){return{scale:e.scale,range:t}}function Rme(e,t,n,r,i){const o=pr(e,t),a=e.orient,s=e.gridScale,u=q1(a,1,-1),l=Pme(e.offset,u);let c,f,d;const h={enter:c={opacity:ze},update:d={opacity:ai},exit:f={opacity:ze}};ln(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:oi,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},g=Xt(a,{signal:"height"},{signal:"width"}),m=s?{scale:s,range:0,mult:u,offset:l}:{value:0,offset:l},y=s?{scale:s,range:1,mult:u,offset:l}:Ae(g,{mult:u,offset:l});return c.x=d.x=Xt(a,p,m),c.y=d.y=zi(a,p,m),c.x2=d.x2=zi(a,y),c.y2=d.y2=Xt(a,y),f.x=Xt(a,p),f.y=zi(a,p),Lr({type:KC,role:rpe,key:oi,from:r,encode:h},n)}function Pme(e,t){if(t!==1)if(!ce(e))e=$t(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Ae({},e);for(;n.mult!=null;)if(ce(n.mult))n=n.mult=Ae({},n.mult);else return n.mult=$t(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function jme(e,t,n,r,i,o){const a=pr(e,t),s=e.orient,u=q1(s,-1,1);let l,c,f;const d={enter:l={opacity:ze},update:f={opacity:ai},exit:c={opacity:ze}};ln(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const h=Yt(i);h.mult=u;const p={scale:e.scale,field:oi,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return f.y=l.y=Xt(s,ze,p),f.y2=l.y2=Xt(s,h),c.x=Xt(s,p),f.x=l.x=zi(s,ze,p),f.x2=l.x2=zi(s,h),c.y=zi(s,p),Lr({type:KC,role:ope,key:oi,from:r,encode:d},n)}function r_(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Ime(e,t,n,r,i,o){const a=pr(e,t),s=e.orient,u=e.scale,l=q1(s,-1,1),c=Zu(a("labelFlush")),f=Zu(a("labelFlushOffset")),d=a("labelAlign"),h=a("labelBaseline");let p=c===0||!!c,g;const m=Yt(i);m.mult=l,m.offset=Yt(a("labelPadding")||0),m.offset.mult=l;const y={scale:u,field:oi,band:.5,offset:wz(o.offset,a("labelOffset"))},v=Xt(s,p?r_(u,c,'"left"','"right"','"center"'):{value:"center"},Ome(s,"left","right")),b=Xt(s,jz(s,"bottom","top"),p?r_(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=r_(u,c,`-(${f})`,f,0);p=p&&f;const w={opacity:ze,x:Xt(s,y,m),y:zi(s,y,m)},E={enter:w,update:g={opacity:ai,text:{field:GC},x:w.x,y:w.y,align:v,baseline:b},exit:{opacity:ze,x:w.x,y:w.y}};ln(E,{dx:!d&&p?Xt(s,x):null,dy:!h&&p?zi(s,x):null}),ln(E,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:h});const S=a("labelBound");let _=a("labelOverlap");return _=_||S?{separation:a("labelSeparation"),method:_,order:"datum.index",bound:S?{scale:u,orient:s,tolerance:S}:null}:void 0,g.align!==v&&(g.align=af(g.align,v)),g.baseline!==b&&(g.baseline=af(g.baseline,b)),Lr({type:tl,role:ipe,style:kp,key:oi,from:r,encode:E,overlap:_},n)}function Lme(e,t,n,r){const i=pr(e,t),o=e.orient,a=q1(o,-1,1);let s,u;const l={enter:s={opacity:ze,anchor:Yt(i("titleAnchor",null)),align:{signal:QC}},update:u=Ae({},s,{opacity:ai,text:Yt(e.title)}),exit:{opacity:ze}},c={signal:`lerp(range("${e.scale}"), ${U1(0,1,.5)})`};return u.x=Xt(o,c),u.y=zi(o,c),s.angle=Xt(o,ze,Mme(a,90)),s.baseline=Xt(o,jz(o,Ts,Li),{value:Ts}),u.angle=s.angle,u.baseline=s.baseline,ln(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),zme(i,o,l,n),l.update.align=af(l.update.align,s.align),l.update.angle=af(l.update.angle,s.angle),l.update.baseline=af(l.update.baseline,s.baseline),Lr({type:tl,role:ape,style:qC,from:r,encode:l},n)}function zme(e,t,n,r){const i=(s,u)=>s!=null?(n.update[u]=af(Yt(s),n.update[u]),!1):!ef(u,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?Yt(a):Xt(t,Yt(a),Yt(o))}function $me(e,t){const n=Fme(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,u=pr(e,n),l=jge(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=ve(t.add(Ii({},[c]))),d=ve(t.add(Bpe({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(Rme(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(jme(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(Ime(e,n,r.labels,d,p,l))),c.domain&&h.push(Dme(e,n,r.domain,f)),c.title&&h.push(Lme(e,n,r.title,f)),G1(_p({role:tpe,from:f,encode:Zc(Bme(u,e),i,Cp),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:o,interactive:a,style:s}),t)}function Bme(e,t){const n={enter:{},update:{}};return ln(n,{orient:e("orient"),offset:e("offset")||0,position:ji(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Bz(e,t,n){const r=ue(e.signals),i=ue(e.scales);return n||r.forEach(o=>rz(o,t)),ue(e.projections).forEach(o=>bge(o,t)),i.forEach(o=>sge(o,t)),ue(e.data).forEach(o=>Sme(o,t)),i.forEach(o=>uge(o,t)),(n||r).forEach(o=>$pe(o,t)),ue(e.axes).forEach(o=>$me(o,t)),ue(e.marks).forEach(o=>G1(o,t)),ue(e.legends).forEach(o=>cme(o,t)),e.title&&yme(e.title,t),t.parseLambdas(),t}const Ume=e=>Zc({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Wme(e,t){const n=t.config,r=ve(t.root=t.add(P1())),i=Hme(e,n);i.forEach(l=>rz(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Ii()),a=t.add(lz(tz(Ume(e.encode),B1,PC,e.style,t,{pulse:ve(o)}))),s=t.add(dz({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:ve(a)}));t.operators.pop(),t.pushState(ve(a),ve(s),null),Bz(e,t,i),t.operators.push(s);let u=t.add(sz({mark:r,pulse:ve(s)}));return u=t.add(fz({pulse:ve(u)})),u=t.add(el({pulse:ve(u)})),t.addData("root",new nl(t,o,o,u)),t}function Tp(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Hme(e,t){const n=a=>ji(e[a],t[a]),r=[Tp("background",n("background")),Tp("autosize",Jhe(n("autosize"))),Tp("padding",epe(n("padding"))),Tp("width",n("width")||0),Tp("height",n("height")||0)],i=r.reduce((a,s)=>(a[s.name]=s,a),{}),o={};return ue(e.signals).forEach(a=>{pe(i,a.name)?a=Ae(i[a.name],a):r.push(a),o[a.name]=a}),ue(t.signals).forEach(a=>{!pe(o,a.name)&&!pe(i,a.name)&&r.push(a)}),r}function Uz(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Wz(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Uz.prototype=Wz.prototype={parse(e){return Bz(e,this)},fork(){return new Wz(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof LC?ve(e):e;return this.add(tge({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let a,s;r&&(a=r.data||(r.data={}),s=a[i]||(a[i]=[]),s.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(ve(this.add(el({pulse:e})))),this._parent.push(t),this._lookup.push(n?ve(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Re(this._parent)},encode(){return Re(this._encode)},lookup(){return Re(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(se(e))return Ep(e,t);e.signal||Q("Unsupported field reference: "+re(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=ve(this.add(Gpe(i)))}return r},compareRef(e){let t=!1;const n=o=>$t(o)?(t=!0,this.signalRef(o.signal)):Npe(o)?(t=!0,this.exprRef(o.expr)):o,r=ue(e.field).map(n),i=ue(e.order).map(n);return t?ve(this.add(uz({fields:r,orders:i}))):iz(r,i)},keyRef(e,t){let n=!1;const r=o=>$t(o)?(n=!0,ve(i[o.signal])):o,i=this.signals;return e=ue(e).map(r),n?ve(this.add(qpe({fields:e,flat:t}))):Cpe(e,t)},sortRef(e){if(!e)return e;const t=j1(e.op,e.field),n=e.order||_pe;return n.signal?ve(this.add(uz({fields:t,orders:this.signalRef(n.signal)}))):iz(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return pe(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Q("Duplicate signal name: "+re(e));const n=t instanceof LC?t:this.add(P1(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Q("Unrecognized signal name: "+re(e)),this.signals[e]},signalRef(e){return this.signals[e]?ve(this.signals[e]):(pe(this.lambdas,e)||(this.lambdas[e]=this.add(P1(null))),ve(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=ko(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ce(e)?e:this.signalRef(e.signal||i_(e))},exprRef(e,t){const n={expr:ko(e,this)};return t&&(n.expr.$name=t),ve(this.add(Wpe(n)))},addBinding(e,t){this.bindings||Q("Nested signals do not support binding: "+re(e)),this.bindings.push(Ae({signal:e},t))},addScaleProj(e,t){pe(this.scales,e)&&Q("Duplicate scale or projection name: "+re(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,rge(t))},addProjection(e,t){this.addScaleProj(e,ege(t))},getScale(e){return this.scales[e]||Q("Unrecognized scale name: "+re(e)),this.scales[e]},scaleRef(e){return ve(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return pe(this.data,e)&&Q("Duplicate data set name: "+re(e)),this.data[e]=t},getData(e){return this.data[e]||Q("Undefined data set name: "+re(e)),this.data[e]},addDataPipeline(e,t){return pe(this.data,e)&&Q("Duplicate data set name: "+re(e)),this.addData(e,nl.fromEntries(this,t))}};function i_(e){return(J(e)?Gme:qme)(e)}function Gme(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(ce(i)?i.signal||i_(i):re(i))}return n+"]"}function qme(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+re(r)+":"+(ce(i)?i.signal||i_(i):re(i));return t+"}"}function Vme(){const e="sans-serif",t=30,n=2,r="#4c78a8",i="#000",o="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:n},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:n},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:t,strokeWidth:n,shape:"circle"},circle:{size:t,strokeWidth:n},square:{size:t,strokeWidth:n,shape:"square"},cell:{fill:"transparent",stroke:a}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Yme(e,t,n){return ce(e)||Q("Input Vega specification must be an object."),t=oc(Vme(),t,e.config),Wme(e,new Uz(t,n)).toRuntime()}var Xme="vega",Kme="5.21.0",Qme="The Vega visualization grammar.",Jme=["vega","visualization","interaction","dataflow","library","data","d3"],Zme="BSD-3-Clause",e0e="UW Interactive Data Lab (http://idl.cs.washington.edu)",t0e="build/vega-node.js",n0e="build/vega.module.js",r0e="build/vega.min.js",i0e="build/vega.min.js",o0e="index.d.ts",a0e="vega/vega",s0e={bundle:"rollup -c --config-bundle",prebuild:"rimraf build && rimraf build-es5",build:"rollup -c --config-core --config-bundle --config-ie",postbuild:"node schema-copy",pretest:"yarn build --config-test",test:"TZ=America/Los_Angeles tape 'test/**/*-test.js'",prepublishOnly:"yarn test && yarn build",postpublish:"./schema-deploy.sh"},u0e={"vega-crossfilter":"~4.0.5","vega-dataflow":"~5.7.4","vega-encode":"~4.8.3","vega-event-selector":"~3.0.0","vega-expression":"~5.0.0","vega-force":"~4.0.7","vega-format":"~1.0.4","vega-functions":"~5.12.1","vega-geo":"~4.3.8","vega-hierarchy":"~4.0.9","vega-label":"~1.1.0","vega-loader":"~4.4.1","vega-parser":"~6.1.4","vega-projection":"~1.4.5","vega-regression":"~1.0.9","vega-runtime":"~6.1.3","vega-scale":"~7.1.1","vega-scenegraph":"~4.9.4","vega-statistics":"~1.7.10","vega-time":"~2.0.4","vega-transforms":"~4.9.4","vega-typings":"~0.22.0","vega-util":"~1.17.0","vega-view":"~5.10.1","vega-view-transforms":"~4.5.8","vega-voronoi":"~4.1.5","vega-wordcloud":"~4.1.3"},l0e={"vega-schema":"*"},c0e="774165e29850b66ec8b79ba52a7955f1ab936ea6",f0e={name:Xme,version:Kme,description:Qme,keywords:Jme,license:Zme,author:e0e,main:t0e,module:n0e,unpkg:r0e,jsdelivr:i0e,types:o0e,repository:a0e,scripts:s0e,dependencies:u0e,devDependencies:l0e,gitHead:c0e};Ae(vc,fZ,Oie,noe,Bae,Pse,hle,Lue,gle,Fle,Ule,Xle);const d0e=f0e.version;var h0e=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",version:d0e,Dataflow:yc,EventStream:r0,MultiPulse:Ow,Operator:nt,Parameters:n0,Pulse:ns,Transform:q,changeset:_u,definition:A5,ingest:He,isTuple:Zm,transform:T5,transforms:vc,tupleid:me,interpolate:uE,interpolateColors:j0,interpolateRange:nP,quantizeInterpolator:rP,scale:Be,scheme:lE,projection:nk,View:$8,defaultLocale:yw,formatLocale:Vm,locale:s5,resetDefaultLocale:fQ,timeFormatLocale:eh,expressionFunction:Mt,parse:Yme,runtimeContext:x8,codegenExpression:JL,parseExpression:dC,parseSelector:As,Debug:wF,Error:x2,Info:xF,None:bF,Warn:w2,accessor:nr,accessorFields:gn,accessorName:wt,array:ue,ascending:Lm,clampRange:DF,compare:C2,constant:vn,debounce:_2,error:Q,extend:Ae,extent:oo,extentIndex:RF,falsy:Ha,fastmap:sc,field:rr,flush:PF,hasOwnProperty:pe,id:Fd,identity:mn,inherits:ne,inrange:uc,isArray:J,isBoolean:Ga,isDate:qa,isFunction:_e,isIterable:jF,isNumber:Qe,isObject:ce,isRegExp:IF,isString:se,key:A2,lerp:LF,logger:S2,lruCache:zF,merge:$F,mergeConfig:oc,one:ic,pad:BF,panLinear:_F,panLog:AF,panPow:TF,panSymlog:NF,peek:Re,quarter:MF,repeat:Dd,span:Rd,splitAccessPath:io,stringValue:re,toBoolean:T2,toDate:N2,toNumber:yn,toSet:Oi,toString:M2,truncate:UF,truthy:Kr,utcquarter:FF,visitArray:Va,writeConfig:ac,zero:Wa,zoomLinear:E2,zoomLog:O2,zoomPow:Im,zoomSymlog:k2,bandwidthNRD:Aw,bin:M5,bootstrapCI:F5,cumulativeLogNormal:Rw,cumulativeNormal:s0,cumulativeUniform:Lw,densityLogNormal:Dw,densityNormal:Tw,densityUniform:Iw,dotbin:D5,quantileLogNormal:Pw,quantileNormal:u0,quantileUniform:zw,quantiles:Cw,quartiles:_w,get random(){return Zr},randomInteger:gJ,randomKDE:Mw,randomLCG:pJ,randomLogNormal:P5,randomMixture:j5,randomNormal:Nw,randomUniform:I5,regressionExp:z5,regressionLinear:$w,regressionLoess:H5,regressionLog:L5,regressionPoly:B5,regressionPow:$5,regressionQuad:Bw,sampleCurve:c0,sampleLogNormal:Fw,sampleNormal:a0,sampleUniform:jw,setRandom:dJ,DATE:ar,DAY:xn,DAYOFYEAR:ao,HOURS:Fr,MILLISECONDS:ki,MINUTES:Dr,MONTH:bn,QUARTER:or,SECONDS:Jr,TIME_UNITS:tw,WEEK:jt,YEAR:rn,dayofyear:yD,timeBin:jD,timeFloor:OD,timeInterval:hc,timeOffset:_D,timeSequence:ND,timeUnitSpecifier:mD,timeUnits:rw,utcFloor:kD,utcInterval:pc,utcOffset:AD,utcSequence:MD,utcdayofyear:xD,utcweek:wD,week:vD,format:Xm,formats:ww,inferType:c5,inferTypes:f5,loader:Km,read:g5,responseType:p5,typeParsers:vw,Bounds:Lt,CanvasHandler:Rh,CanvasRenderer:ly,Gradient:bP,GroupItem:U0,Handler:ys,Item:B0,Marks:Rr,RenderType:bs,Renderer:bo,ResourceLoader:xE,SVGHandler:XE,SVGRenderer:nO,SVGStringRenderer:oO,Scenegraph:HE,boundClip:Ij,boundContext:kh,boundItem:WE,boundMark:JP,boundStroke:aa,domChild:ur,domClear:Ti,domCreate:ms,domFind:GE,font:ey,fontFamily:Nh,fontSize:vo,intersect:Dj,intersectBoxLine:Rc,intersectPath:_E,intersectPoint:AE,intersectRule:IP,lineHeight:ps,markup:tO,multiLineOffset:$E,pathCurves:pE,pathEqual:Lj,pathParse:Mc,pathRectangle:CP,pathRender:xh,pathSymbols:kP,pathTrail:_P,point:ny,renderModule:fy,resetSVGClipId:TP,resetSVGDefIds:$re,sceneEqual:sO,sceneFromJSON:ej,scenePickVisit:X0,sceneToJSON:ZP,sceneVisit:Ai,sceneZOrder:TE,serializeXML:Sj,textMetrics:yo});function p0e(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var g0e={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},m0e={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},y0e={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const v0e=Array.prototype.slice,il=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,v0e.call(t,1))},b0e=(e,t,n,r,i,o,a)=>new Date(e,t||0,n!=null?n:1,r||0,i||0,o||0,a||0);var x0e={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:b0e,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return il("join",arguments)},indexof:function(){return il("indexOf",arguments)},lastindexof:function(){return il("lastIndexOf",arguments)},slice:function(){return il("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return il("substring",arguments,String)},split:function(){return il("split",arguments,String)},replace:function(){return il("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const w0e=["view","item","group","xy","x","y"],S0e={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:g0e[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);return n&&(e.memberDepth-=1),r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||x0e[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>m0e[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>y0e[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,n[i]=e(r.value),n},{})};function Np(e,t,n,r,i,o){const a=s=>S0e[s.type](a,s);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=r,a.event=i,a.item=o,w0e.forEach(s=>a.fn[s]=(...u)=>i.vega[s](...u)),a(e)}var E0e={operator(e,t){const n=t.ast,r=e.functions;return i=>Np(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>Np(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>Np(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const a=o.item&&o.item.datum;return Np(n,r,i,a,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(a,s)=>{const u=a.datum;let l=0,c;for(const f in r)c=Np(r[f].ast,i,s,u,void 0,a),a[f]!==c&&(a[f]=c,l=1);return n!=="rule"&&p0e(a,r,o),l}}};const O0e="vega-lite",k0e='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',C0e="5.2.0",_0e=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],A0e="https://vega.github.io/vega-lite/",T0e="Vega-Lite is a concise high-level language for interactive visualization.",N0e="build/vega-lite.js",M0e="build/vega-lite.min.js",F0e="build/vega-lite.min.js",D0e="build/src/index",R0e="build/src/index.d.ts",P0e={vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2pdf:"./bin/vl2pdf",vl2vg:"./bin/vl2vg"},j0e={test:"test"},I0e=["bin","build","src","vega-lite*","tsconfig.json"],L0e={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",eslintbase:"eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/"},z0e={type:"git",url:"https://github.com/vega/vega-lite.git"},$0e="BSD-3-Clause",B0e={url:"https://github.com/vega/vega-lite/issues"},U0e={"@babel/core":"^7.16.0","@babel/preset-env":"^7.16.0","@babel/preset-typescript":"^7.16.0","@rollup/plugin-alias":"^3.1.8","@rollup/plugin-babel":"^5.3.0","@rollup/plugin-commonjs":"^21.0.1","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^13.0.6","@types/chai":"^4.2.22","@types/d3":"^7.1.0","@types/jest":"^27.0.2","@types/mkdirp":"^1.0.2","@types/pako":"^1.0.2","@typescript-eslint/eslint-plugin":"^5.4.0","@typescript-eslint/parser":"^5.4.0",ajv:"^8.8.0","ajv-formats":"^2.1.1",chai:"^4.3.4",cheerio:"^1.0.0-rc.10","conventional-changelog-cli":"^2.1.1",d3:"^7.1.1","del-cli":"^4.0.1",eslint:"^8.2.0","eslint-config-prettier":"^8.3.0","eslint-plugin-jest":"^25.2.4","eslint-plugin-prettier":"^4.0.0","gh-pages":"^3.2.3","highlight.js":"^11.3.1",jest:"^27.3.1","jest-dev-server":"^6.0.0",mkdirp:"^1.0.4",pako:"^2.0.4",prettier:"^2.4.1",puppeteer:"^11.0.0",rollup:"^2.60.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3","rollup-plugin-terser":"^7.0.2",serve:"^13.0.2",terser:"^5.10.0","ts-jest":"^27.0.7","ts-json-schema-generator":"^0.97.0",typescript:"~4.5.2","vega-cli":"^5.21.0","vega-datasets":"~2.2.0","vega-embed":"^6.20.2","vega-tooltip":"^0.27.0","yaml-front-matter":"^4.1.1"},W0e={"@types/clone":"~2.1.1","array-flat-polyfill":"^1.0.1",clone:"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0",tslib:"~2.3.1","vega-event-selector":"~3.0.0","vega-expression":"~5.0.0","vega-util":"~1.17.0",yargs:"~17.2.1"},H0e={vega:"^5.21.0"},G0e={node:">=12"};var q0e={name:O0e,author:k0e,version:C0e,collaborators:_0e,homepage:A0e,description:T0e,main:N0e,unpkg:M0e,jsdelivr:F0e,module:D0e,types:R0e,bin:P0e,directories:j0e,files:I0e,scripts:L0e,repository:z0e,license:$0e,bugs:B0e,devDependencies:U0e,dependencies:W0e,peerDependencies:H0e,engines:G0e};Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var Hz={exports:{}};(function(e){var t=function(){function n(d,h){return h!=null&&d instanceof h}var r;try{r=Map}catch{r=function(){}}var i;try{i=Set}catch{i=function(){}}var o;try{o=Promise}catch{o=function(){}}function a(d,h,p,g,m){typeof h=="object"&&(p=h.depth,g=h.prototype,m=h.includeNonEnumerable,h=h.circular);var y=[],v=[],b=typeof Buffer!="undefined";typeof h=="undefined"&&(h=!0),typeof p=="undefined"&&(p=1/0);function x(w,E){if(w===null)return null;if(E===0)return w;var S,_;if(typeof w!="object")return w;if(n(w,r))S=new r;else if(n(w,i))S=new i;else if(n(w,o))S=new o(function(L,R){w.then(function(B){L(x(B,E-1))},function(B){R(x(B,E-1))})});else if(a.__isArray(w))S=[];else if(a.__isRegExp(w))S=new RegExp(w.source,f(w)),w.lastIndex&&(S.lastIndex=w.lastIndex);else if(a.__isDate(w))S=new Date(w.getTime());else{if(b&&Buffer.isBuffer(w))return Buffer.allocUnsafe?S=Buffer.allocUnsafe(w.length):S=new Buffer(w.length),w.copy(S),S;n(w,Error)?S=Object.create(w):typeof g=="undefined"?(_=Object.getPrototypeOf(w),S=Object.create(_)):(S=Object.create(g),_=g)}if(h){var M=y.indexOf(w);if(M!=-1)return v[M];y.push(w),v.push(S)}n(w,r)&&w.forEach(function(L,R){var B=x(R,E-1),O=x(L,E-1);S.set(B,O)}),n(w,i)&&w.forEach(function(L){var R=x(L,E-1);S.add(R)});for(var D in w){var C;_&&(C=Object.getOwnPropertyDescriptor(_,D)),!(C&&C.set==null)&&(S[D]=x(w[D],E-1))}if(Object.getOwnPropertySymbols)for(var A=Object.getOwnPropertySymbols(w),D=0;D<A.length;D++){var k=A[D],N=Object.getOwnPropertyDescriptor(w,k);N&&!N.enumerable&&!m||(S[k]=x(w[k],E-1),N.enumerable||Object.defineProperty(S,k,{enumerable:!1}))}if(m)for(var T=Object.getOwnPropertyNames(w),D=0;D<T.length;D++){var F=T[D],N=Object.getOwnPropertyDescriptor(w,F);N&&N.enumerable||(S[F]=x(w[F],E-1),Object.defineProperty(S,F,{enumerable:!1}))}return S}return x(d,p)}a.clonePrototype=function(h){if(h===null)return null;var p=function(){};return p.prototype=h,new p};function s(d){return Object.prototype.toString.call(d)}a.__objToStr=s;function u(d){return typeof d=="object"&&s(d)==="[object Date]"}a.__isDate=u;function l(d){return typeof d=="object"&&s(d)==="[object Array]"}a.__isArray=l;function c(d){return typeof d=="object"&&s(d)==="[object RegExp]"}a.__isRegExp=c;function f(d){var h="";return d.global&&(h+="g"),d.ignoreCase&&(h+="i"),d.multiline&&(h+="m"),h}return a.__getRegExpFlags=f,a}();e.exports&&(e.exports=t)})(Hz);var V0e=Hz.exports,Y0e=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!=0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!=0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!=0;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n},Gz=Y0e,o_=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var n=typeof t.cycles=="boolean"?t.cycles:!1,r=t.cmp&&function(o){return function(a){return function(s,u){var l={key:s,value:a[s]},c={key:u,value:a[u]};return o(l,c)}}}(t.cmp),i=[];return function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var s,u;if(Array.isArray(a)){for(u="[",s=0;s<a.length;s++)s&&(u+=","),u+=o(a[s])||"null";return u+"]"}if(a===null)return"null";if(i.indexOf(a)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var l=i.push(a)-1,c=Object.keys(a).sort(r&&r(a));for(u="",s=0;s<c.length;s++){var f=c[s],d=o(a[f]);!d||(u&&(u+=","),u+=JSON.stringify(f)+":"+d)}return i.splice(l,1),"{"+u+"}"}}(e)};function a_(e){return!!e.or}function s_(e){return!!e.and}function u_(e){return!!e.not}function V1(e,t){if(u_(e))V1(e.not,t);else if(s_(e))for(const n of e.and)V1(n,t);else if(a_(e))for(const n of e.or)V1(n,t);else t(e)}function uf(e,t){return u_(e)?{not:uf(e.not,t)}:s_(e)?{and:e.and.map(n=>uf(n,t))}:a_(e)?{or:e.or.map(n=>uf(n,t))}:t(e)}const Co=Gz,Ce=V0e;function qz(e){throw new Error(e)}function lf(e,t){const n={};for(const r of t)pe(e,r)&&(n[r]=e[r]);return n}function zr(e,t){const n=Object.assign({},e);for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>o_(e)).join(",")})`};const rt=o_;function Pe(e){if(Qe(e))return e;const t=se(e)?e:o_(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function l_(e){return e===!1||e===null}function je(e,t){return e.includes(t)}function ol(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function c_(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function Vz(e,...t){for(const n of t)X0e(e,n!=null?n:{});return e}function X0e(e,t){for(const n of Z(t))ac(e,n,t[n],!0)}function _o(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function K0e(e,t){const n=Z(e),r=Z(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function Yz(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function f_(e,t){for(const n of e)if(t.has(n))return!0;return!1}function d_(e){const t=new Set;for(const n of e){const i=io(n).map((a,s)=>s===0?a:`[${a}]`),o=i.map((a,s)=>i.slice(0,s+1).join(""));for(const a of o)t.add(a)}return t}function h_(e,t){return e===void 0||t===void 0?!0:f_(d_(e),d_(t))}function Ze(e){return Z(e).length===0}const Z=Object.keys,_n=Object.values,Ns=Object.entries;function Mp(e){return e===!0||e===!1}function ht(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Fp(e,t){return u_(e)?`!(${Fp(e.not,t)})`:s_(e)?`(${e.and.map(n=>Fp(n,t)).join(") && (")})`:a_(e)?`(${e.or.map(n=>Fp(n,t)).join(") || (")})`:t(e)}function Y1(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Y1(e[n],t)&&delete e[n],Ze(e)}function Dp(e){return e.charAt(0).toUpperCase()+e.substr(1)}function p_(e,t="datum"){const n=io(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(re).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function Xz(e,t="datum"){return`${t}[${re(io(e).join("."))}]`}function Q0e(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function si(e){return`${io(e).map(Q0e).join("\\.")}`}function al(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function g_(e){return`${io(e).join(".")}`}function cf(e){return e?io(e).length:0}function Ft(...e){for(const t of e)if(t!==void 0)return t}let Kz=42;function Qz(e){const t=++Kz;return e?String(e)+t:t}function J0e(){Kz=42}function Jz(e){return Zz(e)?e:`__${e}`}function Zz(e){return e.startsWith("__")}function Rp(e){if(e!==void 0)return(e%360+360)%360}function X1(e){return Qe(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}var Pp=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ma="row",ya="column",K1="facet",mt="x",Kt="y",$i="x2",Ao="y2",Ms="xOffset",ff="yOffset",To="radius",va="radius2",Bi="theta",ba="theta2",No="latitude",Mo="longitude",Ui="latitude2",ui="longitude2",gr="color",Fo="fill",Do="stroke",mr="shape",xa="size",sl="angle",wa="opacity",Fs="fillOpacity",Ds="strokeOpacity",Rs="strokeWidth",Ps="strokeDash",jp="text",Ip="order",Lp="detail",Q1="key",ul="tooltip",J1="href",Z1="url",ev="description",Z0e={x:1,y:1,x2:1,y2:1},e$={theta:1,theta2:1,radius:1,radius2:1};function t$(e){return e in e$}const m_={longitude:1,longitude2:1,latitude:1,latitude2:1};function eye(e){switch(e){case No:return"y";case Ui:return"y2";case Mo:return"x";case ui:return"x2"}}function tye(e){return e in m_}const nye=Z(m_),y_=Object.assign(Object.assign(Object.assign(Object.assign({},Z0e),e$),m_),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function df(e){return e===gr||e===Fo||e===Do}const n$={row:1,column:1,facet:1},li=Z(n$),v_=Object.assign(Object.assign({},y_),n$),rye=Z(v_),iye=Pp(v_,["order","detail","tooltip"]),oye=Pp(iye,["row","column","facet"]);function aye(e){return!!oye[e]}function r$(e){return!!v_[e]}const sye=[$i,Ao,Ui,ui,ba,va];function i$(e){return ll(e)!==e}function ll(e){switch(e){case $i:return mt;case Ao:return Kt;case Ui:return No;case ui:return Mo;case ba:return Bi;case va:return To}return e}function js(e){if(t$(e))switch(e){case Bi:return"startAngle";case ba:return"endAngle";case To:return"outerRadius";case va:return"innerRadius"}return e}function Sa(e){switch(e){case mt:return $i;case Kt:return Ao;case No:return Ui;case Mo:return ui;case Bi:return ba;case To:return va}}function yr(e){switch(e){case mt:case $i:return"width";case Kt:case Ao:return"height"}}function uye(e){switch(e){case mt:return"xOffset";case Kt:return"yOffset";case $i:return"x2Offset";case Ao:return"y2Offset";case Bi:return"thetaOffset";case To:return"radiusOffset";case ba:return"theta2Offset";case va:return"radius2Offset"}}function o$(e){switch(e){case mt:return"xOffset";case Kt:return"yOffset"}}function a$(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const lye=Z(y_),b_=Pp(y_,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),cye=Z(b_),x_={x:1,y:1},Ro=Z(x_);function cn(e){return e in x_}const w_={theta:1,radius:1},fye=Z(w_);function tv(e){return e==="width"?mt:Kt}const s$={xOffset:1,yOffset:1};function hf(e){return e in s$}const u$=Pp(b_,["text","tooltip","href","url","description","detail","key","order"]),dye=Z(u$);function hye(e){return!!b_[e]}function pye(e){switch(e){case gr:case Fo:case Do:case xa:case mr:case wa:case Rs:case Ps:return!0;case Fs:case Ds:case sl:return!1}}const l$=Object.assign(Object.assign(Object.assign(Object.assign({},x_),w_),s$),u$),nv=Z(l$);function Is(e){return!!l$[e]}function gye(e,t){return yye(e)[t]}const c$={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},mye=Pp(c$,["geoshape"]);function yye(e){switch(e){case gr:case Fo:case Do:case ev:case Lp:case Q1:case ul:case J1:case Ip:case wa:case Fs:case Ds:case Rs:case K1:case ma:case ya:return c$;case mt:case Kt:case Ms:case ff:case No:case Mo:return mye;case $i:case Ao:case Ui:case ui:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case xa:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Ps:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case mr:return{point:"always",geoshape:"always"};case jp:return{text:"always"};case sl:return{point:"always",square:"always",text:"always"};case Z1:return{image:"always"};case Bi:return{text:"always",arc:"always"};case To:return{text:"always",arc:"always"};case ba:case va:return{arc:"always"}}}function S_(e){switch(e){case mt:case Kt:case Bi:case To:case Ms:case ff:case xa:case sl:case Rs:case wa:case Fs:case Ds:case $i:case Ao:case ba:case va:return;case K1:case ma:case ya:case mr:case Ps:case jp:case ul:case J1:case Z1:case ev:return"discrete";case gr:case Fo:case Do:return"flexible";case No:case Mo:case Ui:case ui:case Lp:case Q1:case Ip:return}}const vye={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},bye={count:1,min:1,max:1};function Ea(e){return!!e&&!!e.argmin}function Ls(e){return!!e&&!!e.argmax}function E_(e){return se(e)&&!!vye[e]}const xye=new Set(["count","valid","missing","distinct"]);function f$(e){return se(e)&&xye.has(e)}function wye(e){return se(e)&&je(["min","max"],e)}const Sye=new Set(["count","sum","distinct","valid","missing"]),Eye=new Set(["mean","average","median","q1","q3","min","max"]);function d$(e){return Ga(e)&&(e=wv(e,void 0)),"bin"+Z(e).map(t=>rv(e[t])?ht(`_${t}_${Ns(e[t])}`):ht(`_${t}_${e[t]}`)).join("")}function it(e){return e===!0||cl(e)&&!e.binned}function Kn(e){return e==="binned"||cl(e)&&e.binned===!0}function cl(e){return ce(e)}function rv(e){return e==null?void 0:e.param}function h$(e){switch(e){case ma:case ya:case xa:case gr:case Fo:case Do:case Rs:case wa:case Fs:case Ds:case mr:return 6;case Ps:return 4;default:return 10}}function zp(e){return e&&!!e.expr}function vr(e){const t=Z(e||{}),n={};for(const r of t)n[r]=$r(e[r]);return n}var Oye=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function p$(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:a,color:s,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p}=e,g=Oye(e,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),m=Object.assign(Object.assign({},g),s?{fill:s}:{}),y=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),o!==void 0?{angle:o}:{}),a!==void 0?{limit:a}:{}),v=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u?{subtitleColor:u}:{}),l?{subtitleFont:l}:{}),c?{subtitleFontSize:c}:{}),f?{subtitleFontStyle:f}:{}),d?{subtitleFontWeight:d}:{}),h?{subtitleLineHeight:h}:{}),p?{subtitlePadding:p}:{}),b=lf(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function zs(e){return se(e)||J(e)&&se(e[0])}function ge(e){return e&&!!e.signal}function $s(e){return!!e.step}function kye(e){return J(e)?!1:"fields"in e&&!("data"in e)}function Cye(e){return J(e)?!1:"fields"in e&&"data"in e}function Oa(e){return J(e)?!1:"field"in e&&"data"in e}const _ye={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Aye=Z(_ye),Tye={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},O_=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];var k_=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function g$(e){const t=J(e.condition)?e.condition.map(m$):m$(e.condition);return Object.assign(Object.assign({},$r(e)),{condition:t})}function $r(e){if(zp(e)){const{expr:t}=e,n=k_(e,["expr"]);return Object.assign({signal:t},n)}return e}function m$(e){if(zp(e)){const{expr:t}=e,n=k_(e,["expr"]);return Object.assign({signal:t},n)}return e}function lt(e){if(zp(e)){const{expr:t}=e,n=k_(e,["expr"]);return Object.assign({signal:t},n)}return ge(e)?e:e!==void 0?{value:e}:void 0}function Nye(e){return ge(e)?e.signal:re(e)}function y$(e){return ge(e)?e.signal:re(e.value)}function ka(e){return ge(e)?e.signal:e==null?null:re(e)}function Mye(e,t,n){for(const r of n){const i=fl(r,t.markDef,t.config);i!==void 0&&(e[r]=lt(i))}return e}function v$(e){var t;return[].concat(e.type,(t=e.style)!==null&&t!==void 0?t:[])}function qe(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:fl(e,t,n,r)}function fl(e,t,n,{vgChannel:r}={}){return Ft(r?iv(e,t,n.style):void 0,iv(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function iv(e,t,n){return b$(e,v$(t),n)}function b$(e,t,n){t=ue(t);let r;for(const i of t){const o=n[i];o&&o[e]!==void 0&&(r=o[e])}return r}function x$(e,t){return ue(e).reduce((n,r)=>{var i;return n.field.push(ae(r,t)),n.order.push((i=r.sort)!==null&&i!==void 0?i:"ascending"),n},{field:[],order:[]})}function w$(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Co(i,r))return;n.push(r)}),n}function S$(e,t){return Co(e,t)||!t?e:e?[...ue(e),...ue(t)].join(", "):t}function E$(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((zs(n)||ge(n))&&(zs(r)||ge(r)))return{explicit:e.explicit,value:S$(n,r)};if(zs(n)||ge(n))return{explicit:e.explicit,value:n};if(zs(r)||ge(r))return{explicit:e.explicit,value:r};if(!zs(n)&&!ge(n)&&!zs(r)&&!ge(r))return{explicit:e.explicit,value:w$(n,r)};throw new Error("It should never reach here")}function C_(e){return`Invalid specification ${rt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Fye='Autosize "fit" only works for single views and layered views.';function O$(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function k$(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function C$(e){return e?`Dropping "fit-${e}" because spec has discrete ${yr(e)}.`:'Dropping "fit" because spec has discrete size.'}function __(e){return`Unknown field for ${e}. Cannot calculate view size.`}function _$(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Dye(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Rye(e){return`The "nearest" transform is not supported for ${e} marks.`}function A$(e){return`Selection not supported for ${e} yet.`}function Pye(e){return`Cannot find a selection named "${e}".`}const jye="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Iye="Legend bindings are only supported for selections over an individual field or encoding channel.";function Lye(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function zye(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const $ye="The same selection must be used to override scale domains in a layered view.",Bye='Interval selections should be initialized using "x" and/or "y" keys.';function Uye(e){return`Unknown repeated value "${e}".`}function T$(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Wye="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Hye(e){return`Unrecognized parse "${e}".`}function N$(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Gye="Attempt to add the same child twice.";function qye(e){return`Ignoring an invalid transform: ${rt(e)}.`}const Vye='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function M$(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Yye(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${rt(t)} is overridden by a child projection ${rt(n)}.`}const Xye="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Kye(e){return`${e}Offset dropped because ${e} is continuous`}function Qye(e){return`There is no ${e} encoding. Replacing ${e}Offset encoding as ${e}.`}function Jye(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${rt(n)}}.`}function F$(e){return`Invalid field type "${e}".`}function Zye(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function e1e(e){return`Invalid aggregation operator "${e}".`}function D$(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function t1e(e){return`Position range does not support relative band size for ${e}.`}function A_(e,t){return`Dropping ${rt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const n1e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function ov(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function r1e(e){return`${e} encoding has no scale, so specified scale is ignored.`}function i1e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function o1e(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function a1e(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function s1e(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function T_(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function u1e(e){return`The ${e} for range marks cannot be an expression`}function l1e(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function c1e(e,t){return`Specified orient "${e}" overridden with "${t}".`}function f1e(e){return`Cannot use the scale property "${e}" with non-color channel.`}function d1e(e){return`Cannot use the relative band size with ${e} scale.`}function h1e(e){return`Using unaggregated domain with raw field has no effect (${rt(e)}).`}function p1e(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function g1e(e){return`Unaggregated domain is currently unsupported for log scale (${rt(e)}).`}function m1e(e){return`Cannot apply size to non-oriented mark "${e}".`}function y1e(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function v1e(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function R$(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function P$(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function b1e(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${rt(n)} and ${rt(r)}). Using ${rt(n)}.`}function x1e(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${rt(n)} and ${rt(r)}). Using the union of the two domains.`}function w1e(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function S1e(e){return`Dropping sort property ${rt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const j$="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",E1e="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",O1e="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",k1e="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function C1e(e){return`Cannot stack "${e}" if there is already "${e}2".`}function _1e(e){return`Cannot stack non-linear scale (${e}).`}function A1e(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function av(e,t){return`Invalid ${e}: ${rt(t)}.`}function T1e(e){return`Dropping day from datetime ${rt(e)} as day cannot be combined with other units.`}function N1e(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function M1e(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function F1e(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function I$(e){return`1D error band does not support ${e}.`}function L$(e){return`Channel ${e} is required for "binned" bin.`}function D1e(e){return`Channel ${e} should not be used with "binned" bin.`}function R1e(e){return`Domain for ${e} is required for threshold scale.`}globalThis&&globalThis.__classPrivateFieldSet;globalThis&&globalThis.__classPrivateFieldGet;const z$=S2(w2);let pf=z$;function P1e(e){return pf=e,pf}function j1e(){return pf=z$,pf}function ee(...e){pf.warn(...e)}function I1e(...e){pf.debug(...e)}function dl(e){if(e&&ce(e)){for(const t of M_)if(t in e)return!0}return!1}const $$=["january","february","march","april","may","june","july","august","september","october","november","december"],L1e=$$.map(e=>e.substr(0,3)),B$=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],z1e=B$.map(e=>e.substr(0,3));function $1e(e){if(X1(e)&&(e=+e),Qe(e))return e>4&&ee(av("quarter",e)),e-1;throw new Error(av("quarter",e))}function B1e(e){if(X1(e)&&(e=+e),Qe(e))return e-1;{const t=e.toLowerCase(),n=$$.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=L1e.indexOf(r);if(i!==-1)return i;throw new Error(av("month",e))}}function U1e(e){if(X1(e)&&(e=+e),Qe(e))return e%7;{const t=e.toLowerCase(),n=B$.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=z1e.indexOf(r);if(i!==-1)return i;throw new Error(av("day",e))}}function N_(e,t){const n=[];if(t&&e.day!==void 0&&Z(e).length>1&&(ee(T1e(e)),e=Ce(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?B1e(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?$1e(e.quarter):e.quarter;n.push(Qe(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?U1e(e.day):e.day;n.push(Qe(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i=="undefined"?0:i)}return n}function $p(e){const n=N_(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function W1e(e){const n=N_(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function H1e(e){const t=N_(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}var G1e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const U$={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},M_=Z(U$);function q1e(e){return!!U$[e]}function F_(e){return e.startsWith("utc")}function V1e(e){return e.substr(3)}const Y1e={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function D_(e){return M_.filter(t=>W$(e,t))}function W$(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function X1e(e,t,{end:n}={end:!1}){const r=p_(t),i=F_(e)?"utc":"";function o(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let a;const s={};for(const u of M_)W$(e,u)&&(s[u]=o(u),a=u);return n&&(s[a]+="+1"),W1e(s)}function H$(e){if(!e)return;const t=D_(e);return`timeUnitSpecifier(${rt(t)}, ${rt(Y1e)})`}function K1e(e,t,n){if(!e)return;const r=H$(e);return`${n||F_(e)?"utc":"time"}Format(${t}, ${r})`}function Qn(e){if(!e)return;let t;return se(e)?t={unit:e}:ce(e)&&(t=Object.assign(Object.assign({},e),e.unit?{unit:e.unit}:{})),F_(t.unit)&&(t.utc=!0,t.unit=V1e(t.unit)),t}function Q1e(e){const t=Qn(e),{utc:n}=t,r=G1e(t,["utc"]);return r.unit?(n?"utc":"")+Z(r).map(i=>ht(`${i==="unit"?"":`_${i}_`}${r[i]}`)).join(""):(n?"utc":"")+"timeunit"+Z(r).map(i=>ht(`_${i}_${r[i]}`)).join("")}function J1e(e){return e==null?void 0:e.param}function R_(e){return e&&!!e.field&&e.equal!==void 0}function P_(e){return e&&!!e.field&&e.lt!==void 0}function j_(e){return e&&!!e.field&&e.lte!==void 0}function I_(e){return e&&!!e.field&&e.gt!==void 0}function L_(e){return e&&!!e.field&&e.gte!==void 0}function z_(e){if(e==null?void 0:e.field){if(J(e.range)&&e.range.length===2)return!0;if(ge(e.range))return!0}return!1}function $_(e){return e&&!!e.field&&(J(e.oneOf)||J(e.in))}function Z1e(e){return e&&!!e.field&&e.valid!==void 0}function G$(e){return $_(e)||R_(e)||z_(e)||P_(e)||I_(e)||j_(e)||L_(e)}function Po(e,t){return Sv(e,{timeUnit:t,wrapTime:!0})}function eve(e,t){return e.map(n=>Po(n,t))}function q$(e,t=!0){var n;const{field:r}=e,i=(n=Qn(e.timeUnit))===null||n===void 0?void 0:n.unit,o=i?`time(${X1e(i,r)})`:ae(e,{expr:"datum"});if(R_(e))return`${o}===${Po(e.equal,i)}`;if(P_(e)){const a=e.lt;return`${o}<${Po(a,i)}`}else if(I_(e)){const a=e.gt;return`${o}>${Po(a,i)}`}else if(j_(e)){const a=e.lte;return`${o}<=${Po(a,i)}`}else if(L_(e)){const a=e.gte;return`${o}>=${Po(a,i)}`}else{if($_(e))return`indexof([${eve(e.oneOf,i).join(",")}], ${o}) !== -1`;if(Z1e(e))return B_(o,e.valid);if(z_(e)){const{range:a}=e,s=ge(a)?{signal:`${a.signal}[0]`}:a[0],u=ge(a)?{signal:`${a.signal}[1]`}:a[1];if(s!==null&&u!==null&&t)return"inrange("+o+", ["+Po(s,i)+", "+Po(u,i)+"])";const l=[];return s!==null&&l.push(`${o} >= ${Po(s,i)}`),u!==null&&l.push(`${o} <= ${Po(u,i)}`),l.length>0?l.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${rt(e)}`)}function B_(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function tve(e){var t;return G$(e)&&e.timeUnit?Object.assign(Object.assign({},e),{timeUnit:(t=Qn(e.timeUnit))===null||t===void 0?void 0:t.unit}):e}const Bp={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function nve(e){return e==="quantitative"||e==="temporal"}function V$(e){return e==="ordinal"||e==="nominal"}const hl=Bp.quantitative,U_=Bp.ordinal,gf=Bp.temporal,W_=Bp.nominal,mf=Bp.geojson;function rve(e){if(e)switch(e=e.toLowerCase(),e){case"q":case hl:return"quantitative";case"t":case gf:return"temporal";case"o":case U_:return"ordinal";case"n":case W_:return"nominal";case mf:return"geojson"}}var ive=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const br={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},H_={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function ove(e,t){const n=H_[e],r=H_[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const ave={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Y$(e){return ave[e]}const X$=new Set(["linear","log","pow","sqrt","symlog"]),K$=new Set([...X$,"time","utc"]);function Q$(e){return X$.has(e)}const J$=new Set(["quantile","quantize","threshold"]),sve=new Set([...K$,...J$,"sequential","identity"]),uve=new Set(["ordinal","bin-ordinal","point","band"]);function Qt(e){return uve.has(e)}function Br(e){return sve.has(e)}function Wi(e){return K$.has(e)}function yf(e){return J$.has(e)}const lve={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};function cve(e){return!se(e)&&!!e.name}function Z$(e){return e==null?void 0:e.param}function fve(e){return e&&e.unionWith}function dve(e){return ce(e)&&"field"in e}const hve={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},pve=ive(hve,["type","domain","range","rangeMax","rangeMin","scheme"]),gve=Z(pve);function G_(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Wi(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Wi(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"clamp":return Wi(e);case"nice":return Wi(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Br(e)&&!je(["log","time","utc","threshold","quantile"],e)}}function e9(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return df(e)?void 0:f1e(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function mve(e,t){return je([U_,W_],t)?e===void 0||Qt(e):t===gf?je([br.TIME,br.UTC,void 0],e):t===hl?Q$(e)||yf(e)||e===void 0:!0}function yve(e,t,n=!1){if(!Is(e))return!1;switch(e){case mt:case Kt:case Ms:case ff:case Bi:case To:return Wi(t)||t==="band"?!0:t==="point"?!n:!1;case xa:case Rs:case wa:case Fs:case Ds:case sl:return Wi(t)||yf(t)||je(["band","point","ordinal"],t);case gr:case Fo:case Do:return t!=="band";case Ps:case mr:return t==="ordinal"||yf(t)}}const Jn={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},t9=Jn.arc,sv=Jn.area,uv=Jn.bar,vve=Jn.image,lv=Jn.line,cv=Jn.point,bve=Jn.rect,fv=Jn.rule,n9=Jn.text,q_=Jn.tick,xve=Jn.trail,V_=Jn.circle,Y_=Jn.square,r9=Jn.geoshape;function Bs(e){return["line","area","trail"].includes(e)}function i9(e){return["rect","bar","image","arc"].includes(e)}const wve=new Set(Z(Jn));function jo(e){return e.type}const Sve=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Eve=["fill","fillOpacity"],Ove=[...Sve,...Eve],kve={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},o9=Z(kve),Cve={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},_ve={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},Ave={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},a9=Z(Ave);function vf(e){return e&&e.band!=null}const Tve={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},s9=5,Nve={binSpacing:1,continuousBandSize:s9,timeUnitBandPosition:.5},Mve={binSpacing:0,continuousBandSize:s9,timeUnitBandPosition:.5},Fve={thickness:1};function Dve(e){return jo(e)?e.type:e}function X_(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,a=Q_(e);return oe(n)&&!f$(n.aggregate)&&i&&Wi(i.get("type"))?Rve({fieldDef:n,channel:t,markDef:r,ref:a,config:o}):a}function Rve({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Bs(n.type)?r:qe("invalid",n,i)===null?[Pve(e,t),r]:r}function Pve(e,t){const n=K_(e,!0),i=ll(t)==="y"?{field:{group:"height"}}:{value:0};return Object.assign({test:n},i)}function K_(e,t=!0){return B_(se(e)?e:ae(e,{expr:"datum"}),!t)}function jve(e){const{datum:t}=e;return dl(t)?$p(t):`${rt(t)}`}function pl(e,t,n,r){const i={};if(t&&(i.scale=t),Lo(e)){const{datum:o}=e;dl(o)?i.signal=$p(o):ge(o)?i.signal=o.signal:zp(o)?i.signal=o.expr:i.value=o}else i.field=ae(e,n);if(r){const{offset:o,band:a}=r;o&&(i.offset=o),a&&(i.band=a)}return i}function dv({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,bandPosition:o=.5}){const a=0<o&&o<1?"datum":void 0,s=ae(t,{expr:a,suffix:i}),u=n!==void 0?ae(n,{expr:a}):ae(t,{suffix:"end",expr:a}),l={};if(o===0||o===1){l.scale=e;const c=o===0?s:u;l.field=c}else{const c=ge(o)?`${o.signal} * ${s} + (1-${o.signal}) * ${u}`:`${o} * ${s} + ${1-o} * ${u}`;l.signal=`scale("${e}", ${c})`}return r&&(l.offset=r),l}function Q_({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:l,bandPosition:c}){var f;if(t){if(Oe(t)){const d=a==null?void 0:a.get("type");if(ci(t)){c!=null||(c=b9({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:h,timeUnit:p,type:g}=t;if(it(h)||c&&p&&g===gf)return(s==null?void 0:s.impute)?pl(t,o,{binSuffix:"mid"},{offset:u}):c&&!Qt(d)?dv({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:u}):pl(t,o,Gp(t,e)?{binSuffix:"range"}:{},{offset:u});if(Kn(h)){if(oe(n))return dv({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});ee(L$(e===mt?$i:Ao))}}return pl(t,o,Qt(d)?{binSuffix:"range"}:{},{offset:u,band:d==="band"?(f=c!=null?c:t.bandPosition)!==null&&f!==void 0?f:.5:void 0})}else if(Hi(t)){const d=t.value,h=u?{offset:u}:{};return Object.assign(Object.assign({},Up(e,d)),h)}}return _e(l)&&(l=l()),l&&Object.assign(Object.assign({},l),u?{offset:u}:{})}function Up(e,t){return je(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:je(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:lt(t)}function gl(e){return e&&e!=="number"&&e!=="time"}function u9(e,t,n){return`${e}(${t}${n?`, ${rt(n)}`:""})`}const Ive=" \u2013 ";function J_({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var a,s;if(gl(n))return Z_({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const u=l9(e,r,i);if(wf(e)){const l=zve(u,oe(e)?(a=Qn(e.timeUnit))===null||a===void 0?void 0:a.unit:void 0,t,o.timeFormat,ml(e)&&((s=e.scale)===null||s===void 0?void 0:s.type)===br.UTC);return l?{signal:l}:void 0}if(t=d9(rA(e),t,o),oe(e)&&it(e.bin)){const l=ae(e,{expr:r,binSuffix:"end"});return{signal:hv(u,l,t,n,o)}}else return t||rA(e)==="quantitative"?{signal:`${h9(u,t)}`}:{signal:`isValid(${u}) ? ${u} : ""+${u}`}}function l9(e,t,n){return oe(e)?n?`${ae(e,{expr:t,suffix:"end"})}-${ae(e,{expr:t,suffix:"start"})}`:ae(e,{expr:t}):jve(e)}function Z_({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a!=null||(a=l9(e,r,i)),oe(e)&&it(e.bin)){const s=ae(e,{expr:r,binSuffix:"end"});return{signal:hv(a,s,t,n,o)}}return{signal:u9(n,a,t)}}function c9(e,t,n,r,i,o){var a;if(!gl(r)){if(wf(e)){const s=oe(e)?(a=Qn(e.timeUnit))===null||a===void 0?void 0:a.unit:void 0;return Lve(n,s,i,o)}return d9(t,n,i)}}function f9(e,t,n){if(e&&(ge(e)||e==="number"||e==="time"))return e;if(wf(t)&&n!=="time"&&n!=="utc")return"time"}function d9(e,t,n){if(se(t))return t;if(e===hl)return n.numberFormat}function Lve(e,t,n,r){return e||(t?{signal:H$(t)}:r?void 0:n.timeFormat)}function h9(e,t){return`format(${e}, "${t||""}")`}function p9(e,t,n,r){var i;return gl(n)?u9(n,e,t):h9(e,(i=se(t)?t:void 0)!==null&&i!==void 0?i:r.numberFormat)}function hv(e,t,n,r,i){const o=p9(e,n,r,i),a=p9(t,n,r,i);return`${B_(e,!1)} ? "null" : ${o} + "${Ive}" + ${a}`}function zve(e,t,n,r,i){return!t||n?(n=se(n)?n:r,`${i?"utc":"time"}Format(${e}, '${n}')`):K1e(t,e,i)}const pv="min",$ve={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function g9(e){return e in $ve}function m9(e){return!!e&&!!e.encoding}function Io(e){return!!e&&(e.op==="count"||!!e.field)}function y9(e){return!!e&&J(e)}function Wp(e){return"row"in e||"column"in e}function eA(e){return!!e&&"header"in e}function gv(e){return"facet"in e}var tA=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Bve(e){return e.param}function Uve(e){return e&&!se(e)&&"repeat"in e}function v9(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:t})}function nA(e){return"sort"in e}function b9({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Oe(e)&&e.bandPosition!==void 0)return e.bandPosition;if(oe(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return i9(n.type)?0:fl("timeUnitBandPosition",n,r);if(it(o))return .5}}function x9({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){var s,u,l;const c=yr(e),f=qe(a?"size":c,r,i,{vgChannel:c});if(f!==void 0)return f;if(oe(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:fl("timeUnitBandSize",r,i)};if(it(h)&&!Qt(o))return{band:1}}if(i9(r.type))return o?Qt(o)?((s=i[r.type])===null||s===void 0?void 0:s.discreteBandSize)||{band:1}:(u=i[r.type])===null||u===void 0?void 0:u.continuousBandSize:(l=i[r.type])===null||l===void 0?void 0:l.discreteBandSize}function w9(e,t,n,r){return it(e.bin)||e.timeUnit&&ci(e)&&e.type==="temporal"?b9({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function mv(e){return e&&"condition"in e}function yv(e){const t=e&&e.condition;return!!t&&!J(t)&&oe(t)}function Hp(e){const t=e&&e.condition;return!!t&&!J(t)&&Oe(t)}function Wve(e){const t=e&&e.condition;return!!t&&(J(t)||Hi(t))}function oe(e){return e&&(!!e.field||e.aggregate==="count")}function rA(e){return e&&e.type}function Lo(e){return e&&"datum"in e}function zo(e){return ci(e)&&!vv(e)||iA(e)}function iA(e){return Lo(e)&&Qe(e.datum)}function Oe(e){return oe(e)||Lo(e)}function ci(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Hi(e){return e&&"value"in e&&"value"in e}function ml(e){return e&&("scale"in e||"sort"in e)}function oA(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function S9(e){return e&&"legend"in e}function E9(e){return e&&("format"in e||"formatType"in e)}function Hve(e){return zr(e,["legend","axis","header","scale"])}function Gve(e){return"op"in e}function ae(e,t={}){var n,r,i;let o=e.field;const a=t.prefix;let s=t.suffix,u="";if(Vve(e))o=Jz("count");else{let l;if(!t.nofn)if(Gve(e))l=e.op;else{const{bin:c,aggregate:f,timeUnit:d}=e;it(c)?(l=d$(c),s=((n=t.binSuffix)!==null&&n!==void 0?n:"")+((r=t.suffix)!==null&&r!==void 0?r:"")):f?Ls(f)?(u=`["${o}"]`,o=`argmax_${f.argmax}`):Ea(f)?(u=`["${o}"]`,o=`argmin_${f.argmin}`):l=String(f):d&&(l=Q1e(d),s=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+((i=t.suffix)!==null&&i!==void 0?i:""))}l&&(o=o?`${l}_${o}`:l)}return s&&(o=`${o}_${s}`),a&&(o=`${a}_${o}`),t.forAs?g_(o):t.expr?Xz(o,t.expr)+u:si(o)+u}function vv(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return oe(e)&&!!e.bin;case"temporal":return!1}throw new Error(F$(e.type))}function qve(e){var t;return ml(e)&&yf((t=e.scale)===null||t===void 0?void 0:t.type)}function Vve(e){return e.aggregate==="count"}function Yve(e,t){var n;const{field:r,bin:i,timeUnit:o,aggregate:a}=e;if(a==="count")return t.countTitle;if(it(i))return`${r} (binned)`;if(o){const s=(n=Qn(o))===null||n===void 0?void 0:n.unit;if(s)return`${r} (${D_(s).join("-")})`}else if(a)return Ls(a)?`${r} for max ${a.argmax}`:Ea(a)?`${r} for min ${a.argmin}`:`${Dp(a)} of ${r}`;return r}function Xve(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Ls(t))return`${i} for argmax(${t.argmax})`;if(Ea(t))return`${i} for argmin(${t.argmin})`;const o=Qn(r),a=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||it(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}const O9=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Xve(e);default:return Yve(e,t)}};let k9=O9;function C9(e){k9=e}function Kve(){C9(O9)}function bf(e,t,{allowDisabling:n,includeDefault:r=!0}){var i,o;const a=(i=aA(e))===null||i===void 0?void 0:i.title;if(!oe(e))return a!=null?a:e.title;const s=e,u=r?sA(s,t):void 0;return n?Ft(a,s.title,u):(o=a!=null?a:s.title)!==null&&o!==void 0?o:u}function aA(e){if(oA(e)&&e.axis)return e.axis;if(S9(e)&&e.legend)return e.legend;if(eA(e)&&e.header)return e.header}function sA(e,t){return k9(e,t)}function bv(e){var t;if(E9(e)){const{format:n,formatType:r}=e;return{format:n,formatType:r}}else{const n=(t=aA(e))!==null&&t!==void 0?t:{},{format:r,formatType:i}=n;return{format:r,formatType:i}}}function Qve(e,t){var n;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(nA(e)&&J(e.sort))return"ordinal";const{aggregate:r,bin:i,timeUnit:o}=e;if(o)return"temporal";if(i||r&&!Ls(r)&&!Ea(r))return"quantitative";if(ml(e)&&((n=e.scale)===null||n===void 0?void 0:n.type))switch(H_[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function $o(e){if(oe(e))return e;if(yv(e))return e.condition}function Bt(e){if(Oe(e))return e;if(Hp(e))return e.condition}function _9(e,t,n,r={}){if(se(e)||Qe(e)||Ga(e)){const i=se(e)?"string":Qe(e)?"number":"boolean";return ee(Jye(t,i,e)),{value:e}}return Oe(e)?xv(e,t,n,r):Hp(e)?Object.assign(Object.assign({},e),{condition:xv(e.condition,t,n,r)}):e}function xv(e,t,n,r){if(E9(e)){const{format:i,formatType:o}=e,a=tA(e,["format","formatType"]);if(gl(o)&&!n.customFormatTypes)return ee(M$(t)),xv(a,t,n,r)}else{const i=oA(e)?"axis":S9(e)?"legend":eA(e)?"header":null;if(i&&e[i]){const o=e[i],{format:a,formatType:s}=o,u=tA(o,["format","formatType"]);if(gl(s)&&!n.customFormatTypes)return ee(M$(t)),xv(Object.assign(Object.assign({},e),{[i]:u}),t,n,r)}}return oe(e)?uA(e,t,r):Jve(e)}function Jve(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Qe(n)?"quantitative":se(n)?"nominal":dl(n)?"temporal":void 0,Object.assign(Object.assign({},e),{type:t})}function uA(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:a}=e,s=Object.assign({},e);if(!n&&r&&!E_(r)&&!Ls(r)&&!Ea(r)&&(ee(e1e(r)),delete s.aggregate),i&&(s.timeUnit=Qn(i)),a&&(s.field=`${a}`),it(o)&&(s.bin=wv(o,t)),Kn(o)&&!cn(t)&&ee(D1e(t)),ci(s)){const{type:u}=s,l=rve(u);u!==l&&(s.type=l),u!=="quantitative"&&f$(r)&&(ee(Zye(u,r)),s.type="quantitative")}else if(!i$(t)){const u=Qve(s,t);s.type=u}if(ci(s)){const{compatible:u,warning:l}=Zve(s,t)||{};u===!1&&ee(l)}if(nA(s)&&se(s.sort)){const{sort:u}=s;if(g9(u))return Object.assign(Object.assign({},s),{sort:{encoding:u}});const l=u.substr(1);if(u.charAt(0)==="-"&&g9(l))return Object.assign(Object.assign({},s),{sort:{encoding:l,order:"descending"}})}if(eA(s)){const{header:u}=s;if(u){const{orient:l}=u,c=tA(u,["orient"]);if(l)return Object.assign(Object.assign({},s),{header:Object.assign(Object.assign({},c),{labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l})})}}return s}function wv(e,t){return Ga(e)?{maxbins:h$(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?Object.assign(Object.assign({},e),{maxbins:h$(t)}):e}const xf={compatible:!0};function Zve(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case ma:case ya:case K1:return vv(e)?xf:{compatible:!1,warning:o1e(t)};case mt:case Kt:case Ms:case ff:case gr:case Fo:case Do:case jp:case Lp:case Q1:case ul:case J1:case Z1:case sl:case Bi:case To:case ev:return xf;case Mo:case ui:case No:case Ui:return n!==hl?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:xf;case wa:case Fs:case Ds:case Rs:case xa:case ba:case va:case $i:case Ao:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:xf;case mr:case Ps:return!vv(e)&&!qve(e)?{compatible:!1,warning:a1e(t)}:xf;case Ip:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:xf}}function wf(e){const{formatType:t}=bv(e);return t==="time"||!t&&ebe(e)}function ebe(e){return e&&(e.type==="temporal"||oe(e)&&!!e.timeUnit)}function Sv(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var o;const a=t&&((o=Qn(t))===null||o===void 0?void 0:o.unit);let s=a||n==="temporal",u;return zp(e)?u=e.expr:ge(e)?u=e.signal:dl(e)?(s=!0,u=$p(e)):(se(e)||Qe(e))&&s&&(u=`datetime(${rt(e)})`,q1e(a)&&(Qe(e)&&e<1e4||se(e)&&isNaN(Date.parse(e)))&&(u=$p({[a]:e}))),u?r&&s?`time(${u})`:u:i?void 0:rt(e)}function A9(e,t){const{type:n}=e;return t.map(r=>{const i=Sv(r,{timeUnit:oe(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return i!==void 0?{signal:i}:r})}function Gp(e,t){return it(e.bin)?Is(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const T9={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function qp(e){return e&&e.condition}const N9=["domain","grid","labels","ticks","title"],tbe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},M9={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},nbe=Object.assign(Object.assign({},M9),{style:1,labelExpr:1,encoding:1});function F9(e){return!!nbe[e]}const rbe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},D9=Z(rbe);function Ca(e){return"mark"in e}class Ev{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Ca(t)?Dve(t.mark)===this.name:!1}}var ibe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function yl(e,t){const n=e&&e[t];return n?J(n)?ol(n,r=>!!r.field):oe(n)||yv(n):!1}function R9(e,t){const n=e&&e[t];return n?J(n)?ol(n,r=>!!r.field):oe(n)||Lo(n)||Hp(n):!1}function lA(e,t){if(cn(t)){const n=e[t];if((oe(n)||Lo(n))&&V$(n.type)){const r=o$(t);return R9(e,r)}}return!1}function cA(e){return ol(rye,t=>{if(yl(e,t)){const n=e[t];if(J(n))return ol(n,r=>!!r.aggregate);{const r=$o(n);return r&&!!r.aggregate}}return!1})}function P9(e,t){const n=[],r=[],i=[],o=[],a={};return fA(e,(s,u)=>{if(oe(s)){const{field:l,aggregate:c,bin:f,timeUnit:d}=s,h=ibe(s,["field","aggregate","bin","timeUnit"]);if(c||d||f){const p=aA(s),g=p==null?void 0:p.title;let m=ae(s,{forAs:!0});const y=Object.assign(Object.assign(Object.assign({},g?[]:{title:bf(s,t,{allowDisabling:!0})}),h),{field:m});if(c){let v;if(Ls(c)?(v="argmax",m=ae({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${m}.${l}`):Ea(c)?(v="argmin",m=ae({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${m}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:m};l&&(b.field=l),o.push(b)}}else if(n.push(m),ci(s)&&it(f)){if(r.push({bin:f,field:l,as:m}),n.push(ae(s,{binSuffix:"end"})),Gp(s,u)&&n.push(ae(s,{binSuffix:"range"})),cn(u)){const v={field:`${m}_end`};a[`${u}2`]=v}y.bin="binned",i$(u)||(y.type=hl)}else if(d){i.push({timeUnit:d,field:l,as:m});const v=ci(s)&&s.type!==gf&&"time";v&&(u===jp||u===ul?y.formatType=v:hye(u)?y.legend=Object.assign({formatType:v},y.legend):cn(u)&&(y.axis=Object.assign({formatType:v},y.axis)))}a[u]=y}else n.push(l),a[u]=e[u]}else a[u]=e[u]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function obe(e,t,n){const r=gye(t,n);if(r){if(r==="binned"){const i=e[t===$i?mt:Kt];return!!(oe(i)&&oe(e[t])&&Kn(i.bin))}}else return!1;return!0}function abe(e,t,n,r){const i={};for(const o of Z(e))r$(o)||ee(i1e(o));for(let o of lye){if(!e[o])continue;const a=e[o];if(hf(o)){const s=a$(o),u=i[s];if(oe(u)){if(nve(u.type)&&oe(a)){ee(Kye(s));continue}}else o=s,ee(Qye(s))}if(o==="angle"&&t==="arc"&&!e.theta&&(ee(Xye),o=Bi),!obe(e,o,t)){ee(ov(o,t));continue}if(o===xa&&t==="line"){const s=$o(e[o]);if(s==null?void 0:s.aggregate){ee(n1e);continue}}if(o===gr&&(n?"fill"in e:"stroke"in e)){ee(D$("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===Lp||o===Ip&&!J(a)&&!Hi(a)||o===ul&&J(a))a&&(i[o]=ue(a).reduce((s,u)=>(oe(u)?s.push(uA(u,o)):ee(A_(u,o)),s),[]));else{if(o===ul&&a===null)i[o]=null;else if(!oe(a)&&!Lo(a)&&!Hi(a)&&!mv(a)&&!ge(a)){ee(A_(a,o));continue}i[o]=_9(a,o,r)}}return i}function Ov(e,t){const n={};for(const r of Z(e)){const i=_9(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function sbe(e){const t=[];for(const n of Z(e))if(yl(e,n)){const r=e[n],i=ue(r);for(const o of i)oe(o)?t.push(o):yv(o)&&t.push(o.condition)}return t}function fA(e,t,n){if(!!e)for(const r of Z(e)){const i=e[r];if(J(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function ube(e,t,n,r){return e?Z(e).reduce((i,o)=>{const a=e[o];return J(a)?a.reduce((s,u)=>t.call(r,s,u,o),i):t.call(r,i,a,o)},n):n}function j9(e,t){return Z(t).reduce((n,r)=>{switch(r){case mt:case Kt:case J1:case ev:case Z1:case $i:case Ao:case Ms:case ff:case Bi:case ba:case To:case va:case No:case Mo:case Ui:case ui:case jp:case mr:case sl:case ul:return n;case Ip:if(e==="line"||e==="trail")return n;case Lp:case Q1:{const i=t[r];if(J(i)||oe(i))for(const o of ue(i))o.aggregate||n.push(ae(o,{}));return n}case xa:if(e==="trail")return n;case gr:case Fo:case Do:case wa:case Fs:case Ds:case Ps:case Rs:{const i=$o(t[r]);return i&&!i.aggregate&&n.push(ae(i,{})),n}}},[])}var I9=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function lbe(e){const{tooltip:t}=e,n=I9(e,["tooltip"]);if(!t)return{filteredEncoding:n};let r,i;if(J(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return J(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function dA(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:a,titlePrefix:s})=>{const u=r?` of ${hA(t)}`:"";return{field:a+t.field,type:t.type,title:ge(s)?{signal:`${s}"${escape(u)}"`}:s+u}}),o=sbe(n).map(Hve);return{tooltip:[...i,..._o(o,Pe)]}}function hA(e){const{title:t,field:n}=e;return Ft(t,n)}function pA(e,t,n,r,i){const{scale:o,axis:a}=n;return({partName:s,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=hA(n);return L9(e,s,i,{mark:u,encoding:Object.assign(Object.assign(Object.assign({[t]:Object.assign(Object.assign(Object.assign({field:`${l}_${n.field}`,type:n.type},d!==void 0?{title:d}:{}),o!==void 0?{scale:o}:{}),a!==void 0?{axis:a}:{})},se(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{}),r),f)})}}function L9(e,t,n,r){const{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||e[t]===void 0&&n[t]?[Object.assign(Object.assign({},r),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[t]),i?{clip:i}:{}),o?{color:o}:{}),a?{opacity:a}:{}),jo(r.mark)?r.mark:{type:r.mark}),{style:`${s}-${t}`}),Ga(e[t])?{}:e[t])})]:[]}function z9(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:kv(o,n),continuousAxisChannelDef2:kv(a,n),continuousAxisChannelDefError:kv(s,n),continuousAxisChannelDefError2:kv(u,n),continuousAxis:i}}function kv(e,t){if(e==null?void 0:e.aggregate){const{aggregate:n}=e,r=I9(e,["aggregate"]);return n!==t&&ee(F1e(n,t)),r}else return e}function $9(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(jo(n)&&n.orient)return n.orient;if(zo(i)){if(zo(o)){const a=oe(i)&&i.aggregate,s=oe(o)&&o.aggregate;if(!a&&s===t)return"vertical";if(!s&&a===t)return"horizontal";if(a===t&&s===t)throw new Error("Both x and y cannot have aggregate");return wf(o)&&!wf(i)?"horizontal":"vertical"}return"horizontal"}else{if(zo(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}var Cv=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const _v="boxplot",cbe=["box","median","outliers","rule","ticks"],fbe=new Ev(_v,U9);function B9(e){return Qe(e)?"tukey":e}function U9(e,{config:t}){var n,r;e=Object.assign(Object.assign({},e),{encoding:Ov(e.encoding,t)});const{mark:i,encoding:o,params:a,projection:s}=e,u=Cv(e,["mark","encoding","params","projection"]),l=jo(i)?i:{type:i};a&&ee(A$("boxplot"));const c=(n=l.extent)!==null&&n!==void 0?n:t.boxplot.extent,f=qe("size",l,t),d=B9(c),{bins:h,timeUnits:p,transform:g,continuousAxisChannelDef:m,continuousAxis:y,groupby:v,aggregate:b,encodingWithoutContinuousAxis:x,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:S}=dbe(e,c,t),{color:_,size:M}=x,D=Cv(x,["color","size"]),C=ke=>pA(l,y,m,ke,t.boxplot),A=C(D),k=C(x),N=C(Object.assign(Object.assign({},D),M?{size:M}:{})),T=dA([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,x),F={type:"tick",color:"black",opacity:1,orient:w,invalid:null,aria:!1},L=d==="min-max"?T:dA([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,x),R=[...A({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:L}),...A({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:L}),...A({partName:"ticks",mark:F,positionPrefix:"lower_whisker",extraEncoding:L}),...A({partName:"ticks",mark:F,positionPrefix:"upper_whisker",extraEncoding:L})],B=[...d!=="tukey"?R:[],...k({partName:"box",mark:Object.assign(Object.assign({type:"bar"},f?{size:f}:{}),{orient:E,invalid:null,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:T}),...N({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},ce(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),f?{size:f}:{}),{orient:w,aria:!1}),positionPrefix:"mid_box",extraEncoding:T})];if(d==="min-max")return Object.assign(Object.assign({},u),{transform:((r=u.transform)!==null&&r!==void 0?r:[]).concat(g),layer:B});const O=`datum["lower_box_${m.field}"]`,j=`datum["upper_box_${m.field}"]`,P=`(${j} - ${O})`,I=`${O} - ${c} * ${P}`,$=`${j} + ${c} * ${P}`,G=`datum["${m.field}"]`,z={joinaggregate:W9(m.field),groupby:v},V={transform:[{filter:`(${I} <= ${G}) && (${G} <= ${$})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...b],groupby:v}],layer:R},Y=Cv(D,["tooltip"]),{scale:U,axis:H}=m,X=hA(m),W=zr(H,["title"]),Se=L9(l,"outliers",t.boxplot,{transform:[{filter:`(${G} < ${I}) || (${G} > ${$})`}],mark:"point",encoding:Object.assign(Object.assign(Object.assign({[y]:Object.assign(Object.assign(Object.assign({field:m.field,type:m.type},X!==void 0?{title:X}:{}),U!==void 0?{scale:U}:{}),Ze(W)?{}:{axis:W})},Y),_?{color:_}:{}),S?{tooltip:S}:{})})[0];let fe;const he=[...h,...p,z];return Se?fe={transform:he,layer:[Se,V]}:(fe=V,fe.transform.unshift(...he)),Object.assign(Object.assign({},u),{layer:[fe,{transform:g,layer:B}]})}function W9(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function dbe(e,t,n){const r=$9(e,_v),{continuousAxisChannelDef:i,continuousAxis:o}=z9(e,r,_v),a=i.field,s=B9(t),u=[...W9(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:(s==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(s==="min-max"?"upper_whisker_":"max_")+a}],l=s==="min-max"||s==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],c=e.encoding,f=o;c[f];const d=Cv(c,[typeof f=="symbol"?f:f+""]),{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=lbe(d),{bins:g,timeUnits:m,aggregate:y,groupby:v,encoding:b}=P9(p,n),x=r==="vertical"?"horizontal":"vertical",w=r,E=[...g,...m,{aggregate:[...y,...u],groupby:v},...l];return{bins:g,timeUnits:m,transform:E,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:w,customTooltipWithoutAggregatedField:h}}var H9=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const gA="errorbar",hbe=["ticks","rule"],pbe=new Ev(gA,G9);function G9(e,{config:t}){e=Object.assign(Object.assign({},e),{encoding:Ov(e.encoding,t)});const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:u,tooltipEncoding:l}=q9(e,gA,t);delete o.size;const c=pA(s,i,r,o,t.errorbar),f=s.thickness,d=s.size,h=Object.assign(Object.assign({type:"tick",orient:a,aria:!1},f!==void 0?{thickness:f}:{}),d!==void 0?{size:d}:{}),p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},f!==void 0?{size:f}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return Object.assign(Object.assign(Object.assign({},u),{transform:n}),p.length>1?{layer:p}:Object.assign({},p[0]))}function gbe(e,t){const{encoding:n}=e;if(mbe(n))return{orient:$9(e,t),inputType:"raw"};const r=ybe(n),i=vbe(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const s=n.x2,u=n.y2;if(Oe(s)&&Oe(u))throw new Error(`${t} cannot have both x2 and y2`);if(Oe(s)){if(zo(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Oe(u)){if(zo(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const s=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Oe(u)&&!Oe(s))throw new Error(`${t} cannot have xError2 without xError`);if(Oe(c)&&!Oe(l))throw new Error(`${t} cannot have yError2 without yError`);if(Oe(s)&&Oe(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Oe(s)){if(zo(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Oe(l)){if(zo(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function mbe(e){return(Oe(e.x)||Oe(e.y))&&!Oe(e.x2)&&!Oe(e.y2)&&!Oe(e.xError)&&!Oe(e.xError2)&&!Oe(e.yError)&&!Oe(e.yError2)}function ybe(e){return Oe(e.x2)||Oe(e.y2)}function vbe(e){return Oe(e.xError)||Oe(e.xError2)||Oe(e.yError)||Oe(e.yError2)}function q9(e,t,n){var r;const{mark:i,encoding:o,params:a,projection:s}=e,u=H9(e,["mark","encoding","params","projection"]),l=jo(i)?i:{type:i};a&&ee(A$(t));const{orient:c,inputType:f}=gbe(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:h,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:g,continuousAxis:m}=z9(e,c,t),{errorBarSpecificAggregate:y,postAggregateCalculates:v,tooltipSummary:b,tooltipTitleWithFieldName:x}=bbe(l,d,h,p,g,f,t,n),w=o,E=m;w[E];const S=m==="x"?"x2":"y2";w[S];const _=m==="x"?"xError":"yError";w[_];const M=m==="x"?"xError2":"yError2";w[M];const D=H9(w,[typeof E=="symbol"?E:E+"",typeof S=="symbol"?S:S+"",typeof _=="symbol"?_:_+"",typeof M=="symbol"?M:M+""]),{bins:C,timeUnits:A,aggregate:k,groupby:N,encoding:T}=P9(D,n),F=[...k,...y],L=f!=="raw"?[]:N,R=dA(b,d,T,x);return{transform:[...(r=u.transform)!==null&&r!==void 0?r:[],...C,...A,...F.length===0?[]:[{aggregate:F,groupby:L}],...v],groupby:L,continuousAxisChannelDef:d,continuousAxis:m,encodingWithoutContinuousAxis:T,ticksOrient:c==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:u,tooltipEncoding:R}}function bbe(e,t,n,r,i,o,a,s){let u=[],l=[];const c=t.field;let f,d=!1;if(o==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":s.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&ee(M1e(h,p,a)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:Dp(h)},{fieldPrefix:"upper_",titlePrefix:V9(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:V9(h,p,"-")}],d=!0;else{let g,m,y;p==="ci"?(g="mean",m="ci0",y="ci1"):(g="median",m="q1",y="q3"),u=[{op:m,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:bf({field:c,aggregate:y,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:bf({field:c,aggregate:m,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:bf({field:c,aggregate:g,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ee(N1e(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:al(al(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function V9(e,t,n){return`${Dp(e)} ${n} ${t}`}const mA="errorband",xbe=["band","borders"],wbe=new Ev(mA,Y9);function Y9(e,{config:t}){e=Object.assign(Object.assign({},e),{encoding:Ov(e.encoding,t)});const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:u}=q9(e,mA,t),l=a,c=pA(l,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p=Object.assign(Object.assign({},l.interpolate?{interpolate:l.interpolate}:{}),l.tension&&l.interpolate?{tension:l.tension}:{});return f?(d=Object.assign(Object.assign(Object.assign({},d),p),{ariaRoleDescription:"errorband"}),h=Object.assign(Object.assign(Object.assign({},h),p),{aria:!1})):l.interpolate?ee(I$("interpolate")):l.tension&&ee(I$("tension")),Object.assign(Object.assign({},s),{transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]})}const X9={};function yA(e,t,n){const r=new Ev(e,t);X9[e]={normalizer:r,parts:n}}function Sbe(){return Z(X9)}yA(_v,U9,cbe);yA(gA,G9,hbe);yA(mA,Y9,xbe);const Ebe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],K9={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Q9={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Obe=Z(K9),kbe=Z(Q9),Cbe={header:1,headerRow:1,headerColumn:1,headerFacet:1},J9=Z(Cbe),Z9=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],_be={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Abe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Vp="_vgsid_",Tbe={point:{on:"click",fields:[Vp],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function vA(e){return!!e&&(e==="legend"||!!e.legend)}function bA(e){return vA(e)&&ce(e)}function xA(e){return!!e.select}var Nbe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function e7(e){const t=[];for(const n of e||[]){if(xA(n))continue;const{expr:r,bind:i}=n,o=Nbe(n,["expr","bind"]);if(i&&r){const a=Object.assign(Object.assign({},o),{bind:i,init:r});t.push(a)}else{const a=Object.assign(Object.assign(Object.assign({},o),r?{update:r}:{}),i?{bind:i}:{});t.push(a)}}return t}function Mbe(e){return Av(e)||SA(e)||wA(e)}function wA(e){return"concat"in e}function Av(e){return"vconcat"in e}function SA(e){return"hconcat"in e}function t7({step:e,offsetIsDiscrete:t}){var n;return t?(n=e.for)!==null&&n!==void 0?n:"offset":"position"}function Bo(e){return ce(e)&&e.step!==void 0}function n7(e){return e.view||e.width||e.height}const r7=20,Fbe={align:1,bounds:1,center:1,columns:1,spacing:1},Dbe=Z(Fbe);function Rbe(e,t,n){var r,i;const o=n[t],a={},{spacing:s,columns:u}=o;s!==void 0&&(a.spacing=s),u!==void 0&&(gv(e)&&!Wp(e.facet)||wA(e))&&(a.columns=u),Av(e)&&(a.columns=1);for(const l of Dbe)if(e[l]!==void 0)if(l==="spacing"){const c=e[l];a[l]=Qe(c)?c:{row:(r=c.row)!==null&&r!==void 0?r:s,column:(i=c.column)!==null&&i!==void 0?i:s}}else a[l]=e[l];return a}var Pbe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function EA(e,t){var n;return(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"continuousWidth":"continuousHeight"]}function Tv(e,t){const n=Nv(e,t);return Bo(n)?n.step:i7}function Nv(e,t){var n;const r=(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"discreteWidth":"discreteHeight"];return Ft(r,{step:e.step})}const i7=20,jbe={continuousWidth:200,continuousHeight:200,step:i7},Ibe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:jbe,mark:_ve,arc:{},area:{},bar:Nve,circle:{},geoshape:{},image:{},line:{},point:{},rect:Mve,rule:{color:"black"},square:{},text:{color:"black"},tick:Fve,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:lve,projection:{},legend:_be,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Tbe,style:{},title:{},facet:{spacing:r7},concat:{spacing:r7}},_a=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],o7={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},a7={blue:_a[0],orange:_a[1],red:_a[2],teal:_a[3],green:_a[4],yellow:_a[5],purple:_a[6],pink:_a[7],brown:_a[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Lbe(e={}){return{signals:[{name:"color",value:ce(e)?Object.assign(Object.assign({},a7),e):a7}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function zbe(e){return{signals:[{name:"fontSize",value:ce(e)?Object.assign(Object.assign({},o7),e):o7}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function $be(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function s7(e){const t=Z(e||{}),n={};for(const r of t){const i=e[r];n[r]=qp(i)?g$(i):$r(i)}return n}function Bbe(e){const t=Z(e),n={};for(const r of t)n[r]=s7(e[r]);return n}const Ube=[...a9,...D9,...J9,"background","padding","legend","lineBreak","scale","style","title","view"];function u7(e={}){const{color:t,font:n,fontSize:r,selection:i}=e,o=Pbe(e,["color","font","fontSize","selection"]),a=oc({},Ce(Ibe),n?$be(n):{},t?Lbe(t):{},r?zbe(r):{},o||{});i&&ac(a,"selection",i,!0);const s=zr(a,Ube);for(const u of["background","lineBreak","padding"])a[u]&&(s[u]=$r(a[u]));for(const u of a9)a[u]&&(s[u]=vr(a[u]));for(const u of D9)a[u]&&(s[u]=s7(a[u]));for(const u of J9)a[u]&&(s[u]=vr(a[u]));return a.legend&&(s.legend=vr(a.legend)),a.scale&&(s.scale=vr(a.scale)),a.style&&(s.style=Bbe(a.style)),a.title&&(s.title=vr(a.title)),a.view&&(s.view=vr(a.view)),s}const Wbe=new Set(["view",...wve]),Hbe=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Gbe=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},Cve);function qbe(e){e=Ce(e);for(const t of Hbe)delete e[t];if(e.axis)for(const t in e.axis)qp(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Ebe)delete e.legend[t];if(e.mark){for(const t of o9)delete e.mark[t];e.mark.tooltip&&ce(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(e7(e.params)),delete e.params);for(const t of Wbe){for(const r of o9)delete e[t][r];const n=Gbe[t];if(n)for(const r of n)delete e[t][r];Ybe(e,t)}for(const t of Sbe())delete e[t];Vbe(e);for(const t in e)ce(e[t])&&Ze(e[t])&&delete e[t];return Ze(e)?void 0:e}function Vbe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=p$(e.title);Ze(t)||(e.style["group-title"]=Object.assign(Object.assign({},e.style["group-title"]),t)),Ze(n)||(e.style["group-subtitle"]=Object.assign(Object.assign({},e.style["group-subtitle"]),n)),Ze(r)?delete e.title:e.title=r}function Ybe(e,t,n,r){const i=r?e[t][r]:e[t];t==="view"&&(n="cell");const o=Object.assign(Object.assign({},i),e.style[n!=null?n:t]);Ze(o)||(e.style[n!=null?n:t]=o),r||delete e[t]}function Mv(e){return"layer"in e}function Xbe(e){return"repeat"in e}function Kbe(e){return!J(e.repeat)&&e.repeat.layer}var Qbe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class OA{map(t,n){return gv(t)?this.mapFacet(t,n):Xbe(t)?this.mapRepeat(t,n):SA(t)?this.mapHConcat(t,n):Av(t)?this.mapVConcat(t,n):wA(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Mv(t))return this.mapLayer(t,n);if(Ca(t))return this.mapUnit(t,n);throw new Error(C_(t))}mapLayer(t,n){return Object.assign(Object.assign({},t),{layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))})}mapHConcat(t,n){return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map(r=>this.map(r,n))})}mapVConcat(t,n){return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map(r=>this.map(r,n))})}mapConcat(t,n){const{concat:r}=t,i=Qbe(t,["concat"]);return Object.assign(Object.assign({},i),{concat:r.map(o=>this.map(o,n))})}mapFacet(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}mapRepeat(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}}const Jbe={zero:1,center:1,normalize:1};function Zbe(e){return e in Jbe}const exe=new Set([t9,uv,sv,fv,cv,V_,Y_,lv,n9,q_]),txe=new Set([uv,sv,t9]);function Sf(e){return oe(e)&&rA(e)==="quantitative"&&!e.bin}function l7(e,t){var n,r;const i=t==="x"?"y":"radius",o=e[t],a=e[i];if(oe(o)&&oe(a))if(Sf(o)&&Sf(a)){if(o.stack)return t;if(a.stack)return i;const s=oe(o)&&!!o.aggregate,u=oe(a)&&!!a.aggregate;if(s!==u)return s?t:i;{const l=(n=o.scale)===null||n===void 0?void 0:n.type,c=(r=a.scale)===null||r===void 0?void 0:r.type;if(l&&l!=="linear")return i;if(c&&c!=="linear")return t}}else{if(Sf(o))return t;if(Sf(a))return i}else{if(Sf(o))return t;if(Sf(a))return i}}function nxe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function c7(e,t,n={}){var r,i;const o=jo(e)?e.type:e;if(!exe.has(o))return null;const a=l7(t,"x")||l7(t,"theta");if(!a)return null;const s=t[a],u=oe(s)?ae(s,{}):void 0,l=nxe(a),c=[],f=new Set;if(t[l]){const p=t[l],g=oe(p)?ae(p,{}):void 0;g&&g!==u&&(c.push(l),f.add(g));const m=l==="x"?"xOffset":"yOffset",y=t[m],v=oe(y)?ae(y,{}):void 0;v&&v!==u&&(c.push(m),f.add(v))}const d=cye.reduce((p,g)=>{if(g!=="tooltip"&&yl(t,g)){const m=t[g];for(const y of ue(m)){const v=$o(y);if(v.aggregate)continue;const b=ae(v,{});(!b||!f.has(b))&&p.push({channel:g,fieldDef:v})}}return p},[]);let h;if(s.stack!==void 0?Ga(s.stack)?h=s.stack?"zero":null:h=s.stack:txe.has(o)&&(h="zero"),!h||!Zbe(h)||cA(t)&&d.length===0)return null;if(((r=s==null?void 0:s.scale)===null||r===void 0?void 0:r.type)&&((i=s==null?void 0:s.scale)===null||i===void 0?void 0:i.type)!==br.LINEAR){if(n.disallowNonLinearStack)return null;ee(_1e(s.scale.type))}return Oe(t[Sa(a)])?(s.stack!==void 0&&ee(C1e(a)),null):(oe(s)&&s.aggregate&&!Sye.has(s.aggregate)&&ee(A1e(s.aggregate)),{groupbyChannels:c,groupbyFields:f,fieldChannel:a,impute:s.impute===null?!1:Bs(o),stackBy:d,offset:h})}var f7=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function rxe(e){const t=f7(e,["point","line"]);return Z(t).length>1?t:t.type}function ixe(e){for(const t of["line","area","rule","trail"])e[t]&&(e=Object.assign(Object.assign({},e),{[t]:zr(e[t],["point","line"])}));return e}function kA(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ce(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ce(t.point)?t.point:{}:void 0}function d7(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class oxe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Ca(t)){const{mark:r,encoding:i}=t,o=jo(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!kA(o,n[o.type],i);case"area":return!!kA(o,n[o.type],i)||!!d7(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:a,mark:s,encoding:u}=t,l=f7(t,["params","projection","mark","encoding"]),c=Ov(u,i),f=jo(s)?s:{type:s},d=kA(f,i[f.type],c),h=f.type==="area"&&d7(f,i[f.type]),p=[Object.assign(Object.assign({},o?{params:o}:{}),{mark:rxe(Object.assign(Object.assign({},f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{}),f)),encoding:zr(c,["shape"])})],g=c7(f,c);let m=c;if(g){const{fieldChannel:y,offset:v}=g;m=Object.assign(Object.assign({},c),{[y]:Object.assign(Object.assign({},c[y]),v?{stack:v}:{})})}return h&&p.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"line"},lf(f,["clip","interpolate","tension","tooltip"])),h),encoding:m})),d&&p.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},lf(f,["clip","tooltip"])),d),encoding:m})),r(Object.assign(Object.assign({},l),{layer:p}),Object.assign(Object.assign({},n),{config:ixe(i)}))}}var axe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function sxe(e,t){return t?Wp(e)?m7(e,t):h7(e,t):e}function CA(e,t){return t?m7(e,t):e}function _A(e,t,n){const r=t[e];if(Uve(r)){if(r.repeat in n)return Object.assign(Object.assign({},t),{[e]:n[r.repeat]});ee(Uye(r.repeat));return}return t}function h7(e,t){if(e=_A("field",e,t),e!==void 0){if(e===null)return null;if(nA(e)&&Io(e.sort)){const n=_A("field",e.sort,t);e=Object.assign(Object.assign({},e),n?{sort:n}:{})}return e}}function p7(e,t){if(oe(e))return h7(e,t);{const n=_A("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function g7(e,t){if(Oe(e)){const n=p7(e,t);if(n)return n;if(mv(e))return{condition:e.condition}}else{if(Hp(e)){const n=p7(e.condition,t);return n?Object.assign(Object.assign({},e),{condition:n}):axe(e,["condition"])}return e}}function m7(e,t){const n={};for(const r in e)if(pe(e,r)){const i=e[r];if(J(i))n[r]=i.map(o=>g7(o,t)).filter(o=>o);else{const o=g7(i,t);o!==void 0&&(n[r]=o)}}return n}class uxe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Ca(t)){const{encoding:n,mark:r}=t;if(r==="line"||jo(r)&&r.type==="line")for(const i of sye){const o=ll(i),a=n[o];if(n[i]&&(oe(a)&&!Kn(a.bin)||Lo(a)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return ee(l1e(!!i.x2,!!i.y2)),r(Object.assign(Object.assign({},t),{mark:ce(o)?Object.assign(Object.assign({},o),{type:"rule"}):"rule"}),n)}}var Us=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class lxe extends OA{constructor(){super(...arguments);this.nonFacetUnitNormalizers=[fbe,pbe,wbe,new oxe,new uxe]}map(t,n){if(Ca(t)){const r=yl(t.encoding,ma),i=yl(t.encoding,ya),o=yl(t.encoding,K1);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=CA(t.encoding,n.repeater),a=Object.assign(Object.assign({},t),o?{encoding:o}:{});if(r||i)return this.mapUnitWithParentEncodingOrProjection(a,n);const s=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(a,n.config))return u.run(a,n,s);return a}mapRepeat(t,n){return Kbe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i}=t,o=Us(t,["repeat","spec"]),{row:a,column:s,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return a||s?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},a?{row:a}:{}),s?{column:s}:{}),spec:{repeat:{layer:u},spec:i}}),n):Object.assign(Object.assign({},o),{layer:u.map(f=>{const d=Object.assign(Object.assign({},l),{layer:f}),h=`${(i.name||"")+c}child__layer_${ht(f)}`,p=this.mapLayerOrUnit(i,Object.assign(Object.assign({},n),{repeater:d,repeaterPrefix:h}));return p.name=h,p})})}mapNonLayerRepeat(t,n){var r;const{repeat:i,spec:o,data:a}=t,s=Us(t,["repeat","spec","data"]);!J(i)&&t.columns&&(t=zr(t,["columns"]),ee(T$("repeat")));const u=[],{repeater:l={},repeaterPrefix:c=""}=n,f=!J(i)&&i.row||[l?l.row:null],d=!J(i)&&i.column||[l?l.column:null],h=J(i)&&i||[l?l.repeat:null];for(const g of h)for(const m of f)for(const y of d){const v={repeat:g,row:m,column:y,layer:l.layer},b=(o.name||"")+c+"child__"+(J(i)?`${ht(g)}`:(i.row?`row_${ht(m)}`:"")+(i.column?`column_${ht(y)}`:"")),x=this.map(o,Object.assign(Object.assign({},n),{repeater:v,repeaterPrefix:b}));x.name=b,u.push(zr(x,["data"]))}const p=J(i)?t.columns:i.column?i.column.length:1;return Object.assign(Object.assign({data:(r=o.data)!==null&&r!==void 0?r:a,align:"all"},s),{columns:p,concat:u})}mapFacet(t,n){const{facet:r}=t;return Wp(r)&&t.columns&&(t=zr(t,["columns"]),ee(T$("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:a,config:s}=n,u=v7({parentProjection:a,projection:i}),l=y7({parentEncoding:o,encoding:CA(r,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),u?{projection:u}:{}),l?{encoding:l}:{}),{config:s})}mapFacetedUnit(t,n){const r=t.encoding,{row:i,column:o,facet:a}=r,s=Us(r,["row","column","facet"]),{mark:u,width:l,projection:c,height:f,view:d,params:h,encoding:p}=t,g=Us(t,["mark","width","projection","height","view","params","encoding"]),{facetMapping:m,layout:y}=this.getFacetMappingAndLayout({row:i,column:o,facet:a},n),v=CA(s,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},g),y),{facet:m,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l?{width:l}:{}),f?{height:f}:{}),d?{view:d}:{}),c?{projection:c}:{}),{mark:u,encoding:v}),h?{params:h}:{})}),n)}getFacetMappingAndLayout(t,n){var r;const{row:i,column:o,facet:a}=t;if(i||o){a&&ee(s1e([...i?[ma]:[],...o?[ya]:[]]));const s={},u={};for(const l of[ma,ya]){const c=t[l];if(c){const f=Us(c,["align","center","spacing","columns"]);s[l]=f;for(const d of["align","center","spacing"])c[d]!==void 0&&((r=u[d])!==null&&r!==void 0||(u[d]={}),u[d][l]=c[d])}}return{facetMapping:s,layout:u}}else{const{align:s,center:u,spacing:l,columns:c}=a,f=Us(a,["align","center","spacing","columns"]);return{facetMapping:sxe(f,n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},s?{align:s}:{}),u?{center:u}:{}),l?{spacing:l}:{}),c?{columns:c}:{})}}}mapLayer(t,n){var{parentEncoding:r,parentProjection:i}=n,o=Us(n,["parentEncoding","parentProjection"]);const{encoding:a,projection:s}=t,u=Us(t,["encoding","projection"]),l=Object.assign(Object.assign({},o),{parentEncoding:y7({parentEncoding:r,encoding:a,layer:!0}),parentProjection:v7({parentProjection:i,projection:s})});return super.mapLayer(u,l)}}function y7({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Z(e),...Z(t)]);for(const o of i){const a=t[o],s=e[o];if(Oe(a)){const u=Object.assign(Object.assign({},s),a);r[o]=u}else Hp(a)?r[o]=Object.assign(Object.assign({},a),{condition:Object.assign(Object.assign({},s),a.condition)}):a||a===null?r[o]=a:(n||Hi(s)||ge(s)||Oe(s)||J(s))&&(r[o]=s)}}else r=t;return!r||Ze(r)?void 0:r}function v7(e){const{parentProjection:t,projection:n}=e;return t&&n&&ee(Yye({parentProjection:t,projection:n})),n!=null?n:t}function AA(e){return"filter"in e}function cxe(e){return(e==null?void 0:e.stop)!==void 0}function b7(e){return"lookup"in e}function fxe(e){return"data"in e}function dxe(e){return"param"in e}function hxe(e){return"pivot"in e}function pxe(e){return"density"in e}function gxe(e){return"quantile"in e}function mxe(e){return"regression"in e}function yxe(e){return"loess"in e}function vxe(e){return"sample"in e}function bxe(e){return"window"in e}function xxe(e){return"joinaggregate"in e}function wxe(e){return"flatten"in e}function Sxe(e){return"calculate"in e}function x7(e){return"bin"in e}function Exe(e){return"impute"in e}function Oxe(e){return"timeUnit"in e}function kxe(e){return"aggregate"in e}function Cxe(e){return"stack"in e}function _xe(e){return"fold"in e}function Axe(e){return e.map(t=>AA(t)?{filter:uf(t.filter,tve)}:t)}var Ws=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class Txe extends OA{map(t,n){var r,i;return(r=n.emptySelections)!==null&&r!==void 0||(n.emptySelections={}),(i=n.selectionPredicates)!==null&&i!==void 0||(n.selectionPredicates={}),t=w7(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=w7(t,n),t.encoding){const r={};for(const[i,o]of Ns(t.encoding))r[i]=S7(o,n);t=Object.assign(Object.assign({},t),{encoding:r})}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const r=t,{selection:i}=r,o=Ws(r,["selection"]);return i?Object.assign(Object.assign({},o),{params:Ns(i).map(([a,s])=>{var u;const l=s,{init:c,bind:f,empty:d}=l,h=Ws(l,["init","bind","empty"]);h.type==="single"?(h.type="point",h.toggle=!1):h.type==="multi"&&(h.type="point"),n.emptySelections[a]=d!=="none";for(const p of _n((u=n.selectionPredicates[a])!==null&&u!==void 0?u:{}))p.empty=d!=="none";return{name:a,value:c,select:h,bind:f}})}):t}}function w7(e,t){const{transform:n}=e,r=Ws(e,["transform"]);if(n){const i=n.map(o=>{if(AA(o))return{filter:TA(o,t)};if(x7(o)&&cl(o.bin))return Object.assign(Object.assign({},o),{bin:E7(o.bin)});if(b7(o)){const a=o.from,{selection:s}=a,u=Ws(a,["selection"]);return s?Object.assign(Object.assign({},o),{from:Object.assign({param:s},u)}):o}return o});return Object.assign(Object.assign({},r),{transform:i})}return e}function S7(e,t){var n,r;const i=Ce(e);if(oe(i)&&cl(i.bin)&&(i.bin=E7(i.bin)),ml(i)&&((r=(n=i.scale)===null||n===void 0?void 0:n.domain)===null||r===void 0?void 0:r.selection)){const o=i.scale.domain,{selection:a}=o,s=Ws(o,["selection"]);i.scale.domain=Object.assign(Object.assign({},s),a?{param:a}:{})}if(mv(i))if(J(i.condition))i.condition=i.condition.map(o=>{const{selection:a,param:s,test:u}=o,l=Ws(o,["selection","param","test"]);return s?o:Object.assign(Object.assign({},l),{test:TA(o,t)})});else{const o=S7(i.condition,t),{selection:a,param:s,test:u}=o,l=Ws(o,["selection","param","test"]);i.condition=s?i.condition:Object.assign(Object.assign({},l),{test:TA(i.condition,t)})}return i}function E7(e){const t=e.extent;if(t==null?void 0:t.selection){const{selection:n}=t,r=Ws(t,["selection"]);return Object.assign(Object.assign({},e),{extent:Object.assign(Object.assign({},r),{param:n})})}return e}function TA(e,t){const n=r=>uf(r,i=>{var o,a,s;const u=(o=t.emptySelections[i])!==null&&o!==void 0?o:!0,l={param:i,empty:u};return(a=(s=t.selectionPredicates)[i])!==null&&a!==void 0||(s[i]=[]),t.selectionPredicates[i].push(l),l});return e.selection?n(e.selection):uf(e.test||e.filter,r=>r.selection?n(r.selection):r)}class NA extends OA{map(t,n){var r;const i=(r=n.selections)!==null&&r!==void 0?r:[];if(t.params&&!Ca(t)){const o=[];for(const a of t.params)xA(a)?i.push(a):o.push(a);t.params=o}return n.selections=i,super.map(t,O7(t,n))}mapUnit(t,n){var r;const i=n.selections;if(!i||!i.length)return t;const o=((r=n.path)!==null&&r!==void 0?r:[]).concat(t.name),a=[];for(const s of i)if(!s.views||!s.views.length)a.push(s);else for(const u of s.views)(se(u)&&(u===t.name||o.indexOf(u)>=0)||J(u)&&u.map(l=>o.indexOf(l)).every((l,c,f)=>l!==-1&&(c===0||l>f[c-1])))&&a.push(s);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=NA.prototype[e];NA.prototype[e]=function(n,r){return t.call(this,n,O7(n,r))}}function O7(e,t){var n;return e.name?Object.assign(Object.assign({},t),{path:((n=t.path)!==null&&n!==void 0?n:[]).concat(e.name)}):t}function k7(e,t){t===void 0&&(t=u7(e.config));const n=Dxe(e,t),{width:r,height:i}=e,o=Rxe(n,{width:r,height:i,autosize:e.autosize},t);return Object.assign(Object.assign({},n),o?{autosize:o}:{})}const Nxe=new lxe,Mxe=new Txe,Fxe=new NA;function Dxe(e,t={}){const n={config:t};return Fxe.map(Nxe.map(Mxe.map(e,n),n),n)}function C7(e){return se(e)?{type:e}:e!=null?e:{}}function Rxe(e,t,n){let{width:r,height:i}=t;const o=Ca(e)||Mv(e),a={};o?r=="container"&&i=="container"?(a.type="fit",a.contains="padding"):r=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(r=="container"&&(ee(O$("width")),r=void 0),i=="container"&&(ee(O$("height")),i=void 0));const s=Object.assign(Object.assign(Object.assign({type:"pad"},a),n?C7(n.autosize):{}),C7(e.autosize));if(s.type==="fit"&&!o&&(ee(Fye),s.type="pad"),r=="container"&&!(s.type=="fit"||s.type=="fit-x")&&ee(k$("width")),i=="container"&&!(s.type=="fit"||s.type=="fit-y")&&ee(k$("height")),!Co(s,{type:"pad"}))return s}function Pxe(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function jxe(e){return e?`fit-${tv(e)}`:"fit"}const Ixe=["background","padding"];function _7(e,t){const n={};for(const r of Ixe)e&&e[r]!==void 0&&(n[r]=$r(e[r]));return t&&(n.params=e.params),n}class Aa{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Aa(Ce(this.explicit),Ce(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(t){return Ft(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Z(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Uo(e){return{explicit:!0,value:e}}function Ur(e){return{explicit:!1,value:e}}function A7(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:Fv(t,n,r,i)}}function Fv(e,t,n,r){return e.explicit&&t.explicit&&ee(b1e(n,r,e.value,t.value)),e}function Hs(e,t,n,r,i=Fv){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Co(e.value,t.value)?e:i(e,t,n,r)}class Lxe extends Aa{constructor(t={},n={},r=!1){super(t,n);this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Ef(e){return"url"in e}function Yp(e){return"values"in e}function T7(e){return"name"in e&&!Ef(e)&&!Yp(e)&&!Gs(e)}function Gs(e){return e&&(N7(e)||M7(e)||MA(e))}function N7(e){return"sequence"in e}function M7(e){return"sphere"in e}function MA(e){return"graticule"in e}var ot;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(ot||(ot={}));var zxe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Of(e,t=!0,n=mn){if(J(e)){const r=e.map(i=>Of(i,t,n));return t?`[${r.join(", ")}]`:r}else if(dl(e))return n(t?$p(e):H1e(e));return t?n(rt(e)):e}function $xe(e,t){var n;for(const r of _n((n=e.component.selection)!==null&&n!==void 0?n:{})){const i=r.name;let o=`${i}${Ys}, ${r.resolve==="global"?"true":`{unit: ${_f(e)}}`}`;for(const a of Iv)!a.defined(r)||(a.signals&&(t=a.signals(e,r,t)),a.modifyExpr&&(o=a.modifyExpr(e,r,o)));t.push({name:i+b2e,on:[{events:{signal:r.name+Ys},update:`modify(${re(r.name+vl)}, ${o})`}]})}return FA(t)}function Bxe(e,t){if(e.component.selection&&Z(e.component.selection).length){const n=re(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:As("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return FA(t)}function Uxe(e,t){var n;let r=!1;for(const i of _n((n=e.component.selection)!==null&&n!==void 0?n:{})){const o=i.name,a=re(o+vl);if(t.filter(u=>u.name===o).length===0){const u=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${eB}(${a}, ${re(u)}${l}`})}r=!0;for(const u of Iv)u.defined(i)&&u.topLevelSignals&&(t=u.topLevelSignals(e,i,t))}return r&&t.filter(o=>o.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),FA(t)}function Wxe(e,t){var n;const r=[...t];for(const i of _n((n=e.component.selection)!==null&&n!==void 0?n:{})){const o={name:i.name+vl};if(i.init){const s=i.project.items.map(u=>zxe(u,["signals"]));o.values=i.init.map(u=>({unit:_f(e,{escape:!1}),fields:s,values:Of(u,!1)}))}r.filter(s=>s.name===i.name+vl).length||r.push(o)}return r}function F7(e,t){var n;for(const r of _n((n=e.component.selection)!==null&&n!==void 0?n:{}))for(const i of Iv)i.defined(r)&&i.marks&&(t=i.marks(e,r,t));return t}function Hxe(e,t){for(const n of e.children)Dt(n)&&(t=F7(n,t));return t}function Gxe(e,t,n,r){const i=oB(e,t.param,t);return{signal:Br(n.get("type"))&&J(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function FA(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class et{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){ee(Gye);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=n,t.parent=this}}class Zn extends et{constructor(t,n,r,i){super(t,n);this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Qz()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}var D7=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class Wo extends et{constructor(t,n){super(t);this.formula=n}clone(){return new Wo(null,Ce(this.formula))}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o)=>{const{field:a,timeUnit:s}=o;if(s){const u=ae(o,{forAs:!0});i[Pe({as:u,field:a,timeUnit:s})]={as:u,field:a,timeUnit:s}}return i},{});return Ze(r)?null:new Wo(t,r)}static makeFromTransform(t,n){const r=Object.assign({},n),{timeUnit:i}=r,o=D7(r,["timeUnit"]),a=Qn(i),s=Object.assign(Object.assign({},o),{timeUnit:a});return new Wo(t,{[Pe(s)]:s})}merge(t){this.formula=Object.assign({},this.formula);for(const n in t.formula)this.formula[n]||(this.formula[n]=t.formula[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Ns(this.formula))t.has(i.as)||(n[r]=i);this.formula=n}producedFields(){return new Set(_n(this.formula).map(t=>t.as))}dependentFields(){return new Set(_n(this.formula).map(t=>t.field))}hash(){return`TimeUnit ${Pe(this.formula)}`}assemble(){const t=[];for(const n of _n(this.formula)){const{field:r,as:i,timeUnit:o}=n,a=Qn(o),{unit:s,utc:u}=a,l=D7(a,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:si(r),type:"timeunit"},s?{units:D_(s)}:{}),u?{timezone:"utc"}:{}),l),{as:[i,`${i}_end`]}))}return t}}var qxe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Xp="_tuple_fields";class Vxe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={}}}const Yxe={defined:()=>!0,parse:(e,t,n)=>{var r;const i=t.name,o=(r=t.project)!==null&&r!==void 0?r:t.project=new Vxe,a={},s={},u=new Set,l=(g,m)=>{const y=m==="visual"?g.channel:g.field;let v=ht(`${i}_${y}`);for(let b=1;u.has(v);b++)v=ht(`${i}_${y}_${b}`);return u.add(v),{[m]:v}},c=t.type,f=e.config.selection[c],d=n.value!==void 0?ue(n.value):null;let{fields:h,encodings:p}=ce(n.select)?n.select:{};if(!h&&!p&&d){for(const g of d)if(!!ce(g))for(const m of Z(g))aye(m)?(p||(p=[])).push(m):c==="interval"?(ee(Bye),p=f.encodings):(h||(h=[])).push(m)}!h&&!p&&(p=f.encodings,"fields"in f&&(h=f.fields));for(const g of p!=null?p:[]){const m=e.fieldDef(g);if(m){let y=m.field;if(m.aggregate){ee(Dye(g,m.aggregate));continue}else if(!y){ee(_$(g));continue}if(m.timeUnit){y=e.vgField(g);const v={timeUnit:m.timeUnit,as:y,field:m.field};s[Pe(v)]=v}if(!a[y]){let v="E";if(c==="interval"){const x=e.getScaleComponent(g).get("type");Br(x)&&(v="R")}else m.bin&&(v="R-RE");const b={field:y,channel:g,type:v};b.signals=Object.assign(Object.assign({},l(b,"data")),l(b,"visual")),o.items.push(a[y]=b),o.hasField[y]=o.hasChannel[g]=a[y]}}else ee(_$(g))}for(const g of h!=null?h:[]){if(o.hasField[g])continue;const m={type:"E",field:g};m.signals=Object.assign({},l(m,"data")),o.items.push(m),o.hasField[g]=m}d&&(t.init=d.map(g=>o.items.map(m=>ce(g)?g[m.channel]!==void 0?g[m.channel]:g[m.field]:g))),Ze(s)||(o.timeUnit=new Wo(null,s))},signals:(e,t,n)=>{const r=t.name+Xp;return n.filter(o=>o.name===r).length>0?n:n.concat({name:r,value:t.project.items.map(o=>{const a=qxe(o,["signals","hasLegend"]);return a.field=si(a.field),a})})}},qs={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Is(i))continue;const o=e.getScaleComponent(i),a=o?o.get("type"):void 0;if(!o||!Br(a)){ee(jye);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(a=>n.filter(s=>s.name===a.signals.data).length===0);if(!e.parent||RA(e)||r.length===0)return n;const i=n.filter(a=>a.name===t.name)[0];let o=i.update;if(o.indexOf(eB)>=0)i.update=`{${r.map(a=>`${re(si(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(const a of r){const s=`${re(si(a.field))}: ${a.signals.data}`;o.includes(s)||(o=`${o.substring(0,o.length-1)}, ${s}}`)}i.update=o}return n.concat(r.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!RA(e))for(const r of t.scales){const i=n.filter(o=>o.name===r.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}};function DA(e,t){return`domain(${re(e.scaleName(t))})`}function RA(e){var t;return e.parent&&Rf(e.parent)&&((t=!e.parent.parent)!==null&&t!==void 0?t:RA(e.parent.parent))}var Xxe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const kf="_brush",PA="_scale_trigger",Kxe={defined:e=>e.type==="interval",signals:(e,t,n)=>{const r=t.name,i=r+Xp,o=qs.defined(t),a=t.init?t.init[0]:null,s=[],u=[];if(t.translate&&!o){const c=`!event.item || event.item.mark.name !== ${re(r+kf)}`;R7(t,(f,d)=>{var h,p;const g=ue((h=(p=d.between[0]).filter)!==null&&h!==void 0?h:p.filter=[]);return g.includes(c)||g.push(c),f})}t.project.items.forEach((c,f)=>{const d=c.channel;if(d!==mt&&d!==Kt){ee("Interval selections only support x and y encoding channels.");return}const h=a?a[f]:null,p=Qxe(e,t,c,h),g=c.signals.data,m=c.signals.visual,y=re(e.scaleName(d)),v=e.getScaleComponent(d).get("type"),b=Br(v)?"+":"";n.push(...p),s.push(g),u.push({scaleName:e.scaleName(d),expr:`(!isArray(${g}) || (${b}invert(${y}, ${m})[0] === ${b}${g}[0] && ${b}invert(${y}, ${m})[1] === ${b}${g}[1]))`})}),!o&&u.length&&n.push({name:r+PA,value:{},on:[{events:u.map(c=>({scale:c.scaleName})),update:`${u.map(c=>c.expr).join(" && ")} ? ${r+PA} : {}`}]});const l=`unit: ${_f(e)}, fields: ${i}, values`;return n.concat(Object.assign(Object.assign({name:r+Ys},a?{init:`{${l}: ${Of(a)}}`}:{}),s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${l}: [${s}]} : null`}]}:{}))},marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,a=i==null?void 0:i.signals.visual,s=o==null?void 0:o.signals.visual,u=`data(${re(t.name+vl)})`;if(qs.defined(t)||!i&&!o)return n;const l={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:o!==void 0?{signal:`${s}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${s}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of Z(l))l[m]=[Object.assign({test:`${u}.length && ${u}[0].unit === ${_f(e)}`},l[m]),{value:0}];const c=t.mark,{fill:f,fillOpacity:d,cursor:h}=c,p=Xxe(c,["fill","fillOpacity","cursor"]),g=Z(p).reduce((m,y)=>(m[y]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,o!==void 0&&`${s}[0] !== ${s}[1]`].filter(v=>v).join(" && "),value:p[y]},{value:null}],m),{});return[{name:`${r+kf}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:d}},update:l}},...n,{name:r+kf,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},h?{cursor:{value:h}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},l),g)}}]}};function Qxe(e,t,n,r){const i=n.channel,o=n.signals.visual,a=n.signals.data,s=qs.defined(t),u=re(e.scaleName(i)),l=e.getScaleComponent(i),c=l?l.get("type"):void 0,f=g=>`scale(${u}, ${g})`,d=e.getSizeSignalRef(i===mt?"width":"height").signal,h=`${i}(unit)`,p=R7(t,(g,m)=>[...g,{events:m.between[0],update:`[${h}, ${h}]`},{events:m,update:`[${o}[0], clamp(${h}, 0, ${d})]`}]);return p.push({events:{signal:t.name+PA},update:Br(c)?`[${f(`${a}[0]`)}, ${f(`${a}[1]`)}]`:"[0, 0]"}),s?[{name:a,on:[]}]:[Object.assign(Object.assign({name:o},r?{init:Of(r,!0,f)}:{value:[]}),{on:p}),Object.assign(Object.assign({name:a},r?{init:Of(r)}:{}),{on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${u}, ${o})`}]})]}function R7(e,t){return e.events.reduce((n,r)=>r.between?t(n,r):(ee(`${r} is not an ordered event stream for interval selections.`),n),[])}const Jxe={defined:e=>e.type==="point",signals:(e,t,n)=>{var r;const i=t.name,o=i+Xp,a=t.project,s="(item().isVoronoi ? datum.datum : datum)",u=a.items.map(h=>{const p=e.fieldDef(h.channel);return(p==null?void 0:p.bin)?`[${s}[${re(e.vgField(h.channel,{}))}], ${s}[${re(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${s}[${re(h.field)}]`}).join(", "),l=`unit: ${_f(e)}, fields: ${o}, values`,c=t.events,f=_n((r=e.component.selection)!==null&&r!==void 0?r:{}).reduce((h,p)=>p.type==="interval"?h.concat(p.name+kf):h,[]).map(h=>`indexof(item().mark.name, '${h}') < 0`).join(" && "),d=`datum && item().mark.marktype !== 'group'${f?` && ${f}`:""}`;return n.concat([{name:i+Ys,on:c?[{events:c,update:`${d} ? {${l}: [${u}]} : null`,force:!0}]:[]}])}};function Cf(e,t,n,r){const i=mv(t)&&t.condition,o=r(t);if(i){const s=ue(i).map(u=>{const l=r(u);if(Bve(u)){const{param:c,empty:f}=u,d=iB(e,{param:c,empty:f});return Object.assign({test:d},l)}else{const c=Lv(e,u.test);return Object.assign({test:c},l)}});return{[n]:[...s,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function jA(e,t="text"){const n=e.encoding[t];return Cf(e,n,t,r=>Dv(r,e.config))}function Dv(e,t,n="datum"){if(e){if(Hi(e))return lt(e.value);if(Oe(e)){const{format:r,formatType:i}=bv(e);return J_({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function P7(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if(J(a))return{tooltip:I7({tooltip:a},o,i,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return Cf(e,a,"tooltip",u=>{const l=Dv(u,i,s);if(l)return l;if(u===null)return;let c=qe("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),se(c))return{value:c};if(ce(c))return ge(c)?c:c.content==="encoding"?I7(n,o,i,t):{signal:s}})}}function j7(e,t,n,{reactiveGeom:r}={}){const i={},o=r?"datum.datum":"datum",a=[];function s(l,c){const f=ll(c),d=ci(l)?l:Object.assign(Object.assign({},l),{type:e[f].type}),h=d.title||sA(d,n),p=ue(h).join(", ");let g;if(cn(c)){const m=c==="x"?"x2":"y2",y=$o(e[m]);if(Kn(d.bin)&&y){const v=ae(d,{expr:o}),b=ae(y,{expr:o}),{format:x,formatType:w}=bv(d);g=hv(v,b,x,w,n),i[m]=!0}else if(t&&t.fieldChannel===c&&t.offset==="normalize"){const{format:v,formatType:b}=bv(d);g=J_({fieldOrDatumDef:d,format:v,formatType:b,expr:o,config:n,normalizeStack:!0}).signal}}g!=null||(g=Dv(d,n,o).signal),a.push({channel:c,key:p,value:g})}fA(e,(l,c)=>{oe(l)?s(l,c):yv(l)&&s(l.condition,c)});const u={};for(const{channel:l,key:c,value:f}of a)!i[l]&&!u[c]&&(u[c]=f);return u}function I7(e,t,n,{reactiveGeom:r}={}){const i=j7(e,t,n,{reactiveGeom:r}),o=Ns(i).map(([a,s])=>`"${a}": ${s}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function Zxe(e){const{markDef:t,config:n}=e,r=qe("aria",t,n);return r===!1?{}:Object.assign(Object.assign(Object.assign({},r?{aria:r}:{}),e2e(e)),t2e(e))}function e2e(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=qe("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in Tye?{}:{ariaRoleDescription:{value:t}}}function t2e(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Cf(e,o,"description",u=>Dv(u,e.config));const a=qe("description",n,r);if(a!=null)return{description:lt(a)};if(r.aria===!1)return{};const s=j7(t,i,r);if(!Ze(s))return{description:{signal:Ns(s).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Jt(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n;let{defaultRef:s,defaultValue:u}=n;s===void 0&&(u!=null||(u=qe(e,r,o,{vgChannel:a,ignoreVgConfig:!0})),u!==void 0&&(s=lt(u)));const l=i[e];return Cf(t,l,a!=null?a:e,c=>Q_({channel:e,channelDef:c,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s}))}function L7(e,t={filled:void 0}){var n,r,i,o;const{markDef:a,encoding:s,config:u}=e,{type:l}=a,c=(n=t.filled)!==null&&n!==void 0?n:qe("filled",a,u),f=je(["bar","point","circle","square","geoshape"],l)?"transparent":void 0,d=(i=(r=qe(c===!0?"color":void 0,a,u,{vgChannel:"fill"}))!==null&&r!==void 0?r:u.mark[c===!0&&"color"])!==null&&i!==void 0?i:f,h=(o=qe(c===!1?"color":void 0,a,u,{vgChannel:"stroke"}))!==null&&o!==void 0?o:u.mark[c===!1&&"color"],p=c?"fill":"stroke",g=Object.assign(Object.assign({},d?{fill:lt(d)}:{}),h?{stroke:lt(h)}:{});return a.color&&(c?a.fill:a.stroke)&&ee(D$("property",{fill:"fill"in a,stroke:"stroke"in a})),Object.assign(Object.assign(Object.assign(Object.assign({},g),Jt("color",e,{vgChannel:p,defaultValue:c?d:h})),Jt("fill",e,{defaultValue:s.fill?d:void 0})),Jt("stroke",e,{defaultValue:s.stroke?h:void 0}))}function n2e(e){const{encoding:t,mark:n}=e,r=t.order;return!Bs(n)&&Hi(r)?Cf(e,r,"zindex",i=>lt(i.value)):{}}function Kp({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,a=t[o],s=n[o];if((o==="xOffset"||o==="yOffset")&&s){const l=Q_({channel:o,channelDef:s,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:lt(a),bandPosition:i});return{offsetType:"encoding",offset:l}}const u=t[o];return u?{offsetType:"visual",offset:u}:{}}function An(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:a,stack:s}=t,u=i[e],l=i[Sa(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Kp({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),p=IA({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),g=!u&&cn(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:r2e({channel:e,channelDef:u,channel2Def:l,markDef:o,config:a,scaleName:c,scale:f,stack:s,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function r2e(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(Oe(n)&&i&&t===i.fieldChannel){if(oe(n)){let s=n.bandPosition;if(s===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(s=.5),s!==void 0)return dv({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:s,offset:o})}return pl(n,r,{suffix:"end"},{offset:o})}return X_(e)}function IA({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:a}=e;return()=>{const s=ll(n),u=js(n),l=qe(n,o,a,{vgChannel:u});if(l!==void 0)return Up(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!je([br.LOG,br.TIME,br.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return s==="y"?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const c=e[yr(n)];return Object.assign(Object.assign({},c),{mult:.5})}}}}const i2e={left:"x",center:"xc",right:"x2"},o2e={top:"y",middle:"yc",bottom:"y2"};function z7(e,t,n,r="middle"){if(e==="radius"||e==="theta")return js(e);const i=e==="x"?"align":"baseline",o=qe(i,t,n);let a;return ge(o)?(ee(u1e(i)),a=void 0):a=o,e==="x"?i2e[a||(r==="top"?"left":"center")]:o2e[a||r]}function Rv(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?$7(e,t,{defaultPos:n,defaultPos2:r}):An(e,t,{defaultPos:n})}function $7(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,a=Sa(e),s=yr(e),u=a2e(t,r,a),l=u[s]?z7(e,i,o):js(e);return Object.assign(Object.assign({},An(e,t,{defaultPos:n,vgChannel:l})),u)}function a2e(e,t,n){const{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,u=ll(n),l=yr(n),c=js(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in o?Kp({channel:n,markDef:o,encoding:r,model:e}):Kp({channel:u,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const m=yr(n),y=e.markDef[m];return y!=null?{[m]:{value:y}}:{[c]:{field:e.getName(n)}}}const g=s2e({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:s,scaleName:d,scale:h,stack:a,offset:p,defaultRef:void 0});return g!==void 0?{[c]:g}:Pv(n,o)||Pv(n,{[n]:iv(n,o,s.style),[l]:iv(l,o,s.style)})||Pv(n,s[i])||Pv(n,s.mark)||{[c]:IA({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function s2e({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:l}){return Oe(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?pl(t,o,{suffix:"start"},{offset:u}):X_({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:u,defaultRef:l})}function Pv(e,t){const n=yr(e),r=js(e);if(t[r]!==void 0)return{[r]:Up(e,t[r])};if(t[e]!==void 0)return{[r]:Up(e,t[e])};if(t[n]){const i=t[n];if(vf(i))ee(t1e(n));else return{[n]:Up(e,i)}}}function Vs(e,t){var n,r;const{config:i,encoding:o,markDef:a}=e,s=a.type,u=Sa(t),l=yr(t),c=o[t],f=o[u],d=e.getScaleComponent(t),h=d?d.get("type"):void 0,p=a.orient,g=(r=(n=o[l])!==null&&n!==void 0?n:o.size)!==null&&r!==void 0?r:qe("size",a,i,{vgChannel:l}),m=s==="bar"&&(t==="x"?p==="vertical":p==="horizontal");return oe(c)&&(it(c.bin)||Kn(c.bin)||c.timeUnit&&!f)&&!(g&&!vf(g))&&!Qt(h)?c2e({fieldDef:c,fieldDef2:f,channel:t,model:e}):(Oe(c)&&Qt(h)||m)&&!f?l2e(c,t,e):$7(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function u2e(e,t,n,r,i){if(vf(i))if(n){const a=n.get("type");if(a==="band")return{scale:t,band:i.band};i.band!==1&&(ee(d1e(a)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(ge(i))return i;if(i)return{value:i}}if(n){const a=n.get("range");if($s(a)&&Qe(a.step))return{value:a.step-2}}return{value:Tv(r.view,e)-2}}function l2e(e,t,n){const{markDef:r,encoding:i,config:o,stack:a}=n,s=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=yr(t),f=Sa(t),d=uye(t),h=n.scaleName(d),p=s==="horizontal"&&t==="y"||s==="vertical"&&t==="x";let g;(i.size||r.size)&&(p?g=Jt("size",n,{vgChannel:c,defaultRef:lt(r.size)}):ee(m1e(r.type)));const m=x9({channel:t,fieldDef:e,markDef:r,config:o,scaleType:l==null?void 0:l.get("type"),useVlSizeChannel:p});g=g||{[c]:u2e(c,h||u,l,o,m)};const y=(l==null?void 0:l.get("type"))!=="band"||!("band"in g[c])?"middle":"top",v=z7(t,r,o,y),b=v==="xc"||v==="yc",{offset:x,offsetType:w}=Kp({channel:t,markDef:r,encoding:i,model:n,bandPosition:b?.5:0}),E=X_({channel:t,channelDef:e,markDef:r,config:o,scaleName:u,scale:l,stack:a,offset:x,defaultRef:IA({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:b?w==="encoding"?0:.5:ge(m)?{signal:`(1-${m})/2`}:vf(m)?(1-m.band)/2:0});if(c)return Object.assign({[v]:E},g);{const S=js(f),_=g[c],M=x?Object.assign(Object.assign({},_),{offset:x}):_;return{[v]:E,[S]:J(E)?[E[0],Object.assign(Object.assign({},E[1]),{offset:M})]:Object.assign(Object.assign({},E),{offset:M})}}}function Qp(e,t,n,r,i){if(t$(e))return 0;const o=e==="x"||e==="y2"?-t/2:t/2;if(ge(n)||ge(i)||ge(r)){const a=ka(n),s=ka(i),u=ka(r),l=u?`${u} + `:"",c=a?`(${a} ? -1 : 1) * `:"",f=s?`(${s} + ${o})`:o;return{signal:l+c+f}}else return i=i||0,r+(n?-i-o:+i+o)}function c2e({fieldDef:e,fieldDef2:t,channel:n,model:r}){var i,o,a;const{config:s,markDef:u,encoding:l}=r,c=r.getScaleComponent(n),f=r.scaleName(n),d=c?c.get("type"):void 0,h=c.get("reverse"),p=x9({channel:n,fieldDef:e,markDef:u,config:s,scaleType:d}),g=(i=r.component.axes[n])===null||i===void 0?void 0:i[0],m=(o=g==null?void 0:g.get("translate"))!==null&&o!==void 0?o:.5,y=cn(n)&&(a=qe("binSpacing",u,s))!==null&&a!==void 0?a:0,v=Sa(n),b=js(n),x=js(v),{offset:w}=Kp({channel:n,markDef:u,encoding:l,model:r,bandPosition:0}),E=ge(p)?{signal:`(1-${p.signal})/2`}:vf(p)?(1-p.band)/2:.5;if(it(e.bin)||e.timeUnit)return{[x]:B7({fieldDef:e,scaleName:f,bandPosition:E,offset:Qp(v,y,h,m,w)}),[b]:B7({fieldDef:e,scaleName:f,bandPosition:ge(E)?{signal:`1-${E.signal}`}:1-E,offset:Qp(n,y,h,m,w)})};if(Kn(e.bin)){const S=pl(e,f,{},{offset:Qp(v,y,h,m,w)});if(oe(t))return{[x]:S,[b]:pl(t,f,{},{offset:Qp(n,y,h,m,w)})};if(cl(e.bin)&&e.bin.step)return{[x]:S,[b]:{signal:`scale("${f}", ${ae(e,{expr:"datum"})} + ${e.bin.step})`,offset:Qp(n,y,h,m,w)}}}ee(L$(v))}function B7({fieldDef:e,scaleName:t,bandPosition:n,offset:r}){return dv({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r})}const f2e=new Set(["aria","width","height"]);function fi(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?L7(e):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},d2e(e.markDef,t)),U7(e,"fill",n)),U7(e,"stroke",r)),Jt("opacity",e)),Jt("fillOpacity",e)),Jt("strokeOpacity",e)),Jt("strokeWidth",e)),Jt("strokeDash",e)),n2e(e)),P7(e)),jA(e,"href")),Zxe(e))}function U7(e,t,n){const{config:r,mark:i,markDef:o}=e;if(qe("invalid",o,r)==="hide"&&n&&!Bs(i)){const s=h2e(e,{invalid:!0,channels:nv});if(s)return{[t]:[{test:s,value:null},...ue(n)]}}return n?{[t]:n}:{}}function d2e(e,t){return Aye.reduce((n,r)=>(!f2e.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=lt(e[r])),n),{})}function h2e(e,{invalid:t=!1,channels:n}){const r=n.reduce((o,a)=>{const s=e.getScaleComponent(a);if(s){const u=s.get("type"),l=e.vgField(a,{expr:"datum"});l&&Br(u)&&(o[l]=!0)}return o},{}),i=Z(r);if(i.length>0){const o=t?"||":"&&";return i.map(a=>K_(a,t)).join(` ${o} `)}}function LA(e){const{config:t,markDef:n}=e;if(qe("invalid",n,t)){const i=p2e(e,{channels:Ro});if(i)return{defined:{signal:i}}}return{}}function p2e(e,{invalid:t=!1,channels:n}){const r=n.reduce((o,a)=>{const s=e.getScaleComponent(a);if(s){const u=s.get("type"),l=e.vgField(a,{expr:"datum"});l&&Br(u)&&(o[l]=!0)}return o},{}),i=Z(r);if(i.length>0){const o=t?"||":"&&";return i.map(a=>K_(a,t)).join(` ${o} `)}}function W7(e,t){if(t!==void 0)return{[e]:lt(t)}}const zA="voronoi",H7={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(zA)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Bs(o))return ee(Rye(o)),n;const a={name:e.getName(zA),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},P7(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,u=!1;return n.forEach((l,c)=>{var f;const d=(f=l.name)!==null&&f!==void 0?f:"";d===e.component.mark[0].name?s=c:d.indexOf(zA)>=0&&(u=!0)}),u||n.splice(s+1,0,a),n}},G7={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!vA(e.bind),parse:(e,t,n)=>tB(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],s=H7.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{var c,f;const d=ht(`${r}_${u.field}`);n.filter(p=>p.name===d).length||n.unshift(Object.assign(Object.assign({name:d},a?{init:Of(a[l])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${re(u.field)}] : null`}]:[],bind:(f=(c=o[u.field])!==null&&c!==void 0?c:o[u.channel])!==null&&f!==void 0?f:o}))}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.filter(l=>l.name===r+Ys)[0],a=r+Xp,s=i.items.map(l=>ht(`${r}_${l.field}`)),u=s.map(l=>`${l} !== null`).join(" && ");return s.length&&(o.update=`${u} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},jv="_toggle",q7={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+jv,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Ys,r=t.name+jv;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${_f(e)}}, `)+`${r} ? ${n} : null`}},g2e={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=se(t.clear)?As(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(G7.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===ht(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(a=>a.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const a=n.findIndex(s=>s.name===i.signals.data);r(a,"null")}}else{let i=n.findIndex(o=>o.name===t.name+Ys);r(i,"null"),q7.defined(t)&&(i=n.findIndex(o=>o.name===t.name+jv),r(i,"false"))}return n}},V7={defined:e=>{const t=e.resolve==="global"&&e.bind&&vA(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Vp;return t&&!n&&ee(Iye),t&&n},parse:(e,t,n)=>{var r;const i=Ce(n);if(i.select=se(i.select)?{type:i.select,toggle:t.toggle}:Object.assign(Object.assign({},i.select),{toggle:t.toggle}),tB(t,i),ce(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const u of t.events)u.filter=ue((r=u.filter)!==null&&r!==void 0?r:[]),u.filter.includes(s)||u.filter.push(s)}const o=bA(t.bind)?t.bind.legend:"click",a=se(o)?As(o,"view"):ue(o);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=bA(t.bind)&&t.bind.legend,o=a=>s=>{const u=Ce(s);return u.markname=a,u};for(const a of t.project.items){if(!a.hasLegend)continue;const s=`${ht(a.field)}_legend`,u=`${r}_${s}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(o(`${s}_symbols`)).concat(i.merge.map(o(`${s}_labels`))).concat(i.merge.map(o(`${s}_entries`)));n.unshift(Object.assign(Object.assign({name:u},t.init?{}:{value:null}),{on:[{events:c,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]}))}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+Ys),a=r+Xp,s=i.items.filter(d=>d.hasLegend).map(d=>ht(`${r}_${ht(d.field)}_legend`)),l=`${s.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map(d=>({signal:d})),update:l}):s.length>0&&(o.update=l,delete o.value,delete o.on);const c=n.find(d=>d.name===r+jv),f=bA(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push(Object.assign(Object.assign({},c.on[0]),{events:f})):c.on[0].events=f),n}};function m2e(e,t,n){var r,i,o,a;const s=(r=e.fieldDef(t))===null||r===void 0?void 0:r.field;for(const u of _n((i=e.component.selection)!==null&&i!==void 0?i:{})){const l=(o=u.project.hasField[s])!==null&&o!==void 0?o:u.project.hasChannel[t];if(l&&V7.defined(u)){const c=(a=n.get("selections"))!==null&&a!==void 0?a:[];c.push(u.name),n.set("selections",c,!1),l.hasLegend=!0}}}const Y7="_translate_anchor",X7="_translate_delta",y2e={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=qs.defined(t),o=r+Y7,{x:a,y:s}=t.project.hasChannel;let u=As(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+kf,l))),n.push({name:o,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?`, extent_x: ${i?DA(e,mt):`slice(${a.signals.visual})`}`:"")+(s!==void 0?`, extent_y: ${i?DA(e,Kt):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+X7,value:{},on:[{events:u,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),a!==void 0&&K7(e,t,a,"width",n),s!==void 0&&K7(e,t,s,"height",n),n}};function K7(e,t,n,r,i){var o,a;const s=t.name,u=s+Y7,l=s+X7,c=n.channel,f=qs.defined(t),d=i.filter(S=>S.name===n.signals[f?"data":"visual"])[0],h=e.getSizeSignalRef(r).signal,p=e.getScaleComponent(c),g=p.get("type"),m=p.get("reverse"),y=f?c===mt?m?"":"-":m?"-":"":"",v=`${u}.extent_${c}`,b=`${y}${l}.${c} / ${f?`${h}`:`span(${v})`}`,x=f?g==="log"?"panLog":g==="symlog"?"panSymlog":g==="pow"?"panPow":"panLinear":"panLinear",w=f?g==="pow"?`, ${(o=p.get("exponent"))!==null&&o!==void 0?o:1}`:g==="symlog"?`, ${(a=p.get("constant"))!==null&&a!==void 0?a:1}`:"":"",E=`${x}(${v}, ${b}${w})`;d.on.push({events:{signal:l},update:f?E:`clampRange(${E}, 0, ${h})`})}const Q7="_zoom_anchor",J7="_zoom_delta",v2e={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=qs.defined(t),o=r+J7,{x:a,y:s}=t.project.hasChannel,u=re(e.scaleName(mt)),l=re(e.scaleName(Kt));let c=As(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+kf,f))),n.push({name:r+Q7,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>!!f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&Z7(e,t,a,"width",n),s!==void 0&&Z7(e,t,s,"height",n),n}};function Z7(e,t,n,r,i){var o,a;const s=t.name,u=n.channel,l=qs.defined(t),c=i.filter(x=>x.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d.get("type"),p=l?DA(e,u):c.name,g=s+J7,m=`${s}${Q7}.${u}`,y=l?h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear":"zoomLinear",v=l?h==="pow"?`, ${(o=d.get("exponent"))!==null&&o!==void 0?o:1}`:h==="symlog"?`, ${(a=d.get("constant"))!==null&&a!==void 0?a:1}`:"":"",b=`${y}(${p}, ${m}, ${g}${v})`;c.on.push({events:{signal:g},update:l?b:`clampRange(${b}, 0, ${f})`})}const vl="_store",Ys="_tuple",b2e="_modify",eB="vlSelectionResolve",Iv=[Jxe,Kxe,Yxe,q7,G7,qs,V7,g2e,y2e,v2e,H7];function x2e(e){let t=e.parent;for(;t&&!Vi(t);)t=t.parent;return t}function _f(e,{escape:t}={escape:!0}){let n=t?re(e.name):e.name;const r=x2e(e);if(r){const{facet:i}=r;for(const o of li)i[o]&&(n+=` + '__facet_${o}_' + (facet[${re(r.vgField(o))}])`)}return n}function $A(e){var t;return _n((t=e.component.selection)!==null&&t!==void 0?t:{}).reduce((n,r)=>n||r.project.items.some(i=>i.field===Vp),!1)}function tB(e,t){(se(t.select)||!t.select.on)&&delete e.events,(se(t.select)||!t.select.clear)&&delete e.clear,(se(t.select)||!t.select.toggle)&&delete e.toggle}function BA(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...BA(e.object)),t.push(...BA(e.property))),t)}function nB(e){return e.object.type==="MemberExpression"?nB(e.object):e.object.name==="datum"}function rB(e){const t=dC(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&nB(r)&&n.add(BA(r).slice(1).join("."))}),n}class Af extends et{constructor(t,n,r){super(t);this.model=n,this.filter=r,this.expr=Lv(this.model,this.filter,this),this._dependentFields=rB(this.expr)}clone(){return new Af(null,this.model,Ce(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function w2e(e,t){var n;const r={},i=e.config.selection;if(!t||!t.length)return r;for(const o of t){const a=ht(o.name),s=o.select,u=se(s)?s:s.type,l=ce(s)?Ce(s):{type:u},c=i[u];for(const d in c)d==="fields"||d==="encodings"||(d==="mark"&&(l[d]=Object.assign(Object.assign({},c[d]),l[d])),(l[d]===void 0||l[d]===!0)&&(l[d]=(n=c[d])!==null&&n!==void 0?n:l[d]));const f=r[a]=Object.assign(Object.assign({},l),{name:a,type:u,init:o.value,bind:o.bind,events:se(l.on)?As(l.on,"scope"):ue(Ce(l.on))});for(const d of Iv)d.defined(f)&&d.parse&&d.parse(e,f,o)}return r}function iB(e,t,n,r="datum"){const i=se(t)?t:t.param,o=ht(i),a=re(o+vl);let s;try{s=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(s.project.timeUnit){const c=n!=null?n:e.component.data.raw,f=s.project.timeUnit.clone();c.parent?f.insertAsParentOf(c):c.parent=f}const u=`vlSelectionTest(${a}, ${r}${s.resolve==="global"?")":`, ${re(s.resolve)})`}`,l=`length(data(${a}))`;return t.empty===!1?`${l} && ${u}`:`!${l} || ${u}`}function oB(e,t,n){const r=ht(t),i=n.encoding;let o=n.field,a;try{a=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=a.project.items[0].field,a.project.items.length>1&&ee(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${re(o)}.`);else if(i&&!o){const s=a.project.items.filter(u=>u.channel===i);!s.length||s.length>1?(o=a.project.items[0].field,ee((s.length?"Multiple ":"No ")+`matching ${re(i)} encoding found for selection ${re(n.param)}. Using "field": ${re(o)}.`)):o=s[0].field}return`${a.name}[${re(si(o))}]`}function S2e(e,t){var n;for(const[r,i]of Ns((n=e.component.selection)!==null&&n!==void 0?n:{})){const o=e.getName(`lookup_${r}`);e.component.data.outputNodes[o]=i.materialized=new Zn(new Af(t,e,{param:r}),o,ot.Lookup,e.component.data.outputNodeRefCounts)}}function Lv(e,t,n){return Fp(t,r=>se(r)?r:J1e(r)?iB(e,r,n):q$(r))}var zv=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function E2e(e,t){if(!!e)return J(e)&&!zs(e)?e.map(n=>sA(n,t)).join(", "):e}function UA(e,t,n,r){var i,o,a,s,u;(i=e.encode)!==null&&i!==void 0||(e.encode={}),(o=(s=e.encode)[t])!==null&&o!==void 0||(s[t]={}),(a=(u=e.encode[t]).update)!==null&&a!==void 0||(u.update={}),e.encode[t].update[n]=r}function Jp(e,t,n,r={header:!1}){var i,o;const a=e.combine(),{disable:s,orient:u,scale:l,labelExpr:c,title:f,zindex:d}=a,h=zv(a,["disable","orient","scale","labelExpr","title","zindex"]);if(!s){for(const p in h){const g=tbe[p],m=h[p];if(g&&g!==t&&g!=="both")delete h[p];else if(qp(m)){const{condition:y}=m,v=zv(m,["condition"]),b=ue(y),x=T9[p];if(x){const{vgProp:w,part:E}=x,S=[...b.map(_=>{const{test:M}=_,D=zv(_,["test"]);return Object.assign({test:Lv(null,M)},D)}),v];UA(h,E,w,S),delete h[p]}else if(x===null){const w={signal:b.map(E=>{const{test:S}=E,_=zv(E,["test"]);return`${Lv(null,S)} ? ${y$(_)} : `}).join("")+y$(v)};h[p]=w}}else if(ge(m)){const y=T9[p];if(y){const{vgProp:v,part:b}=y;UA(h,b,v,m),delete h[p]}}je(["labelAlign","labelBaseline"],p)&&h[p]===null&&delete h[p]}if(t==="grid"){if(!h.grid)return;if(h.encode){const{grid:p}=h.encode;h.encode=Object.assign({},p?{grid:p}:{}),Ze(h.encode)&&delete h.encode}return Object.assign(Object.assign({scale:l,orient:u},h),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Ft(d,0)})}else{if(!r.header&&e.mainExtracted)return;if(c!==void 0){let g=c;((o=(i=h.encode)===null||i===void 0?void 0:i.labels)===null||o===void 0?void 0:o.update)&&ge(h.encode.labels.update.text)&&(g=al(c,"datum.label",h.encode.labels.update.text.signal)),UA(h,"labels","text",{signal:g})}if(h.labelAlign===null&&delete h.labelAlign,h.encode){for(const g of N9)e.hasAxisPart(g)||delete h.encode[g];Ze(h.encode)&&delete h.encode}const p=E2e(f,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:l,orient:u,grid:!1},p?{title:p}:{}),h),n.aria===!1?{aria:!1}:{}),{zindex:Ft(d,0)})}}}function aB(e){const{axes:t}=e.component,n=[];for(const r of Ro)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",a=e.getSizeSignalRef(o).signal;o!==a&&n.push({name:o,update:a})}}return n}function O2e(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>Jp(i,"grid",t)),...r.map(i=>Jp(i,"grid",t)),...n.map(i=>Jp(i,"main",t)),...r.map(i=>Jp(i,"main",t))].filter(i=>i)}function sB(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},s=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Z(a),...Z(s)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${o}" ? ${ka(a[c])} : ${ka(s[c])}`};return l}return t[i]})])}function k2e(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:Q$(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",a=ge(n)?"axisOrient":`axis${Dp(n)}`,s=[...i,...i.map(l=>o+l.substr(4))],u=["axis",a,o];return{vlOnlyAxisConfig:sB(s,r,e,n),vgAxisConfig:sB(u,r,e,n),axisConfigStyle:C2e([...u,...s],r)}}function C2e(e,t){var n;const r=[{}];for(const i of e){let o=(n=t[i])===null||n===void 0?void 0:n.style;if(o){o=ue(o);for(const a of o)r.push(t.style[a])}}return Object.assign.apply(null,r)}function WA(e,t,n,r={}){var i;const o=b$(e,n,t);if(o!==void 0)return{configFrom:"style",configValue:o};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((i=r[a])===null||i===void 0?void 0:i[e])!==void 0)return{configFrom:a,configValue:r[a][e]};return{}}const uB={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const{format:r,formatType:i}=n;return c9(e,e.type,r,i,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return f9(r,t,n)},grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>{var r;return(r=t.grid)!==null&&r!==void 0?r:_2e(n,e)},gridScale:({model:e,channel:t})=>A2e(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||cB(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||lB(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>{var r;return(r=e.labelFlush)!==null&&r!==void 0?r:N2e(t.type,n)},labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{var r;return(r=e.labelOverlap)!==null&&r!==void 0?r:M2e(t.type,n,oe(t)&&!!t.timeUnit,oe(t)?t.sort:void 0)},orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{var o;const a=e==="x"?"width":e==="y"?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return(o=n.tickCount)!==null&&o!==void 0?o:D2e({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=fB(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",a=t.fieldDef(o);return w$(i?[v9(i)]:[],oe(a)?[v9(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>R2e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>{var r;return(r=e.zindex)!==null&&r!==void 0?r:P2e(n,t)}};function _2e(e,t){return!Qt(e)&&oe(t)&&!it(t==null?void 0:t.bin)&&!Kn(t==null?void 0:t.bin)}function A2e(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function T2e(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return ge(o)?o:Rp(o);{const{configValue:a}=WA("labelAngle",r,t==null?void 0:t.style,i);return a!==void 0?Rp(a):n===mt&&je([W_,U_],e.type)&&!(oe(e)&&e.timeUnit)?270:void 0}}function HA(e){return`(((${e.signal} % 360) + 360) % 360)`}function lB(e,t,n,r){if(e!==void 0)if(n==="x"){if(ge(e)){const i=HA(e),o=ge(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(ge(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(ge(e)){const i=HA(e),o=ge(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(ge(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function cB(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(ge(e)){const a=HA(e),s=ge(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${a} + 90)`:a} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${s} ? "left" : "right"`}}if((e+i)%180==0)return r?null:"center";if(ge(t)){const a=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${a} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function N2e(e,t){if(t==="x"&&je(["quantitative","temporal"],e))return!0}function M2e(e,t,n,r){if(n&&!ce(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function F2e(e){return e==="x"?"bottom":"left"}function D2e({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Qt(t)&&t!=="log"){if(oe(e)){if(it(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&je(["month","hours","day","quarter"],(i=Qn(e.timeUnit))===null||i===void 0?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function fB(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;if(o&&a)return S$(o,a);if(o)return o;if(a)return a;if(o!==void 0)return o;if(a!==void 0)return a}function R2e(e,t){const n=e.values;if(J(n))return A9(t,n);if(ge(n))return n}function P2e(e,t){return e==="rect"&&vv(t)?1:0}class Tf extends et{constructor(t,n){super(t);this.transform=n,this._dependentFields=rB(this.transform.calculate)}clone(){return new Tf(null,Ce(this.transform))}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(!!ml(r)&&y9(r.sort)){const{field:o,timeUnit:a}=r,s=r.sort,u=s.map((l,c)=>`${q$({field:o,timeUnit:a,equal:l})} ? ${c} : `).join("")+s.length;t=new Tf(t,{calculate:u,as:Nf(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Pe(this.transform)}`}}function Nf(e,t,n){return ae(e,Object.assign({prefix:t,suffix:"sort_index"},n!=null?n:{}))}function $v(e,t){return je(["top","bottom"],t)?"column":je(["left","right"],t)||e==="row"?"row":"column"}function Mf(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Ft((t||{})[e],i[e],n.header[e])}function Bv(e,t,n,r){const i={};for(const o of e){const a=Mf(o,t||{},n,r);a!==void 0&&(i[o]=a)}return i}const GA=["row","column"],qA=["header","footer"];function j2e(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=Bv(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=$v(t,s),l=Rp(a);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},t==="row"?{orient:"left"}:{}),{style:"guide-title"}),hB(l,u)),dB(u,l,o)),pB(r,i,t,Obe,K9))}}function dB(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=cB(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function hB(e,t){const n=lB(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function I2e(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of qA)if(n[i])for(const o of n[i]){const a=z2e(e,t,i,n,o);a!=null&&r.push(a)}return r}function L2e(e,t){var n;const{sort:r}=e;return Io(r)?{field:ae(r,{expr:"datum"}),order:(n=r.order)!==null&&n!==void 0?n:"ascending"}:J(r)?{field:Nf(e,t,{expr:"datum"}),order:"ascending"}:{field:ae(e,{expr:"datum"}),order:r!=null?r:"ascending"}}function VA(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:u}=Bv(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=J_({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=$v(t,s);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:u?al(al(u,"datum.label",l),"datum.value",ae(e,{expr:"parent"})):l}},t==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),hB(o,c)),dB(c,o,a)),pB(n,e,t,kbe,Q9))}function z2e(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){const{labelOrient:f}=Bv(["labelOrient"],a.header,s,t);(t==="row"&&!je(["top","bottom"],f)||t==="column"&&!je(["left","right"],f))&&(o=VA(a,t,s))}const u=Vi(e)&&!Wp(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(o||c){const f=t==="row"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:L2e(a,t)}:{}),c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{}),c?{axes:l}:{})}}return null}const $2e={column:{start:0,end:1},row:{start:1,end:0}};function B2e(e,t){return $2e[t][e]}function U2e(e,t){const n={};for(const r of li){const i=e[r];if(i==null?void 0:i.facetFieldDef){const{titleAnchor:o,titleOrient:a}=Bv(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),s=$v(r,a),u=B2e(o,s);u!==void 0&&(n[s]=u)}}return Ze(n)?void 0:n}function pB(e,t,n,r,i){const o={};for(const a of r){if(!i[a])continue;const s=Mf(a,t==null?void 0:t.header,e,n);s!==void 0&&(o[i[a]]=s)}return o}function YA(e){return[...Uv(e,"width"),...Uv(e,"height"),...Uv(e,"childWidth"),...Uv(e,"childHeight")]}function Uv(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const a=o.get("type"),s=o.get("range");if(Qt(a)&&$s(s)){const u=e.scaleName(n);return Vi(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[gB(u,s)]:[gB(u,s),{name:i,update:mB(u,o,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),a=o?"containerSize()[0]":"containerSize()[1]",s=EA(e.config.view,o?"width":"height"),u=`isFinite(${a}) ? ${a} : ${s}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function gB(e,t){const n=`${e}_step`;return ge(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function mB(e,t,n){const r=t.get("type"),i=t.get("padding"),o=Ft(t.get("paddingOuter"),i);let a=t.get("paddingInner");return a=r==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${ka(a)}, ${ka(o)}) * ${e}_step`}function yB(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function vB(e,t){return Z(e).reduce((n,r)=>{const i=e[r];return Object.assign(Object.assign({},n),Cf(t,i,r,o=>lt(o.value)))},{})}function bB(e,t){if(Vi(t))return e==="theta"?"independent":"shared";if(Rf(t))return"shared";if(c3(t))return cn(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function XA(e,t){const n=e.scale[t],r=cn(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&ee(w1e(t)),"independent"):e[r][t]||"shared"}const W2e=Object.assign(Object.assign({},Abe),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),xB=Z(W2e);class H2e extends Aa{}const wB={symbols:G2e,gradient:q2e,labels:V2e,entries:Y2e};function G2e(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){var a,s,u,l,c,f,d,h;if(o!=="symbol")return;const{markDef:p,encoding:g,config:m,mark:y}=n,v=p.filled&&y!=="trail";let b=Object.assign(Object.assign({},Mye({},n,Ove)),L7(n,{filled:v}));const x=(a=i.get("symbolOpacity"))!==null&&a!==void 0?a:m.legend.symbolOpacity,w=(s=i.get("symbolFillColor"))!==null&&s!==void 0?s:m.legend.symbolFillColor,E=(u=i.get("symbolStrokeColor"))!==null&&u!==void 0?u:m.legend.symbolStrokeColor,S=x===void 0?(l=SB(g.opacity))!==null&&l!==void 0?l:p.opacity:void 0;if(b.fill){if(r==="fill"||v&&r===gr)delete b.fill;else if(b.fill.field)w?delete b.fill:(b.fill=lt((c=m.legend.symbolBaseFillColor)!==null&&c!==void 0?c:"black"),b.fillOpacity=lt(S!=null?S:1));else if(J(b.fill)){const _=(h=(d=KA((f=g.fill)!==null&&f!==void 0?f:g.color))!==null&&d!==void 0?d:p.fill)!==null&&h!==void 0?h:v&&p.color;_&&(b.fill=lt(_))}}if(b.stroke){if(r==="stroke"||!v&&r===gr)delete b.stroke;else if(b.stroke.field||E)delete b.stroke;else if(J(b.stroke)){const _=Ft(KA(g.stroke||g.color),p.stroke,v?p.color:void 0);_&&(b.stroke={value:_})}}if(r!==wa){const _=oe(t)&&OB(n,i,t);_?b.opacity=[Object.assign({test:_},lt(S!=null?S:1)),lt(m.legend.unselectedOpacity)]:S&&(b.opacity=lt(S))}return b=Object.assign(Object.assign({},b),e),Ze(b)?void 0:b}function q2e(e,{model:t,legendType:n,legendCmpt:r}){var i;if(n!=="gradient")return;const{config:o,markDef:a,encoding:s}=t;let u={};const c=((i=r.get("gradientOpacity"))!==null&&i!==void 0?i:o.legend.gradientOpacity)===void 0?SB(s.opacity)||a.opacity:void 0;return c&&(u.opacity=lt(c)),u=Object.assign(Object.assign({},u),e),Ze(u)?void 0:u}function V2e(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},a=n.config,s=oe(t)?OB(n,i,t):void 0,u=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=o,f=gl(c)?Z_({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:a}):void 0,d=Object.assign(Object.assign(Object.assign({},u?{opacity:u}:{}),f?{text:f}:{}),e);return Ze(d)?void 0:d}function Y2e(e,{legendCmpt:t}){const n=t.get("selections");return(n==null?void 0:n.length)?Object.assign(Object.assign({},e),{fill:{value:"transparent"}}):e}function SB(e){return EB(e,(t,n)=>Math.max(t,n.value))}function KA(e){return EB(e,(t,n)=>Ft(t,n.value))}function EB(e,t){if(Wve(e))return ue(e.condition).reduce(t,e.value);if(Hi(e))return e.value}function OB(e,t,n){const r=t.get("selections");if(!(r==null?void 0:r.length))return;const i=re(n.field);return r.map(o=>`(!length(data(${re(ht(o)+vl)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const kB={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return c9(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return f9(r,t,n)},gradientLength:e=>{var t,n;const{legend:r,legendConfig:i}=e;return(n=(t=r.gradientLength)!==null&&t!==void 0?t:i.gradientLength)!==null&&n!==void 0?n:twe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>{var r,i;return(i=(r=e.labelOverlap)!==null&&r!==void 0?r:t.labelOverlap)!==null&&i!==void 0?i:nwe(n)},symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>{var i;return(i=e.symbolType)!==null&&i!==void 0?i:K2e(t.type,n,r.shape,t.shape)},title:({fieldOrDatumDef:e,config:t})=>bf(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(df(n)&&Wi(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>X2e(t,e)};function X2e(e,t){const n=e.values;if(J(n))return A9(t,n);if(ge(n))return n}function K2e(e,t,n,r){var i;if(t!=="shape"){const o=(i=KA(n))!==null&&i!==void 0?i:r;if(o)return o}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Q2e(e){const{legend:t}=e;return Ft(t.type,J2e(e))}function J2e({channel:e,timeUnit:t,scaleType:n}){if(df(e)){if(je(["quarter","month","day"],t))return"symbol";if(Wi(n))return"gradient"}return"symbol"}function Z2e({legendConfig:e,legendType:t,orient:n,legend:r}){var i,o;return(o=(i=r.direction)!==null&&i!==void 0?i:e[t?"gradientDirection":"symbolDirection"])!==null&&o!==void 0?o:ewe(n,t)}function ewe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function twe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:u}=e;if(Wi(i))return n==="horizontal"?r==="top"||r==="bottom"?CB(t,"width",a,o):a:CB(t,"height",u,s)}function CB(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function nwe(e){if(je(["quantile","threshold","log","symlog"],e))return"greedy"}function _B(e){const t=Dt(e)?rwe(e):swe(e);return e.component.legends=t,t}function rwe(e){const{encoding:t}=e,n={};for(const r of[gr,...Z9]){const i=Bt(t[r]);!i||!e.getScaleComponent(r)||r===mr&&oe(i)&&i.type===mf||(n[r]=awe(e,r))}return n}function iwe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function owe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n==null?void 0:n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function awe(e,t){var n,r,i;let o=e.legend(t);const{markDef:a,encoding:s,config:u}=e,l=u.legend,c=new H2e({},iwe(e,t));m2e(e,t,c);const f=o!==void 0?!o:l.disable;if(c.set("disable",f,o!==void 0),f)return c;o=o||{};const d=e.getScaleComponent(t).get("type"),h=Bt(s[t]),p=oe(h)?(n=Qn(h.timeUnit))===null||n===void 0?void 0:n.unit:void 0,g=o.orient||u.legend.orient||"right",m=Q2e({legend:o,channel:t,timeUnit:p,scaleType:d}),y=Z2e({legend:o,legendType:m,orient:g,legendConfig:l}),v={legend:o,channel:t,model:e,markDef:a,encoding:s,fieldOrDatumDef:h,legendConfig:l,config:u,scaleType:d,orient:g,legendType:m,direction:y};for(const S of xB){if(m==="gradient"&&S.startsWith("symbol")||m==="symbol"&&S.startsWith("gradient"))continue;const _=S in kB?kB[S](v):o[S];if(_!==void 0){const M=owe(_,S,o,e.fieldDef(t));(M||u.legend[S]===void 0)&&c.set(S,_,M)}}const b=(r=o==null?void 0:o.encoding)!==null&&r!==void 0?r:{},x=c.get("selections"),w={},E={fieldOrDatumDef:h,model:e,channel:t,legendCmpt:c,legendType:m};for(const S of["labels","legend","title","symbols","gradient","entries"]){const _=vB((i=b[S])!==null&&i!==void 0?i:{},e),M=S in wB?wB[S](_,E):_;M!==void 0&&!Ze(M)&&(w[S]=Object.assign(Object.assign(Object.assign({},(x==null?void 0:x.length)&&oe(h)?{name:`${ht(h.field)}_legend_${S}`}:{}),(x==null?void 0:x.length)?{interactive:!!x}:{}),{update:M}))}return Ze(w)||c.set("encode",w,!!(o==null?void 0:o.encoding)),c}function swe(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){_B(r);for(const i of Z(r.component.legends))n.legend[i]=XA(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=AB(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Z(t))for(const i of e.children)!i.component.legends[r]||n.legend[r]==="shared"&&delete i.component.legends[r];return t}function AB(e,t){var n,r,i,o;if(!e)return t.clone();const a=e.getWithExplicit("orient"),s=t.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;let u=!1;for(const l of xB){const c=Hs(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return uwe(f,d);case"title":return E$(f,d);case"type":return u=!0,Ur("symbol")}return Fv(f,d,l,"legend")});e.setWithExplicit(l,c)}return u&&(((r=(n=e.implicit)===null||n===void 0?void 0:n.encode)===null||r===void 0?void 0:r.gradient)&&Y1(e.implicit,["encode","gradient"]),((o=(i=e.explicit)===null||i===void 0?void 0:i.encode)===null||o===void 0?void 0:o.gradient)&&Y1(e.explicit,["encode","gradient"])),e}function uwe(e,t){return t.value==="circle"?t:e}var lwe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function cwe(e,t,n,r){var i,o,a,s,u;(i=e.encode)!==null&&i!==void 0||(e.encode={}),(o=(s=e.encode)[t])!==null&&o!==void 0||(s[t]={}),(a=(u=e.encode[t]).update)!==null&&a!==void 0||(u.update={}),e.encode[t].update[n]=r}function TB(e){const t=e.component.legends,n={};for(const i of Z(t)){const o=e.getScaleComponent(i),a=rt(o.get("domains"));if(n[a])for(const s of n[a])AB(s,t[i])||n[a].push(t[i]);else n[a]=[t[i].clone()]}return _n(n).flat().map(i=>fwe(i,e.config)).filter(i=>i!==void 0)}function fwe(e,t){var n,r,i;const o=e.combine(),{disable:a,labelExpr:s,selections:u}=o,l=lwe(o,["disable","labelExpr","selections"]);if(!a){if(t.aria===!1&&l.aria==null&&(l.aria=!1),(n=l.encode)===null||n===void 0?void 0:n.symbols){const c=l.encode.symbols.update;c.fill&&c.fill.value!=="transparent"&&!c.stroke&&!l.stroke&&(c.stroke={value:"transparent"});for(const f of Z9)l[f]&&delete c[f]}if(l.title||delete l.title,s!==void 0){let c=s;((i=(r=l.encode)===null||r===void 0?void 0:r.labels)===null||i===void 0?void 0:i.update)&&ge(l.encode.labels.update.text)&&(c=al(s,"datum.label",l.encode.labels.update.text.signal)),cwe(l,"labels","text",{signal:c})}return l}}function dwe(e){return Rf(e)||c3(e)?hwe(e):NB(e)}function hwe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),NB(e))}function NB(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},o=t.data.reduce((a,s)=>{const u=ge(s)?s.signal:`data('${e.lookupDataSource(s)}')`;return je(a,u)||a.push(u),a},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}else return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const pwe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class MB extends Aa{constructor(t,n,r,i){super(Object.assign({},n),{name:t});this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function FB(e){e.component.projection=Dt(e)?gwe(e):vwe(e)}function gwe(e){var t;if(e.hasProjection){const n=vr(e.specifiedProjection),r=!(n&&(n.scale!=null||n.translate!=null)),i=r?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,o=r?mwe(e):void 0,a=new MB(e.projectionName(!0),Object.assign(Object.assign({},(t=vr(e.config.projection))!==null&&t!==void 0?t:{}),n!=null?n:{}),i,o);return a.get("type")||a.set("type","equalEarth",!1),a}}function mwe(e){const t=[],{encoding:n}=e;for(const r of[[Mo,No],[ui,Ui]])(Bt(n[r[0]])||Bt(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(mr)&&e.typedFieldDef(mr).type===mf&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(ot.Main)),t}function ywe(e,t){const n=c_(pwe,i=>!!(!pe(e.explicit,i)&&!pe(t.explicit,i)||pe(e.explicit,i)&&pe(t.explicit,i)&&Co(e.get(i),t.get(i))));if(Co(e.size,t.size)){if(n)return e;if(Co(e.explicit,{}))return t;if(Co(t.explicit,{}))return e}return null}function vwe(e){if(e.children.length===0)return;let t;for(const r of e.children)FB(r);const n=c_(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=ywe(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new MB(r,t.specifiedProjection,t.size,Ce(t.data));for(const o of e.children){const a=o.component.projection;a&&(a.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(a.get("name"),r),a.merged=!0)}return i}}var bwe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function xwe(e,t,n,r){var i,o;if(Gp(t,n)){const a=Dt(e)?(o=(i=e.axis(n))!==null&&i!==void 0?i:e.legend(n))!==null&&o!==void 0?o:{}:{},s=ae(t,{expr:"datum"}),u=ae(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ae(t,{binSuffix:"range",forAs:!0}),formula:hv(s,u,a.format,a.formatType,r)}}return{}}function DB(e,t){return`${d$(e)}_${t}`}function wwe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function QA(e,t,n){var r;const i=(r=wv(n,void 0))!==null&&r!==void 0?r:{},o=DB(i,t);return e.getName(`${o}_bins`)}function Swe(e){return"as"in e}function RB(e,t,n){let r,i;Swe(e)?r=se(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[ae(e,{forAs:!0}),ae(e,{binSuffix:"end",forAs:!0})];const o=Object.assign({},wv(t,void 0)),a=DB(o,e.field),{signal:s,extentSignal:u}=wwe(n,a);if(rv(o.extent)){const c=o.extent;i=oB(n,c.param,c),delete o.extent}const l=Object.assign(Object.assign(Object.assign({bin:o,field:e.field,as:[r]},s?{signal:s}:{}),u?{extentSignal:u}:{}),i?{span:i}:{});return{key:a,binComponent:l}}class Ho extends et{constructor(t,n){super(t);this.bins=n}clone(){return new Ho(null,Ce(this.bins))}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,a)=>{if(ci(o)&&it(o.bin)){const{key:s,binComponent:u}=RB(o,o.bin,n);i[s]=Object.assign(Object.assign(Object.assign({},u),i[s]),xwe(n,o,a,n.config))}return i},{});return Ze(r)?null:new Ho(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=RB(n,n.bin,r);return new Ho(t,{[i]:o})}merge(t,n){for(const r of Z(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=_o([...this.bins[r].as,...t.bins[r].as],Pe)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(_n(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(_n(this.bins).map(t=>t.field))}hash(){return`Bin ${Pe(this.bins)}`}assemble(){return _n(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,o=t.bin,{extent:a}=o,s=bwe(o,["extent"]),u=Object.assign(Object.assign(Object.assign({type:"bin",field:si(t.field),as:r,signal:t.signal},rv(a)?{extent:null}:{extent:a}),t.span?{span:{signal:`span(${t.span})`}}:{}),s);!a&&t.extentSignal&&(n.push({type:"extent",field:si(t.field),signal:t.extentSignal}),u.extent={signal:t.extentSignal}),n.push(u);for(const l of i)for(let c=0;c<2;c++)n.push({type:"formula",expr:ae({field:r[c]},{expr:"datum"}),as:l[c]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Ewe(e,t,n,r){var i;const o=Dt(r)?r.encoding[Sa(t)]:void 0;if(ci(n)&&Dt(r)&&w9(n,o,r.markDef,r.config))e.add(ae(n,{})),e.add(ae(n,{suffix:"end"})),n.bin&&Gp(n,t)&&e.add(ae(n,{binSuffix:"range"}));else if(tye(t)){const a=eye(t);e.add(r.getName(a))}else e.add(ae(n));return ml(n)&&dve((i=n.scale)===null||i===void 0?void 0:i.range)&&e.add(n.scale.range.field),e}function Owe(e,t){var n;for(const r of Z(t)){const i=t[r];for(const o of Z(i))r in e?e[r][o]=new Set([...(n=e[r][o])!==null&&n!==void 0?n:[],...i[o]]):e[r]={[o]:i[o]}}}class Gi extends et{constructor(t,n,r){super(t);this.dimensions=n,this.measures=r}clone(){return new Gi(null,new Set(this.dimensions),Ce(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(a=>{a.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((a,s)=>{var u,l,c,f;const{aggregate:d,field:h}=a;if(d)if(d==="count")(u=i["*"])!==null&&u!==void 0||(i["*"]={}),i["*"].count=new Set([ae(a,{forAs:!0})]);else{if(Ea(d)||Ls(d)){const p=Ea(d)?"argmin":"argmax",g=d[p];(l=i[g])!==null&&l!==void 0||(i[g]={}),i[g][p]=new Set([ae({op:p,field:g},{forAs:!0})])}else(c=i[h])!==null&&c!==void 0||(i[h]={}),i[h][d]=new Set([ae(a,{forAs:!0})]);Is(s)&&n.scaleDomain(s)==="unaggregated"&&((f=i[h])!==null&&f!==void 0||(i[h]={}),i[h].min=new Set([ae({field:h,aggregate:"min"},{forAs:!0})]),i[h].max=new Set([ae({field:h,aggregate:"max"},{forAs:!0})]))}else Ewe(o,s,a,n)}),o.size+Z(i).length===0)?null:new Gi(t,o,i)}static makeFromTransform(t,n){var r,i,o;const a=new Set,s={};for(const u of n.aggregate){const{op:l,field:c,as:f}=u;l&&(l==="count"?((r=s["*"])!==null&&r!==void 0||(s["*"]={}),s["*"].count=new Set([f||ae(u,{forAs:!0})])):((i=s[c])!==null&&i!==void 0||(s[c]={}),s[c][l]=new Set([f||ae(u,{forAs:!0})])))}for(const u of(o=n.groupby)!==null&&o!==void 0?o:[])a.add(u);return a.size+Z(s).length===0?null:new Gi(t,a,s)}merge(t){return Yz(this.dimensions,t.dimensions)?(Owe(this.measures,t.measures),!0):(I1e("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Z(this.measures)])}producedFields(){const t=new Set;for(const n of Z(this.measures))for(const r of Z(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Pe({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of Z(this.measures))for(const a of Z(this.measures[o]))for(const s of this.measures[o][a])r.push(s),t.push(a),n.push(o==="*"?null:si(o));return{type:"aggregate",groupby:[...this.dimensions].map(si),ops:t,fields:n,as:r}}}class Ff extends et{constructor(t,n,r,i){super(t);this.model=n,this.name=r,this.data=i;for(const o of li){const a=n.facet[o];if(a){const{bin:s,sort:u}=a;this[o]=Object.assign({name:n.getName(`${o}_domain`),fields:[ae(a),...it(s)?[ae(a,{binSuffix:"end"})]:[]]},Io(u)?{sortField:u}:J(u)?{sortIndexField:Nf(a,o)}:{})}}this.childModel=n.child}hash(){let t="Facet";for(const n of li)this[n]&&(t+=` ${n.charAt(0)}:${Pe(this[n])}`);return t}get fields(){var t;const n=[];for(const r of li)((t=this[r])===null||t===void 0?void 0:t.fields)&&n.push(...this[r].fields);return n}dependentFields(){const t=new Set(this.fields);for(const n of li)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Ro){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(Qt(i)&&$s(o)){const a=Hv(this.childModel,n),s=s3(a);s?t[n]=s:ee(__(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],a=[],s=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),a.push("max")):(o.push(r[i]),a.push("distinct")),s.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=pv,field:f}=u;o.push(f),a.push(c),s.push(ae(u,{forAs:!0}))}else l&&(o.push(l),a.push("max"),s.push(l));return{name:this[t].name,source:n!=null?n:this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},o.length?{fields:o,ops:a,as:s}:{})]}}assembleFacetHeaderData(t){var n,r;const{columns:i}=this.model.layout,{layoutHeaders:o}=this.model.component,a=[],s={};for(const c of GA){for(const f of qA){const d=(n=o[c]&&o[c][f])!==null&&n!==void 0?n:[];for(const h of d)if(((r=h.axes)===null||r===void 0?void 0:r.length)>0){s[c]=!0;break}}if(s[c]){const f=`length(data("${this.facet.name}"))`,d=c==="row"?i?{signal:`ceil(${f} / ${i})`}:1:i?{signal:`min(${f}, ${i})`}:{signal:f};a.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:u,column:l}=s;return(u||l)&&a.unshift(this.assembleRowColumnHeaderData("facet",null,t)),a}assemble(){var t,n;const r=[];let i=null;const o=this.getChildIndependentFieldsWithStep(),{column:a,row:s,facet:u}=this;if(a&&s&&(o.x||o.y)){i=`cross_${this.column.name}_${this.row.name}`;const l=[].concat((t=o.x)!==null&&t!==void 0?t:[],(n=o.y)!==null&&n!==void 0?n:[]),c=l.map(()=>"distinct");r.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:l,ops:c}]})}for(const l of[ya,ma])this[l]&&r.push(this.assembleRowColumnHeaderData(l,i,o));if(u){const l=this.assembleFacetHeaderData(o);l&&r.push(...l)}return r}}function PB(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function kwe(e,t){const n=p_(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=PB(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=PB(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return ee(Hye(t)),null}function Cwe(e){const t={};return V1(e.filter,n=>{var r;if(G$(n)){let i=null;R_(n)?i=$r(n.equal):j_(n)?i=$r(n.lte):P_(n)?i=$r(n.lt):I_(n)?i=$r(n.gt):L_(n)?i=$r(n.gte):z_(n)?i=n.range[0]:$_(n)&&(i=((r=n.oneOf)!==null&&r!==void 0?r:n.in)[0]),i&&(dl(i)?t[n.field]="date":Qe(i)?t[n.field]="number":se(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function _we(e){const t={};function n(r){wf(r)?t[r.field]="date":r.type==="quantitative"&&wye(r.aggregate)?t[r.field]="number":cf(r.field)>1?r.field in t||(t[r.field]="flatten"):ml(r)&&Io(r.sort)&&cf(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Dt(e)||Vi(e))&&e.forEachFieldDef((r,i)=>{if(ci(r))n(r);else{const o=ll(i),a=e.fieldDef(o);n(Object.assign(Object.assign({},r),{type:a.type}))}}),Dt(e)){const{mark:r,markDef:i,encoding:o}=e;if(Bs(r)&&!e.encoding.order){const a=i.orient==="horizontal"?"y":"x",s=o[a];oe(s)&&s.type==="quantitative"&&!(s.field in t)&&(t[s.field]="number")}}return t}function Awe(e){const t={};if(Dt(e)&&e.component.selection)for(const n of Z(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&cf(i.field)>1&&(t[i.field]="flatten")}return t}class Tn extends et{constructor(t,n){super(t);this._parse=n}clone(){return new Tn(null,Ce(this._parse))}hash(){return`Parse ${Pe(this._parse)}`}static makeExplicit(t,n,r){var i;let o={};const a=n.data;return!Gs(a)&&((i=a==null?void 0:a.format)===null||i===void 0?void 0:i.parse)&&(o=a.format.parse),this.makeWithAncestors(t,o,{},r)}static makeWithAncestors(t,n,r,i){for(const s of Z(r)){const u=i.getWithExplicit(s);u.value!==void 0&&(u.explicit||u.value===r[s]||u.value==="derived"||r[s]==="flatten"?delete r[s]:ee(N$(s,r[s],u.value)))}for(const s of Z(n)){const u=i.get(s);u!==void 0&&(u===n[s]?delete n[s]:ee(N$(s,n[s],u)))}const o=new Aa(n,r);i.copyAll(o);const a={};for(const s of Z(o.combine())){const u=o.get(s);u!==null&&(a[s]=u)}return Z(a).length===0||i.parseNothing?null:new Tn(t,a)}get parse(){return this._parse}merge(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}assembleFormatParse(){const t={};for(const n of Z(this._parse)){const r=this._parse[n];cf(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Z(this._parse))}dependentFields(){return new Set(Z(this._parse))}assembleTransforms(t=!1){return Z(this._parse).filter(n=>t?cf(n)>1:!0).map(n=>{const r=kwe(n,this._parse[n]);return r?{type:"formula",expr:r,as:g_(n)}:null}).filter(n=>n!==null)}}class Xs extends et{clone(){return new Xs(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Vp])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Vp}}}class Zp extends et{constructor(t,n){super(t);this.params=n}clone(){return new Zp(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Pe(this.params)}`}assemble(){return Object.assign({type:"graticule"},this.params===!0?{}:this.params)}}class eg extends et{constructor(t,n){super(t);this.params=n}clone(){return new eg(null,this.params)}dependentFields(){return new Set}producedFields(){var t;return new Set([(t=this.params.as)!==null&&t!==void 0?t:"data"])}hash(){return`Hash ${Pe(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}class bl extends et{constructor(t){super(null);t!=null||(t={name:"source"});let n;if(Gs(t)||(n=t.format?Object.assign({},zr(t.format,["parse"])):{}),Yp(t))this._data={values:t.values};else if(Ef(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];je(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else M7(t)?this._data={values:[{type:"Sphere"}]}:(T7(t)||Gs(t))&&(this._data={});this._generator=Gs(t),t.name&&(this._name=t.name),n&&!Ze(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}var jB=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Twe=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},tg;function JA(e){return e instanceof bl||e instanceof Zp||e instanceof eg}class ZA{constructor(){tg.set(this,void 0),jB(this,tg,!1,"f")}setModified(){jB(this,tg,!0,"f")}get modifiedFlag(){return Twe(this,tg,"f")}}tg=new WeakMap;class xl extends ZA{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class e3 extends ZA{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Nwe extends e3{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Z(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Mwe extends e3{constructor(t){super();this.requiresSelectionId=t&&$A(t)}run(t){t instanceof Xs&&(this.requiresSelectionId&&(JA(t.parent)||t.parent instanceof Gi||t.parent instanceof Tn)||(this.setModified(),t.remove()))}}class Fwe extends ZA{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Wo&&(r=t.producedFields(),f_(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Dwe extends e3{constructor(){super()}run(t){t instanceof Zn&&!t.isRequired()&&(this.setModified(),t.remove())}}class Rwe extends xl{run(t){if(!JA(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Tn)if(t instanceof Tn)this.setModified(),t.merge(n);else{if(h_(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Pwe extends xl{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Tn);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const a of r){const s=a.parse;for(const u of Z(s))u in i?i[u]!==s[u]&&o.add(u):i[u]=s[u]}for(const a of o)delete i[a];if(!Ze(i)){this.setModified();const a=new Tn(t,i);for(const s of n){if(s instanceof Tn)for(const u of Z(i))delete s.parse[u];t.removeChild(s),s.parent=a,s instanceof Tn&&Z(s.parse).length===0&&s.remove()}}}}}class jwe extends xl{run(t){t instanceof Zn||t.numChildren()>0||t instanceof Ff||t instanceof bl||(this.setModified(),t.remove())}}class Iwe extends xl{run(t){const n=t.children.filter(i=>i instanceof Wo),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Lwe extends xl{run(t){const n=t.children.filter(i=>i instanceof Gi),r={};for(const i of n){const o=Pe(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of Z(r)){const o=r[i];if(o.length>1){const a=o.pop();for(const s of o)a.merge(s)&&(t.removeChild(s),s.parent=a,s.remove(),this.setModified())}}}}class zwe extends xl{constructor(t){super();this.model=t}run(t){const n=!(JA(t)||t instanceof Af||t instanceof Tn||t instanceof Xs),r=[],i=[];for(const o of t.children)o instanceof Ho&&(n&&!h_(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const a of r)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Ho?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const a of i)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}}class $we extends xl{run(t){const n=[...t.children];if(!ol(n,a=>a instanceof Zn)||t.numChildren()<=1)return;const i=[];let o;for(const a of n)if(a instanceof Zn){let s=a;for(;s.numChildren()===1;){const[u]=s.children;if(u instanceof Zn)s=u;else break}i.push(...s.children),o?(t.removeChild(a),a.parent=o.parent,o.parent.removeChild(o),o.parent=s,this.setModified()):o=s}else i.push(a);if(i.length){this.setModified();for(const a of i)a.parent.removeChild(a),a.parent=o}}}class wl extends et{constructor(t,n){super(t);this.transform=n}clone(){return new wl(null,Ce(this.transform))}addDimensions(t){this.transform.groupby=_o(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:ae(t)}hash(){return`JoinAggregateTransform ${Pe(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return Object.assign({type:"joinaggregate",as:r,ops:n,fields:t},i!==void 0?{groupby:i}:{})}}function Bwe(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=ae(r);return i&&t.push(i),t},[])}function Uwe(e){return J(e)&&e.every(t=>se(t))&&e.length>1}class Ta extends et{constructor(t,n){super(t);this._stack=n}clone(){return new Ta(null,Ce(this._stack))}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:a="zero"}=n,s=[],u=[];if(n.sort!==void 0)for(const f of n.sort)s.push(f.field),u.push(Ft(f.order,"ascending"));const l={field:s,order:u};let c;return Uwe(o)?c=o:se(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Ta(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:a,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:a,offset:s,impute:u}=r,l=o.map(h=>{const p=i[h];return $o(p)}).filter(h=>!!h),c=Bwe(n),f=n.encoding.order;let d;return J(f)||oe(f)?d=x$(f):d=c.reduce((h,p)=>(h.field.push(p),h.order.push(a==="y"?"descending":"ascending"),h),{field:[],order:[]}),new Ta(t,{dimensionFieldDefs:l,stackField:n.vgField(a),facetby:[],stackby:c,sort:d,offset:s,impute:u,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Pe(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[ae(i,{binSuffix:"mid"})]:[ae(i,{}),ae(i,{binSuffix:"end"})]:[ae(i)]).flat():r!=null?r:[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:a,offset:s,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=ae(c,{expr:"datum"}),p=ae(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:ae(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:ae(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:l,offset:s}),t}}class Df extends et{constructor(t,n){super(t);this.transform=n}clone(){return new Df(null,Ce(this.transform))}addDimensions(t){this.transform.groupby=_o(this.transform.groupby.concat(t),n=>n)}dependentFields(){var t,n;const r=new Set;return((t=this.transform.groupby)!==null&&t!==void 0?t:[]).forEach(r.add,r),((n=this.transform.sort)!==null&&n!==void 0?n:[]).forEach(i=>r.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(r.add,r),r}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:ae(t)}hash(){return`WindowTransform ${Pe(this.transform)}`}assemble(){var t;const n=[],r=[],i=[],o=[];for(const d of this.transform.window)r.push(d.op),i.push(this.getDefaultName(d)),o.push(d.param===void 0?null:d.param),n.push(d.field===void 0?null:d.field);const a=this.transform.frame,s=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&r.every(d=>E_(d)))return Object.assign({type:"joinaggregate",as:i,ops:r,fields:n},s!==void 0?{groupby:s}:{});const u=[],l=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)u.push(d.field),l.push((t=d.order)!==null&&t!==void 0?t:"ascending");const c={field:u,order:l},f=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:o,as:i,ops:r,fields:n,sort:c},f!==void 0?{ignorePeers:f}:{}),s!==void 0?{groupby:s}:{}),a!==void 0?{frame:a}:{})}}function Wwe(e){function t(n){if(!(n instanceof Ff)){const r=n.clone();if(r instanceof Zn){const i=n3+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Gi||r instanceof Ta||r instanceof Df||r instanceof wl)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function t3(e){if(e instanceof Ff)if(e.numChildren()===1&&!(e.children[0]instanceof Zn)){const t=e.children[0];(t instanceof Gi||t instanceof Ta||t instanceof Df||t instanceof wl)&&t.addDimensions(e.fields),t.swapWithParent(),t3(e)}else{const t=e.model.component.data.main;IB(t);const n=Wwe(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(t3)}function IB(e){if(e instanceof Zn&&e.type===ot.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Ff||(t.swapWithParent(),IB(e))}}const n3="scale_",Wv=5;function r3(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!r3(t.children))return!1}return!0}function qi(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function LB(e,t,n){let r=e.sources,i=!1;return i=qi(new Dwe,r)||i,i=qi(new Mwe(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=qi(new jwe,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=qi(new Rwe,r)||i,i=qi(new zwe(t),r)||i,i=qi(new Fwe,r)||i,i=qi(new Pwe,r)||i,i=qi(new Lwe,r)||i,i=qi(new Iwe,r)||i,i=qi(new Nwe,r)||i,i=qi(new $we,r)||i),e.sources=r,i}function Hwe(e,t){r3(e.sources);let n=0,r=0;for(let i=0;i<Wv&&LB(e,t,!0);i++)n++;e.sources.map(t3);for(let i=0;i<Wv&&LB(e,t,!1);i++)r++;r3(e.sources),Math.max(n,r)===Wv&&ee(`Maximum optimization runs(${Wv}) reached.`)}class xr{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new xr(()=>t(n))}}var Gwe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function zB(e){Dt(e)?qwe(e):Vwe(e)}function qwe(e){const t=e.component.scales;for(const n of Z(t)){const r=Xwe(e,n);if(t[n].setWithExplicit("domains",r),Qwe(e,n),e.component.data.isFaceted){let o=e;for(;!Vi(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const s of r.value)Oa(s)&&(s.data=n3+s.data.replace(n3,""))}}}function Vwe(e){for(const n of e.children)zB(n);const t=e.component.scales;for(const n of Z(t)){let r,i=null;for(const o of e.children){const a=o.component.scales[n];if(a){r===void 0?r=a.getWithExplicit("domains"):r=Hs(r,a.getWithExplicit("domains"),"domains","scale",a3);const s=a.get("selectionExtent");i&&s&&i.param!==s.param&&ee($ye),i=s}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Ywe(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=$B(t,n);if(!i){ee(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=$B(t,n);if(i)return"unaggregated"}return e}function Xwe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Ywe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign(Object.assign({},e.specifiedScales[t]),{domain:i})),t==="x"&&Bt(r.x2)?Bt(r.x)?Hs(Ks(n,i,e,"x"),Ks(n,i,e,"x2"),"domain","scale",a3):Ks(n,i,e,"x2"):t==="y"&&Bt(r.y2)?Bt(r.y)?Hs(Ks(n,i,e,"y"),Ks(n,i,e,"y2"),"domain","scale",a3):Ks(n,i,e,"y2"):Ks(n,i,e,t)}function Kwe(e,t,n){return e.map(r=>({signal:`{data: ${Sv(r,{timeUnit:n,type:t})}}`}))}function i3(e,t,n){var r;const i=(r=Qn(n))===null||r===void 0?void 0:r.unit;return t==="temporal"||i?Kwe(e,t,i):[e]}function Ks(e,t,n,r){const{encoding:i}=n,o=Bt(i[r]),{type:a}=o,s=o.timeUnit;if(fve(t)){const f=Ks(e,void 0,n,r),d=i3(t.unionWith,a,s);return Uo([...f.value,...d])}else{if(ge(t))return Uo([t]);if(t&&t!=="unaggregated"&&!Z$(t))return Uo(i3(t,a,s))}const u=n.stack;if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Ur([[0,1]]);const f=n.requestDataName(ot.Main);return Ur([{data:f,field:n.vgField(r,{suffix:"start"})},{data:f,field:n.vgField(r,{suffix:"end"})}])}const l=Is(r)&&oe(o)?Jwe(n,r,e):void 0;if(Lo(o)){const f=i3([o.datum],a,s);return Ur(f)}const c=o;if(t==="unaggregated"){const f=n.requestDataName(ot.Main),{field:d}=o;return Ur([{data:f,field:ae({field:d,aggregate:"min"})},{data:f,field:ae({field:d,aggregate:"max"})}])}else if(it(c.bin)){if(Qt(e))return Ur(e==="bin-ordinal"?[]:[{data:Mp(l)?n.requestDataName(ot.Main):n.requestDataName(ot.Raw),field:n.vgField(r,Gp(c,r)?{binSuffix:"range"}:{}),sort:l===!0||!ce(l)?{field:n.vgField(r,{}),op:"min"}:l}]);{const{bin:f}=c;if(it(f)){const d=QA(n,c.field,f);return Ur([new xr(()=>{const h=n.getSignalName(d);return`[${h}.start, ${h}.stop]`})])}else return Ur([{data:n.requestDataName(ot.Main),field:n.vgField(r,{})}])}}else if(c.timeUnit&&je(["time","utc"],e)&&w9(c,Dt(n)?n.encoding[Sa(r)]:void 0,n.markDef,n.config)){const f=n.requestDataName(ot.Main);return Ur([{data:f,field:n.vgField(r)},{data:f,field:n.vgField(r,{suffix:"end"})}])}else return Ur(l?[{data:Mp(l)?n.requestDataName(ot.Main):n.requestDataName(ot.Raw),field:n.vgField(r),sort:l}]:[{data:n.requestDataName(ot.Main),field:n.vgField(r)}])}function o3(e,t){const{op:n,field:r,order:i}=e;return Object.assign(Object.assign({op:n!=null?n:t?"sum":pv},r?{field:si(r)}:{}),i?{order:i}:{})}function Qwe(e,t){var n;const r=e.component.scales[t],i=e.specifiedScales[t].domain,o=(n=e.fieldDef(t))===null||n===void 0?void 0:n.bin,a=Z$(i)&&i,s=cl(o)&&rv(o.extent)&&o.extent;(a||s)&&r.set("selectionExtent",a!=null?a:s,!0)}function Jwe(e,t,n){if(!Qt(n))return;const r=e.fieldDef(t),i=r.sort;if(y9(i))return{op:"min",field:Nf(r,t),order:"ascending"};const{stack:o}=e,a=o?new Set([...o.groupbyFields,...o.stackBy.map(s=>s.fieldDef.field)]):void 0;if(Io(i)){const s=o&&!a.has(i.field);return o3(i,s)}else if(m9(i)){const{encoding:s,order:u}=i,l=e.fieldDef(s),{aggregate:c,field:f}=l,d=o&&!a.has(f);if(Ea(c)||Ls(c))return o3({field:ae(l),order:u},d);if(E_(c)||!c)return o3({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(je(["ascending",void 0],i))return!0}}function $B(e,t){const{aggregate:n,type:r}=e;return n?se(n)&&!Eye.has(n)?{valid:!1,reason:p1e(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:g1e(e)}:{valid:!0}:{valid:!1,reason:h1e(e)}}function a3(e,t,n,r){return e.explicit&&t.explicit&&ee(x1e(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Zwe(e){const t=_o(e.map(a=>Oa(a)?Gwe(a,["sort"]):a),Pe),n=_o(e.map(a=>{if(Oa(a)){const s=a.sort;return s!==void 0&&!Mp(s)&&("op"in s&&s.op==="count"&&delete s.field,s.order==="ascending"&&delete s.order),s}}).filter(a=>a!==void 0),Pe);if(t.length===0)return;if(t.length===1){const a=e[0];if(Oa(a)&&n.length>0){let s=n[0];if(n.length>1)ee(j$),s=!0;else if(ce(s)&&"field"in s){const u=s.field;a.field===u&&(s=s.order?{order:s.order}:!0)}return Object.assign(Object.assign({},a),{sort:s})}return a}const r=_o(n.map(a=>Mp(a)||!("op"in a)||se(a.op)&&a.op in bye?a:(ee(S1e(a)),!0)),Pe);let i;r.length===1?i=r[0]:r.length>1&&(ee(j$),i=!0);const o=_o(e.map(a=>Oa(a)?a.data:null),a=>a);return o.length===1&&o[0]!==null?Object.assign({data:o[0],fields:t.map(s=>s.field)},i?{sort:i}:{}):Object.assign({fields:t},i?{sort:i}:{})}function s3(e){if(Oa(e)&&se(e.field))return e.field;if(kye(e)){let t;for(const n of e.fields)if(Oa(n)&&se(n.field)){if(!t)t=n.field;else if(t!==n.field)return ee(E1e),t}return ee(O1e),t}else if(Cye(e)){ee(k1e);const t=e.fields[0];return se(t)?t:void 0}}function Hv(e,t){const r=e.component.scales[t].get("domains").map(i=>(Oa(i)&&(i.data=e.lookupDataSource(i.data)),i));return Zwe(r)}var eSe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function BB(e){return Rf(e)||c3(e)?e.children.reduce((t,n)=>t.concat(BB(n)),UB(e)):UB(e)}function UB(e){return Z(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:a,selectionExtent:s,domains:u,range:l,reverse:c}=i,f=eSe(i,["name","type","selectionExtent","domains","range","reverse"]),d=tSe(i.range,o,n,e),h=Hv(e,n),p=s?Gxe(e,s,r,h):null;return t.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:o,type:a},h?{domain:h}:{}),p?{domainRaw:p}:{}),{range:d}),c!==void 0?{reverse:c}:{}),f)),t},[])}function tSe(e,t,n,r){if(cn(n)){if($s(e))return{step:{signal:`${t}_step`}}}else if(ce(e)&&Oa(e))return Object.assign(Object.assign({},e),{data:r.lookupDataSource(e.data)});return e}class WB extends Aa{constructor(t,n){super({},{name:t});this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:ol(this.get("domains"),t=>J(t)&&t.length===2&&t[0]<=0&&t[1]>=0)}}const nSe=["range","scheme"];function rSe(e){const t=e.component.scales;for(const n of nv){const r=t[n];if(!r)continue;const i=iSe(n,e);r.setWithExplicit("range",i)}}function HB(e,t){const n=e.fieldDef(t);if(n==null?void 0:n.bin){const{bin:r,field:i}=n,o=yr(t),a=e.getName(o);if(ce(r)&&r.binned&&r.step!==void 0)return new xr(()=>{const s=e.scaleName(t),u=`(domain("${s}")[1] - domain("${s}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${u})`});if(it(r)){const s=QA(e,i,r);return new xr(()=>{const u=e.getSignalName(s),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(a)} / (${l})`})}}}function iSe(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const f of nSe)if(n[f]!==void 0){const d=G_(o,f),h=e9(e,f);if(!d)ee(R$(o,f,e));else if(h)ee(h);else switch(f){case"range":{const p=n.range;if(J(p)){if(cn(e))return Uo(p.map(g=>{if(g==="width"||g==="height"){const m=t.getName(g),y=t.getSignalName.bind(t);return xr.fromName(y,m)}return g}))}else if(ce(p))return Uo({data:t.requestDataName(ot.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Uo(p)}case"scheme":return Uo(oSe(n[f]))}}const a=e===mt||e==="xOffset"?"width":"height",s=r[a];if(Bo(s)){if(cn(e))if(Qt(o)){const f=GB(s,t,e);if(f)return Uo({step:f})}else ee(P$(a));else if(hf(e)){const f=e===Ms?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=qB(s,o);if(p)return Uo(p)}}}const{rangeMin:u,rangeMax:l}=n,c=aSe(e,t);return(u!==void 0||l!==void 0)&&G_(o,"rangeMin")&&J(c)&&c.length===2?Uo([u!=null?u:c[0],l!=null?l:c[1]]):Ur(c)}function oSe(e){return cve(e)?Object.assign({scheme:e.name},zr(e,["name"])):{scheme:e}}function aSe(e,t){const{size:n,config:r,mark:i,encoding:o}=t,a=t.getSignalName.bind(t),{type:s}=Bt(o[e]),l=t.getScaleComponent(e).get("type"),{domain:c,domainMid:f}=t.specifiedScales[e];switch(e){case mt:case Kt:{if(je(["point","band"],l)){const p=VB(e,n,r.view);if(Bo(p))return{step:GB(p,t,e)}}const d=yr(e),h=t.getName(d);return e===Kt&&Br(l)?[xr.fromName(a,h),0]:[0,xr.fromName(a,h)]}case Ms:case ff:return sSe(e,t,l);case xa:{const d=t.component.scales[e].get("zero"),h=YB(i,d,r),p=cSe(i,n,t,r);return yf(l)?lSe(h,p,uSe(l,r,c,e)):[h,p]}case Bi:return[0,Math.PI*2];case sl:return[0,360];case To:return[0,new xr(()=>{const d=t.getSignalName("width"),h=t.getSignalName("height");return`min(${d},${h})/2`})];case Rs:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Ps:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case mr:return"symbol";case gr:case Fo:case Do:return l==="ordinal"?s==="nominal"?"category":"ordinal":f!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case wa:case Fs:case Ds:return[r.scale.minOpacity,r.scale.maxOpacity]}}function GB(e,t,n){var r,i,o,a,s;const{encoding:u}=t,l=t.getScaleComponent(n),c=o$(n),f=u[c];if(t7({step:e,offsetIsDiscrete:Oe(f)&&V$(f.type)})==="offset"&&R9(u,c)){const h=t.getScaleComponent(c);let g=`domain('${t.scaleName(c)}').length`;if(h.get("type")==="band"){const y=(i=(r=h.get("paddingInner"))!==null&&r!==void 0?r:h.get("padding"))!==null&&i!==void 0?i:0,v=(a=(o=h.get("paddingOuter"))!==null&&o!==void 0?o:h.get("padding"))!==null&&a!==void 0?a:0;g=`bandspace(${g}, ${y}, ${v})`}const m=(s=l.get("paddingInner"))!==null&&s!==void 0?s:l.get("padding");return{signal:`${e.step} * ${g} / (1-${Nye(m)})`}}else return e.step}function qB(e,t){if(t7({step:e,offsetIsDiscrete:Qt(t)})==="offset")return{step:e.step}}function sSe(e,t,n){const r=e===Ms?"x":"y",o=t.getScaleComponent(r).get("type"),a=t.scaleName(r);if(o==="band"){const s=VB(r,t.size,t.config.view);if(Bo(s)){const u=qB(s,n);if(u)return u}return[0,{signal:`bandwidth('${a}')`}]}else return qz(`Cannot use ${e} scale if ${r} scale is not discrete.`)}function VB(e,t,n){const r=e===mt?"width":"height",i=t[r];return i||Nv(n,r)}function uSe(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&J(n)?n.length+1:(ee(R1e(r)),3)}}function lSe(e,t,n){const r=()=>{const i=ka(t),o=ka(e),a=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${a}, ${a})`};return ge(t)?new xr(r):{signal:r()}}function YB(e,t,n){if(t)return ge(t)?{signal:`${t.signal} ? 0 : ${YB(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(ov("size",e))}const XB=.95;function cSe(e,t,n,r){const i={x:HB(n,"x"),y:HB(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=KB(t,i,r.view);return Qe(o)?o-1:new xr(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=KB(t,i,r.view);return Qe(o)?Math.pow(XB*o,2):new xr(()=>`pow(${XB} * ${o.signal}, 2)`)}}throw new Error(ov("size",e))}function KB(e,t,n){const r=Bo(e.width)?e.width.step:Tv(n,"width"),i=Bo(e.height)?e.height.step:Tv(n,"height");return t.x||t.y?new xr(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function QB(e,t){Dt(e)?fSe(e,t):eU(e,t)}function fSe(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(const s of Z(n)){const u=a[s],l=n[s],c=e.getScaleComponent(s),f=Bt(i[s]),d=u[t],h=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),m=G_(h,t),y=e9(s,t);if(d!==void 0&&(m?y&&ee(y):ee(R$(h,t,s))),m&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":dl(u[t])||b==="temporal"||v?l.set(t,{signal:Sv(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in JB?JB[t]({model:e,channel:s,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:o,config:r,hasNestedOffsetScale:lA(i,s)}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const JB={bins:({model:e,fieldOrDatumDef:t})=>oe(t)?dSe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>hSe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>pSe(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>gSe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>mSe(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>ySe(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=oe(e)?e.sort:void 0;return vSe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i})=>bSe(e,t,n,r,i)};function ZB(e){Dt(e)?rSe(e):eU(e,"range")}function eU(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?ZB(r):QB(r,t);for(const r of Z(n)){let i;for(const o of e.children){const a=o.component.scales[r];if(a){const s=a.getWithExplicit(t);i=Hs(i,s,t,"scale",A7((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function dSe(e,t){const n=t.bin;if(it(n)){const r=QA(e,t.field,n);return new xr(()=>e.getSignalName(r))}else if(Kn(n)&&cl(n)&&n.step!==void 0)return{step:n.step}}function hSe(e,t){if(je([gr,Fo,Do],e)&&t!=="nominal")return"hcl"}function pSe(e,t,n,r,i,o){var a;if(!(((a=$o(o))===null||a===void 0?void 0:a.bin)||J(n)||i!=null||r!=null||je([br.TIME,br.UTC],e)))return cn(t)?!0:void 0}function gSe(e,t,n,r,i,o){if(cn(e)){if(Wi(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:a,orient:s}=i;if(a==="bar"&&!(oe(r)&&(r.bin||r.timeUnit))&&(s==="vertical"&&e==="x"||s==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===br.POINT)return n.pointPadding}}function mSe(e,t,n,r,i,o=!1){if(e===void 0){if(cn(t)){const{bandPaddingInner:a,barBandPaddingInner:s,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return o?l:Ft(a,n==="bar"?s:u)}else if(hf(t)&&r===br.BAND)return i.offsetBandPaddingInner}}function ySe(e,t,n,r,i,o=!1){if(e===void 0){if(cn(t)){const{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:s}=i;if(o)return s;if(n===br.BAND)return Ft(a,ge(r)?{signal:`${r.signal}/2`}:r/2)}else if(hf(t)){if(n===br.POINT)return .5;if(n===br.BAND)return i.offsetBandPaddingOuter}}}function vSe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Br(e)&&t==="descending"?ge(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Br(e)&&t==="descending")return!0}function bSe(e,t,n,r,i){if(!!n&&n!=="unaggregated"&&Br(i)){if(J(n)){const a=n[0],s=n[n.length-1];if(a<=0&&s>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!yf(i))return!0;if(!(oe(t)&&t.bin)&&je([...Ro,...fye],e)){const{orient:a,type:s}=r;return!(je(["bar","area","line","trail"],s)&&(a==="horizontal"&&e==="y"||a==="vertical"&&e==="x"))}return!1}function xSe(e,t,n,r,i=!1){const o=wSe(t,n,r,i),{type:a}=e;return Is(t)?a!==void 0?yve(t,a)?oe(n)&&!mve(a,n.type)?(ee(v1e(a,o)),o):a:(ee(y1e(t,a,o)),o):o:null}function wSe(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(df(e)||S_(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&ee(T_(e,"ordinal")),"ordinal";if(cn(e)||hf(e)){if(je(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in w_)return"band";const o=n[yr(e)];return vf(o)||oA(t)&&((i=t.axis)===null||i===void 0?void 0:i.tickBand)?"band":"point"}case"temporal":return df(e)?"time":S_(e)==="discrete"?(ee(T_(e,"temporal")),"ordinal"):oe(t)&&t.timeUnit&&Qn(t.timeUnit).utc?"utc":"time";case"quantitative":return df(e)?oe(t)&&it(t.bin)?"bin-ordinal":"linear":S_(e)==="discrete"?(ee(T_(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(F$(t.type))}function SSe(e,{ignoreRange:t}={}){tU(e),zB(e);for(const n of gve)QB(e,n);t||ZB(e)}function tU(e){Dt(e)?e.component.scales=ESe(e):e.component.scales=kSe(e)}function ESe(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of nv){const a=Bt(t[o]);if(a&&n===r9&&o===mr&&a.type===mf)continue;let s=a&&a.scale;if(hf(o)){const u=a$(o);if(!lA(t,u)){s&&ee(r1e(o));continue}}if(a&&s!==null&&s!==!1){s!=null||(s={});const u=lA(t,o),l=xSe(s,o,a,r,u);i[o]=new WB(e.scaleName(`${o}`,!0),{value:l,explicit:s.type===l})}}return i}const OSe=A7((e,t)=>Y$(e)-Y$(t));function kSe(e){var t,n;const r=e.component.scales={},i={},o=e.component.resolve;for(const a of e.children){tU(a);for(const s of Z(a.component.scales))if((t=(n=o.scale)[s])!==null&&t!==void 0||(n[s]=bB(s,e)),o.scale[s]==="shared"){const u=i[s],l=a.component.scales[s].getWithExplicit("type");u?ove(u.value,l.value)?i[s]=Hs(u,l,"type","scale",OSe):(o.scale[s]="independent",delete i[s]):i[s]=l}}for(const a of Z(i)){const s=e.scaleName(a,!0),u=i[a];r[a]=new WB(s,u);for(const l of e.children){const c=l.component.scales[a];c&&(l.renameScale(c.get("name"),s),c.merged=!0)}}return r}var u3=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class l3{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Dt(e){return(e==null?void 0:e.type)==="unit"}function Vi(e){return(e==null?void 0:e.type)==="facet"}function c3(e){return(e==null?void 0:e.type)==="concat"}function Rf(e){return(e==null?void 0:e.type)==="layer"}class f3{constructor(t,n,r,i,o,a,s){var u,l;this.type=n,this.parent=r,this.config=o,this.correctDataNames=c=>{var f,d,h;return((f=c.from)===null||f===void 0?void 0:f.data)&&(c.from.data=this.lookupDataSource(c.from.data)),((h=(d=c.from)===null||d===void 0?void 0:d.facet)===null||h===void 0?void 0:h.data)&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c},this.parent=r,this.config=o,this.view=vr(s),this.name=(u=t.name)!==null&&u!==void 0?u:i,this.title=zs(t.title)?{text:t.title}:t.title?vr(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new l3,this.projectionNameMap=r?r.projectionNameMap:new l3,this.signalNameMap=r?r.signalNameMap:new l3,this.data=t.data,this.description=t.description,this.transforms=Axe((l=t.transform)!==null&&l!==void 0?l:[]),this.layout=n==="layer"||n==="unit"?{}:Rbe(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:gv(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Aa,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},a?Ce(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){SSe(this)}parseProjection(){FB(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){_B(this)}assembleEncodeFromView(t){const n=u3(t,["style"]),r={};for(const i of Z(n)){const o=n[i];o!==void 0&&(r[i]=lt(o))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=lt(this.description)),this.type==="unit"||this.type==="layer")?Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n!=null?n:{}):Ze(n)?void 0:n}assembleLayout(){if(!this.layout)return;const t=this.layout,{spacing:n}=t,r=u3(t,["spacing"]),{component:i,config:o}=this,a=U2e(i.layoutHeaders,o);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),r),a?{titleBand:a}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of li)t[r].title&&n.push(j2e(this,r));for(const r of GA)n=n.concat(I2e(this,r));return n}assembleAxes(){return O2e(this.component.axes,this.config)}assembleLegends(){return TB(this)}assembleProjections(){return dwe(this)}assembleTitle(){var t,n,r;const i=(t=this.title)!==null&&t!==void 0?t:{},{encoding:o}=i,a=u3(i,["encoding"]),s=Object.assign(Object.assign(Object.assign({},p$(this.config.title).nonMarkTitleProperties),a),o?{encode:{update:o}}:{});if(s.text)return je(["unit","layer"],this.type)?je(["middle",void 0],s.anchor)&&((n=s.frame)!==null&&n!==void 0||(s.frame="group")):(r=s.anchor)!==null&&r!==void 0||(s.anchor="start"),Ze(s)?void 0:s}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Vi(this.parent)?BB(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return ht((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(ot[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Vi(this.parent)){const n=yB(t),r=tv(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),a=i.get("range");if(Qt(o)&&$s(a)){const s=i.get("name"),u=Hv(this,r),l=s3(u);if(l){const c=ae({aggregate:"distinct",field:l},{expr:"datum"});return{signal:mB(s,i,c)}}else return ee(__(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(r$(t)&&Is(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Pye(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)===null||t===void 0?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)===null||n===void 0?void 0:n.some(r=>r.hasOrientSignalRef()))}}class nU extends f3{vgField(t,n={}){const r=this.fieldDef(t);if(!!r)return ae(r,n)}reduceFieldDef(t,n){return ube(this.getMapping(),(r,i,o)=>{const a=$o(i);return a?t(r,a,o):r},n)}forEachFieldDef(t,n){fA(this.getMapping(),(r,i)=>{const o=$o(r);o&&t(o,i)},n)}}var CSe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class Gv extends et{constructor(t,n){var r,i,o;super(t);this.transform=n,this.transform=Ce(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"value",(o=a[1])!==null&&o!==void 0?o:"density"]}clone(){return new Gv(null,Ce(this.transform))}dependentFields(){var t;return new Set([this.transform.density,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Pe(this.transform)}`}assemble(){const t=this.transform,{density:n}=t,r=CSe(t,["density"]);return Object.assign({type:"kde",field:n},r)}}class ng extends et{constructor(t,n){super(t);this.filter=n}clone(){return new ng(null,Object.assign({},this.filter))}static make(t,n){const{config:r,mark:i,markDef:o}=n;if(qe("invalid",o,r)!=="filter")return null;const s=n.reduceFieldDef((u,l,c)=>{const f=Is(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Br(d)&&l.aggregate!=="count"&&!Bs(i)&&(u[l.field]=l)}return u},{});return Z(s).length?new ng(t,s):null}dependentFields(){return new Set(Z(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Pe(this.filter)}`}assemble(){const t=Z(this.filter).reduce((n,r)=>{const i=this.filter[r],o=ae(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):i.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class qv extends et{constructor(t,n){super(t);this.transform=n,this.transform=Ce(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,a)=>{var s;return(s=i[a])!==null&&s!==void 0?s:o})}clone(){return new qv(this.parent,Ce(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Pe(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class Vv extends et{constructor(t,n){var r,i,o;super(t);this.transform=n,this.transform=Ce(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"key",(o=a[1])!==null&&o!==void 0?o:"value"]}clone(){return new Vv(null,Ce(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Pe(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Pf extends et{constructor(t,n,r,i){super(t);this.fields=n,this.geojson=r,this.signal=i}clone(){return new Pf(null,Ce(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Mo,No],[ui,Ui]]){const o=i.map(a=>{const s=Bt(n.encoding[a]);return oe(s)?s.field:Lo(s)?{expr:`${s.datum}`}:Hi(s)?{expr:`${s.value}`}:void 0});(o[0]||o[1])&&(t=new Pf(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(mr)){const i=n.typedFieldDef(mr);i.type===mf&&(t=new Pf(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}dependentFields(){var t;const n=((t=this.fields)!==null&&t!==void 0?t:[]).filter(se);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Pe(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}}class rg extends et{constructor(t,n,r,i){super(t);this.projection=n,this.fields=r,this.as=i}clone(){return new rg(null,this.projection,Ce(this.fields),Ce(this.as))}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Mo,No],[ui,Ui]]){const i=r.map(a=>{const s=Bt(n.encoding[a]);return oe(s)?s.field:Lo(s)?{expr:`${s.datum}`}:Hi(s)?{expr:`${s.value}`}:void 0}),o=r[0]===ui?"2":"";(i[0]||i[1])&&(t=new rg(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(se))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Pe(this.fields)} ${Pe(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Sl extends et{constructor(t,n){super(t);this.transform=n}clone(){return new Sl(null,Ce(this.transform))}dependentFields(){var t;return new Set([this.transform.impute,this.transform.key,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Sl(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(oe(i)&&oe(o)){const a=i.impute?i:o.impute?o:void 0;if(a===void 0)return;const s=i.impute?o:o.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=a.impute,d=j9(n.mark,r);return new Sl(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:a.field,key:s.field},u?{method:u}:{}),l!==void 0?{value:l}:{}),c?{frame:c}:{}),f!==void 0?{keyvals:f}:{}),d.length?{groupby:d}:{}))}return null}hash(){return`Impute ${Pe(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:a,frame:s=[null,null]}=this.transform,u=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:t,key:n},r?{keyvals:cxe(r)?this.processSequence(r):r}:{}),{method:"value"}),o?{groupby:o}:{}),{value:!i||i==="value"?a:null});if(i&&i!=="value"){const l=Object.assign({type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:s,ignorePeers:!1},o?{groupby:o}:{}),c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}var _Se=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class Yv extends et{constructor(t,n){var r,i,o;super(t);this.transform=n,this.transform=Ce(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:n.on,(o=a[1])!==null&&o!==void 0?o:n.loess]}clone(){return new Yv(null,Ce(this.transform))}dependentFields(){var t;return new Set([this.transform.loess,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Pe(this.transform)}`}assemble(){const t=this.transform,{loess:n,on:r}=t,i=_Se(t,["loess","on"]);return Object.assign({type:"loess",x:r,y:n},i)}}class ig extends et{constructor(t,n,r){super(t);this.transform=n,this.secondary=r}clone(){return new ig(null,Ce(this.transform),this.secondary)}static make(t,n,r,i){const o=n.component.data.sources,{from:a}=r;let s=null;if(fxe(a)){let u=aU(a.data,o);u||(u=new bl(a.data),o.push(u));const l=n.getName(`lookup_${i}`);s=new Zn(u,l,ot.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=s}else if(dxe(a)){const u=a.param;r=Object.assign({as:u},r);let l;try{l=n.getSelectionComponent(ht(u),u)}catch{throw new Error(Lye(u))}if(s=l.materialized,!s)throw new Error(zye(u))}return new ig(t,r,s.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ue(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Pe({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:ue(this.transform.as)}:{});else{let n=this.transform.as;se(n)||(ee(Vye),n="_lookup"),t={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}var ASe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class Xv extends et{constructor(t,n){var r,i,o;super(t);this.transform=n,this.transform=Ce(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"prob",(o=a[1])!==null&&o!==void 0?o:"value"]}clone(){return new Xv(null,Ce(this.transform))}dependentFields(){var t;return new Set([this.transform.quantile,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Pe(this.transform)}`}assemble(){const t=this.transform,{quantile:n}=t,r=ASe(t,["quantile"]);return Object.assign({type:"quantile",field:n},r)}}var TSe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class Kv extends et{constructor(t,n){var r,i,o;super(t);this.transform=n,this.transform=Ce(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:n.on,(o=a[1])!==null&&o!==void 0?o:n.regression]}clone(){return new Kv(null,Ce(this.transform))}dependentFields(){var t;return new Set([this.transform.regression,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Pe(this.transform)}`}assemble(){const t=this.transform,{regression:n,on:r}=t,i=TSe(t,["regression","on"]);return Object.assign({type:"regression",x:r,y:n},i)}}class Qv extends et{constructor(t,n){super(t);this.transform=n}clone(){return new Qv(null,Ce(this.transform))}addDimensions(t){var n;this.transform.groupby=_o(((n=this.transform.groupby)!==null&&n!==void 0?n:[]).concat(t),r=>r)}producedFields(){}dependentFields(){var t;return new Set([this.transform.pivot,this.transform.value,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}hash(){return`PivotTransform ${Pe(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:n},i!==void 0?{limit:i}:{}),o!==void 0?{op:o}:{}),r!==void 0?{groupby:r}:{})}}class Jv extends et{constructor(t,n){super(t);this.transform=n}clone(){return new Jv(null,Ce(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Pe(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function rU(e){let t=0;function n(r,i){var o;if(r instanceof bl&&!r.isGenerator&&!Ef(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Tn&&(r.parent instanceof bl&&!i.source?(i.format=Object.assign(Object.assign({},(o=i.format)!==null&&o!==void 0?o:{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof Ff){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof Zp||r instanceof eg||r instanceof ng||r instanceof Af||r instanceof Tf||r instanceof rg||r instanceof Gi||r instanceof ig||r instanceof Df||r instanceof wl||r instanceof Vv||r instanceof qv||r instanceof Gv||r instanceof Yv||r instanceof Xv||r instanceof Kv||r instanceof Xs||r instanceof Jv||r instanceof Qv)&&i.transform.push(r.assemble()),(r instanceof Ho||r instanceof Wo||r instanceof Sl||r instanceof Ta||r instanceof Pf)&&i.transform.push(...r.assemble()),r instanceof Zn&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Zn?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Zn&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let a=i.name;!i.source||i.transform.length>0?e.push(i):a=i.source;for(const s of r.children)n(s,{name:null,source:a,transform:[]});break}}}return n}function NSe(e){const t=[],n=rU(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function MSe(e,t){var n,r;const i=[],o=rU(i);let a=0;for(const u of e.sources){u.hasName()||(u.dataName=`source_${a++}`);const l=u.assemble();o(u,l)}for(const u of i)u.transform.length===0&&delete u.transform;let s=0;for(const[u,l]of i.entries())((n=l.transform)!==null&&n!==void 0?n:[]).length===0&&!l.source&&i.splice(s++,0,i.splice(u,1)[0]);for(const u of i)for(const l of(r=u.transform)!==null&&r!==void 0?r:[])l.type==="lookup"&&(l.from=e.outputNodes[l.from].getSource());for(const u of i)u.name in t&&(u.values=t[u.name]);return i}function FSe(e){return e==="top"||e==="left"||ge(e)?"header":"footer"}function DSe(e){for(const t of li)RSe(e,t);oU(e,"x"),oU(e,"y")}function RSe(e,t){var n;const{facet:r,config:i,child:o,component:a}=e;if(e.channelHasField(t)){const s=r[t],u=Mf("title",null,i,t);let l=bf(s,i,{allowDisabling:!0,includeDefault:u===void 0||!!u});o.component.layoutHeaders[t].title&&(l=J(l)?l.join(", "):l,l+=` / ${o.component.layoutHeaders[t].title}`,o.component.layoutHeaders[t].title=null);const c=Mf("labelOrient",s.header,i,t),f=s.header!==null?Ft((n=s.header)===null||n===void 0?void 0:n.labels,i.header.labels,!0):!1,d=je(["bottom","right"],c)?"footer":"header";a.layoutHeaders[t]={title:s.header!==null?l:null,facetFieldDef:s,[d]:t==="facet"?[]:[iU(e,t,f)]}}}function iU(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function oU(e,t){var n;const{child:r}=e;if(r.component.axes[t]){const{layoutHeaders:i,resolve:o}=e.component;if(o.axis[t]=XA(o,t),o.axis[t]==="shared"){const a=t==="x"?"column":"row",s=i[a];for(const u of r.component.axes[t]){const l=FSe(u.get("orient"));(n=s[l])!==null&&n!==void 0||(s[l]=[iU(e,a,!1)]);const c=Jp(u,"main",e.config,{header:!0});c&&s[l][0].axes.push(c),u.mainExtracted=!0}}}}function PSe(e){d3(e),Zv(e,"width"),Zv(e,"height")}function jSe(e){d3(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Zv(e,t),Zv(e,n)}function d3(e){for(const t of e.children)t.parseLayoutSize()}function Zv(e,t){var n;const r=yB(t),i=tv(r),o=e.component.resolve,a=e.component.layoutSize;let s;for(const u of e.children){const l=u.component.layoutSize.getWithExplicit(r),c=(n=o.scale[i])!==null&&n!==void 0?n:bB(i,e);if(c==="independent"&&l.value==="step"){s=void 0;break}if(s){if(c==="independent"&&s.value!==l.value){s=void 0;break}s=Hs(s,l,r,"")}else s=l}if(s){for(const u of e.children)e.renameSignal(u.getName(r),e.getName(t)),u.component.layoutSize.set(r,"merged",!1);a.setWithExplicit(t,s)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function ISe(e){const{size:t,component:n}=e;for(const r of Ro){const i=yr(r);if(t[i]){const o=t[i];n.layoutSize.set(i,Bo(o)?"step":o,!0)}else{const o=LSe(e,i);n.layoutSize.set(i,o,!1)}}}function LSe(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),a=i.get("range");if(Qt(o)){const s=Nv(r.view,t);return $s(a)||Bo(s)?"step":s}else return EA(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return EA(r.view,t);{const o=Nv(r.view,t);return Bo(o)?o.step:o}}}function h3(e,t,n){return ae(t,Object.assign({suffix:`by_${ae(e)}`},n!=null?n:{}))}class og extends nU{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve);this.child=v3(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Wp(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Z(t),r={};for(const i of n){if(![ma,ya].includes(i)){ee(ov(i,"facet"));break}const o=t[i];if(o.field===void 0){ee(A_(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=uA(t,n);return r.header?r.header=vr(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=eb(this),this.child.parseData()}parseLayoutSize(){d3(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),DSe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){var t,n,r;const i={};for(const o of li)for(const a of qA){const s=this.component.layoutHeaders[o],u=s[a],{facetFieldDef:l}=s;if(l){const c=Mf("titleOrient",l.header,this.config,o);if(["right","bottom"].includes(c)){const f=$v(o,c);(t=i.titleAnchor)!==null&&t!==void 0||(i.titleAnchor={}),i.titleAnchor[f]="end"}}if(u==null?void 0:u[0]){const c=o==="row"?"height":"width",f=a==="header"?"headerBand":"footerBand";o!=="facet"&&!this.child.component.layoutSize.get(c)&&((n=i[f])!==null&&n!==void 0||(i[f]={}),i[f][o]=.5),s.title&&((r=i.offset)!==null&&r!==void 0||(i.offset={}),i.offset[o==="row"?"rowTitle":"columnTitle"]=10)}}return i}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof og))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof og?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:ae(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof og){if(this.child.channelHasField("column")){const i=ae(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Ro){const o=this.child.component.scales[i];if(o&&!o.merged){const a=o.get("type"),s=o.get("range");if(Qt(a)&&$s(s)){const u=Hv(this.child,i),l=s3(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):ee(__(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:a,as:s}=this.getCardinalityAggregateForChild(),u=[];for(const c of li){const f=this.facet[c];if(f){u.push(ae(f));const{bin:d,sort:h}=f;if(it(d)&&u.push(ae(f,{binSuffix:"end"})),Io(h)){const{field:p,op:g=pv}=h,m=h3(f,h);r&&i?(o.push(m),a.push("max"),s.push(m)):(o.push(p),a.push(g),s.push(m))}else if(J(h)){const p=Nf(f,c);o.push(p),a.push("max"),s.push(p)}}}const l=!!r&&!!i;return Object.assign({name:t,data:n,groupby:u},l||o.length>0?{aggregate:Object.assign(Object.assign({},l?{cross:l}:{}),o.length?{fields:o,ops:a,as:s}:{})}:{})}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Io(r.sort)?[h3(r,r.sort,{expr:"datum"})]:J(r.sort)?[Nf(r,t,{expr:"datum"})]:[ae(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Io(i)?i.order:!J(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var t;const{facet:n,config:r}=this;if(n.facet)return VA(n.facet,"facet",r);const i={row:["top","bottom"],column:["left","right"]};for(const o of GA)if(n[o]){const a=Mf("labelOrient",(t=n[o])===null||t===void 0?void 0:t.header,r,o);if(i[o].includes(a))return VA(n[o],o,r)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=NSe(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},o?{title:o}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:li.map(u=>this.facetSortFields(u)).flat(),order:li.map(u=>this.facetSortOrder(u)).flat()}}),r.length>0?{data:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup(Bxe(this,[])))]}getMapping(){return this.facet}}function zSe(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(Io(o.sort)){const{field:a,op:s=pv}=o.sort;e=i=new wl(e,{joinaggregate:[{op:s,field:a,as:h3(o,o.sort,{forAs:!0})}],groupby:[ae(o)]})}return i}return null}function aU(e,t){var n,r,i,o;for(const a of t){const s=a.data;if(e.name&&a.hasName()&&e.name!==a.dataName)continue;const u=(n=e.format)===null||n===void 0?void 0:n.mesh,l=(r=s.format)===null||r===void 0?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)===null||i===void 0?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(o=s.format)===null||o===void 0?void 0:o.mesh;if(!((u||f)&&u!==f)){if(Yp(e)&&Yp(s)){if(Co(e.values,s.values))return a}else if(Ef(e)&&Ef(s)){if(e.url===s.url)return a}else if(T7(e)&&e.name===a.dataName)return a}}return null}function $Se(e,t){if(e.data||!e.parent){if(e.data===null){const r=new bl({values:[]});return t.push(r),r}const n=aU(e.data,t);if(n)return Gs(e.data)||(n.data.format=Vz({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new bl(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function BSe(e,t,n){var r,i;let o=0;for(const a of t.transforms){let s,u;if(Sxe(a))u=e=new Tf(e,a),s="derived";else if(AA(a)){const l=Cwe(a);u=e=(r=Tn.makeWithAncestors(e,{},l,n))!==null&&r!==void 0?r:e,e=new Af(e,t,a.filter)}else if(x7(a))u=e=Ho.makeFromTransform(e,a,t),s="number";else if(Oxe(a))s="date",n.getWithExplicit(a.field).value===void 0&&(e=new Tn(e,{[a.field]:s}),n.set(a.field,s,!1)),u=e=Wo.makeFromTransform(e,a);else if(kxe(a))u=e=Gi.makeFromTransform(e,a),s="number",$A(t)&&(e=new Xs(e));else if(b7(a))u=e=ig.make(e,t,a,o++),s="derived";else if(bxe(a))u=e=new Df(e,a),s="number";else if(xxe(a))u=e=new wl(e,a),s="number";else if(Cxe(a))u=e=Ta.makeFromTransform(e,a),s="derived";else if(_xe(a))u=e=new Vv(e,a),s="derived";else if(wxe(a))u=e=new qv(e,a),s="derived";else if(hxe(a))u=e=new Qv(e,a),s="derived";else if(vxe(a))e=new Jv(e,a);else if(Exe(a))u=e=Sl.makeFromTransform(e,a),s="derived";else if(pxe(a))u=e=new Gv(e,a),s="derived";else if(gxe(a))u=e=new Xv(e,a),s="derived";else if(mxe(a))u=e=new Kv(e,a),s="derived";else if(yxe(a))u=e=new Yv(e,a),s="derived";else{ee(qye(a));continue}if(u&&s!==void 0)for(const l of(i=u.producedFields())!==null&&i!==void 0?i:[])n.set(l,s,!1)}return e}function eb(e){var t,n,r,i,o,a,s,u,l,c;let f=$Se(e,e.component.data.sources);const{outputNodes:d,outputNodeRefCounts:h}=e.component.data,p=e.data,m=!(p&&(Gs(p)||Ef(p)||Yp(p)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Lxe;Gs(p)?(N7(p)?f=new eg(f,p.sequence):MA(p)&&(f=new Zp(f,p.graticule)),m.parseNothing=!0):((t=p==null?void 0:p.format)===null||t===void 0?void 0:t.parse)===null&&(m.parseNothing=!0),f=(n=Tn.makeExplicit(f,e,m))!==null&&n!==void 0?n:f,f=new Xs(f);const y=e.parent&&Rf(e.parent);(Dt(e)||Vi(e))&&y&&(f=(r=Ho.makeFromEncoding(f,e))!==null&&r!==void 0?r:f),e.transforms.length>0&&(f=BSe(f,e,m));const v=Awe(e),b=_we(e);f=(i=Tn.makeWithAncestors(f,{},Object.assign(Object.assign({},v),b),m))!==null&&i!==void 0?i:f,Dt(e)&&(f=Pf.parseAll(f,e),f=rg.parseAll(f,e)),(Dt(e)||Vi(e))&&(y||(f=(o=Ho.makeFromEncoding(f,e))!==null&&o!==void 0?o:f),f=(a=Wo.makeFromEncoding(f,e))!==null&&a!==void 0?a:f,f=Tf.parseAllForSortIndex(f,e));const x=e.getDataName(ot.Raw),w=new Zn(f,x,ot.Raw,h);if(d[x]=w,f=w,Dt(e)){const M=Gi.makeFromEncoding(f,e);M&&(f=M,$A(e)&&(f=new Xs(f))),f=(s=Sl.makeFromEncoding(f,e))!==null&&s!==void 0?s:f,f=(u=Ta.makeFromEncoding(f,e))!==null&&u!==void 0?u:f}Dt(e)&&(f=(l=ng.make(f,e))!==null&&l!==void 0?l:f);const E=e.getDataName(ot.Main),S=new Zn(f,E,ot.Main,h);d[E]=S,f=S,Dt(e)&&S2e(e,S);let _=null;if(Vi(e)){const M=e.getName("facet");f=(c=zSe(f,e.facet))!==null&&c!==void 0?c:f,_=new Ff(f,e,M,S.getSource()),d[M]=_}return Object.assign(Object.assign({},e.component.data),{outputNodes:d,outputNodeRefCounts:h,raw:w,main:S,facetRoot:_,ancestorParse:m})}class USe extends f3{constructor(t,n,r,i){var o,a,s,u;super(t,"concat",n,r,i,t.resolve);(((a=(o=t.resolve)===null||o===void 0?void 0:o.axis)===null||a===void 0?void 0:a.x)==="shared"||((u=(s=t.resolve)===null||s===void 0?void 0:s.axis)===null||u===void 0?void 0:u.y)==="shared")&&ee(Wye),this.children=this.getChildren(t).map((l,c)=>v3(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=eb(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Z(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return Av(t)?t.vconcat:SA(t)?t.hconcat:t.concat}parseLayoutSize(){jSe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=YA(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},n?{title:n}:{}),r?{style:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return Object.assign(Object.assign({},t!=null?{columns:t}:{}),{bounds:"full",align:"each"})}}function WSe(e){return e===!1||e===null}const HSe=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},M9),{labelExpr:1,encode:1}),sU=Z(HSe);class p3 extends Aa{constructor(t={},n={},r=!1){super();this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new p3(Ce(this.explicit),Ce(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!WSe(this.get(t))}hasOrientSignalRef(){return ge(this.explicit.orient)}}function GSe(e,t,n){var r;const{encoding:i,config:o}=e,a=(r=Bt(i[t]))!==null&&r!==void 0?r:Bt(i[Sa(t)]),s=e.axis(t)||{},{format:u,formatType:l}=s;return gl(l)?Object.assign({text:Z_({fieldOrDatumDef:a,field:"datum.value",format:u,formatType:l,config:o})},n):n}function qSe(e){return Ro.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[ZSe(n,e)]),t),{})}const VSe={bottom:"top",top:"bottom",left:"right",right:"left"};function YSe(e){var t;const{axes:n,resolve:r}=e.component,i={top:0,bottom:0,right:0,left:0};for(const o of e.children){o.parseAxesAndHeaders();for(const a of Z(o.component.axes))r.axis[a]=XA(e.component.resolve,a),r.axis[a]==="shared"&&(n[a]=XSe(n[a],o.component.axes[a]),n[a]||(r.axis[a]="independent",delete n[a]))}for(const o of Ro){for(const a of e.children)if(!!a.component.axes[o]){if(r.axis[o]==="independent"){n[o]=((t=n[o])!==null&&t!==void 0?t:[]).concat(a.component.axes[o]);for(const s of a.component.axes[o]){const{value:u,explicit:l}=s.getWithExplicit("orient");if(!ge(u)){if(i[u]>0&&!l){const c=VSe[u];i[u]>i[c]&&s.set("orient",c,!1)}i[u]++}}}delete a.component.axes[o]}if(r.axis[o]==="independent"&&n[o]&&n[o].length>1)for(const a of n[o])!!a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function XSe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const a=i.getWithExplicit("orient"),s=o.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;e[r]=KSe(i,o)}}}else return t.map(n=>n.clone());return e}function KSe(e,t){for(const n of sU){const r=Hs(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return E$(i,o);case"gridScale":return{explicit:i.explicit,value:Ft(i.value,o.value)}}return Fv(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function QSe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(ge(n.labelAngle)?n.labelAngle:Rp(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===fB(r,i))return!0}return e===n[t]}const JSe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function ZSe(e,t){var n,r,i;let o=t.axis(e);const a=new p3,s=Bt(t.encoding[e]),{mark:u,config:l}=t,c=(o==null?void 0:o.orient)||((n=l[e==="x"?"axisX":"axisY"])===null||n===void 0?void 0:n.orient)||((r=l.axis)===null||r===void 0?void 0:r.orient)||F2e(e),f=t.getScaleComponent(e).get("type"),d=k2e(e,f,c,t.config),h=o!==void 0?!o:WA("disable",l.style,o==null?void 0:o.style,d).configValue;if(a.set("disable",h,o!==void 0),h)return a;o=o||{};const p=T2e(s,o,e,l.style,d),g={fieldOrDatumDef:s,axis:o,channel:e,model:t,scaleType:f,orient:c,labelAngle:p,mark:u,config:l};for(const v of sU){const b=v in uB?uB[v](g):F9(v)?o[v]:void 0,x=b!==void 0,w=QSe(b,v,o,t,e);if(x&&w)a.set(v,b,w);else{const{configValue:E=void 0,configFrom:S=void 0}=F9(v)&&v!=="values"?WA(v,l.style,o.style,d):{},_=E!==void 0;x&&!_?a.set(v,b,w):(S!=="vgAxisConfig"||JSe.has(v)&&_||qp(E)||ge(E))&&a.set(v,E,!1)}}const m=(i=o.encoding)!==null&&i!==void 0?i:{},y=N9.reduce((v,b)=>{var x;if(!a.hasAxisPart(b))return v;const w=vB((x=m[b])!==null&&x!==void 0?x:{},t),E=b==="labels"?GSe(t,e,w):w;return E!==void 0&&!Ze(E)&&(v[b]={update:E}),v},{});return Ze(y)||a.set("encode",y,!!o.encoding||o.labelAngle!==void 0),a}function eEe({encoding:e,size:t}){for(const n of Ro){const r=yr(n);Bo(t[r])&&zo(e[n])&&(delete t[r],ee(P$(r)))}return t}function tEe(e,t,n){const r=vr(e),i=qe("orient",r,n);if(r.orient=oEe(r.type,t,i),i!==void 0&&i!==r.orient&&ee(c1e(r.orient,i)),r.type==="bar"&&r.orient){const s=qe("cornerRadiusEnd",r,n);if(s!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Tve[r.orient];for(const l of u)r[l]=s;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}return qe("opacity",r,n)===void 0&&(r.opacity=rEe(r.type,t)),qe("cursor",r,n)===void 0&&(r.cursor=nEe(r,t,n)),r}function nEe(e,t,n){return t.href||e.href||qe("href",e,n)?"pointer":e.cursor}function rEe(e,t){if(je([cv,q_,V_,Y_],e)&&!cA(t))return .7}function iEe(e,t,{graticule:n}){if(n)return!1;const r=fl("filled",e,t),i=e.type;return Ft(r,i!==cv&&i!==lv&&i!==fv)}function oEe(e,t,n){switch(e){case cv:case V_:case Y_:case n9:case bve:case vve:return}const{x:r,y:i,x2:o,y2:a}=t;switch(e){case uv:if(oe(r)&&(Kn(r.bin)||oe(i)&&i.aggregate&&!r.aggregate))return"vertical";if(oe(i)&&(Kn(i.bin)||oe(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o&&(oe(r)&&r.type===hl&&!it(r.bin)||iA(r)))return"horizontal";if(!a&&(oe(i)&&i.type===hl&&!it(i.bin)||iA(i)))return"vertical"}case fv:if(o&&!(oe(r)&&Kn(r.bin))&&a&&!(oe(i)&&Kn(i.bin)))return;case sv:if(a)return oe(i)&&Kn(i.bin)?"horizontal":"vertical";if(o)return oe(r)&&Kn(r.bin)?"vertical":"horizontal";if(e===fv){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case lv:case q_:{const s=zo(r),u=zo(i);if(n)return n;if(s&&!u)return e!=="tick"?"horizontal":"vertical";if(!s&&u)return e!=="tick"?"vertical":"horizontal";if(s&&u){const l=r,c=i,f=l.type===gf,d=c.type===gf;return f&&!d?e!=="tick"?"vertical":"horizontal":!f&&d?e!=="tick"?"horizontal":"vertical":!l.aggregate&&c.aggregate?e!=="tick"?"vertical":"horizontal":l.aggregate&&!c.aggregate&&e!=="tick"?"horizontal":"vertical"}else return}}return"vertical"}const aEe={vgMark:"arc",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},fi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),An("x",e,{defaultPos:"mid"})),An("y",e,{defaultPos:"mid"})),Vs(e,"radius")),Vs(e,"theta"))},sEe={vgMark:"area",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},fi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),Rv("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"})),Rv("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"})),LA(e))},uEe={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},fi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Vs(e,"x")),Vs(e,"y"))},lEe={vgMark:"shape",encodeEntry:e=>Object.assign({},fi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},n&&oe(n)&&n.type===mf?{field:ae(n,{expr:"datum"})}:{})]}},cEe={vgMark:"image",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},fi(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),Vs(e,"x")),Vs(e,"y")),jA(e,"url"))},fEe={vgMark:"line",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},fi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),An("x",e,{defaultPos:"mid"})),An("y",e,{defaultPos:"mid"})),Jt("size",e,{vgChannel:"strokeWidth"})),LA(e))},dEe={vgMark:"trail",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},fi(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),An("x",e,{defaultPos:"mid"})),An("y",e,{defaultPos:"mid"})),Jt("size",e)),LA(e))};function g3(e,t){const{config:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},fi(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),An("x",e,{defaultPos:"mid"})),An("y",e,{defaultPos:"mid"})),Jt("size",e)),Jt("angle",e)),hEe(e,n,t))}function hEe(e,t,n){return n?{shape:{value:n}}:Jt("shape",e)}const pEe={vgMark:"symbol",encodeEntry:e=>g3(e)},gEe={vgMark:"symbol",encodeEntry:e=>g3(e,"circle")},mEe={vgMark:"symbol",encodeEntry:e=>g3(e,"square")},yEe={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},fi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Vs(e,"x")),Vs(e,"y"))},vEe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:Object.assign(Object.assign(Object.assign(Object.assign({},fi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Rv("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),Rv("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),Jt("size",e,{vgChannel:"strokeWidth"}))}},bEe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},fi(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),An("x",e,{defaultPos:"mid"})),An("y",e,{defaultPos:"mid"})),jA(e)),Jt("size",e,{vgChannel:"fontSize"})),Jt("angle",e)),W7("align",xEe(e.markDef,n,t))),W7("baseline",wEe(e.markDef,n,t))),An("radius",e,{defaultPos:null})),An("theta",e,{defaultPos:null}))}};function xEe(e,t,n){if(qe("align",e,n)===void 0)return"center"}function wEe(e,t,n){if(qe("baseline",e,n)===void 0)return"middle"}const SEe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",o=r==="horizontal"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},fi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),An("x",e,{defaultPos:"mid",vgChannel:"xc"})),An("y",e,{defaultPos:"mid",vgChannel:"yc"})),Jt("size",e,{defaultValue:EEe(e),vgChannel:i})),{[o]:lt(qe("thickness",n,t))})}};function EEe(e){var t;const{config:n,markDef:r}=e,{orient:i}=r,o=i==="horizontal"?"width":"height",a=e.getScaleComponent(i==="horizontal"?"x":"y"),s=(t=qe("size",r,n,{vgChannel:o}))!==null&&t!==void 0?t:n.tick.bandSize;if(s!==void 0)return s;{const u=a?a.get("range"):void 0;return u&&$s(u)&&Qe(u.step)?u.step*3/4:Tv(n.view,o)*3/4}}const tb={arc:aEe,area:sEe,bar:uEe,circle:gEe,geoshape:lEe,image:cEe,line:fEe,point:pEe,rect:yEe,rule:vEe,square:mEe,text:bEe,tick:SEe,trail:dEe};function OEe(e){if(je([lv,sv,xve],e.mark)){const t=j9(e.mark,e.encoding);if(t.length>0)return kEe(e,t)}else if(e.mark===uv){const t=O_.some(n=>qe(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return CEe(e)}return m3(e)}const uU="faceted_path_";function kEe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:uU+e.requestDataName(ot.Main),data:e.requestDataName(ot.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:m3(e,{fromPrefix:uU})}]}const lU="stack_group_";function CEe(e){var t;const[n]=m3(e,{fromPrefix:lU}),r=e.scaleName(e.stack.fieldChannel),i=(c={})=>e.vgField(e.stack.fieldChannel,c),o=(c,f)=>{const d=[i({prefix:"min",suffix:"start",expr:f}),i({prefix:"max",suffix:"start",expr:f}),i({prefix:"min",suffix:"end",expr:f}),i({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${r}',${h})`).join(",")})`};let a,s;e.stack.fieldChannel==="x"?(a=Object.assign(Object.assign({},lf(n.encode.update,["y","yc","y2","height",...O_])),{x:{signal:o("min","datum")},x2:{signal:o("max","datum")},clip:{value:!0}}),s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=Object.assign(Object.assign({},zr(n.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(a=Object.assign(Object.assign({},lf(n.encode.update,["x","xc","x2","width"])),{y:{signal:o("min","datum")},y2:{signal:o("max","datum")},clip:{value:!0}}),s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=Object.assign(Object.assign({},zr(n.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const c of O_){const f=fl(c,e.markDef,e.config);n.encode.update[c]?(a[c]=n.encode.update[c],delete n.encode.update[c]):f&&(a[c]=lt(f)),f&&(n.encode.update[c]={value:0})}const u=[];if(((t=e.stack.groupbyChannels)===null||t===void 0?void 0:t.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=ae(f);d&&u.push(d),((f==null?void 0:f.bin)||(f==null?void 0:f.timeUnit))&&u.push(ae(f,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(n.encode.update[f])return Object.assign(Object.assign({},c),{[f]:n.encode.update[f]});{const d=fl(f,e.markDef,e.config);return d!==void 0?Object.assign(Object.assign({},c),{[f]:lt(d)}):c}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(ot.Main),name:lU+e.requestDataName(ot.Main),groupby:u,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[n]}]}]}function _Ee(e){var t;const{encoding:n,stack:r,mark:i,markDef:o,config:a}=e,s=n.order;if(!(!J(s)&&Hi(s)&&l_(s.value)||!s&&l_(qe("order",o,a)))){if((J(s)||oe(s))&&!r)return x$(s,{expr:"datum"});if(Bs(i)){const u=o.orient==="horizontal"?"y":"x",l=n[u];if(oe(l)){const c=l.sort;if(J(c))return{field:ae(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Io(c))return{field:ae({aggregate:cA(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(m9(c)){const f=e.fieldDef(c.encoding);return{field:ae(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:ae(l,{binSuffix:((t=e.stack)===null||t===void 0?void 0:t.impute)?"mid":void 0,expr:"datum"})}}return}}}function m3(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,a=Ft(r.clip,AEe(e),TEe(e)),s=v$(r),u=i.key,l=_Ee(e),c=NEe(e),f=qe("aria",r,o),d=tb[n].postEncodingTransform?tb[n].postEncodingTransform(e):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("marks"),type:tb[n].vgMark},a?{clip:!0}:{}),s?{style:s}:{}),u?{key:u.field}:{}),l?{sort:l}:{}),c||{}),f===!1?{aria:f}:{}),{from:{data:t.fromPrefix+e.requestDataName(ot.Main)},encode:{update:tb[n].encodeEntry(e)}}),d?{transform:d}:{})]}function AEe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return(t==null?void 0:t.get("selectionExtent"))||(n==null?void 0:n.get("selectionExtent"))?!0:void 0}function TEe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function NEe(e){if(!e.component.selection)return null;const t=Z(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Z(r.component.selection).length,r=r.parent;return n?{interactive:t>0||!!e.encoding.tooltip}:null}class cU extends nU{constructor(t,n,r,i={},o){var a;super(t,"unit",n,r,o,void 0,n7(t)?t.view:void 0);this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const s=jo(t.mark)?Object.assign({},t.mark):{type:t.mark},u=s.type;s.filled===void 0&&(s.filled=iEe(s,o,{graticule:t.data&&MA(t.data)}));const l=this.encoding=abe(t.encoding||{},u,s.filled,o);this.markDef=tEe(s,l,o),this.size=eEe({encoding:l,size:n7(t)?Object.assign(Object.assign(Object.assign({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):i}),this.stack=c7(u,l),this.specifiedScales=this.initScales(u,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=((a=t.params)!==null&&a!==void 0?a:[]).filter(c=>xA(c))}get hasProjection(){const{encoding:t}=this,n=this.mark===r9,r=t&&nye.some(i=>Oe(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return nv.reduce((r,i)=>{var o;const a=Bt(n[i]);return a&&(r[i]=this.initScale((o=a.scale)!==null&&o!==void 0?o:{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=vr(t);return J(n)&&(i.domain=n.map($r)),J(r)&&(i.range=r.map($r)),i}initAxes(t){return Ro.reduce((n,r)=>{const i=t[r];if(Oe(i)||r===mt&&Oe(t.x2)||r===Kt&&Oe(t.y2)){const o=Oe(i)?i.axis:void 0;n[r]=o&&this.initAxis(Object.assign({},o))}return n},{})}initAxis(t){const n=Z(t),r={};for(const i of n){const o=t[i];r[i]=qp(o)?g$(o):$r(o)}return r}initLegends(t){return dye.reduce((n,r)=>{const i=Bt(t[r]);if(i&&pye(r)){const o=i.legend;n[r]=o&&vr(o)}return n},{})}parseData(){this.component.data=eb(this)}parseLayoutSize(){ISe(this)}parseSelections(){this.component.selection=w2e(this,this.selection)}parseMarkGroup(){this.component.mark=OEe(this)}parseAxesAndHeaders(){this.component.axes=qSe(this)}assembleSelectionTopLevelSignals(t){return Uxe(this,t)}assembleSignals(){return[...aB(this),...$xe(this,[])]}assembleSelectionData(t){return Wxe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return YA(this)}assembleMarks(){var t;let n=(t=this.component.mark)!==null&&t!==void 0?t:[];return(!this.parent||!Rf(this.parent))&&(n=F7(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};if(t!==void 0)return t;if(this.encoding.x||this.encoding.y)return"cell"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return yl(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return $o(n)}typedFieldDef(t){const n=this.fieldDef(t);return ci(n)?n:null}}class y3 extends f3{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const a=Object.assign(Object.assign(Object.assign({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((s,u)=>{if(Mv(s))return new y3(s,this,this.getName(`layer_${u}`),a,o);if(Ca(s))return new cU(s,this,this.getName(`layer_${u}`),a,o);throw new Error(C_(s))})}parseData(){this.component.data=eb(this);for(const t of this.children)t.parseData()}parseLayoutSize(){PSe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Z(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){YSe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),aB(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),YA(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of ue(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Hxe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),TB(this))}}function v3(e,t,n,r,i){if(gv(e))return new og(e,t,n,i);if(Mv(e))return new y3(e,t,n,r,i);if(Ca(e))return new cU(e,t,n,r,i);if(Mbe(e))return new USe(e,t,n,i);throw new Error(C_(e))}var MEe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function FEe(e,t={}){t.logger&&P1e(t.logger),t.fieldTitle&&C9(t.fieldTitle);try{const n=u7(oc(t.config,e.config)),r=k7(e,n),i=v3(r,null,"",void 0,n);return i.parse(),Hwe(i.component.data,i),{spec:REe(i,DEe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&j1e(),t.fieldTitle&&Kve()}}function DEe(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):se(t)&&(t={type:t}),i&&o&&Pxe(t.type)){if(i==="step"&&o==="step")ee(C$()),t.type="pad";else if(i==="step"||o==="step"){const a=i==="step"?"width":"height";ee(C$(tv(a)));const s=a==="width"?"height":"width";t.type=jxe(s)}}return Object.assign(Object.assign(Object.assign({},Z(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t}),_7(n,!1)),_7(e,!0))}function REe(e,t,n={},r){const i=e.config?qbe(e.config):void 0,o=[].concat(e.assembleSelectionData([]),MSe(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f}=t,d=MEe(t,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),d),s?{title:s}:{}),u?{style:u}:{}),l?{encode:{update:l}}:{}),{data:o}),a.length>0?{projections:a}:{}),e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...e7(f)])),i?{config:i}:{}),r?{usermeta:r}:{})}const PEe=q0e.version;var jEe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",version:PEe,compile:FEe,normalize:k7,deepEqual:Co,duplicate:Ce,never:qz,pick:lf,omit:zr,stringify:rt,hash:Pe,isNullOrFalse:l_,contains:je,some:ol,every:c_,mergeDeep:Vz,unique:_o,isEqual:K0e,setEqual:Yz,hasIntersection:f_,prefixGenerator:d_,fieldIntersection:h_,isEmpty:Ze,keys:Z,vals:_n,entries:Ns,isBoolean:Mp,varName:ht,logicalExpr:Fp,deleteNestedProperty:Y1,titleCase:Dp,accessPathWithDatum:p_,flatAccessWithDatum:Xz,replacePathInField:si,replaceAll:al,removePathFromField:g_,accessPathDepth:cf,getFirstDefined:Ft,uniqueId:Qz,resetIdCounter:J0e,internalField:Jz,isInternalField:Zz,normalizeAngle:Rp,isNumeric:X1});function fU(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var IEe="vega-themes",LEe="2.10.0",zEe="Themes for stylized Vega and Vega-Lite visualizations.",$Ee=["vega","vega-lite","themes","style"],BEe="BSD-3-Clause",UEe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},WEe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],HEe="build/vega-themes.js",GEe="build/vega-themes.module.js",qEe="build/vega-themes.min.js",VEe="build/vega-themes.min.js",YEe="build/vega-themes.module.d.ts",XEe={type:"git",url:"https://github.com/vega/vega-themes.git"},KEe=["src","build"],QEe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",prepare:"beemo create-config",eslintbase:"beemo eslint .",format:"yarn eslintbase --fix",lint:"yarn eslintbase"},JEe={"@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^11.2.0","@wessberg/rollup-plugin-ts":"^1.3.8","browser-sync":"^2.26.14",concurrently:"^6.0.0","gh-pages":"^3.1.0",rollup:"^2.39.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-terser":"^7.0.2",typescript:"^4.2.2",vega:"^5.19.1","vega-lite":"^5.0.0","vega-lite-dev-config":"^0.16.1"},ZEe={vega:"*","vega-lite":"*"},eOe={name:IEe,version:LEe,description:zEe,keywords:$Ee,license:BEe,author:UEe,contributors:WEe,main:HEe,module:GEe,unpkg:qEe,jsdelivr:VEe,types:YEe,repository:XEe,files:KEe,scripts:QEe,devDependencies:JEe,peerDependencies:ZEe};const jf="#fff",tOe="#888",nOe={background:"#333",title:{color:jf,subtitleColor:jf},style:{"guide-label":{fill:jf},"guide-title":{fill:jf}},axis:{domainColor:jf,gridColor:tOe,tickColor:jf}},El="#4572a7",rOe={background:"#fff",arc:{fill:El},area:{fill:El},line:{stroke:El,strokeWidth:2},path:{stroke:El},rect:{fill:El},shape:{stroke:El},symbol:{fill:El,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Ol="#30a2da",b3="#cbcbcb",iOe="#999",oOe="#333",dU="#f0f0f0",hU="#333",aOe={arc:{fill:Ol},area:{fill:Ol},axis:{domainColor:b3,grid:!0,gridColor:b3,gridWidth:1,labelColor:iOe,labelFontSize:10,titleColor:oOe,tickColor:b3,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:dU,group:{fill:dU},legend:{labelColor:hU,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:hU,titleFontSize:14,titlePadding:10},line:{stroke:Ol,strokeWidth:2},path:{stroke:Ol,strokeWidth:.5},rect:{fill:Ol},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Ol},bar:{binSpacing:2,fill:Ol,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},kl="#000",sOe={group:{fill:"#e5e5e5"},arc:{fill:kl},area:{fill:kl},line:{stroke:kl},path:{stroke:kl},rect:{fill:kl},shape:{stroke:kl},symbol:{fill:kl,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},uOe=22,lOe="normal",pU="Benton Gothic, sans-serif",gU=11.5,cOe="normal",Cl="#82c6df",x3="Benton Gothic Bold, sans-serif",mU="normal",yU=13,ag={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},fOe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:x3,fontSize:uOe,fontWeight:lOe},arc:{fill:Cl},area:{fill:Cl},line:{stroke:Cl,strokeWidth:2},path:{stroke:Cl},rect:{fill:Cl},shape:{stroke:Cl},symbol:{fill:Cl,size:30},axis:{labelFont:pU,labelFontSize:gU,labelFontWeight:cOe,titleFont:x3,titleFontSize:yU,titleFontWeight:mU},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:pU,labelFontSize:gU,symbolType:"square",titleFont:x3,titleFontSize:yU,titleFontWeight:mU},range:{category:ag["category-6"],diverging:ag["fireandice-6"],heatmap:ag["fire-7"],ordinal:ag["fire-7"],ramp:ag["fire-7"]}},_l="#ab5787",nb="#979797",dOe={background:"#f9f9f9",arc:{fill:_l},area:{fill:_l},line:{stroke:_l},path:{stroke:_l},rect:{fill:_l},shape:{stroke:_l},symbol:{fill:_l,size:30},axis:{domainColor:nb,domainWidth:.5,gridWidth:.2,labelColor:nb,tickColor:nb,tickWidth:.2,titleColor:nb},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Al="#3e5c69",hOe={background:"#fff",arc:{fill:Al},area:{fill:Al},line:{stroke:Al},path:{stroke:Al},rect:{fill:Al},shape:{stroke:Al},symbol:{fill:Al},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},di="#1696d2",vU="#000000",pOe="#FFFFFF",rb="Lato",w3="Lato",gOe="Lato",mOe="#DEDDDD",yOe=18,sg={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},vOe={background:pOe,title:{anchor:"start",fontSize:yOe,font:rb},axisX:{domain:!0,domainColor:vU,domainWidth:1,grid:!1,labelFontSize:12,labelFont:w3,labelAngle:0,tickColor:vU,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:rb},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:mOe,gridWidth:1,labelFontSize:12,labelFont:w3,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:rb,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:w3,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:rb,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:sg["six-groups-cat-1"],diverging:sg["diverging-colors"],heatmap:sg["diverging-colors"],ordinal:sg["six-groups-seq"],ramp:sg["shades-blue"]},area:{fill:di},rect:{fill:di},line:{color:di,stroke:di,strokeWidth:5},trail:{color:di,stroke:di,strokeWidth:0,size:1},path:{stroke:di,strokeWidth:.5},point:{filled:!0},text:{font:gOe,color:di,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:di,stroke:null}},arc:{fill:di},shape:{stroke:di},symbol:{fill:di,size:30}},Tl="#3366CC",bU="#ccc",ib="Arial, sans-serif",bOe={arc:{fill:Tl},area:{fill:Tl},path:{stroke:Tl},rect:{fill:Tl},shape:{stroke:Tl},symbol:{stroke:Tl},circle:{fill:Tl},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:ib,fontSize:12},"guide-title":{font:ib,fontSize:12},"group-title":{font:ib,fontSize:12}},title:{font:ib,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:bU,tickColor:bU,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},xOe=eOe.version;var wOe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",dark:nOe,excel:rOe,fivethirtyeight:aOe,ggplot2:sOe,googlecharts:bOe,latimes:fOe,quartz:dOe,urbaninstitute:vOe,version:xOe,vox:hOe});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function SOe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function EOe(e,t,n){if(J(e))return`[${e.map(r=>t(se(r)?r:xU(r,n))).join(", ")}]`;if(ce(e)){let r="";const i=e,{title:o,image:a}=i,s=SOe(i,["title","image"]);o&&(r+=`<h2>${t(o)}</h2>`),a&&(r+=`<img src="${t(a)}">`);const u=Object.keys(s);if(u.length>0){r+="<table>";for(const l of u){let c=s[l];c!==void 0&&(ce(c)&&(c=xU(c,n)),r+=`<tr><td class="key">${t(l)}:</td><td class="value">${t(c)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function OOe(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function xU(e,t){return JSON.stringify(e,OOe(t))}var kOe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black; }
  #vg-tooltip-element.visible {
    visibility: visible; }
  #vg-tooltip-element h2 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 13px; }
  #vg-tooltip-element img {
    max-width: 200px;
    max-height: 200px; }
  #vg-tooltip-element table {
    border-spacing: 0; }
    #vg-tooltip-element table tr {
      border: none; }
      #vg-tooltip-element table tr td {
        overflow: hidden;
        text-overflow: ellipsis;
        padding-top: 2px;
        padding-bottom: 2px; }
        #vg-tooltip-element table tr td.key {
          color: #808080;
          max-width: 150px;
          text-align: right;
          padding-right: 4px; }
        #vg-tooltip-element table tr td.value {
          display: block;
          max-width: 300px;
          max-height: 7em;
          text-align: left; }
  #vg-tooltip-element.dark-theme {
    background-color: rgba(32, 32, 32, 0.9);
    border: 1px solid #f5f5f5;
    color: white; }
    #vg-tooltip-element.dark-theme td.key {
      color: #bfbfbf; }
`;const wU="vg-tooltip-element",COe={offsetX:10,offsetY:10,id:wU,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:_Oe,maxDepth:2,formatTooltip:EOe};function _Oe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function AOe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return kOe.toString().replace(wU,e)}function TOe(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}class NOe{constructor(t){this.options=Object.assign(Object.assign({},COe),t);const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=AOe(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){var o;if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el)),((o=document.fullscreenElement)!==null&&o!==void 0?o:document.body).appendChild(this.el),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:u}=TOe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${u}px; left: ${s}px`)}}function MOe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SU(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(l){n(l);return}s.done?t(u):Promise.resolve(u).then(r,i)}function ob(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(u){SU(o,r,i,a,s,"next",u)}function s(u){SU(o,r,i,a,s,"throw",u)}a(void 0)})}}var EU=Object.prototype,Nl=EU.hasOwnProperty,Go,S3=typeof Symbol=="function"?Symbol:{},ab=S3.iterator||"@@iterator",FOe=S3.asyncIterator||"@@asyncIterator",sb=S3.toStringTag||"@@toStringTag";function OU(e,t,n,r){var i=t&&t.prototype instanceof O3?t:O3,o=Object.create(i.prototype),a=new A3(r||[]);return o._invoke=IOe(e,n,a),o}function E3(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}var kU="suspendedStart",DOe="suspendedYield",CU="executing",ub="completed",Yi={};function O3(){}function lb(){}function If(){}var k3={};k3[ab]=function(){return this};var C3=Object.getPrototypeOf,cb=C3&&C3(C3(T3([])));cb&&cb!==EU&&Nl.call(cb,ab)&&(k3=cb);var Lf=If.prototype=O3.prototype=Object.create(k3);lb.prototype=Lf.constructor=If;If.constructor=lb;If[sb]=lb.displayName="GeneratorFunction";function _U(e){["next","throw","return"].forEach(function(t){e[t]=function(n){return this._invoke(t,n)}})}function AU(e){var t=typeof e=="function"&&e.constructor;return t?t===lb||(t.displayName||t.name)==="GeneratorFunction":!1}function ROe(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,If):(e.__proto__=If,sb in e||(e[sb]="GeneratorFunction")),e.prototype=Object.create(Lf),e}function POe(e){return{__await:e}}function fb(e,t){function n(o,a,s,u){var l=E3(e[o],e,a);if(l.type==="throw")u(l.arg);else{var c=l.arg,f=c.value;return f&&typeof f=="object"&&Nl.call(f,"__await")?t.resolve(f.__await).then(function(d){n("next",d,s,u)},function(d){n("throw",d,s,u)}):t.resolve(f).then(function(d){c.value=d,s(c)},function(d){return n("throw",d,s,u)})}}var r;function i(o,a){function s(){return new t(function(u,l){n(o,a,u,l)})}return r=r?r.then(s,s):s()}this._invoke=i}_U(fb.prototype);fb.prototype[FOe]=function(){return this};function jOe(e,t,n,r,i){i===void 0&&(i=Promise);var o=new fb(OU(e,t,n,r),i);return AU(t)?o:o.next().then(function(a){return a.done?a.value:o.next()})}function IOe(e,t,n){var r=kU;return function(o,a){if(r===CU)throw new Error("Generator is already running");if(r===ub){if(o==="throw")throw a;return NU()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=TU(s,n);if(u){if(u===Yi)continue;return u}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(r===kU)throw r=ub,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);r=CU;var l=E3(e,t,n);if(l.type==="normal"){if(r=n.done?ub:DOe,l.arg===Yi)continue;return{value:l.arg,done:n.done}}else l.type==="throw"&&(r=ub,n.method="throw",n.arg=l.arg)}}}function TU(e,t){var n=e.iterator[t.method];if(n===Go){if(t.delegate=null,t.method==="throw"){if(e.iterator.return&&(t.method="return",t.arg=Go,TU(e,t),t.method==="throw"))return Yi;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return Yi}var r=E3(n,e.iterator,t.arg);if(r.type==="throw")return t.method="throw",t.arg=r.arg,t.delegate=null,Yi;var i=r.arg;if(!i)return t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,Yi;if(i.done)t[e.resultName]=i.value,t.next=e.nextLoc,t.method!=="return"&&(t.method="next",t.arg=Go);else return i;return t.delegate=null,Yi}_U(Lf);Lf[sb]="Generator";Lf[ab]=function(){return this};Lf.toString=function(){return"[object Generator]"};function LOe(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _3(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A3(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(LOe,this),this.reset(!0)}function zOe(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function r(){for(;t.length;){var i=t.pop();if(i in e)return r.value=i,r.done=!1,r}return r.done=!0,r}}function T3(e){if(e){var t=e[ab];if(t)return t.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var n=-1,r=function i(){for(;++n<e.length;)if(Nl.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=Go,i.done=!0,i};return r.next=r}}return{next:NU}}function NU(){return{value:Go,done:!0}}A3.prototype={constructor:A3,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=Go,this.done=!1,this.delegate=null,this.method="next",this.arg=Go,this.tryEntries.forEach(_3),!t)for(var n in this)n.charAt(0)==="t"&&Nl.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=Go)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if(n.type==="throw")throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(l,c){return a.type="throw",a.arg=t,n.next=l,c&&(n.method="next",n.arg=Go),!!c}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if(o.tryLoc==="root")return r("end");if(o.tryLoc<=this.prev){var s=Nl.call(o,"catchLoc"),u=Nl.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else if(u){if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&Nl.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&(t==="break"||t==="continue")&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=n,o?(this.method="next",this.next=o.finallyLoc,Yi):this.complete(a)},complete:function(t,n){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&n&&(this.next=n),Yi},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_3(r),Yi}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if(i.type==="throw"){var o=i.arg;_3(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T3(t),resultName:n,nextLoc:r},this.method==="next"&&(this.arg=Go),Yi}};var qo={wrap:OU,isGeneratorFunction:AU,AsyncIterator:fb,mark:ROe,awrap:POe,async:jOe,keys:zOe,values:T3},$Oe=We;We.Node=Ml;We.create=We;function We(e){var t=this;if(t instanceof We||(t=new We),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}We.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};We.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};We.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};We.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)UOe(this,arguments[e]);return this.length};We.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)WOe(this,arguments[e]);return this.length};We.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};We.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};We.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};We.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};We.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};We.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};We.prototype.map=function(e,t){t=t||this;for(var n=new We,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};We.prototype.mapReverse=function(e,t){t=t||this;for(var n=new We,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};We.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};We.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};We.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};We.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};We.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new We;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};We.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new We;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};We.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,r=this.head;r!==null&&n<e;n++)r=r.next;for(var i=[],n=0;r&&n<t;n++)i.push(r.value),r=this.removeNode(r);r===null&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(var n=0;n<(arguments.length<=2?0:arguments.length-2);n++)r=BOe(this,r,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return i};We.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function BOe(e,t,n){var r=t===e.head?new Ml(n,null,t,e):new Ml(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function UOe(e,t){e.tail=new Ml(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function WOe(e,t){e.head=new Ml(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Ml(e,t,n,r){if(!(this instanceof Ml))return new Ml(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{We.prototype[Symbol.iterator]=qo.mark(function e(){var t;return qo.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t=this.head;case 1:if(!t){r.next=7;break}return r.next=4,t.value;case 4:t=t.next,r.next=1;break;case 7:case"end":return r.stop()}},e,this)})}catch{}var HOe=$Oe,Fl=Symbol("max"),Na=Symbol("length"),zf=Symbol("lengthCalculator"),ug=Symbol("allowStale"),Dl=Symbol("maxAge"),Ma=Symbol("dispose"),MU=Symbol("noDisposeOnSet"),Zt=Symbol("lruList"),Xi=Symbol("cache"),FU=Symbol("updateAgeOnGet"),N3=()=>1;class GOe{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Fl]=t.max||1/0;var n=t.length||N3;if(this[zf]=typeof n!="function"?N3:n,this[ug]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Dl]=t.maxAge||0,this[Ma]=t.dispose,this[MU]=t.noDisposeOnSet||!1,this[FU]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Fl]=t||1/0,lg(this)}get max(){return this[Fl]}set allowStale(t){this[ug]=!!t}get allowStale(){return this[ug]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Dl]=t,lg(this)}get maxAge(){return this[Dl]}set lengthCalculator(t){typeof t!="function"&&(t=N3),t!==this[zf]&&(this[zf]=t,this[Na]=0,this[Zt].forEach(n=>{n.length=this[zf](n.value,n.key),this[Na]+=n.length})),lg(this)}get lengthCalculator(){return this[zf]}get length(){return this[Na]}get itemCount(){return this[Zt].length}rforEach(t,n){n=n||this;for(var r=this[Zt].tail;r!==null;){var i=r.prev;DU(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(var r=this[Zt].head;r!==null;){var i=r.next;DU(this,t,r,n),r=i}}keys(){return this[Zt].toArray().map(t=>t.key)}values(){return this[Zt].toArray().map(t=>t.value)}reset(){this[Ma]&&this[Zt]&&this[Zt].length&&this[Zt].forEach(t=>this[Ma](t.key,t.value)),this[Xi]=new Map,this[Zt]=new HOe,this[Na]=0}dump(){return this[Zt].map(t=>db(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Zt]}set(t,n,r){if(r=r||this[Dl],r&&typeof r!="number")throw new TypeError("maxAge must be a number");var i=r?Date.now():0,o=this[zf](n,t);if(this[Xi].has(t)){if(o>this[Fl])return $f(this,this[Xi].get(t)),!1;var a=this[Xi].get(t),s=a.value;return this[Ma]&&(this[MU]||this[Ma](t,s.value)),s.now=i,s.maxAge=r,s.value=n,this[Na]+=o-s.length,s.length=o,this.get(t),lg(this),!0}var u=new qOe(t,n,o,i,r);return u.length>this[Fl]?(this[Ma]&&this[Ma](t,n),!1):(this[Na]+=u.length,this[Zt].unshift(u),this[Xi].set(t,this[Zt].head),lg(this),!0)}has(t){if(!this[Xi].has(t))return!1;var n=this[Xi].get(t).value;return!db(this,n)}get(t){return M3(this,t,!0)}peek(t){return M3(this,t,!1)}pop(){var t=this[Zt].tail;return t?($f(this,t),t.value):null}del(t){$f(this,this[Xi].get(t))}load(t){this.reset();for(var n=Date.now(),r=t.length-1;r>=0;r--){var i=t[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{var a=o-n;a>0&&this.set(i.k,i.v,a)}}}prune(){this[Xi].forEach((t,n)=>M3(this,n,!1))}}var M3=(e,t,n)=>{var r=e[Xi].get(t);if(r){var i=r.value;if(db(e,i)){if($f(e,r),!e[ug])return}else n&&(e[FU]&&(r.value.now=Date.now()),e[Zt].unshiftNode(r));return i.value}},db=(e,t)=>{if(!t||!t.maxAge&&!e[Dl])return!1;var n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Dl]&&n>e[Dl]},lg=e=>{if(e[Na]>e[Fl])for(var t=e[Zt].tail;e[Na]>e[Fl]&&t!==null;){var n=t.prev;$f(e,t),t=n}},$f=(e,t)=>{if(t){var n=t.value;e[Ma]&&e[Ma](n.key,n.value),e[Na]-=n.length,e[Xi].delete(n.key),e[Zt].removeNode(t)}};class qOe{constructor(t,n,r,i,o){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}}var DU=(e,t,n,r)=>{var i=n.value;db(e,i)&&($f(e,n),e[ug]||(i=void 0)),i&&t.call(r,i.value,i.key,e)},VOe=GOe,YOe=["includePrerelease","loose","rtl"],XOe=e=>e?typeof e!="object"?{loose:!0}:YOe.filter(t=>e[t]).reduce((t,n)=>(t[n]=!0,t),{}):{},F3=XOe,Ki={exports:{}},KOe="2.0.0",QOe=256,JOe=Number.MAX_SAFE_INTEGER||9007199254740991,ZOe=16,D3={SEMVER_SPEC_VERSION:KOe,MAX_LENGTH:QOe,MAX_SAFE_INTEGER:JOe,MAX_SAFE_COMPONENT_LENGTH:ZOe},eke=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.error("SEMVER",...t)}:()=>{},hb=eke;(function(e,t){var n=D3.MAX_SAFE_COMPONENT_LENGTH,r=hb;t=e.exports={};var i=t.re=[],o=t.src=[],a=t.t={},s=0,u=(l,c,f)=>{var d=s++;r(d,c),a[l]=d,o[d]=c,i[d]=new RegExp(c,f?"g":void 0)};u("NUMERICIDENTIFIER","0|[1-9]\\d*"),u("NUMERICIDENTIFIERLOOSE","[0-9]+"),u("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),u("MAINVERSION","(".concat(o[a.NUMERICIDENTIFIER],")\\.")+"(".concat(o[a.NUMERICIDENTIFIER],")\\.")+"(".concat(o[a.NUMERICIDENTIFIER],")")),u("MAINVERSIONLOOSE","(".concat(o[a.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[a.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[a.NUMERICIDENTIFIERLOOSE],")")),u("PRERELEASEIDENTIFIER","(?:".concat(o[a.NUMERICIDENTIFIER],"|").concat(o[a.NONNUMERICIDENTIFIER],")")),u("PRERELEASEIDENTIFIERLOOSE","(?:".concat(o[a.NUMERICIDENTIFIERLOOSE],"|").concat(o[a.NONNUMERICIDENTIFIER],")")),u("PRERELEASE","(?:-(".concat(o[a.PRERELEASEIDENTIFIER],"(?:\\.").concat(o[a.PRERELEASEIDENTIFIER],")*))")),u("PRERELEASELOOSE","(?:-?(".concat(o[a.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(o[a.PRERELEASEIDENTIFIERLOOSE],")*))")),u("BUILDIDENTIFIER","[0-9A-Za-z-]+"),u("BUILD","(?:\\+(".concat(o[a.BUILDIDENTIFIER],"(?:\\.").concat(o[a.BUILDIDENTIFIER],")*))")),u("FULLPLAIN","v?".concat(o[a.MAINVERSION]).concat(o[a.PRERELEASE],"?").concat(o[a.BUILD],"?")),u("FULL","^".concat(o[a.FULLPLAIN],"$")),u("LOOSEPLAIN","[v=\\s]*".concat(o[a.MAINVERSIONLOOSE]).concat(o[a.PRERELEASELOOSE],"?").concat(o[a.BUILD],"?")),u("LOOSE","^".concat(o[a.LOOSEPLAIN],"$")),u("GTLT","((?:<|>)?=?)"),u("XRANGEIDENTIFIERLOOSE","".concat(o[a.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),u("XRANGEIDENTIFIER","".concat(o[a.NUMERICIDENTIFIER],"|x|X|\\*")),u("XRANGEPLAIN","[v=\\s]*(".concat(o[a.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[a.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[a.XRANGEIDENTIFIER],")")+"(?:".concat(o[a.PRERELEASE],")?").concat(o[a.BUILD],"?")+")?)?"),u("XRANGEPLAINLOOSE","[v=\\s]*(".concat(o[a.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[a.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[a.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(o[a.PRERELEASELOOSE],")?").concat(o[a.BUILD],"?")+")?)?"),u("XRANGE","^".concat(o[a.GTLT],"\\s*").concat(o[a.XRANGEPLAIN],"$")),u("XRANGELOOSE","^".concat(o[a.GTLT],"\\s*").concat(o[a.XRANGEPLAINLOOSE],"$")),u("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(n,"})")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:$|[^\\d])"),u("COERCERTL",o[a.COERCE],!0),u("LONETILDE","(?:~>?)"),u("TILDETRIM","(\\s*)".concat(o[a.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",u("TILDE","^".concat(o[a.LONETILDE]).concat(o[a.XRANGEPLAIN],"$")),u("TILDELOOSE","^".concat(o[a.LONETILDE]).concat(o[a.XRANGEPLAINLOOSE],"$")),u("LONECARET","(?:\\^)"),u("CARETTRIM","(\\s*)".concat(o[a.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",u("CARET","^".concat(o[a.LONECARET]).concat(o[a.XRANGEPLAIN],"$")),u("CARETLOOSE","^".concat(o[a.LONECARET]).concat(o[a.XRANGEPLAINLOOSE],"$")),u("COMPARATORLOOSE","^".concat(o[a.GTLT],"\\s*(").concat(o[a.LOOSEPLAIN],")$|^$")),u("COMPARATOR","^".concat(o[a.GTLT],"\\s*(").concat(o[a.FULLPLAIN],")$|^$")),u("COMPARATORTRIM","(\\s*)".concat(o[a.GTLT],"\\s*(").concat(o[a.LOOSEPLAIN],"|").concat(o[a.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",u("HYPHENRANGE","^\\s*(".concat(o[a.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(o[a.XRANGEPLAIN],")")+"\\s*$"),u("HYPHENRANGELOOSE","^\\s*(".concat(o[a.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(o[a.XRANGEPLAINLOOSE],")")+"\\s*$"),u("STAR","(<|>)?=?\\s*\\*"),u("GTE0","^\\s*>=\\s*0.0.0\\s*$"),u("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")})(Ki,Ki.exports);var RU=/^[0-9]+$/,PU=(e,t)=>{var n=RU.test(e),r=RU.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},tke=(e,t)=>PU(t,e),nke={compareIdentifiers:PU,rcompareIdentifiers:tke},pb=hb,jU=D3.MAX_LENGTH,gb=D3.MAX_SAFE_INTEGER,IU=Ki.exports.re,LU=Ki.exports.t,rke=F3,cg=nke.compareIdentifiers;class Qi{constructor(t,n){if(n=rke(n),t instanceof Qi){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: ".concat(t));if(t.length>jU)throw new TypeError("version is longer than ".concat(jU," characters"));pb("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var r=t.trim().match(n.loose?IU[LU.LOOSE]:IU[LU.FULL]);if(!r)throw new TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>gb||this.major<0)throw new TypeError("Invalid major version");if(this.minor>gb||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>gb||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){var o=+i;if(o>=0&&o<gb)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(t){if(pb("SemVer.compare",this.version,this.options,t),!(t instanceof Qi)){if(typeof t=="string"&&t===this.version)return 0;t=new Qi(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Qi||(t=new Qi(t,this.options)),cg(this.major,t.major)||cg(this.minor,t.minor)||cg(this.patch,t.patch)}comparePre(t){if(t instanceof Qi||(t=new Qi(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var n=0;do{var r=this.prerelease[n],i=t.prerelease[n];if(pb("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return cg(r,i)}while(++n)}compareBuild(t){t instanceof Qi||(t=new Qi(t,this.options));var n=0;do{var r=this.build[n],i=t.build[n];if(pb("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return cg(r,i)}while(++n)}inc(t,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}n&&(this.prerelease[0]===n?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error("invalid increment argument: ".concat(t))}return this.format(),this.raw=this.version,this}}var R3=Qi,zU=R3,ike=(e,t,n)=>new zU(e,n).compare(new zU(t,n)),Bf=ike,oke=Bf,ake=(e,t,n)=>oke(e,t,n)===0,ske=ake,uke=Bf,lke=(e,t,n)=>uke(e,t,n)!==0,cke=lke,fke=Bf,dke=(e,t,n)=>fke(e,t,n)>0,hke=dke,pke=Bf,gke=(e,t,n)=>pke(e,t,n)>=0,mke=gke,yke=Bf,vke=(e,t,n)=>yke(e,t,n)<0,bke=vke,xke=Bf,wke=(e,t,n)=>xke(e,t,n)<=0,Ske=wke,Eke=ske,Oke=cke,kke=hke,Cke=mke,_ke=bke,Ake=Ske,Tke=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Eke(e,n,r);case"!=":return Oke(e,n,r);case">":return kke(e,n,r);case">=":return Cke(e,n,r);case"<":return _ke(e,n,r);case"<=":return Ake(e,n,r);default:throw new TypeError("Invalid operator: ".concat(t))}},Nke=Tke,fg=Symbol("SemVer ANY");class mb{static get ANY(){return fg}constructor(t,n){if(n=Fke(n),t instanceof mb){if(t.loose===!!n.loose)return t;t=t.value}j3("comparator",t,n),this.options=n,this.loose=!!n.loose,this.parse(t),this.semver===fg?this.value="":this.value=this.operator+this.semver.version,j3("comp",this)}parse(t){var n=this.options.loose?$U[BU.COMPARATORLOOSE]:$U[BU.COMPARATOR],r=t.match(n);if(!r)throw new TypeError("Invalid comparator: ".concat(t));this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new UU(r[2],this.options.loose):this.semver=fg}toString(){return this.value}test(t){if(j3("Comparator.test",t,this.options.loose),this.semver===fg||t===fg)return!0;if(typeof t=="string")try{t=new UU(t,this.options)}catch{return!1}return P3(t,this.operator,this.semver,this.options)}intersects(t,n){if(!(t instanceof mb))throw new TypeError("a Comparator is required");if((!n||typeof n!="object")&&(n={loose:!!n,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new WU(t.value,n).test(this.value);if(t.operator==="")return t.value===""?!0:new WU(this.value,n).test(t.semver);var r=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,a=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),s=P3(this.semver,"<",t.semver,n)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),u=P3(this.semver,">",t.semver,n)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return r||i||o&&a||s||u}}var Mke=mb,Fke=F3,$U=Ki.exports.re,BU=Ki.exports.t,P3=Nke,j3=hb,UU=R3,WU=qU;function HU(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Dke(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,a=!1,s;return{s:function(){n=n.call(e)},n:function(){var l=n.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(a)throw s}}}}function Dke(e,t){if(!!e){if(typeof e=="string")return GU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GU(e,t)}}function GU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}class dg{constructor(t,n){if(n=Pke(n),t instanceof dg)return t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease?t:new dg(t.raw,n);if(t instanceof I3)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(s=>this.parseRange(s.trim())).filter(s=>s.length),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(t));if(this.set.length>1){var r=this.set[0];if(this.set=this.set.filter(s=>!YU(s[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){var i=HU(this.set),o;try{for(i.s();!(o=i.n()).done;){var a=o.value;if(a.length===1&&$ke(a[0])){this.set=[a];break}}}catch(s){i.e(s)}finally{i.f()}}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){t=t.trim();var n=Object.keys(this.options).join(","),r="parseRange:".concat(n,":").concat(t),i=VU.get(r);if(i)return i;var o=this.options.loose,a=o?Nn[fn.HYPHENRANGELOOSE]:Nn[fn.HYPHENRANGE];t=t.replace(a,Kke(this.options.includePrerelease)),Tt("hyphen replace",t),t=t.replace(Nn[fn.COMPARATORTRIM],Ike),Tt("comparator trim",t,Nn[fn.COMPARATORTRIM]),t=t.replace(Nn[fn.TILDETRIM],Lke),t=t.replace(Nn[fn.CARETTRIM],zke),t=t.split(/\s+/).join(" ");var s=o?Nn[fn.COMPARATORLOOSE]:Nn[fn.COMPARATOR],u=t.split(" ").map(p=>Bke(p,this.options)).join(" ").split(/\s+/).map(p=>Xke(p,this.options)).filter(this.options.loose?p=>!!p.match(s):()=>!0).map(p=>new I3(p,this.options));u.length;var l=new Map,c=HU(u),f;try{for(c.s();!(f=c.n()).done;){var d=f.value;if(YU(d))return[d];l.set(d.value,d)}}catch(p){c.e(p)}finally{c.f()}l.size>1&&l.has("")&&l.delete("");var h=[...l.values()];return VU.set(r,h),h}intersects(t,n){if(!(t instanceof dg))throw new TypeError("a Range is required");return this.set.some(r=>XU(r,n)&&t.set.some(i=>XU(i,n)&&r.every(o=>i.every(a=>o.intersects(a,n)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new jke(t,this.options)}catch{return!1}for(var n=0;n<this.set.length;n++)if(Qke(this.set[n],t,this.options))return!0;return!1}}var qU=dg,Rke=VOe,VU=new Rke({max:1e3}),Pke=F3,I3=Mke,Tt=hb,jke=R3,Nn=Ki.exports.re,fn=Ki.exports.t,Ike=Ki.exports.comparatorTrimReplace,Lke=Ki.exports.tildeTrimReplace,zke=Ki.exports.caretTrimReplace,YU=e=>e.value==="<0.0.0-0",$ke=e=>e.value==="",XU=(e,t)=>{for(var n=!0,r=e.slice(),i=r.pop();n&&r.length;)n=r.every(o=>i.intersects(o,t)),i=r.pop();return n},Bke=(e,t)=>(Tt("comp",e,t),e=Hke(e,t),Tt("caret",e),e=Uke(e,t),Tt("tildes",e),e=qke(e,t),Tt("xrange",e),e=Yke(e,t),Tt("stars",e),e),er=e=>!e||e.toLowerCase()==="x"||e==="*",Uke=(e,t)=>e.trim().split(/\s+/).map(n=>Wke(n,t)).join(" "),Wke=(e,t)=>{var n=t.loose?Nn[fn.TILDELOOSE]:Nn[fn.TILDE];return e.replace(n,(r,i,o,a,s)=>{Tt("tilde",e,r,i,o,a,s);var u;return er(i)?u="":er(o)?u=">=".concat(i,".0.0 <").concat(+i+1,".0.0-0"):er(a)?u=">=".concat(i,".").concat(o,".0 <").concat(i,".").concat(+o+1,".0-0"):s?(Tt("replaceTilde pr",s),u=">=".concat(i,".").concat(o,".").concat(a,"-").concat(s," <").concat(i,".").concat(+o+1,".0-0")):u=">=".concat(i,".").concat(o,".").concat(a," <").concat(i,".").concat(+o+1,".0-0"),Tt("tilde return",u),u})},Hke=(e,t)=>e.trim().split(/\s+/).map(n=>Gke(n,t)).join(" "),Gke=(e,t)=>{Tt("caret",e,t);var n=t.loose?Nn[fn.CARETLOOSE]:Nn[fn.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,(i,o,a,s,u)=>{Tt("caret",e,i,o,a,s,u);var l;return er(o)?l="":er(a)?l=">=".concat(o,".0.0").concat(r," <").concat(+o+1,".0.0-0"):er(s)?o==="0"?l=">=".concat(o,".").concat(a,".0").concat(r," <").concat(o,".").concat(+a+1,".0-0"):l=">=".concat(o,".").concat(a,".0").concat(r," <").concat(+o+1,".0.0-0"):u?(Tt("replaceCaret pr",u),o==="0"?a==="0"?l=">=".concat(o,".").concat(a,".").concat(s,"-").concat(u," <").concat(o,".").concat(a,".").concat(+s+1,"-0"):l=">=".concat(o,".").concat(a,".").concat(s,"-").concat(u," <").concat(o,".").concat(+a+1,".0-0"):l=">=".concat(o,".").concat(a,".").concat(s,"-").concat(u," <").concat(+o+1,".0.0-0")):(Tt("no pr"),o==="0"?a==="0"?l=">=".concat(o,".").concat(a,".").concat(s).concat(r," <").concat(o,".").concat(a,".").concat(+s+1,"-0"):l=">=".concat(o,".").concat(a,".").concat(s).concat(r," <").concat(o,".").concat(+a+1,".0-0"):l=">=".concat(o,".").concat(a,".").concat(s," <").concat(+o+1,".0.0-0")),Tt("caret return",l),l})},qke=(e,t)=>(Tt("replaceXRanges",e,t),e.split(/\s+/).map(n=>Vke(n,t)).join(" ")),Vke=(e,t)=>{e=e.trim();var n=t.loose?Nn[fn.XRANGELOOSE]:Nn[fn.XRANGE];return e.replace(n,(r,i,o,a,s,u)=>{Tt("xRange",e,r,i,o,a,s,u);var l=er(o),c=l||er(a),f=c||er(s),d=f;return i==="="&&d&&(i=""),u=t.includePrerelease?"-0":"",l?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&d?(c&&(a=0),s=0,i===">"?(i=">=",c?(o=+o+1,a=0,s=0):(a=+a+1,s=0)):i==="<="&&(i="<",c?o=+o+1:a=+a+1),i==="<"&&(u="-0"),r="".concat(i+o,".").concat(a,".").concat(s).concat(u)):c?r=">=".concat(o,".0.0").concat(u," <").concat(+o+1,".0.0-0"):f&&(r=">=".concat(o,".").concat(a,".0").concat(u," <").concat(o,".").concat(+a+1,".0-0")),Tt("xRange return",r),r})},Yke=(e,t)=>(Tt("replaceStars",e,t),e.trim().replace(Nn[fn.STAR],"")),Xke=(e,t)=>(Tt("replaceGTE0",e,t),e.trim().replace(Nn[t.includePrerelease?fn.GTE0PRE:fn.GTE0],"")),Kke=e=>(t,n,r,i,o,a,s,u,l,c,f,d,h)=>(er(r)?n="":er(i)?n=">=".concat(r,".0.0").concat(e?"-0":""):er(o)?n=">=".concat(r,".").concat(i,".0").concat(e?"-0":""):a?n=">=".concat(n):n=">=".concat(n).concat(e?"-0":""),er(l)?u="":er(c)?u="<".concat(+l+1,".0.0-0"):er(f)?u="<".concat(l,".").concat(+c+1,".0-0"):d?u="<=".concat(l,".").concat(c,".").concat(f,"-").concat(d):e?u="<".concat(l,".").concat(c,".").concat(+f+1,"-0"):u="<=".concat(u),"".concat(n," ").concat(u).trim()),Qke=(e,t,n)=>{for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(var i=0;i<e.length;i++)if(Tt(e[i].semver),e[i].semver!==I3.ANY&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0},Jke=qU,Zke=(e,t,n)=>{try{t=new Jke(t,n)}catch{return!1}return t.test(e)},KU=Zke;function eCe(e,t,n){var r=e.open(t),i=1e4,o=250,a=new URL(t),s=a.origin,u=~~(i/o);function l(f){f.source===r&&(u=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function c(){u<=0||(r.postMessage(n,s),setTimeout(c,o),u-=1)}setTimeout(c,o)}var tCe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  outline: none;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid #0000;
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid #0000;
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});function QU(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];nCe(e,a)}return e}function nCe(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];ac(e,i,t[i],!0)}}var L3;function JU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JU(Object(n),!0).forEach(function(r){MOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Fa=h0e,hg=jEe,yb=typeof window!="undefined"?window:void 0;hg===void 0&&yb!==null&&yb!==void 0&&(L3=yb.vl)!==null&&L3!==void 0&&L3.compile&&(hg=yb.vl);var rCe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},iCe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},pg={vega:"Vega","vega-lite":"Vega-Lite"},vb={vega:Fa.version,"vega-lite":hg?hg.version:"not available"},oCe={vega:e=>e,"vega-lite":(e,t)=>hg.compile(e,{config:t}).spec},aCe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,sCe="chart-wrapper";function uCe(e){return typeof e=="function"}function ZU(e,t,n,r){var i="<html><head>".concat(t,'</head><body><pre><code class="json">'),o="</code></pre>".concat(n,"</body></html>"),a=window.open("");a.document.write(i+e+o),a.document.title="".concat(pg[r]," JSON Source")}function lCe(e,t){if(e.$schema){var n=fU(e.$schema);if(t&&t!==n.library){var r;console.warn("The given visualization spec is written in ".concat(pg[n.library],", but mode argument sets ").concat((r=pg[t])!==null&&r!==void 0?r:t,"."))}var i=n.library;return KU(vb[i],"^".concat(n.version.slice(1)))||console.warn("The input spec uses ".concat(pg[i]," ").concat(n.version,", but the current version of ").concat(pg[i]," is v").concat(vb[i],".")),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t!=null?t:"vega"}function cCe(e){return!!(e&&"load"in e)}function eW(e){return cCe(e)?e:Fa.loader(e)}function tW(e){var t;return(t=e.usermeta&&e.usermeta.embedOptions)!==null&&t!==void 0?t:{}}function fCe(e,t){return z3.apply(this,arguments)}function z3(){return z3=ob(qo.mark(function e(t,n){var r,i,o,a,s,u,l,c,f,d,h=arguments;return qo.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(o=h.length>2&&h[2]!==void 0?h[2]:{},!se(n)){g.next=10;break}return s=eW(o.loader),g.t0=JSON,g.next=6,s.load(n);case 6:g.t1=g.sent,a=g.t0.parse.call(g.t0,g.t1),g.next=11;break;case 10:a=n;case 11:return u=tW(a).loader,(!s||u)&&(s=eW((l=o.loader)!==null&&l!==void 0?l:u)),g.next=15,nW(tW(a),s);case 15:return c=g.sent,g.next=18,nW(o,s);case 18:return f=g.sent,d=Qs(Qs({},QU(f,c)),{},{config:oc((r=f.config)!==null&&r!==void 0?r:{},(i=c.config)!==null&&i!==void 0?i:{})}),g.next=22,hCe(t,a,d,s);case 22:return g.abrupt("return",g.sent);case 23:case"end":return g.stop()}},e)})),z3.apply(this,arguments)}function nW(e,t){return $3.apply(this,arguments)}function $3(){return $3=ob(qo.mark(function e(t,n){var r,i,o;return qo.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!se(t.config)){s.next=8;break}return s.t1=JSON,s.next=4,n.load(t.config);case 4:s.t2=s.sent,s.t0=s.t1.parse.call(s.t1,s.t2),s.next=9;break;case 8:s.t0=(r=t.config)!==null&&r!==void 0?r:{};case 9:if(i=s.t0,!se(t.patch)){s.next=18;break}return s.t4=JSON,s.next=14,n.load(t.patch);case 14:s.t5=s.sent,s.t3=s.t4.parse.call(s.t4,s.t5),s.next=19;break;case 18:s.t3=t.patch;case 19:return o=s.t3,s.abrupt("return",Qs(Qs(Qs({},t),o?{patch:o}:{}),i?{config:i}:{}));case 21:case"end":return s.stop()}},e)})),$3.apply(this,arguments)}function dCe(e){var t,n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:(t=document.head)!==null&&t!==void 0?t:document.body}}function hCe(e,t){return B3.apply(this,arguments)}function B3(){return B3=ob(qo.mark(function e(t,n){var r,i,o,a,s,u,l,c,f,d,h,p,g,m,y,v,b,x,w,E,S,_,M,D,C,A,k,N,T,F,L,R,B,O,j,P,I,$,G,z,V,Y,U,H,X,W,Se,fe,he,ke=arguments;return qo.wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:if(he=function(){P&&document.removeEventListener("click",P),F.finalize()},c=ke.length>2&&ke[2]!==void 0?ke[2]:{},f=ke.length>3?ke[3]:void 0,d=c.theme?oc(wOe[c.theme],(r=c.config)!==null&&r!==void 0?r:{}):c.config,h=Ga(c.actions)?c.actions:QU({},rCe,(i=c.actions)!==null&&i!==void 0?i:{}),p=Qs(Qs({},iCe),c.i18n),g=(o=c.renderer)!==null&&o!==void 0?o:"canvas",m=(a=c.logLevel)!==null&&a!==void 0?a:Fa.Warn,y=(s=c.downloadFileName)!==null&&s!==void 0?s:"visualization",v=typeof t=="string"?document.querySelector(t):t,v){Ve.next=12;break}throw new Error("".concat(t," does not exist"));case 12:return c.defaultStyle!==!1&&(b="vega-embed-style",x=dCe(v),w=x.root,E=x.rootContainer,w.getElementById(b)||(S=document.createElement("style"),S.id=b,S.innerText=c.defaultStyle===void 0||c.defaultStyle===!0?tCe.toString():c.defaultStyle,E.appendChild(S))),_=lCe(n,c.mode),M=oCe[_](n,d),_==="vega-lite"&&M.$schema&&(D=fU(M.$schema),KU(vb.vega,"^".concat(D.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(D.version,", but current version is v").concat(vb.vega,"."))),v.classList.add("vega-embed"),h&&v.classList.add("has-actions"),v.innerHTML="",C=v,h&&(A=document.createElement("div"),A.classList.add(sCe),v.appendChild(A),C=A),k=c.patch,k&&(M=k instanceof Function?k(M):Fm(M,k,!0,!1).newDocument),c.formatLocale&&Fa.formatLocale(c.formatLocale),c.timeFormatLocale&&Fa.timeFormatLocale(c.timeFormatLocale),N=c.ast,T=Fa.parse(M,_==="vega-lite"?{}:d,{ast:N}),F=new(c.viewClass||Fa.View)(T,Qs({loader:f,logLevel:m,renderer:g},N?{expr:(u=(l=Fa.expressionInterpreter)!==null&&l!==void 0?l:c.expr)!==null&&u!==void 0?u:E0e}:{})),F.addSignalListener("autosize",(kt,Ie)=>{var Ct=Ie.type;Ct=="fit-x"?(C.classList.add("fit-x"),C.classList.remove("fit-y")):Ct=="fit-y"?(C.classList.remove("fit-x"),C.classList.add("fit-y")):Ct=="fit"?C.classList.add("fit-x","fit-y"):C.classList.remove("fit-x","fit-y")}),c.tooltip!==!1&&(L=uCe(c.tooltip)?c.tooltip:new NOe(c.tooltip===!0?{}:c.tooltip).call,F.tooltip(L)),R=c.hover,R===void 0&&(R=_==="vega"),R&&(B=typeof R=="boolean"?{}:R,O=B.hoverSet,j=B.updateSet,F.hover(O,j)),c&&(c.width!=null&&F.width(c.width),c.height!=null&&F.height(c.height),c.padding!=null&&F.padding(c.padding)),Ve.next=36,F.initialize(C,c.bind).runAsync();case 36:if(h!==!1){if(I=v,c.defaultStyle!==!1&&($=document.createElement("details"),$.title=p.CLICK_TO_VIEW_ACTIONS,v.append($),I=$,G=document.createElement("summary"),G.innerHTML=aCe,$.append(G),P=kt=>{$.contains(kt.target)||$.removeAttribute("open")},document.addEventListener("click",P)),z=document.createElement("div"),I.append(z),z.classList.add("vega-actions"),h===!0||h.export!==!1)for(V=function(){var Ie=U[Y];if(h===!0||h.export===!0||h.export[Ie]){var Ct=p["".concat(Ie.toUpperCase(),"_ACTION")],Pn=document.createElement("a");Pn.text=Ct,Pn.href="#",Pn.target="_blank",Pn.download="".concat(y,".").concat(Ie),Pn.addEventListener("mousedown",function(){var jn=ob(qo.mark(function te(Ee){var pt;return qo.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Ee.preventDefault(),Pt.next=3,F.toImageURL(Ie,c.scaleFactor);case 3:pt=Pt.sent,this.href=pt;case 5:case"end":return Pt.stop()}},te,this)}));return function(te){return jn.apply(this,arguments)}}()),z.append(Pn)}},Y=0,U=["svg","png"];Y<U.length;Y++)V();(h===!0||h.source!==!1)&&(H=document.createElement("a"),H.text=p.SOURCE_ACTION,H.href="#",H.addEventListener("click",function(kt){var Ie,Ct;ZU(b2(n),(Ie=c.sourceHeader)!==null&&Ie!==void 0?Ie:"",(Ct=c.sourceFooter)!==null&&Ct!==void 0?Ct:"",_),kt.preventDefault()}),z.append(H)),_==="vega-lite"&&(h===!0||h.compiled!==!1)&&(X=document.createElement("a"),X.text=p.COMPILED_ACTION,X.href="#",X.addEventListener("click",function(kt){var Ie,Ct;ZU(b2(M),(Ie=c.sourceHeader)!==null&&Ie!==void 0?Ie:"",(Ct=c.sourceFooter)!==null&&Ct!==void 0?Ct:"","vega"),kt.preventDefault()}),z.append(X)),(h===!0||h.editor!==!1)&&(Se=(W=c.editorUrl)!==null&&W!==void 0?W:"https://vega.github.io/editor/",fe=document.createElement("a"),fe.text=p.EDITOR_ACTION,fe.href="#",fe.addEventListener("click",function(kt){eCe(window,Se,{config:d,mode:_,renderer:g,spec:b2(n)}),kt.preventDefault()}),z.append(fe))}return Ve.abrupt("return",{view:F,spec:n,vgSpec:M,finalize:he});case 38:case"end":return Ve.stop()}},e)})),B3.apply(this,arguments)}function pCe(e){return!!e&&{}.toString.call(e)==="[object Function]"}function gCe(e,t,n){n&&(pCe(n)?n(e.data(t)):e.change(t,Fa.changeset().remove(()=>!0).insert(n)))}function mCe(e,t){Object.keys(t).forEach(n=>{gCe(e,n,t[n])})}function rW(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const iW=()=>{};function U3(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function yCe(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=rW([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!Gz(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function oW(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function W3(e){const{spec:t,width:n,height:r}=e;return typeof n!="undefined"&&typeof r!="undefined"?pu(to({},t),{width:n,height:r}):typeof n!="undefined"?pu(to({},t),{width:n}):typeof r!="undefined"?pu(to({},t),{height:r}):t}function gg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class aW extends Cr.PureComponent{constructor(...t){super(...t);gg(this,"containerRef",Cr.createRef()),gg(this,"resultPromise",void 0),gg(this,"handleError",n=>{const{onError:r=iW}=this.props;r(n),console.warn(n)}),gg(this,"modifyView",n=>{this.resultPromise&&this.resultPromise.then(r=>(r&&n(r.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=rW([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=yCe(W3(this.props),W3(t)),{signalListeners:i}=this.props,{signalListeners:o}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const a=!f2(i,o);this.modifyView(s=>{r.width!==!1&&s.width(r.width),r.height!==!1&&s.height(r.height),a&&(o&&oW(s,o),i&&U3(s,i)),s.run()})}else f2(i,o)||this.modifyView(a=>{o&&oW(a,o),i&&U3(a,i),a.run()})}}componentWillUnmount(){this.clearView()}createView(){const s=this.props,{spec:t,onNewView:n,signalListeners:r={},width:i,height:o}=s,a=gu(s,["spec","onNewView","signalListeners","width","height"]);if(this.containerRef.current){const u=W3(this.props);this.resultPromise=fCe(this.containerRef.current,u,a).then(l=>{if(l){const{view:c}=l;U3(c,r)&&c.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Cr.createElement("div",{ref:this.containerRef,className:t,style:n})}}gg(aW,"propTypes",{className:oF.string,onError:oF.func});function H3(){return H3=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H3.apply(this,arguments)}function G3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const vCe={};class sW extends Cr.PureComponent{constructor(...t){super(...t);G3(this,"vegaEmbed",Cr.createRef()),G3(this,"handleNewView",n=>{this.update();const{onNewView:r=iW}=this.props;r(n)})}componentDidMount(){this.update()}componentDidUpdate(t){f2(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{mCe(n,t),n.resize().run()})}render(){const r=this.props,{data:t}=r,n=gu(r,["data"]);return Cr.createElement(aW,H3({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}G3(sW,"defaultProps",{data:vCe});function q3(){return q3=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q3.apply(this,arguments)}function bCe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jAe({mode:e,spec:t}){class n extends Cr.PureComponent{render(){return Cr.createElement(sW,q3({mode:e,spec:t},this.props))}}return bCe(n,"getSpec",function(){return t}),n}var uW={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(gq,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var a=r[o]={exports:{},id:o,loaded:!1};return n[o].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}return i.m=n,i.c=r,i.p="",i(0)}([function(n,r,i){var o=i(1).default,a=i(39).default,s=i(52).default,u=i(40).default,l=i(54).default,c=i(80).default,f=i(84).default,d=i(65).default,h=n.exports=function(A){if(!m(A))throw new Error("wu: `"+A+"` is not iterable!");return new p(A)};function p(C){var A=y(C);this.next=A.next.bind(A)}h.prototype=p.prototype,h.prototype[s]=function(){return this};var g={},m=function(A){return A&&typeof A[s]=="function"},y=function(A){if(m(A))return u(A);throw new TypeError("Not iterable: "+A)},v=function(A,k){k.prototype=p.prototype,h[A]=k},b=function(A,k){var N=arguments.length<=2||arguments[2]===void 0?k.length:arguments[2];return function(){k.prototype=p.prototype,p.prototype[A]=k,N+=1,h[A]=h.curryable(function(){for(var T,F=arguments.length,L=Array(F),R=0;R<F;R++)L[R]=arguments[R];var B=L.pop();return(T=h(B))[A].apply(T,L)},N)}()},x=function(A){return function(){for(var k=arguments.length,N=Array(k),T=0;T<k;T++)N[T]=arguments[T];return h(A.call.apply(A,[this].concat(N)))}},w=function(A,k){return v(A,x(k))},E=function(A,k,N){return b(A,x(k),N)};function S(C,A){return function(){for(var k=arguments.length,N=Array(k),T=0;T<k;T++)N[T]=arguments[T];return C.call.apply(C,[this].concat(o(A),N))}}v("curryable",function(C){var A=arguments.length<=1||arguments[1]===void 0?C.length:arguments[1];return function(){return function k(){for(var N=arguments.length,T=Array(N),F=0;F<N;F++)T[F]=arguments[F];return T.length>=A?C.apply(this,T):S(k,T)}}()}),w("entries",l.mark(function C(A){var k,N,T,F,L,R;return l.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:k=!0,N=!1,T=void 0,O.prev=3,F=u(c(A));case 5:if(k=(L=F.next()).done){O.next=12;break}return R=L.value,O.next=9,[R,A[R]];case 9:k=!0,O.next=5;break;case 12:O.next=18;break;case 14:O.prev=14,O.t0=O.catch(3),N=!0,T=O.t0;case 18:O.prev=18,O.prev=19,!k&&F.return&&F.return();case 21:if(O.prev=21,!N){O.next=24;break}throw T;case 24:return O.finish(21);case 25:return O.finish(18);case 26:case"end":return O.stop()}},C,this,[[3,14,18,26],[19,,21,25]])})),w("keys",l.mark(function C(A){return l.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.delegateYield(c(A),"t0",1);case 1:case"end":return N.stop()}},C,this)})),w("values",l.mark(function C(A){var k,N,T,F,L,R;return l.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:k=!0,N=!1,T=void 0,O.prev=3,F=u(c(A));case 5:if(k=(L=F.next()).done){O.next=12;break}return R=L.value,O.next=9,A[R];case 9:k=!0,O.next=5;break;case 12:O.next=18;break;case 14:O.prev=14,O.t0=O.catch(3),N=!0,T=O.t0;case 18:O.prev=18,O.prev=19,!k&&F.return&&F.return();case 21:if(O.prev=21,!N){O.next=24;break}throw T;case 24:return O.finish(21);case 25:return O.finish(18);case 26:case"end":return O.stop()}},C,this,[[3,14,18,26],[19,,21,25]])})),E("cycle",l.mark(function C(){var A,k,N,T,F,L,R;return l.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:A=[],k=!0,N=!1,T=void 0,O.prev=4,F=u(this);case 6:if(k=(L=F.next()).done){O.next=14;break}return R=L.value,O.next=10,R;case 10:A.push(R);case 11:k=!0,O.next=6;break;case 14:O.next=20;break;case 16:O.prev=16,O.t0=O.catch(4),N=!0,T=O.t0;case 20:O.prev=20,O.prev=21,!k&&F.return&&F.return();case 23:if(O.prev=23,!N){O.next=26;break}throw T;case 26:return O.finish(23);case 27:return O.finish(20);case 28:if(!A){O.next=32;break}return O.delegateYield(A,"t1",30);case 30:O.next=28;break;case 32:case"end":return O.stop()}},C,this,[[4,16,20,28],[21,,23,27]])})),w("count",l.mark(function C(){var A=arguments.length<=0||arguments[0]===void 0?0:arguments[0],k=arguments.length<=1||arguments[1]===void 0?1:arguments[1],N;return l.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:N=A;case 1:return F.next=4,N;case 4:N+=k,F.next=1;break;case 7:case"end":return F.stop()}},C,this)})),w("repeat",l.mark(function C(A){var k=arguments.length<=1||arguments[1]===void 0?1/0:arguments[1],N;return l.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(k!==1/0){F.next=8;break}case 1:return F.next=4,A;case 4:F.next=1;break;case 6:F.next=15;break;case 8:N=0;case 9:if(!(N<k)){F.next=15;break}return F.next=12,A;case 12:N++,F.next=9;break;case 15:case"end":return F.stop()}},C,this)})),w("chain",l.mark(function C(){var A,k,N,T,F,L,R,B,O,j=arguments;return l.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:for(A=!0,k=!1,N=void 0,I.prev=3,T=j.length,F=Array(T),L=0;L<T;L++)F[L]=j[L];R=u(F);case 6:if(A=(B=R.next()).done){I.next=12;break}return O=B.value,I.delegateYield(O,"t0",9);case 9:A=!0,I.next=6;break;case 12:I.next=18;break;case 14:I.prev=14,I.t1=I.catch(3),k=!0,N=I.t1;case 18:I.prev=18,I.prev=19,!A&&R.return&&R.return();case 21:if(I.prev=21,!k){I.next=24;break}throw N;case 24:return I.finish(21);case 25:return I.finish(18);case 26:case"end":return I.stop()}},C,this,[[3,14,18,26],[19,,21,25]])})),E("chunk",l.mark(function C(){var A=arguments.length<=0||arguments[0]===void 0?2:arguments[0],k,N,T,F,L,R,B,O;return l.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:k=[],N=0,T=!0,F=!1,L=void 0,P.prev=5,R=u(this);case 7:if(T=(B=R.next()).done){P.next=18;break}if(O=B.value,k[N++]=O,N!==A){P.next=15;break}return P.next=13,k;case 13:k=[],N=0;case 15:T=!0,P.next=7;break;case 18:P.next=24;break;case 20:P.prev=20,P.t0=P.catch(5),F=!0,L=P.t0;case 24:P.prev=24,P.prev=25,!T&&R.return&&R.return();case 27:if(P.prev=27,!F){P.next=30;break}throw L;case 30:return P.finish(27);case 31:return P.finish(24);case 32:if(!N){P.next=35;break}return P.next=35,k;case 35:case"end":return P.stop()}},C,this,[[5,20,24,32],[25,,27,31]])}),1),E("concatMap",l.mark(function C(A){var k,N,T,F,L,R;return l.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:k=!0,N=!1,T=void 0,O.prev=3,F=u(this);case 5:if(k=(L=F.next()).done){O.next=11;break}return R=L.value,O.delegateYield(A(R),"t0",8);case 8:k=!0,O.next=5;break;case 11:O.next=17;break;case 13:O.prev=13,O.t1=O.catch(3),N=!0,T=O.t1;case 17:O.prev=17,O.prev=18,!k&&F.return&&F.return();case 20:if(O.prev=20,!N){O.next=23;break}throw T;case 23:return O.finish(20);case 24:return O.finish(17);case 25:case"end":return O.stop()}},C,this,[[3,13,17,25],[18,,20,24]])})),E("drop",l.mark(function C(A){var k,N,T,F,L,R,B;return l.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:k=0,N=!0,T=!1,F=void 0,j.prev=4,L=u(this);case 6:if(N=(R=L.next()).done){j.next=16;break}if(B=R.value,!(k++<A)){j.next=10;break}return j.abrupt("continue",13);case 10:return j.next=12,B;case 12:return j.abrupt("break",16);case 13:N=!0,j.next=6;break;case 16:j.next=22;break;case 18:j.prev=18,j.t0=j.catch(4),T=!0,F=j.t0;case 22:j.prev=22,j.prev=23,!N&&L.return&&L.return();case 25:if(j.prev=25,!T){j.next=28;break}throw F;case 28:return j.finish(25);case 29:return j.finish(22);case 30:return j.delegateYield(this,"t1",31);case 31:case"end":return j.stop()}},C,this,[[4,18,22,30],[23,,25,29]])})),E("dropWhile",l.mark(function C(){var A=arguments.length<=0||arguments[0]===void 0?Boolean:arguments[0],k,N,T,F,L,R;return l.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:k=!0,N=!1,T=void 0,O.prev=3,F=u(this);case 5:if(k=(L=F.next()).done){O.next=15;break}if(R=L.value,!A(R)){O.next=9;break}return O.abrupt("continue",12);case 9:return O.next=11,R;case 11:return O.abrupt("break",15);case 12:k=!0,O.next=5;break;case 15:O.next=21;break;case 17:O.prev=17,O.t0=O.catch(3),N=!0,T=O.t0;case 21:O.prev=21,O.prev=22,!k&&F.return&&F.return();case 24:if(O.prev=24,!N){O.next=27;break}throw T;case 27:return O.finish(24);case 28:return O.finish(21);case 29:return O.delegateYield(this,"t1",30);case 30:case"end":return O.stop()}},C,this,[[3,17,21,29],[22,,24,28]])}),1),E("enumerate",l.mark(function C(){return l.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.delegateYield(_([this,h.count()]),"t0",1);case 1:case"end":return k.stop()}},C,this)})),E("filter",l.mark(function C(){var A=arguments.length<=0||arguments[0]===void 0?Boolean:arguments[0],k,N,T,F,L,R;return l.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:k=!0,N=!1,T=void 0,O.prev=3,F=u(this);case 5:if(k=(L=F.next()).done){O.next=13;break}if(R=L.value,!A(R)){O.next=10;break}return O.next=10,R;case 10:k=!0,O.next=5;break;case 13:O.next=19;break;case 15:O.prev=15,O.t0=O.catch(3),N=!0,T=O.t0;case 19:O.prev=19,O.prev=20,!k&&F.return&&F.return();case 22:if(O.prev=22,!N){O.next=25;break}throw T;case 25:return O.finish(22);case 26:return O.finish(19);case 27:case"end":return O.stop()}},C,this,[[3,15,19,27],[20,,22,26]])}),1),E("flatten",l.mark(function C(){var A=arguments.length<=0||arguments[0]===void 0?!1:arguments[0],k,N,T,F,L,R;return l.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:k=!0,N=!1,T=void 0,O.prev=3,F=u(this);case 5:if(k=(L=F.next()).done){O.next=16;break}if(R=L.value,!(typeof R!="string"&&m(R))){O.next=11;break}return O.delegateYield(A?R:h(R).flatten(),"t0",9);case 9:O.next=13;break;case 11:return O.next=13,R;case 13:k=!0,O.next=5;break;case 16:O.next=22;break;case 18:O.prev=18,O.t1=O.catch(3),N=!0,T=O.t1;case 22:O.prev=22,O.prev=23,!k&&F.return&&F.return();case 25:if(O.prev=25,!N){O.next=28;break}throw T;case 28:return O.finish(25);case 29:return O.finish(22);case 30:case"end":return O.stop()}},C,this,[[3,18,22,30],[23,,25,29]])}),1),E("invoke",l.mark(function C(A){var k,N,T,F,L,R,B,O,j,P=arguments;return l.wrap(function($){for(;;)switch($.prev=$.next){case 0:for(k=!0,N=!1,T=void 0,$.prev=3,F=P.length,L=Array(F>1?F-1:0),R=1;R<F;R++)L[R-1]=P[R];B=u(this);case 6:if(k=(O=B.next()).done){$.next=13;break}return j=O.value,$.next=10,j[A].apply(j,L);case 10:k=!0,$.next=6;break;case 13:$.next=19;break;case 15:$.prev=15,$.t0=$.catch(3),N=!0,T=$.t0;case 19:$.prev=19,$.prev=20,!k&&B.return&&B.return();case 22:if($.prev=22,!N){$.next=25;break}throw T;case 25:return $.finish(22);case 26:return $.finish(19);case 27:case"end":return $.stop()}},C,this,[[3,15,19,27],[20,,22,26]])})),E("map",l.mark(function C(A){var k,N,T,F,L,R;return l.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:k=!0,N=!1,T=void 0,O.prev=3,F=u(this);case 5:if(k=(L=F.next()).done){O.next=12;break}return R=L.value,O.next=9,A(R);case 9:k=!0,O.next=5;break;case 12:O.next=18;break;case 14:O.prev=14,O.t0=O.catch(3),N=!0,T=O.t0;case 18:O.prev=18,O.prev=19,!k&&F.return&&F.return();case 21:if(O.prev=21,!N){O.next=24;break}throw T;case 24:return O.finish(21);case 25:return O.finish(18);case 26:case"end":return O.stop()}},C,this,[[3,14,18,26],[19,,21,25]])})),E("pluck",l.mark(function C(A){var k,N,T,F,L,R;return l.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:k=!0,N=!1,T=void 0,O.prev=3,F=u(this);case 5:if(k=(L=F.next()).done){O.next=12;break}return R=L.value,O.next=9,R[A];case 9:k=!0,O.next=5;break;case 12:O.next=18;break;case 14:O.prev=14,O.t0=O.catch(3),N=!0,T=O.t0;case 18:O.prev=18,O.prev=19,!k&&F.return&&F.return();case 21:if(O.prev=21,!N){O.next=24;break}throw T;case 24:return O.finish(21);case 25:return O.finish(18);case 26:case"end":return O.stop()}},C,this,[[3,14,18,26],[19,,21,25]])})),E("reductions",l.mark(function C(A){var k=arguments.length<=1||arguments[1]===void 0?void 0:arguments[1],N,T,F,L,R,B,O,j,P,I,$,G;return l.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(N=k,N!==void 0){V.next=28;break}T=!0,F=!1,L=void 0,V.prev=5,R=u(this);case 7:if(T=(B=R.next()).done){V.next=14;break}return O=B.value,N=O,V.abrupt("break",14);case 11:T=!0,V.next=7;break;case 14:V.next=20;break;case 16:V.prev=16,V.t0=V.catch(5),F=!0,L=V.t0;case 20:V.prev=20,V.prev=21,!T&&R.return&&R.return();case 23:if(V.prev=23,!F){V.next=26;break}throw L;case 26:return V.finish(23);case 27:return V.finish(20);case 28:return V.next=30,N;case 30:j=!0,P=!1,I=void 0,V.prev=33,$=u(this);case 35:if(j=(G=$.next()).done){V.next=42;break}return O=G.value,V.next=39,N=A(N,O);case 39:j=!0,V.next=35;break;case 42:V.next=48;break;case 44:V.prev=44,V.t1=V.catch(33),P=!0,I=V.t1;case 48:V.prev=48,V.prev=49,!j&&$.return&&$.return();case 51:if(V.prev=51,!P){V.next=54;break}throw I;case 54:return V.finish(51);case 55:return V.finish(48);case 56:return V.abrupt("return",N);case 57:case"end":return V.stop()}},C,this,[[5,16,20,28],[21,,23,27],[33,44,48,56],[49,,51,55]])}),2),E("reject",l.mark(function C(){var A=arguments.length<=0||arguments[0]===void 0?Boolean:arguments[0],k,N,T,F,L,R;return l.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:k=!0,N=!1,T=void 0,O.prev=3,F=u(this);case 5:if(k=(L=F.next()).done){O.next=13;break}if(R=L.value,A(R)){O.next=10;break}return O.next=10,R;case 10:k=!0,O.next=5;break;case 13:O.next=19;break;case 15:O.prev=15,O.t0=O.catch(3),N=!0,T=O.t0;case 19:O.prev=19,O.prev=20,!k&&F.return&&F.return();case 22:if(O.prev=22,!N){O.next=25;break}throw T;case 25:return O.finish(22);case 26:return O.finish(19);case 27:case"end":return O.stop()}},C,this,[[3,15,19,27],[20,,22,26]])}),1),E("slice",l.mark(function C(){var A=arguments.length<=0||arguments[0]===void 0?0:arguments[0],k=arguments.length<=1||arguments[1]===void 0?1/0:arguments[1],N,T,F,L,R,B,O,j;return l.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(k<A)){I.next=2;break}throw new RangeError("parameter `stop` (= "+k+") must be >= `start` (= "+A+")");case 2:N=!0,T=!1,F=void 0,I.prev=5,L=u(this.enumerate());case 7:if(N=(R=L.next()).done){I.next=20;break}if(B=a(R.value,2),O=B[0],j=B[1],!(j<A)){I.next=13;break}return I.abrupt("continue",17);case 13:if(!(j>=k)){I.next=15;break}return I.abrupt("break",20);case 15:return I.next=17,O;case 17:N=!0,I.next=7;break;case 20:I.next=26;break;case 22:I.prev=22,I.t0=I.catch(5),T=!0,F=I.t0;case 26:I.prev=26,I.prev=27,!N&&L.return&&L.return();case 29:if(I.prev=29,!T){I.next=32;break}throw F;case 32:return I.finish(29);case 33:return I.finish(26);case 34:case"end":return I.stop()}},C,this,[[5,22,26,34],[27,,29,33]])}),2),E("spreadMap",l.mark(function C(A){var k,N,T,F,L,R;return l.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:k=!0,N=!1,T=void 0,O.prev=3,F=u(this);case 5:if(k=(L=F.next()).done){O.next=12;break}return R=L.value,O.next=9,A.apply(void 0,o(R));case 9:k=!0,O.next=5;break;case 12:O.next=18;break;case 14:O.prev=14,O.t0=O.catch(3),N=!0,T=O.t0;case 18:O.prev=18,O.prev=19,!k&&F.return&&F.return();case 21:if(O.prev=21,!N){O.next=24;break}throw T;case 24:return O.finish(21);case 25:return O.finish(18);case 26:case"end":return O.stop()}},C,this,[[3,14,18,26],[19,,21,25]])})),E("take",l.mark(function C(A){var k,N,T,F,L,R,B;return l.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!(A<1)){j.next=2;break}return j.abrupt("return");case 2:k=0,N=!0,T=!1,F=void 0,j.prev=6,L=u(this);case 8:if(N=(R=L.next()).done){j.next=17;break}return B=R.value,j.next=12,B;case 12:if(!(++k>=A)){j.next=14;break}return j.abrupt("break",17);case 14:N=!0,j.next=8;break;case 17:j.next=23;break;case 19:j.prev=19,j.t0=j.catch(6),T=!0,F=j.t0;case 23:j.prev=23,j.prev=24,!N&&L.return&&L.return();case 26:if(j.prev=26,!T){j.next=29;break}throw F;case 29:return j.finish(26);case 30:return j.finish(23);case 31:case"end":return j.stop()}},C,this,[[6,19,23,31],[24,,26,30]])})),E("takeWhile",l.mark(function C(){var A=arguments.length<=0||arguments[0]===void 0?Boolean:arguments[0],k,N,T,F,L,R;return l.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:k=!0,N=!1,T=void 0,O.prev=3,F=u(this);case 5:if(k=(L=F.next()).done){O.next=14;break}if(R=L.value,A(R)){O.next=9;break}return O.abrupt("break",14);case 9:return O.next=11,R;case 11:k=!0,O.next=5;break;case 14:O.next=20;break;case 16:O.prev=16,O.t0=O.catch(3),N=!0,T=O.t0;case 20:O.prev=20,O.prev=21,!k&&F.return&&F.return();case 23:if(O.prev=23,!N){O.next=26;break}throw T;case 26:return O.finish(23);case 27:return O.finish(20);case 28:case"end":return O.stop()}},C,this,[[3,16,20,28],[21,,23,27]])}),1),E("tap",l.mark(function C(){var A=arguments.length<=0||arguments[0]===void 0?console.log.bind(console):arguments[0],k,N,T,F,L,R;return l.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:k=!0,N=!1,T=void 0,O.prev=3,F=u(this);case 5:if(k=(L=F.next()).done){O.next=13;break}return R=L.value,A(R),O.next=10,R;case 10:k=!0,O.next=5;break;case 13:O.next=19;break;case 15:O.prev=15,O.t0=O.catch(3),N=!0,T=O.t0;case 19:O.prev=19,O.prev=20,!k&&F.return&&F.return();case 22:if(O.prev=22,!N){O.next=25;break}throw T;case 25:return O.finish(22);case 26:return O.finish(19);case 27:case"end":return O.stop()}},C,this,[[3,15,19,27],[20,,22,26]])}),1),E("unique",l.mark(function C(){var A,k,N,T,F,L,R;return l.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:A=new f,k=!0,N=!1,T=void 0,O.prev=4,F=u(this);case 6:if(k=(L=F.next()).done){O.next=15;break}if(R=L.value,A.has(R)){O.next=12;break}return O.next=11,R;case 11:A.add(R);case 12:k=!0,O.next=6;break;case 15:O.next=21;break;case 17:O.prev=17,O.t0=O.catch(4),N=!0,T=O.t0;case 21:O.prev=21,O.prev=22,!k&&F.return&&F.return();case 24:if(O.prev=24,!N){O.next=27;break}throw T;case 27:return O.finish(24);case 28:return O.finish(21);case 29:A.clear();case 30:case"end":return O.stop()}},C,this,[[4,17,21,29],[22,,24,28]])}));var _=x(l.mark(function C(A){var k=arguments.length<=1||arguments[1]===void 0?!1:arguments[1],N,T,F,L,R,B,O,j,P,I,$,G,z,V;return l.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(A.length){U.next=2;break}return U.abrupt("return");case 2:N=A.map(y),T=A.length,F=0,L=!1;case 6:if(L){U.next=44;break}R=[],B=!0,O=!1,j=void 0,U.prev=11,P=u(N);case 13:if(B=(I=P.next()).done){U.next=26;break}if($=I.value,G=$.next(),z=G.value,V=G.done,!V){U.next=22;break}if(k){U.next=21;break}return U.abrupt("return");case 21:++F==T&&(L=!0);case 22:z===void 0?R.length++:R.push(z);case 23:B=!0,U.next=13;break;case 26:U.next=32;break;case 28:U.prev=28,U.t0=U.catch(11),O=!0,j=U.t0;case 32:U.prev=32,U.prev=33,!B&&P.return&&P.return();case 35:if(U.prev=35,!O){U.next=38;break}throw j;case 38:return U.finish(35);case 39:return U.finish(32);case 40:return U.next=42,R;case 42:U.next=6;break;case 44:case"end":return U.stop()}},C,this,[[11,28,32,40],[33,,35,39]])}));w("zip",l.mark(function C(){for(var A=arguments.length,k=Array(A),N=0;N<A;N++)k[N]=arguments[N];return l.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.delegateYield(_(k),"t0",1);case 1:case"end":return F.stop()}},C,this)})),w("zipLongest",l.mark(function C(){for(var A=arguments.length,k=Array(A),N=0;N<A;N++)k[N]=arguments[N];return l.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.delegateYield(_(k,!0),"t0",1);case 1:case"end":return F.stop()}},C,this)})),w("zipWith",l.mark(function C(A){for(var k=arguments.length,N=Array(k>1?k-1:0),T=1;T<k;T++)N[T-1]=arguments[T];return l.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.delegateYield(_(N).spreadMap(A),"t0",1);case 1:case"end":return L.stop()}},C,this)})),h.MAX_BLOCK=15,h.TIMEOUT=1,b("asyncEach",function(C){var A=arguments.length<=1||arguments[1]===void 0?h.MAX_BLOCK:arguments[1],k=arguments.length<=2||arguments[2]===void 0?h.TIMEOUT:arguments[2],N=y(this);return new d(function(T,F){(function L(){var R=Date.now(),B=!0,O=!1,j=void 0;try{for(var P=u(N),I;!(B=(I=P.next()).done);B=!0){var $=I.value;try{C($)}catch(G){F(G);return}if(Date.now()-R>A){setTimeout(L,k);return}}}catch(G){O=!0,j=G}finally{try{!B&&P.return&&P.return()}finally{if(O)throw j}}T()})()})},3),b("every",function(){var C=arguments.length<=0||arguments[0]===void 0?Boolean:arguments[0],A=!0,k=!1,N=void 0;try{for(var T=u(this),F;!(A=(F=T.next()).done);A=!0){var L=F.value;if(!C(L))return!1}}catch(R){k=!0,N=R}finally{try{!A&&T.return&&T.return()}finally{if(k)throw N}}return!0},1),b("find",function(C){var A=!0,k=!1,N=void 0;try{for(var T=u(this),F;!(A=(F=T.next()).done);A=!0){var L=F.value;if(C(L))return L}}catch(R){k=!0,N=R}finally{try{!A&&T.return&&T.return()}finally{if(k)throw N}}}),b("forEach",function(C){var A=!0,k=!1,N=void 0;try{for(var T=u(this),F;!(A=(F=T.next()).done);A=!0){var L=F.value;C(L)}}catch(R){k=!0,N=R}finally{try{!A&&T.return&&T.return()}finally{if(k)throw N}}}),b("has",function(C){return this.some(function(A){return A===C})}),b("reduce",function(C){var A=arguments.length<=1||arguments[1]===void 0?void 0:arguments[1],k=A;if(k===void 0){var N=!0,T=!1,F=void 0;try{for(var L=u(this),R;!(N=(R=L.next()).done);N=!0){var B=R.value;k=B;break}}catch(G){T=!0,F=G}finally{try{!N&&L.return&&L.return()}finally{if(T)throw F}}}var O=!0,j=!1,P=void 0;try{for(var I=u(this),$;!(O=($=I.next()).done);O=!0){var B=$.value;k=C(k,B)}}catch(G){j=!0,P=G}finally{try{!O&&I.return&&I.return()}finally{if(j)throw P}}return k},2),b("some",function(){var C=arguments.length<=0||arguments[0]===void 0?Boolean:arguments[0],A=!0,k=!1,N=void 0;try{for(var T=u(this),F;!(A=(F=T.next()).done);A=!0){var L=F.value;if(C(L))return!0}}catch(R){k=!0,N=R}finally{try{!A&&T.return&&T.return()}finally{if(k)throw N}}return!1},1),b("toArray",function(){return[].concat(o(this))});var M=500,D=x(l.mark(function C(A,k){var N,T,F,L,R;return l.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:N=k.items,T=0;case 2:if(T!==N.length){O.next=14;break}if(F=A.next(),L=F.done,R=F.value,!L){O.next=10;break}return k.returned===g&&(k.returned=R),O.abrupt("break",25);case 10:return O.next=12,N[T++]=R;case 12:O.next=23;break;case 14:if(T!==k.tail){O.next=21;break}return R=N[T],T===M?(N=k.items=N.slice(T),T=0,k.tail=0):(N[T]=void 0,k.tail=++T),O.next=19,R;case 19:O.next=23;break;case 21:return O.next=23,N[T++];case 23:O.next=2;break;case 25:return k.tail===T&&(N.length=0),O.abrupt("return",k.returned);case 27:case"end":return O.stop()}},C,this)}));D.prototype=p.prototype,b("tee",function(){for(var C=arguments.length<=0||arguments[0]===void 0?2:arguments[0],A=new Array(C),k={tail:0,items:[],returned:g};C--;)A[C]=D(this,k);return A},1),b("unzip",function(){var C=arguments.length<=0||arguments[0]===void 0?2:arguments[0];return this.tee(C).map(function(A,k){return A.pluck(k)})},1),h.tang={clan:36}},function(n,r,i){var o=i(2).default;r.default=function(a){if(Array.isArray(a)){for(var s=0,u=Array(a.length);s<a.length;s++)u[s]=a[s];return u}else return o(a)},r.__esModule=!0},function(n,r,i){n.exports={default:i(3),__esModule:!0}},function(n,r,i){i(4),i(26),n.exports=i(12).Array.from},function(n,r,i){var o=i(5)(!0);i(8)(String,"String",function(a){this._t=String(a),this._i=0},function(){var a=this._t,s=this._i,u;return s>=a.length?{value:void 0,done:!0}:(u=o(a,s),this._i+=u.length,{value:u,done:!1})})},function(n,r,i){var o=i(6),a=i(7);n.exports=function(s){return function(u,l){var c=String(a(u)),f=o(l),d=c.length,h,p;return f<0||f>=d?s?"":void 0:(h=c.charCodeAt(f),h<55296||h>56319||f+1===d||(p=c.charCodeAt(f+1))<56320||p>57343?s?c.charAt(f):h:s?c.slice(f,f+2):(h-55296<<10)+(p-56320)+65536)}}},function(n,r){var i=Math.ceil,o=Math.floor;n.exports=function(a){return isNaN(a=+a)?0:(a>0?o:i)(a)}},function(n,r){n.exports=function(i){if(i==null)throw TypeError("Can't call method on  "+i);return i}},function(n,r,i){var o=i(9),a=i(10),s=i(13),u=i(14),l=i(19),c=i(20)("iterator"),f=i(23),d=!([].keys&&"next"in[].keys()),h="@@iterator",p="keys",g="values",m=function(){return this};n.exports=function(y,v,b,x,w,E,S){i(24)(b,v,x);var _=function(F){switch(F){case p:return function(){return new b(this,F)};case g:return function(){return new b(this,F)}}return function(){return new b(this,F)}},M=v+" Iterator",D=y.prototype,C=D[c]||D[h]||w&&D[w],A=C||_(w),k,N;if(C){var T=i(15).getProto(A.call(new y));i(25)(T,M,!0),!o&&l(D,h)&&u(T,c,m)}if((!o||S)&&u(D,c,A),f[v]=A,f[M]=m,w)if(k={keys:E?A:_(p),values:w==g?A:_(g),entries:w!=g?A:_("entries")},S)for(N in k)N in D||s(D,N,k[N]);else a(a.P+a.F*d,v,k)}},function(n,r){n.exports=!0},function(n,r,i){var o=i(11),a=i(12),s="prototype",u=function(c,f){return function(){return c.apply(f,arguments)}},l=function(c,f,d){var h,p,g,m,y=c&l.G,v=c&l.P,b=y?o:c&l.S?o[f]:(o[f]||{})[s],x=y?a:a[f]||(a[f]={});y&&(d=f);for(h in d)p=!(c&l.F)&&b&&h in b,!(p&&h in x)&&(g=p?b[h]:d[h],y&&typeof b[h]!="function"?m=d[h]:c&l.B&&p?m=u(g,o):c&l.W&&b[h]==g?function(w){m=function(E){return this instanceof w?new w(E):w(E)},m[s]=w[s]}(g):m=v&&typeof g=="function"?u(Function.call,g):g,x[h]=m,v&&((x[s]||(x[s]={}))[h]=g))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,n.exports=l},function(n,r){var i="undefined",o=n.exports=typeof window!=i&&window.Math==Math?window:typeof self!=i&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=o)},function(n,r){var i=n.exports={version:"1.2.0"};typeof __e=="number"&&(__e=i)},function(n,r,i){n.exports=i(14)},function(n,r,i){var o=i(15),a=i(16);n.exports=i(17)?function(s,u,l){return o.setDesc(s,u,a(1,l))}:function(s,u,l){return s[u]=l,s}},function(n,r){var i=Object;n.exports={create:i.create,getProto:i.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:i.getOwnPropertyDescriptor,setDesc:i.defineProperty,setDescs:i.defineProperties,getKeys:i.keys,getNames:i.getOwnPropertyNames,getSymbols:i.getOwnPropertySymbols,each:[].forEach}},function(n,r){n.exports=function(i,o){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:o}}},function(n,r,i){n.exports=!i(18)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(n,r){n.exports=function(i){try{return!!i()}catch{return!0}}},function(n,r){var i={}.hasOwnProperty;n.exports=function(o,a){return i.call(o,a)}},function(n,r,i){var o=i(21)("wks"),a=i(11).Symbol;n.exports=function(s){return o[s]||(o[s]=a&&a[s]||(a||i(22))("Symbol."+s))}},function(n,r,i){var o=i(11),a="__core-js_shared__",s=o[a]||(o[a]={});n.exports=function(u){return s[u]||(s[u]={})}},function(n,r){var i=0,o=Math.random();n.exports=function(a){return"Symbol(".concat(a===void 0?"":a,")_",(++i+o).toString(36))}},function(n,r){n.exports={}},function(n,r,i){var o=i(15),a={};i(14)(a,i(20)("iterator"),function(){return this}),n.exports=function(s,u,l){s.prototype=o.create(a,{next:i(16)(1,l)}),i(25)(s,u+" Iterator")}},function(n,r,i){var o=i(19),a=i(14),s=i(20)("toStringTag");n.exports=function(u,l,c){u&&!o(u=c?u:u.prototype,s)&&a(u,s,l)}},function(n,r,i){var o=i(27),a=i(10),s=i(29),u=i(30),l=i(33),c=i(34),f=i(35);a(a.S+a.F*!i(38)(function(d){Array.from(d)}),"Array",{from:function(h){var p=s(h),g=typeof this=="function"?this:Array,m=arguments[1],y=m!==void 0,v=0,b=f(p),x,w,E,S;if(y&&(m=o(m,arguments[2],2)),b!=null&&!(g==Array&&l(b)))for(S=b.call(p),w=new g;!(E=S.next()).done;v++)w[v]=y?u(S,m,[E.value,v],!0):E.value;else for(x=c(p.length),w=new g(x);x>v;v++)w[v]=y?m(p[v],v):p[v];return w.length=v,w}})},function(n,r,i){var o=i(28);n.exports=function(a,s,u){if(o(a),s===void 0)return a;switch(u){case 1:return function(l){return a.call(s,l)};case 2:return function(l,c){return a.call(s,l,c)};case 3:return function(l,c,f){return a.call(s,l,c,f)}}return function(){return a.apply(s,arguments)}}},function(n,r){n.exports=function(i){if(typeof i!="function")throw TypeError(i+" is not a function!");return i}},function(n,r,i){var o=i(7);n.exports=function(a){return Object(o(a))}},function(n,r,i){var o=i(31);n.exports=function(a,s,u,l){try{return l?s(o(u)[0],u[1]):s(u)}catch(f){var c=a.return;throw c!==void 0&&o(c.call(a)),f}}},function(n,r,i){var o=i(32);n.exports=function(a){if(!o(a))throw TypeError(a+" is not an object!");return a}},function(n,r){n.exports=function(i){return typeof i=="object"?i!==null:typeof i=="function"}},function(n,r,i){var o=i(23),a=i(20)("iterator");n.exports=function(s){return(o.Array||Array.prototype[a])===s}},function(n,r,i){var o=i(6),a=Math.min;n.exports=function(s){return s>0?a(o(s),9007199254740991):0}},function(n,r,i){var o=i(36),a=i(20)("iterator"),s=i(23);n.exports=i(12).getIteratorMethod=function(u){if(u!=null)return u[a]||u["@@iterator"]||s[o(u)]}},function(n,r,i){var o=i(37),a=i(20)("toStringTag"),s=o(function(){return arguments}())=="Arguments";n.exports=function(u){var l,c,f;return u===void 0?"Undefined":u===null?"Null":typeof(c=(l=Object(u))[a])=="string"?c:s?o(l):(f=o(l))=="Object"&&typeof l.callee=="function"?"Arguments":f}},function(n,r){var i={}.toString;n.exports=function(o){return i.call(o).slice(8,-1)}},function(n,r,i){var o=i(20)("iterator"),a=!1;try{var s=[7][o]();s.return=function(){a=!0},Array.from(s,function(){throw 2})}catch{}n.exports=function(u){if(!a)return!1;var l=!1;try{var c=[7],f=c[o]();f.next=function(){l=!0},c[o]=function(){return f},u(c)}catch{}return l}},function(n,r,i){var o=i(40).default,a=i(49).default;r.default=function(){function s(u,l){var c=[],f=!0,d=!1,h=void 0;try{for(var p=o(u),g;!(f=(g=p.next()).done)&&(c.push(g.value),!(l&&c.length===l));f=!0);}catch(m){d=!0,h=m}finally{try{!f&&p.return&&p.return()}finally{if(d)throw h}}return c}return function(u,l){if(Array.isArray(u))return u;if(a(Object(u)))return s(u,l);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r.__esModule=!0},function(n,r,i){n.exports={default:i(41),__esModule:!0}},function(n,r,i){i(42),i(4),n.exports=i(48)},function(n,r,i){i(43);var o=i(23);o.NodeList=o.HTMLCollection=o.Array},function(n,r,i){var o=i(44),a=i(45),s=i(23),u=i(46);i(8)(Array,"Array",function(l,c){this._t=u(l),this._i=0,this._k=c},function(){var l=this._t,c=this._k,f=this._i++;return!l||f>=l.length?(this._t=void 0,a(1)):c=="keys"?a(0,f):c=="values"?a(0,l[f]):a(0,[f,l[f]])},"values"),s.Arguments=s.Array,o("keys"),o("values"),o("entries")},function(n,r){n.exports=function(){}},function(n,r){n.exports=function(i,o){return{value:o,done:!!i}}},function(n,r,i){var o=i(47),a=i(7);n.exports=function(s){return o(a(s))}},function(n,r,i){var o=i(37);n.exports=0 in Object("z")?Object:function(a){return o(a)=="String"?a.split(""):Object(a)}},function(n,r,i){var o=i(31),a=i(35);n.exports=i(12).getIterator=function(s){var u=a(s);if(typeof u!="function")throw TypeError(s+" is not iterable!");return o(u.call(s))}},function(n,r,i){n.exports={default:i(50),__esModule:!0}},function(n,r,i){i(42),i(4),n.exports=i(51)},function(n,r,i){var o=i(36),a=i(20)("iterator"),s=i(23);n.exports=i(12).isIterable=function(u){var l=Object(u);return a in l||"@@iterator"in l||s.hasOwnProperty(o(l))}},function(n,r,i){n.exports={default:i(53),__esModule:!0}},function(n,r,i){i(4),i(42),n.exports=i(20)("iterator")},function(n,r,i){(function(o){var a=typeof o=="object"?o:typeof window=="object"?window:typeof self=="object"?self:this,s=a.regeneratorRuntime&&Object.getOwnPropertyNames(a).indexOf("regeneratorRuntime")>=0,u=s&&a.regeneratorRuntime;if(a.regeneratorRuntime=void 0,n.exports=i(55),s)a.regeneratorRuntime=u;else try{delete a.regeneratorRuntime}catch{a.regeneratorRuntime=void 0}n.exports={default:n.exports,__esModule:!0}}).call(r,function(){return this}())},function(n,r,i){(function(o,a){var s=i(57).default,u=i(52).default,l=i(63).default,c=i(65).default;(function(f){var d=Object.prototype.hasOwnProperty,h,p=typeof s=="function"&&u||"@@iterator",g=typeof n=="object",m=f.regeneratorRuntime;if(m){g&&(n.exports=m);return}m=f.regeneratorRuntime=g?n.exports:{};function y(j,P,I,$){var G=l((P||_).prototype);return G._invoke=T(j,I||null,new R($||[])),G}m.wrap=y;function v(j,P,I){try{return{type:"normal",arg:j.call(P,I)}}catch($){return{type:"throw",arg:$}}}var b="suspendedStart",x="suspendedYield",w="executing",E="completed",S={};function _(){}function M(){}function D(){}var C=D.prototype=_.prototype;M.prototype=C.constructor=D,D.constructor=M,M.displayName="GeneratorFunction";function A(j){["next","throw","return"].forEach(function(P){j[P]=function(I){return this._invoke(P,I)}})}m.isGeneratorFunction=function(j){var P=typeof j=="function"&&j.constructor;return P?P===M||(P.displayName||P.name)==="GeneratorFunction":!1},m.mark=function(j){return j.__proto__=D,j.prototype=l(C),j},m.awrap=function(j){return new k(j)};function k(j){this.arg=j}function N(j){function P(V,Y){var U=j[V](Y),H=U.value;return H instanceof k?c.resolve(H.arg).then(I,$):c.resolve(H).then(function(X){return U.value=X,U})}typeof a=="object"&&a.domain&&(P=a.domain.bind(P));var I=P.bind(j,"next"),$=P.bind(j,"throw");P.bind(j,"return");var G;function z(V,Y){var U=G?G.then(function(){return P(V,Y)}):new c(function(H){H(P(V,Y))});return G=U.catch(function(H){}),U}this._invoke=z}A(N.prototype),m.async=function(j,P,I,$){var G=new N(y(j,P,I,$));return m.isGeneratorFunction(P)?G:G.next().then(function(z){return z.done?z.value:G.next()})};function T(j,P,I){var $=b;return function(z,V){if($===w)throw new Error("Generator is already running");if($===E){if(z==="throw")throw V;return O()}for(;;){var Y=I.delegate;if(Y){if(z==="return"||z==="throw"&&Y.iterator[z]===h){I.delegate=null;var U=Y.iterator.return;if(U){var X=v(U,Y.iterator,V);if(X.type==="throw"){z="throw",V=X.arg;continue}}if(z==="return")continue}var X=v(Y.iterator[z],Y.iterator,V);if(X.type==="throw"){I.delegate=null,z="throw",V=X.arg;continue}z="next",V=h;var H=X.arg;if(H.done)I[Y.resultName]=H.value,I.next=Y.nextLoc;else return $=x,H;I.delegate=null}if(z==="next")$===x?I.sent=V:I.sent=h;else if(z==="throw"){if($===b)throw $=E,V;I.dispatchException(V)&&(z="next",V=h)}else z==="return"&&I.abrupt("return",V);$=w;var X=v(j,P,I);if(X.type==="normal"){$=I.done?E:x;var H={value:X.arg,done:I.done};if(X.arg===S)I.delegate&&z==="next"&&(V=h);else return H}else X.type==="throw"&&($=E,z="throw",V=X.arg)}}}A(C),C[p]=function(){return this},C.toString=function(){return"[object Generator]"};function F(j){var P={tryLoc:j[0]};1 in j&&(P.catchLoc=j[1]),2 in j&&(P.finallyLoc=j[2],P.afterLoc=j[3]),this.tryEntries.push(P)}function L(j){var P=j.completion||{};P.type="normal",delete P.arg,j.completion=P}function R(j){this.tryEntries=[{tryLoc:"root"}],j.forEach(F,this),this.reset(!0)}m.keys=function(j){var P=[];for(var I in j)P.push(I);return P.reverse(),function $(){for(;P.length;){var G=P.pop();if(G in j)return $.value=G,$.done=!1,$}return $.done=!0,$}};function B(j){if(j){var P=j[p];if(P)return P.call(j);if(typeof j.next=="function")return j;if(!isNaN(j.length)){var I=-1,$=function G(){for(;++I<j.length;)if(d.call(j,I))return G.value=j[I],G.done=!1,G;return G.value=h,G.done=!0,G};return $.next=$}}return{next:O}}m.values=B;function O(){return{value:h,done:!0}}R.prototype={constructor:R,reset:function(P){if(this.prev=0,this.next=0,this.sent=h,this.done=!1,this.delegate=null,this.tryEntries.forEach(L),!P)for(var I in this)I.charAt(0)==="t"&&d.call(this,I)&&!isNaN(+I.slice(1))&&(this[I]=h)},stop:function(){this.done=!0;var P=this.tryEntries[0],I=P.completion;if(I.type==="throw")throw I.arg;return this.rval},dispatchException:function(P){if(this.done)throw P;var I=this;function $(H,X){return V.type="throw",V.arg=P,I.next=H,!!X}for(var G=this.tryEntries.length-1;G>=0;--G){var z=this.tryEntries[G],V=z.completion;if(z.tryLoc==="root")return $("end");if(z.tryLoc<=this.prev){var Y=d.call(z,"catchLoc"),U=d.call(z,"finallyLoc");if(Y&&U){if(this.prev<z.catchLoc)return $(z.catchLoc,!0);if(this.prev<z.finallyLoc)return $(z.finallyLoc)}else if(Y){if(this.prev<z.catchLoc)return $(z.catchLoc,!0)}else if(U){if(this.prev<z.finallyLoc)return $(z.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(P,I){for(var $=this.tryEntries.length-1;$>=0;--$){var G=this.tryEntries[$];if(G.tryLoc<=this.prev&&d.call(G,"finallyLoc")&&this.prev<G.finallyLoc){var z=G;break}}z&&(P==="break"||P==="continue")&&z.tryLoc<=I&&I<=z.finallyLoc&&(z=null);var V=z?z.completion:{};return V.type=P,V.arg=I,z?this.next=z.finallyLoc:this.complete(V),S},complete:function(P,I){if(P.type==="throw")throw P.arg;P.type==="break"||P.type==="continue"?this.next=P.arg:P.type==="return"?(this.rval=P.arg,this.next="end"):P.type==="normal"&&I&&(this.next=I)},finish:function(P){for(var I=this.tryEntries.length-1;I>=0;--I){var $=this.tryEntries[I];if($.finallyLoc===P)return this.complete($.completion,$.afterLoc),L($),S}},catch:function(P){for(var I=this.tryEntries.length-1;I>=0;--I){var $=this.tryEntries[I];if($.tryLoc===P){var G=$.completion;if(G.type==="throw"){var z=G.arg;L($)}return z}}throw new Error("illegal catch attempt")},delegateYield:function(P,I,$){return this.delegate={iterator:B(P),resultName:I,nextLoc:$},S}}})(typeof o=="object"?o:typeof window=="object"?window:typeof self=="object"?self:void 0)}).call(r,function(){return this}(),i(56))},function(n,r){var i=n.exports={},o=[],a=!1,s,u=-1;function l(){a=!1,s.length?o=s.concat(o):u=-1,o.length&&c()}function c(){if(!a){var h=setTimeout(l);a=!0;for(var p=o.length;p;){for(s=o,o=[];++u<p;)s&&s[u].run();u=-1,p=o.length}s=null,a=!1,clearTimeout(h)}}i.nextTick=function(h){var p=new Array(arguments.length-1);if(arguments.length>1)for(var g=1;g<arguments.length;g++)p[g-1]=arguments[g];o.push(new f(h,p)),o.length===1&&!a&&setTimeout(c,0)};function f(h,p){this.fun=h,this.array=p}f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function d(){}i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.binding=function(h){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(h){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(n,r,i){n.exports={default:i(58),__esModule:!0}},function(n,r,i){i(59),n.exports=i(12).Symbol},function(n,r,i){var o=i(15),a=i(11),s=i(19),u=i(17),l=i(10),c=i(13),f=i(18),d=i(21),h=i(25),p=i(22),g=i(20),m=i(60),y=i(61),v=i(62),b=i(32),x=i(31),w=i(46),E=i(16),S=o.getDesc,_=o.setDesc,M=o.create,D=y.get,C=a.Symbol,A=!1,k=g("_hidden"),N=o.isEnum,T=d("symbol-registry"),F=d("symbols"),L=typeof C=="function",R=Object.prototype,B=u&&f(function(){return M(_({},"a",{get:function(){return _(this,"a",{value:7}).a}})).a!=7})?function(U,H,X){var W=S(R,H);W&&delete R[H],_(U,H,X),W&&U!==R&&_(R,H,W)}:_,O=function(U){var H=F[U]=M(C.prototype);return H._k=U,u&&A&&B(R,U,{configurable:!0,set:function(X){s(this,k)&&s(this[k],U)&&(this[k][U]=!1),B(this,U,E(1,X))}}),H},j=function(H,X,W){return W&&s(F,X)?(W.enumerable?(s(H,k)&&H[k][X]&&(H[k][X]=!1),W=M(W,{enumerable:E(0,!1)})):(s(H,k)||_(H,k,E(1,{})),H[k][X]=!0),B(H,X,W)):_(H,X,W)},P=function(H,X){x(H);for(var W=v(X=w(X)),Se=0,fe=W.length,he;fe>Se;)j(H,he=W[Se++],X[he]);return H},I=function(H,X){return X===void 0?M(H):P(M(H),X)},$=function(H){var X=N.call(this,H);return X||!s(this,H)||!s(F,H)||s(this,k)&&this[k][H]?X:!0},G=function(H,X){var W=S(H=w(H),X);return W&&s(F,X)&&!(s(H,k)&&H[k][X])&&(W.enumerable=!0),W},z=function(H){for(var X=D(w(H)),W=[],Se=0,fe;X.length>Se;)!s(F,fe=X[Se++])&&fe!=k&&W.push(fe);return W},V=function(H){for(var X=D(w(H)),W=[],Se=0,fe;X.length>Se;)s(F,fe=X[Se++])&&W.push(F[fe]);return W};L||(C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor");return O(p(arguments[0]))},c(C.prototype,"toString",function(){return this._k}),o.create=I,o.isEnum=$,o.getDesc=G,o.setDesc=j,o.setDescs=P,o.getNames=y.get=z,o.getSymbols=V,u&&!i(9)&&c(R,"propertyIsEnumerable",$,!0)),(!L||f(function(){return JSON.stringify([C()])!="[null]"}))&&c(C.prototype,"toJSON",function(){if(L&&b(this))return this});var Y={for:function(U){return s(T,U+="")?T[U]:T[U]=C(U)},keyFor:function(H){return m(T,H)},useSetter:function(){A=!0},useSimple:function(){A=!1}};o.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(U){var H=g(U);Y[U]=L?H:O(H)}),A=!0,l(l.G+l.W,{Symbol:C}),l(l.S,"Symbol",Y),l(l.S+l.F*!L,"Object",{create:I,defineProperty:j,defineProperties:P,getOwnPropertyDescriptor:G,getOwnPropertyNames:z,getOwnPropertySymbols:V}),h(C,"Symbol"),h(Math,"Math",!0),h(a.JSON,"JSON",!0)},function(n,r,i){var o=i(15),a=i(46);n.exports=function(s,u){for(var l=a(s),c=o.getKeys(l),f=c.length,d=0,h;f>d;)if(l[h=c[d++]]===u)return h}},function(n,r,i){var o={}.toString,a=i(46),s=i(15).getNames,u=typeof window=="object"&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(c){try{return s(c)}catch{return u.slice()}};n.exports.get=function(f){return u&&o.call(f)=="[object Window]"?l(f):s(a(f))}},function(n,r,i){var o=i(15);n.exports=function(a){var s=o.getKeys(a),u=o.getSymbols;if(u)for(var l=u(a),c=o.isEnum,f=0,d;l.length>f;)c.call(a,d=l[f++])&&s.push(d);return s}},function(n,r,i){n.exports={default:i(64),__esModule:!0}},function(n,r,i){var o=i(15);n.exports=function(s,u){return o.create(s,u)}},function(n,r,i){n.exports={default:i(66),__esModule:!0}},function(n,r,i){i(67),i(4),i(42),i(68),n.exports=i(12).Promise},function(n,r){},function(n,r,i){var o=i(15),a=i(9),s=i(11),u=i(27),l=i(36),c=i(10),f=i(32),d=i(31),h=i(28),p=i(69),g=i(70),m=i(71).set,y=i(72),v=i(73),b=i(20)("species"),x=i(22)("record"),w=i(74),E="Promise",S=s.process,_=l(S)=="process",M=s[E],D,C=function(j){var P=new M(function(){});return j&&(P.constructor=Object),M.resolve(P)===P},A=function(){var j=!1;function P($){var G=new M($);return m(G,P.prototype),G}try{if(j=M&&M.resolve&&C(),m(P,M),P.prototype=o.create(M.prototype,{constructor:{value:P}}),P.resolve(5).then(function(){})instanceof P||(j=!1),j&&i(17)){var I=!1;M.resolve(o.setDesc({},"then",{get:function(){I=!0}})),j=I}}catch{j=!1}return j}(),k=function(j){return f(j)&&(A?l(j)=="Promise":x in j)},N=function(j,P){return a&&j===M&&P===D?!0:y(j,P)},T=function(j){var P=d(j)[b];return P!=null?P:j},F=function(j){var P;return f(j)&&typeof(P=j.then)=="function"?P:!1},L=function(j,P){if(!j.n){j.n=!0;var I=j.c;w(function(){for(var $=j.v,G=j.s==1,z=0,V=function(Y){var U=G?Y.ok:Y.fail,H,X;try{U?(G||(j.h=!0),H=U===!0?$:U($),H===Y.P?Y.rej(TypeError("Promise-chain cycle")):(X=F(H))?X.call(H,Y.res,Y.rej):Y.res(H)):Y.rej($)}catch(W){Y.rej(W)}};I.length>z;)V(I[z++]);I.length=0,j.n=!1,P&&setTimeout(function(){var Y=j.p,U,H;R(Y)&&(_?S.emit("unhandledRejection",$,Y):(U=s.onunhandledrejection)?U({promise:Y,reason:$}):(H=s.console)&&H.error&&H.error("Unhandled promise rejection",$)),j.a=void 0},1)})}},R=function(j){var P=j[x],I=P.a||P.c,$=0,G;if(P.h)return!1;for(;I.length>$;)if(G=I[$++],G.fail||!R(G.P))return!1;return!0},B=function(j){var P=this;P.d||(P.d=!0,P=P.r||P,P.v=j,P.s=2,P.a=P.c.slice(),L(P,!0))},O=function(j){var P=this,I;if(!P.d){P.d=!0,P=P.r||P;try{(I=F(j))?w(function(){var $={r:P,d:!1};try{I.call(j,u(O,$,1),u(B,$,1))}catch(G){B.call($,G)}}):(P.v=j,P.s=1,L(P,!1))}catch($){B.call({r:P,d:!1},$)}}};A||(M=function(P){h(P);var I={p:p(this,M,E),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};this[x]=I;try{P(u(O,I,1),u(B,I,1))}catch($){B.call(I,$)}},i(79)(M.prototype,{then:function(P,I){var $=d(d(this).constructor)[b],G={ok:typeof P=="function"?P:!0,fail:typeof I=="function"?I:!1},z=G.P=new($!=null?$:M)(function(Y,U){G.res=Y,G.rej=U});h(G.res),h(G.rej);var V=this[x];return V.c.push(G),V.a&&V.a.push(G),V.s&&L(V,!1),z},catch:function(j){return this.then(void 0,j)}})),c(c.G+c.W+c.F*!A,{Promise:M}),i(25)(M,E),v(M),v(D=i(12)[E]),c(c.S+c.F*!A,E,{reject:function(P){return new this(function(I,$){$(P)})}}),c(c.S+c.F*(!A||C(!0)),E,{resolve:function(P){return k(P)&&N(P.constructor,this)?P:new this(function(I){I(P)})}}),c(c.S+c.F*!(A&&i(38)(function(j){M.all(j).catch(function(){})})),E,{all:function(P){var I=T(this),$=[];return new I(function(G,z){g(P,!1,$.push,$);var V=$.length,Y=Array(V);V?o.each.call($,function(U,H){I.resolve(U).then(function(X){Y[H]=X,--V||G(Y)},z)}):G(Y)})},race:function(P){var I=T(this);return new I(function($,G){g(P,!1,function(z){I.resolve(z).then($,G)})})}})},function(n,r){n.exports=function(i,o,a){if(!(i instanceof o))throw TypeError(a+": use the 'new' operator!");return i}},function(n,r,i){var o=i(27),a=i(30),s=i(33),u=i(31),l=i(34),c=i(35);n.exports=function(f,d,h,p){var g=c(f),m=o(h,p,d?2:1),y=0,v,b,x;if(typeof g!="function")throw TypeError(f+" is not iterable!");if(s(g))for(v=l(f.length);v>y;y++)d?m(u(b=f[y])[0],b[1]):m(f[y]);else for(x=g.call(f);!(b=x.next()).done;)a(x,m,b.value,d)}},function(n,r,i){var o=i(15).getDesc,a=i(32),s=i(31),u=function(l,c){if(s(l),!a(c)&&c!==null)throw TypeError(c+": can't set as prototype!")};n.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(l,c,f){try{f=i(27)(Function.call,o(Object.prototype,"__proto__").set,2),f(l,[]),c=!(l instanceof Array)}catch{c=!0}return function(h,p){return u(h,p),c?h.__proto__=p:f(h,p),h}}({},!1):void 0),check:u}},function(n,r){n.exports=Object.is||function(o,a){return o===a?o!==0||1/o==1/a:o!=o&&a!=a}},function(n,r,i){var o=i(15),a=i(20)("species");n.exports=function(s){i(17)&&!(a in s)&&o.setDesc(s,a,{configurable:!0,get:function(){return this}})}},function(n,r,i){var o=i(11),a=i(75).set,s=o.MutationObserver||o.WebKitMutationObserver,u=o.process,l=i(37)(u)=="process",c,f,d,h=function(){var m,y;for(l&&(m=u.domain)&&(u.domain=null,m.exit());c;)y=c.domain,y&&y.enter(),c.fn.call(),y&&y.exit(),c=c.next;f=void 0,m&&m.enter()};if(l)d=function(){u.nextTick(h)};else if(s){var p=1,g=document.createTextNode("");new s(h).observe(g,{characterData:!0}),d=function(){g.data=p=-p}}else d=function(){a.call(o,h)};n.exports=function(y){var v={fn:y,next:void 0,domain:l&&u.domain};f&&(f.next=v),c||(c=v,d()),f=v}},function(n,r,i){var o=i(27),a=i(76),s=i(77),u=i(78),l=i(11),c=l.process,f=l.setImmediate,d=l.clearImmediate,h=l.MessageChannel,p=0,g={},m="onreadystatechange",y,v,b,x=function(){var E=+this;if(g.hasOwnProperty(E)){var S=g[E];delete g[E],S()}},w=function(E){x.call(E.data)};(!f||!d)&&(f=function(S){for(var _=[],M=1;arguments.length>M;)_.push(arguments[M++]);return g[++p]=function(){a(typeof S=="function"?S:Function(S),_)},y(p),p},d=function(S){delete g[S]},i(37)(c)=="process"?y=function(E){c.nextTick(o(x,E,1))}:h?(v=new h,b=v.port2,v.port1.onmessage=w,y=o(b.postMessage,b,1)):l.addEventListener&&typeof postMessage=="function"&&!l.importScript?(y=function(E){l.postMessage(E+"","*")},l.addEventListener("message",w,!1)):m in u("script")?y=function(E){s.appendChild(u("script"))[m]=function(){s.removeChild(this),x.call(E)}}:y=function(E){setTimeout(o(x,E,1),0)}),n.exports={set:f,clear:d}},function(n,r){n.exports=function(i,o,a){var s=a===void 0;switch(o.length){case 0:return s?i():i.call(a);case 1:return s?i(o[0]):i.call(a,o[0]);case 2:return s?i(o[0],o[1]):i.call(a,o[0],o[1]);case 3:return s?i(o[0],o[1],o[2]):i.call(a,o[0],o[1],o[2]);case 4:return s?i(o[0],o[1],o[2],o[3]):i.call(a,o[0],o[1],o[2],o[3])}return i.apply(a,o)}},function(n,r,i){n.exports=i(11).document&&document.documentElement},function(n,r,i){var o=i(32),a=i(11).document,s=o(a)&&o(a.createElement);n.exports=function(u){return s?a.createElement(u):{}}},function(n,r,i){var o=i(13);n.exports=function(a,s){for(var u in s)o(a,u,s[u]);return a}},function(n,r,i){n.exports={default:i(81),__esModule:!0}},function(n,r,i){i(82),n.exports=i(12).Object.keys},function(n,r,i){var o=i(29);i(83)("keys",function(a){return function(u){return a(o(u))}})},function(n,r,i){n.exports=function(o,a){var s=i(10),u=(i(12).Object||{})[o]||Object[o],l={};l[o]=a(u),s(s.S+s.F*i(18)(function(){u(1)}),"Object",l)}},function(n,r,i){n.exports={default:i(85),__esModule:!0}},function(n,r,i){i(67),i(4),i(42),i(86),i(89),n.exports=i(12).Set},function(n,r,i){var o=i(87);i(88)("Set",function(a){return function(){return a(this,arguments[0])}},{add:function(s){return o.def(this,s=s===0?0:s,s)}},o)},function(n,r,i){var o=i(15),a=i(14),s=i(27),u=i(73),l=i(69),c=i(7),f=i(70),d=i(45),h=i(22)("id"),p=i(19),g=i(32),m=Object.isExtensible||g,y=i(17),v=y?"_s":"size",b=0,x=function(E,S){if(!g(E))return typeof E=="symbol"?E:(typeof E=="string"?"S":"P")+E;if(!p(E,h)){if(!m(E))return"F";if(!S)return"E";a(E,h,++b)}return"O"+E[h]},w=function(E,S){var _=x(S),M;if(_!=="F")return E._i[_];for(M=E._f;M;M=M.n)if(M.k==S)return M};n.exports={getConstructor:function(E,S,_,M){var D=E(function(C,A){l(C,D,S),C._i=o.create(null),C._f=void 0,C._l=void 0,C[v]=0,A!=null&&f(A,_,C[M],C)});return i(79)(D.prototype,{clear:function(){for(var A=this,k=A._i,N=A._f;N;N=N.n)N.r=!0,N.p&&(N.p=N.p.n=void 0),delete k[N.i];A._f=A._l=void 0,A[v]=0},delete:function(C){var A=this,k=w(A,C);if(k){var N=k.n,T=k.p;delete A._i[k.i],k.r=!0,T&&(T.n=N),N&&(N.p=T),A._f==k&&(A._f=N),A._l==k&&(A._l=T),A[v]--}return!!k},forEach:function(A){for(var k=s(A,arguments[1],3),N;N=N?N.n:this._f;)for(k(N.v,N.k,this);N&&N.r;)N=N.p},has:function(A){return!!w(this,A)}}),y&&o.setDesc(D.prototype,"size",{get:function(){return c(this[v])}}),D},def:function(E,S,_){var M=w(E,S),D,C;return M?M.v=_:(E._l=M={i:C=x(S,!0),k:S,v:_,p:D=E._l,n:void 0,r:!1},E._f||(E._f=M),D&&(D.n=M),E[v]++,C!=="F"&&(E._i[C]=M)),E},getEntry:w,setStrong:function(E,S,_){i(8)(E,S,function(M,D){this._t=M,this._k=D,this._l=void 0},function(){for(var M=this,D=M._k,C=M._l;C&&C.r;)C=C.p;return!M._t||!(M._l=C=C?C.n:M._t._f)?(M._t=void 0,d(1)):D=="keys"?d(0,C.k):D=="values"?d(0,C.v):d(0,[C.k,C.v])},_?"entries":"values",!_,!0),u(E),u(i(12)[S])}}},function(n,r,i){var o=i(15),a=i(10),s=i(14),u=i(70),l=i(69);n.exports=function(c,f,d,h,p,g){var m=i(11)[c],y=m,v=p?"set":"add",b=y&&y.prototype,x={};return!i(17)||typeof y!="function"||!(g||b.forEach&&!i(18)(function(){new y().entries().next()}))?(y=h.getConstructor(f,c,p,v),i(79)(y.prototype,d)):(y=f(function(w,E){l(w,y,c),w._c=new m,E!=null&&u(E,p,w[v],w)}),o.each.call("add,clear,delete,forEach,get,has,set,keys,values,entries".split(","),function(w){var E=w=="add"||w=="set";w in b&&!(g&&w=="clear")&&s(y.prototype,w,function(S,_){var M=this._c[w](S===0?0:S,_);return E?this:M})}),"size"in b&&o.setDesc(y.prototype,"size",{get:function(){return this._c.size}})),i(25)(y,c),x[c]=y,a(a.G+a.W+a.F,x),g||h.setStrong(y,c,p),y}},function(n,r,i){var o=i(10);o(o.P,"Set",{toJSON:i(90)("Set")})},function(n,r,i){var o=i(70),a=i(36);n.exports=function(s){return function(){if(a(this)!=s)throw TypeError(s+"#toJSON isn't generic");var l=[];return o(this,!1,l.push,l),l}}}])})})(uW);var IAe=mq(uW.exports);const xCe=(e,t,n)=>{const r=n.indexOf(e)+e.length,i=n.substring(0,r),o=n.match(/^\.\.\//),a=n.substring(r);return[o?i:t,a]},lW=(e,t)=>(n,r)=>i=>{const[o,a]=xCe(e,t,i);return o+a.replaceAll(n,r)},wCe=r=>{var i=r,{hashRoot:e="",hashSlash:t="/"}=i,n=gu(i,["hashRoot","hashSlash"]);return to({encode:lW("/",e)("/",t),decode:lW(e,"/")(t,"/")},n)},cW=(e,t="")=>`#${e(t.slice(1))}`,fW=(e,t)=>{const n=e[t];return typeof n=="function"?n.bind(e):n};function SCe(e){return e in{history:1,location:1}}function ECe(e){return e in{pushState:1,replaceState:1}}const OCe=n=>{var r=n,{encode:e}=r,t=gu(r,["encode"]);const{defaultPath:i={}}=t;return o=>(...[a,s,u])=>{if(!u)return o(a,s,u);const l=Zo((u||"").toString()),c=cW(e,l.hash);return o(a,s,tc(pu(to({},i),{hash:c})))}},kCe=r=>{var i=r,{encode:e,decode:t}=i,n=gu(i,["encode","decode"]);const o=OCe(to({encode:e},n));return{history:a=>new Proxy(a,{get:(s,u)=>{const l=fW(a,u);return ECe(u)?o(l):l}}),location:a=>pu(to({},a),{hash:cW(t,a.hash)})}},LAe=(n={})=>{var r=n,{window:e=document.defaultView}=r,t=gu(r,["window"]);const i=kCe(wCe(t)),o=new Proxy(e,{get:(a,s)=>{const u=fW(e,s);return SCe(s)?i[s](u):u}});return MV({window:o})};var CCe={exports:{}},Wr={},dW={exports:{}},hW={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,B){var O=R.length;R.push(B);e:for(;0<O;){var j=O-1>>>1,P=R[j];if(0<i(P,B))R[j]=B,R[O]=P,O=j;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var B=R[0],O=R.pop();if(O!==B){R[0]=O;e:for(var j=0,P=R.length,I=P>>>1;j<I;){var $=2*(j+1)-1,G=R[$],z=$+1,V=R[z];if(0>i(G,O))z<P&&0>i(V,G)?(R[j]=V,R[z]=O,j=z):(R[j]=G,R[$]=O,j=$);else if(z<P&&0>i(V,O))R[j]=V,R[z]=O,j=z;else break e}}return B}function i(R,B){var O=R.sortIndex-B.sortIndex;return O!==0?O:R.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(R){for(var B=n(l);B!==null;){if(B.callback===null)r(l);else if(B.startTime<=R)r(l),B.sortIndex=B.expirationTime,t(u,B);else break;B=n(l)}}function x(R){if(g=!1,b(R),!p)if(n(u)!==null)p=!0,F(w);else{var B=n(l);B!==null&&L(x,B.startTime-R)}}function w(R,B){p=!1,g&&(g=!1,y(_),_=-1),h=!0;var O=d;try{for(b(B),f=n(u);f!==null&&(!(f.expirationTime>B)||R&&!C());){var j=f.callback;if(typeof j=="function"){f.callback=null,d=f.priorityLevel;var P=j(f.expirationTime<=B);B=e.unstable_now(),typeof P=="function"?f.callback=P:f===n(u)&&r(u),b(B)}else r(u);f=n(u)}if(f!==null)var I=!0;else{var $=n(l);$!==null&&L(x,$.startTime-B),I=!1}return I}finally{f=null,d=O,h=!1}}var E=!1,S=null,_=-1,M=5,D=-1;function C(){return!(e.unstable_now()-D<M)}function A(){if(S!==null){var R=e.unstable_now();D=R;var B=!0;try{B=S(!0,R)}finally{B?k():(E=!1,S=null)}}else E=!1}var k;if(typeof v=="function")k=function(){v(A)};else if(typeof MessageChannel!="undefined"){var N=new MessageChannel,T=N.port2;N.port1.onmessage=A,k=function(){T.postMessage(null)}}else k=function(){m(A,0)};function F(R){S=R,E||(E=!0,k())}function L(R,B){_=m(function(){R(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,F(w))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(R){switch(d){case 1:case 2:case 3:var B=3;break;default:B=d}var O=d;d=B;try{return R()}finally{d=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,B){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var O=d;d=R;try{return B()}finally{d=O}},e.unstable_scheduleCallback=function(R,B,O){var j=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?j+O:j):O=j,R){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=O+P,R={id:c++,callback:B,priorityLevel:R,startTime:O,expirationTime:P,sortIndex:-1},O>j?(R.sortIndex=O,t(l,R),n(u)===null&&R===n(l)&&(g?(y(_),_=-1):g=!0,L(x,O-j))):(R.sortIndex=P,t(u,R),p||h||(p=!0,F(w))),R},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(R){var B=d;return function(){var O=d;d=B;try{return R.apply(this,arguments)}finally{d=O}}}})(hW);dW.exports=hW;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yt=JN,pW=be.exports,Hr=dW.exports;function ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gW=new Set,mg={};function Rl(e,t){Uf(e,t),Uf(e+"Capture",t)}function Uf(e,t){for(mg[e]=t,e=0;e<t.length;e++)gW.add(t[e])}var Da=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),V3=Object.prototype.hasOwnProperty,_Ce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mW={},yW={};function ACe(e){return V3.call(yW,e)?!0:V3.call(mW,e)?!1:_Ce.test(e)?yW[e]=!0:(mW[e]=!0,!1)}function TCe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function NCe(e,t,n,r){if(t===null||typeof t=="undefined"||TCe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tr(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dn[e]=new tr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dn[t]=new tr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){dn[e]=new tr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dn[e]=new tr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dn[e]=new tr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){dn[e]=new tr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){dn[e]=new tr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){dn[e]=new tr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){dn[e]=new tr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Y3=/[\-:]([a-z])/g;function X3(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Y3,X3);dn[t]=new tr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Y3,X3);dn[t]=new tr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Y3,X3);dn[t]=new tr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){dn[e]=new tr(e,1,!1,e.toLowerCase(),null,!1,!1)});dn.xlinkHref=new tr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){dn[e]=new tr(e,1,!1,e.toLowerCase(),null,!0,!0)});function K3(e,t,n,r){var i=dn.hasOwnProperty(t)?dn[t]:null,o=i!==null?i.type===0:r?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");o||(NCe(t,n,i,r)&&(n=null),r||i===null?ACe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ra=pW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yg=60103,Pl=60106,jl=60107,bb=60108,xb=60114,Q3=60109,J3=60110,wb=60112,Sb=60113,Eb=60120,Ob=60115,Pa=60116,vW=60129,Z3=60130,eT=60131,bW=60132;if(typeof Symbol=="function"&&Symbol.for){var hn=Symbol.for;yg=hn("react.element"),Pl=hn("react.portal"),jl=hn("react.fragment"),bb=hn("react.strict_mode"),xb=hn("react.profiler"),Q3=hn("react.provider"),J3=hn("react.context"),wb=hn("react.forward_ref"),Sb=hn("react.suspense"),Eb=hn("react.suspense_list"),Ob=hn("react.memo"),Pa=hn("react.lazy"),hn("react.scope"),vW=hn("react.debug_trace_mode"),Z3=hn("react.offscreen"),eT=hn("react.legacy_hidden"),bW=hn("react.cache")}var xW=typeof Symbol=="function"&&Symbol.iterator;function vg(e){return e===null||typeof e!="object"?null:(e=xW&&e[xW]||e["@@iterator"],typeof e=="function"?e:null)}var tT;function bg(e){if(tT===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);tT=t&&t[1]||""}return`
`+tT+e}var nT=!1;function rT(e,t){if(!e||nT)return"";nT=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var u=`
`+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=s);break}}}finally{nT=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?bg(e):""}function MCe(e){switch(e.tag){case 5:return bg(e.type);case 16:return bg("Lazy");case 13:return bg("Suspense");case 19:return bg("SuspenseList");case 0:case 2:case 15:return e=rT(e.type,!1),e;case 11:return e=rT(e.type.render,!1),e;case 1:return e=rT(e.type,!0),e;default:return""}}function iT(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jl:return"Fragment";case Pl:return"Portal";case xb:return"Profiler";case bb:return"StrictMode";case Sb:return"Suspense";case Eb:return"SuspenseList";case bW:return"Cache"}if(typeof e=="object")switch(e.$$typeof){case J3:return(e.displayName||"Context")+".Consumer";case Q3:return(e._context.displayName||"Context")+".Provider";case wb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ob:return t=e.displayName||null,t!==null?t:iT(e.type)||"Memo";case Pa:t=e._payload,e=e._init;try{return iT(e(t))}catch{}}return null}function wW(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return iT(t);case 23:return"LegacyHidden";case 8:return t===bb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Js(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function SW(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function FCe(e){var t=SW(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function kb(e){e._valueTracker||(e._valueTracker=FCe(e))}function EW(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=SW(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Cb(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function oT(e,t){var n=t.checked;return yt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function OW(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Js(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function kW(e,t){t=t.checked,t!=null&&K3(e,"checked",t,!1)}function aT(e,t){kW(e,t);var n=Js(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?sT(e,t.type,n):t.hasOwnProperty("defaultValue")&&sT(e,t.type,Js(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function CW(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function sT(e,t,n){(t!=="number"||Cb(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var xg=Array.isArray;function Wf(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Js(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function uT(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ie(91));return yt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _W(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ie(92));if(xg(n)){if(1<n.length)throw Error(ie(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Js(n)}}function AW(e,t){var n=Js(t.value),r=Js(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function TW(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function NW(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lT(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?NW(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _b,MW=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_b=_b||document.createElement("div"),_b.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_b.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wg(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Sg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DCe=["Webkit","ms","Moz","O"];Object.keys(Sg).forEach(function(e){DCe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sg[t]=Sg[e]})});function FW(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Sg.hasOwnProperty(e)&&Sg[e]?(""+t).trim():t+"px"}function DW(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=FW(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var RCe=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cT(e,t){if(t){if(RCe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ie(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ie(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ie(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ie(62))}}function fT(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dT=null;function hT(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pT=null,Hf=null,Gf=null;function RW(e){if(e=Ug(e)){if(typeof pT!="function")throw Error(ie(280));var t=e.stateNode;t&&(t=Qb(t),pT(e.stateNode,e.type,t))}}function PW(e){Hf?Gf?Gf.push(e):Gf=[e]:Hf=e}function jW(){if(Hf){var e=Hf,t=Gf;if(Gf=Hf=null,RW(e),t)for(e=0;e<t.length;e++)RW(t[e])}}function IW(e,t){return e(t)}function LW(){}var gT=!1;function zW(e,t,n){if(gT)return e(t,n);gT=!0;try{return IW(e,t,n)}finally{gT=!1,(Hf!==null||Gf!==null)&&(LW(),jW())}}function Eg(e,t){var n=e.stateNode;if(n===null)return null;var r=Qb(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ie(231,t,typeof n));return n}var mT=!1;if(Da)try{var Og={};Object.defineProperty(Og,"passive",{get:function(){mT=!0}}),window.addEventListener("test",Og,Og),window.removeEventListener("test",Og,Og)}catch{mT=!1}function PCe(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var kg=!1,Ab=null,Tb=!1,yT=null,jCe={onError:function(e){kg=!0,Ab=e}};function ICe(e,t,n,r,i,o,a,s,u){kg=!1,Ab=null,PCe.apply(jCe,arguments)}function LCe(e,t,n,r,i,o,a,s,u){if(ICe.apply(this,arguments),kg){if(kg){var l=Ab;kg=!1,Ab=null}else throw Error(ie(198));Tb||(Tb=!0,yT=l)}}function Il(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!=0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function $W(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function BW(e){if(Il(e)!==e)throw Error(ie(188))}function zCe(e){var t=e.alternate;if(!t){if(t=Il(e),t===null)throw Error(ie(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return BW(i),e;if(o===r)return BW(i),t;o=o.sibling}throw Error(ie(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?e:t}function UW(e){return e=zCe(e),e!==null?WW(e):null}function WW(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=WW(e);if(t!==null)return t;e=e.sibling}return null}var HW=Hr.unstable_scheduleCallback,GW=Hr.unstable_cancelCallback,$Ce=Hr.unstable_shouldYield,BCe=Hr.unstable_requestPaint,Nt=Hr.unstable_now,UCe=Hr.unstable_getCurrentPriorityLevel,vT=Hr.unstable_ImmediatePriority,qW=Hr.unstable_UserBlockingPriority,Nb=Hr.unstable_NormalPriority,WCe=Hr.unstable_LowPriority,VW=Hr.unstable_IdlePriority,Mb=null,Vo=null;function HCe(e){if(Vo&&typeof Vo.onCommitFiberRoot=="function")try{Vo.onCommitFiberRoot(Mb,e,void 0,(e.current.flags&128)==128)}catch{}}var Ji=Math.clz32?Math.clz32:VCe,GCe=Math.log,qCe=Math.LN2;function VCe(e){return e>>>=0,e===0?32:31-(GCe(e)/qCe|0)|0}var Fb=64,Db=4194304;function Cg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Rb(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=Cg(s):(o&=a,o!==0&&(r=Cg(o)))}else a=n&~i,a!==0?r=Cg(a):o!==0&&(r=Cg(o));if(r===0)return 0;if(t!==0&&t!==r&&(t&i)==0&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!=0))return t;if((r&4)!=0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ji(t),i=1<<n,r|=e[n],t&=~i;return r}function YCe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bT(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function xT(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pb(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ji(t),e[t]=n}function XCe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ji(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function wT(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ji(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ke=0;function YW(e){return e&=-e,1<e?4<e?(e&268435455)!=0?16:536870912:4:1}var XW,ST,KW,QW,JW,ET=!1,jb=[],Zs=null,eu=null,tu=null,_g=new Map,Ag=new Map,nu=[],KCe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ZW(e,t){switch(e){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":eu=null;break;case"mouseover":case"mouseout":tu=null;break;case"pointerover":case"pointerout":_g.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ag.delete(t.pointerId)}}function Tg(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Ug(t),t!==null&&ST(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function QCe(e,t,n,r,i){switch(t){case"focusin":return Zs=Tg(Zs,e,t,n,r,i),!0;case"dragenter":return eu=Tg(eu,e,t,n,r,i),!0;case"mouseover":return tu=Tg(tu,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return _g.set(o,Tg(_g.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ag.set(o,Tg(Ag.get(o)||null,e,t,n,r,i)),!0}return!1}function eH(e){var t=zl(e.target);if(t!==null){var n=Il(t);if(n!==null){if(t=n.tag,t===13){if(t=$W(n),t!==null){e.blockedOn=t,JW(e.priority,function(){KW(n)});return}}else if(t===3&&n.stateNode.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ib(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=kT(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);dT=r,n.target.dispatchEvent(r),dT=null}else return t=Ug(n),t!==null&&ST(t),e.blockedOn=n,!1;t.shift()}return!0}function tH(e,t,n){Ib(e)&&n.delete(t)}function JCe(){ET=!1,Zs!==null&&Ib(Zs)&&(Zs=null),eu!==null&&Ib(eu)&&(eu=null),tu!==null&&Ib(tu)&&(tu=null),_g.forEach(tH),Ag.forEach(tH)}function Ng(e,t){e.blockedOn===t&&(e.blockedOn=null,ET||(ET=!0,Hr.unstable_scheduleCallback(Hr.unstable_NormalPriority,JCe)))}function Mg(e){function t(i){return Ng(i,e)}if(0<jb.length){Ng(jb[0],e);for(var n=1;n<jb.length;n++){var r=jb[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Zs!==null&&Ng(Zs,e),eu!==null&&Ng(eu,e),tu!==null&&Ng(tu,e),_g.forEach(t),Ag.forEach(t),n=0;n<nu.length;n++)r=nu[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<nu.length&&(n=nu[0],n.blockedOn===null);)eH(n),n.blockedOn===null&&nu.shift()}var qf=Ra.ReactCurrentBatchConfig,Lb=!0;function ZCe(e,t,n,r){var i=Ke,o=qf.transition;qf.transition=0;try{Ke=1,OT(e,t,n,r)}finally{Ke=i,qf.transition=o}}function e_e(e,t,n,r){var i=Ke,o=qf.transition;qf.transition=0;try{Ke=4,OT(e,t,n,r)}finally{Ke=i,qf.transition=o}}function OT(e,t,n,r){if(Lb){var i=kT(e,t,n,r);if(i===null)UT(e,t,r,zb,n),ZW(e,r);else if(QCe(i,e,t,n,r))r.stopPropagation();else if(ZW(e,r),t&4&&-1<KCe.indexOf(e)){for(;i!==null;){var o=Ug(i);if(o!==null&&XW(o),o=kT(e,t,n,r),o===null&&UT(e,t,r,zb,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else UT(e,t,r,null,n)}}var zb=null;function kT(e,t,n,r){if(zb=null,e=hT(r),e=zl(e),e!==null)if(t=Il(e),t===null)e=null;else if(n=t.tag,n===13){if(e=$W(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zb=e,null}function nH(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UCe()){case vT:return 1;case qW:return 4;case Nb:case WCe:return 16;case VW:return 536870912;default:return 16}default:return 16}}var ru=null,CT=null,$b=null;function rH(){if($b)return $b;var e,t=CT,n=t.length,r,i="value"in ru?ru.value:ru.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return $b=i.slice(e,1<r?1-r:void 0)}function Bb(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ub(){return!0}function iH(){return!1}function Gr(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ub:iH,this.isPropagationStopped=iH,this}return yt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ub)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ub)},persist:function(){},isPersistent:Ub}),t}var Vf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_T=Gr(Vf),Fg=yt({},Vf,{view:0,detail:0}),t_e=Gr(Fg),AT,TT,Dg,Wb=yt({},Fg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:MT,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Dg&&(Dg&&e.type==="mousemove"?(AT=e.screenX-Dg.screenX,TT=e.screenY-Dg.screenY):TT=AT=0,Dg=e),AT)},movementY:function(e){return"movementY"in e?e.movementY:TT}}),oH=Gr(Wb),n_e=yt({},Wb,{dataTransfer:0}),r_e=Gr(n_e),i_e=yt({},Fg,{relatedTarget:0}),NT=Gr(i_e),o_e=yt({},Vf,{animationName:0,elapsedTime:0,pseudoElement:0}),a_e=Gr(o_e),s_e=yt({},Vf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),u_e=Gr(s_e),l_e=yt({},Vf,{data:0}),aH=Gr(l_e),c_e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},f_e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d_e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h_e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=d_e[e])?!!t[e]:!1}function MT(){return h_e}var p_e=yt({},Fg,{key:function(e){if(e.key){var t=c_e[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bb(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?f_e[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:MT,charCode:function(e){return e.type==="keypress"?Bb(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bb(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),g_e=Gr(p_e),m_e=yt({},Wb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sH=Gr(m_e),y_e=yt({},Fg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:MT}),v_e=Gr(y_e),b_e=yt({},Vf,{propertyName:0,elapsedTime:0,pseudoElement:0}),x_e=Gr(b_e),w_e=yt({},Wb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),S_e=Gr(w_e),E_e=[9,13,27,32],FT=Da&&"CompositionEvent"in window,Rg=null;Da&&"documentMode"in document&&(Rg=document.documentMode);var O_e=Da&&"TextEvent"in window&&!Rg,uH=Da&&(!FT||Rg&&8<Rg&&11>=Rg),lH=String.fromCharCode(32),cH=!1;function fH(e,t){switch(e){case"keyup":return E_e.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dH(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yf=!1;function k_e(e,t){switch(e){case"compositionend":return dH(t);case"keypress":return t.which!==32?null:(cH=!0,lH);case"textInput":return e=t.data,e===lH&&cH?null:e;default:return null}}function C_e(e,t){if(Yf)return e==="compositionend"||!FT&&fH(e,t)?(e=rH(),$b=CT=ru=null,Yf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return uH&&t.locale!=="ko"?null:t.data;default:return null}}var A_e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hH(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!A_e[e.type]:t==="textarea"}function pH(e,t,n,r){PW(r),t=Xb(t,"onChange"),0<t.length&&(n=new _T("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Pg=null,jg=null;function T_e(e){FH(e,0)}function Hb(e){var t=Zf(e);if(EW(t))return e}function N_e(e,t){if(e==="change")return t}var gH=!1;if(Da){var DT;if(Da){var RT="oninput"in document;if(!RT){var mH=document.createElement("div");mH.setAttribute("oninput","return;"),RT=typeof mH.oninput=="function"}DT=RT}else DT=!1;gH=DT&&(!document.documentMode||9<document.documentMode)}function yH(){Pg&&(Pg.detachEvent("onpropertychange",vH),jg=Pg=null)}function vH(e){if(e.propertyName==="value"&&Hb(jg)){var t=[];pH(t,jg,e,hT(e)),zW(T_e,t)}}function M_e(e,t,n){e==="focusin"?(yH(),Pg=t,jg=n,Pg.attachEvent("onpropertychange",vH)):e==="focusout"&&yH()}function F_e(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hb(jg)}function D_e(e,t){if(e==="click")return Hb(t)}function R_e(e,t){if(e==="input"||e==="change")return Hb(t)}function P_e(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var Yo=typeof Object.is=="function"?Object.is:P_e;function Ig(e,t){if(Yo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!V3.call(t,i)||!Yo(e[i],t[i]))return!1}return!0}function bH(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xH(e,t){var n=bH(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bH(n)}}function wH(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wH(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function SH(){for(var e=window,t=Cb();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Cb(e.document)}return t}function PT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function j_e(e){var t=SH(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wH(n.ownerDocument.documentElement,n)){if(r!==null&&PT(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=xH(n,o);var a=xH(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var I_e=Da&&"documentMode"in document&&11>=document.documentMode,Xf=null,jT=null,Lg=null,IT=!1;function EH(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;IT||Xf==null||Xf!==Cb(r)||(r=Xf,"selectionStart"in r&&PT(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Lg&&Ig(Lg,r)||(Lg=r,r=Xb(jT,"onSelect"),0<r.length&&(t=new _T("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Xf)))}function Gb(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Kf={animationend:Gb("Animation","AnimationEnd"),animationiteration:Gb("Animation","AnimationIteration"),animationstart:Gb("Animation","AnimationStart"),transitionend:Gb("Transition","TransitionEnd")},LT={},OH={};Da&&(OH=document.createElement("div").style,"AnimationEvent"in window||(delete Kf.animationend.animation,delete Kf.animationiteration.animation,delete Kf.animationstart.animation),"TransitionEvent"in window||delete Kf.transitionend.transition);function qb(e){if(LT[e])return LT[e];if(!Kf[e])return e;var t=Kf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in OH)return LT[e]=t[n];return e}var kH=qb("animationend"),CH=qb("animationiteration"),_H=qb("animationstart"),AH=qb("transitionend"),TH=new Map,NH="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function iu(e,t){TH.set(e,t),Rl(t,[e])}for(var zT=0;zT<NH.length;zT++){var $T=NH[zT],L_e=$T.toLowerCase(),z_e=$T[0].toUpperCase()+$T.slice(1);iu(L_e,"on"+z_e)}iu(kH,"onAnimationEnd");iu(CH,"onAnimationIteration");iu(_H,"onAnimationStart");iu("dblclick","onDoubleClick");iu("focusin","onFocus");iu("focusout","onBlur");iu(AH,"onTransitionEnd");Uf("onMouseEnter",["mouseout","mouseover"]);Uf("onMouseLeave",["mouseout","mouseover"]);Uf("onPointerEnter",["pointerout","pointerover"]);Uf("onPointerLeave",["pointerout","pointerover"]);Rl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$_e=new Set("cancel close invalid load scroll toggle".split(" ").concat(zg));function MH(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,LCe(r,t,void 0,e),e.currentTarget=null}function FH(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;MH(i,s,l),o=u}else for(a=0;a<r.length;a++){if(s=r[a],u=s.instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;MH(i,s,l),o=u}}}if(Tb)throw e=yT,Tb=!1,yT=null,e}function ct(e,t){var n=t[YT];n===void 0&&(n=t[YT]=new Set);var r=e+"__bubble";n.has(r)||(DH(t,e,2,!1),n.add(r))}function BT(e,t,n){var r=0;t&&(r|=4),DH(n,e,r,t)}var Vb="_reactListening"+Math.random().toString(36).slice(2);function Yb(e){if(!e[Vb]){e[Vb]=!0,gW.forEach(function(n){n!=="selectionchange"&&($_e.has(n)||BT(n,!1,e),BT(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vb]||(t[Vb]=!0,BT("selectionchange",!1,t))}}function DH(e,t,n,r){switch(nH(t)){case 1:var i=ZCe;break;case 4:i=e_e;break;default:i=OT}n=i.bind(null,t,n,e),i=void 0,!mT||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function UT(e,t,n,r,i){var o=r;if((t&1)==0&&(t&2)==0&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;s!==null;){if(a=zl(s),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}s=s.parentNode}}r=r.return}zW(function(){var l=o,c=hT(n),f=[];e:{var d=TH.get(e);if(d!==void 0){var h=_T,p=e;switch(e){case"keypress":if(Bb(n)===0)break e;case"keydown":case"keyup":h=g_e;break;case"focusin":p="focus",h=NT;break;case"focusout":p="blur",h=NT;break;case"beforeblur":case"afterblur":h=NT;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=oH;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=r_e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=v_e;break;case kH:case CH:case _H:h=a_e;break;case AH:h=x_e;break;case"scroll":h=t_e;break;case"wheel":h=S_e;break;case"copy":case"cut":case"paste":h=u_e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=sH}var g=(t&4)!=0,m=!g&&e==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var v=l,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,y!==null&&(x=Eg(v,y),x!=null&&g.push($g(v,x,b)))),m)break;v=v.return}0<g.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:g}))}}if((t&7)==0){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==dT&&(p=n.relatedTarget||n.fromElement)&&(zl(p)||p[ou]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?zl(p):null,p!==null&&(m=Il(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(g=oH,x="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=sH,x="onPointerLeave",y="onPointerEnter",v="pointer"),m=h==null?d:Zf(h),b=p==null?d:Zf(p),d=new g(x,v+"leave",h,n,c),d.target=m,d.relatedTarget=b,x=null,zl(c)===l&&(g=new g(y,v+"enter",p,n,c),g.target=b,g.relatedTarget=m,x=g),m=x,h&&p)t:{for(g=h,y=p,v=0,b=g;b;b=Qf(b))v++;for(b=0,x=y;x;x=Qf(x))b++;for(;0<v-b;)g=Qf(g),v--;for(;0<b-v;)y=Qf(y),b--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=Qf(g),y=Qf(y)}g=null}else g=null;h!==null&&RH(f,d,h,g,!1),p!==null&&m!==null&&RH(f,m,p,g,!0)}}e:{if(d=l?Zf(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=N_e;else if(hH(d))if(gH)w=R_e;else{w=F_e;var E=M_e}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=D_e);if(w&&(w=w(e,l))){pH(f,w,n,c);break e}E&&E(e,d,l),e==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&sT(d,"number",d.value)}switch(E=l?Zf(l):window,e){case"focusin":(hH(E)||E.contentEditable==="true")&&(Xf=E,jT=l,Lg=null);break;case"focusout":Lg=jT=Xf=null;break;case"mousedown":IT=!0;break;case"contextmenu":case"mouseup":case"dragend":IT=!1,EH(f,n,c);break;case"selectionchange":if(I_e)break;case"keydown":case"keyup":EH(f,n,c)}var S;if(FT)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Yf?fH(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(uH&&n.locale!=="ko"&&(Yf||_!=="onCompositionStart"?_==="onCompositionEnd"&&Yf&&(S=rH()):(ru=c,CT="value"in ru?ru.value:ru.textContent,Yf=!0)),E=Xb(l,_),0<E.length&&(_=new aH(_,e,null,n,c),f.push({event:_,listeners:E}),S?_.data=S:(S=dH(n),S!==null&&(_.data=S)))),(S=O_e?k_e(e,n):C_e(e,n))&&(l=Xb(l,"onBeforeInput"),0<l.length&&(c=new aH("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=S))}FH(f,t)})}function $g(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xb(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Eg(e,n),o!=null&&r.unshift($g(e,o,i)),o=Eg(e,t),o!=null&&r.push($g(e,o,i))),e=e.return}return r}function Qf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function RH(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&l!==null&&(s=l,i?(u=Eg(n,o),u!=null&&a.unshift($g(n,u,s))):i||(u=Eg(n,o),u!=null&&a.push($g(n,u,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}function Kb(){}var WT=null,HT=null;function PH(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function GT(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qT=typeof setTimeout=="function"?setTimeout:void 0,B_e=typeof clearTimeout=="function"?clearTimeout:void 0,jH=typeof Promise=="function"?Promise:void 0,U_e=typeof queueMicrotask=="function"?queueMicrotask:typeof jH!="undefined"?function(e){return jH.resolve(null).then(e).catch(W_e)}:qT;function W_e(e){setTimeout(function(){throw e})}function VT(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Mg(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Mg(t)}function Ll(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function IH(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Jf=Math.random().toString(36).slice(2),Xo="__reactFiber$"+Jf,Bg="__reactProps$"+Jf,ou="__reactContainer$"+Jf,YT="__reactEvents$"+Jf,H_e="__reactListeners$"+Jf,G_e="__reactHandles$"+Jf;function zl(e){var t=e[Xo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ou]||n[Xo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=IH(e);e!==null;){if(n=e[Xo])return n;e=IH(e)}return t}e=n,n=e.parentNode}return null}function Ug(e){return e=e[Xo]||e[ou],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ie(33))}function Qb(e){return e[Bg]||null}var XT=[],ed=-1;function au(e){return{current:e}}function ft(e){0>ed||(e.current=XT[ed],XT[ed]=null,ed--)}function at(e,t){ed++,XT[ed]=e.current,e.current=t}var su={},Mn=au(su),wr=au(!1),$l=su;function td(e,t){var n=e.type.contextTypes;if(!n)return su;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Sr(e){return e=e.childContextTypes,e!=null}function Jb(){ft(wr),ft(Mn)}function LH(e,t,n){if(Mn.current!==su)throw Error(ie(168));at(Mn,t),at(wr,n)}function zH(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ie(108,wW(e)||"Unknown",i));return yt({},n,r)}function Zb(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||su,$l=Mn.current,at(Mn,e),at(wr,wr.current),!0}function $H(e,t,n){var r=e.stateNode;if(!r)throw Error(ie(169));n?(e=zH(e,t,$l),r.__reactInternalMemoizedMergedChildContext=e,ft(wr),ft(Mn),at(Mn,e)):ft(wr),at(wr,n)}var hi=null,ex=!1,KT=!1;function uu(){if(!KT&&hi!==null){KT=!0;var e=0,t=Ke;try{var n=hi;for(Ke=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}hi=null,ex=!1}catch(i){throw hi!==null&&(hi=hi.slice(e+1)),HW(vT,uu),i}finally{Ke=t,KT=!1}}return null}var q_e=Ra.ReactCurrentBatchConfig;function Zi(e,t){if(e&&e.defaultProps){t=yt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var tx=au(null),nx=null,nd=null,QT=null;function JT(){QT=nd=nx=null}function ZT(e){var t=tx.current;ft(tx),e._currentValue=t}function eN(e,t){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)===t){if(n===null||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,n!==null&&(n.childLanes|=t);e=e.return}}function rd(e,t){nx=e,QT=nd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!=0&&(qr=!0),e.firstContext=null)}function pi(e){var t=e._currentValue;if(QT!==e)if(e={context:e,memoizedValue:t,next:null},nd===null){if(nx===null)throw Error(ie(308));nd=e,nx.dependencies={lanes:0,firstContext:e}}else nd=nd.next=e;return t}var Ko=null,lu=!1;function tN(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BH(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bl(e,t){var n=e.updateQueue;n!==null&&(n=n.shared,Rt!==null&&(e.mode&1)!=0&&(De&2)==0?(e=n.interleaved,e===null?(t.next=t,Ko===null?Ko=[n]:Ko.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(e=n.pending,e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function rx(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!=0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,wT(e,n)}}function UH(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ix(e,t,n,r){var i=e.updateQueue;lu=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var u=s,l=u.next;u.next=null,a===null?o=l:a.next=l,a=u;var c=e.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(o!==null){var f=i.baseState;a=0,c=l=u=null,s=o;do{var d=s.lane,h=s.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(d=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=yt({},f,d);break e;case 2:lu=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,a|=d;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;d=s,s=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);cd|=a,e.lanes=a,e.memoizedState=f}}function WH(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ie(191,i));i.call(r)}}}var HH=new pW.Component().refs;function nN(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:yt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ox={isMounted:function(e){return(e=e._reactInternals)?Il(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Or(),i=Vl(e),o=cu(r,i);o.payload=t,n!=null&&(o.callback=n),Bl(e,o),t=xi(e,i,r),t!==null&&rx(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Or(),i=Vl(e),o=cu(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),Bl(e,o),t=xi(e,i,r),t!==null&&rx(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Or(),r=Vl(e),i=cu(n,r);i.tag=2,t!=null&&(i.callback=t),Bl(e,i),t=xi(e,r,n),t!==null&&rx(t,e,r)}};function GH(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Ig(n,r)||!Ig(i,o):!0}function qH(e,t,n){var r=!1,i=su,o=t.contextType;return typeof o=="object"&&o!==null?o=pi(o):(i=Sr(t)?$l:Mn.current,r=t.contextTypes,o=(r=r!=null)?td(e,i):su),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ox,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function VH(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ox.enqueueReplaceState(t,t.state,null)}function rN(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=HH,tN(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=pi(o):(o=Sr(t)?$l:Mn.current,i.context=td(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(nN(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ox.enqueueReplaceState(i,i.state,null),ix(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}var id=[],od=0,ax=null,sx=0,gi=[],mi=0,Ul=null,ja=1,Ia="";function Wl(e,t){id[od++]=sx,id[od++]=ax,ax=e,sx=t}function YH(e,t,n){gi[mi++]=ja,gi[mi++]=Ia,gi[mi++]=Ul,Ul=e;var r=ja;e=Ia;var i=32-Ji(r)-1;r&=~(1<<i),n+=1;var o=32-Ji(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ja=1<<32-Ji(t)+i|n<<i|r,Ia=o+e}else ja=1<<o|n<<i|r,Ia=e}function iN(e){e.return!==null&&(Wl(e,1),YH(e,1,0))}function oN(e){for(;e===ax;)ax=id[--od],id[od]=null,sx=id[--od],id[od]=null;for(;e===Ul;)Ul=gi[--mi],gi[mi]=null,Ia=gi[--mi],gi[mi]=null,ja=gi[--mi],gi[mi]=null}var yi=null,eo=null,vt=!1;function XH(e,t){var n=Xr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function KH(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yi=e,eo=Ll(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yi=e,eo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ul!==null?{id:ja,overflow:Ia}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Xr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,yi=e,eo=null,!0):!1;default:return!1}}function QH(e){if((e.mode&1)!=0)throw Error(ie(418))}function aN(e){if(vt){var t=eo;if(t){var n=t;if(!KH(e,t)){QH(e),t=Ll(n.nextSibling);var r=yi;t&&KH(e,t)?XH(r,n):(e.flags=e.flags&-4097|2,vt=!1,yi=e)}}else QH(e),e.flags=e.flags&-4097|2,vt=!1,yi=e}}function JH(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yi=e}function Wg(e){if(e!==yi)return!1;if(!vt)return JH(e),vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!GT(e.type,e.memoizedProps)),t)for(t=eo;t;)XH(e,t),t=Ll(t.nextSibling);if(JH(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ie(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){eo=Ll(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}eo=null}}else eo=yi?Ll(e.stateNode.nextSibling):null;return!0}function Hg(){eo=yi=null,vt=!1}function Gg(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;s===HH&&(s=i.refs={}),a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,e))}return e}function ux(e,t){throw e=Object.prototype.toString.call(t),Error(ie(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ZH(e){var t=e._init;return t(e._payload)}function eG(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=hu(y,v),y.index=0,y.sibling=null,y}function o(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function s(y,v,b,x){return v===null||v.tag!==6?(v=$N(b,y.mode,x),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,x){var w=b.type;return w===jl?c(y,v,b.props.children,x,b.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Pa&&ZH(w)===v.type)?(x=i(v,b.props),x.ref=Gg(y,v,b),x.return=y,x):(x=Nx(b.type,b.key,b.props,null,y.mode,x),x.ref=Gg(y,v,b),x.return=y,x)}function l(y,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=BN(b,y.mode,x),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,x,w){return v===null||v.tag!==7?(v=Kl(b,y.mode,x,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=$N(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case yg:return b=Nx(v.type,v.key,v.props,null,y.mode,b),b.ref=Gg(y,null,v),b.return=y,b;case Pl:return v=BN(v,y.mode,b),v.return=y,v;case Pa:var x=v._init;return f(y,x(v._payload),b)}if(xg(v)||vg(v))return v=Kl(v,y.mode,b,null),v.return=y,v;ux(y,v)}return null}function d(y,v,b,x){var w=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:s(y,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case yg:return b.key===w?u(y,v,b,x):null;case Pl:return b.key===w?l(y,v,b,x):null;case Pa:return w=b._init,d(y,v,w(b._payload),x)}if(xg(b)||vg(b))return w!==null?null:c(y,v,b,x,null);ux(y,b)}return null}function h(y,v,b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(b)||null,s(v,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case yg:return y=y.get(x.key===null?b:x.key)||null,u(v,y,x,w);case Pl:return y=y.get(x.key===null?b:x.key)||null,l(v,y,x,w);case Pa:var E=x._init;return h(y,v,b,E(x._payload),w)}if(xg(x)||vg(x))return y=y.get(b)||null,c(v,y,x,w,null);ux(v,x)}return null}function p(y,v,b,x){for(var w=null,E=null,S=v,_=v=0,M=null;S!==null&&_<b.length;_++){S.index>_?(M=S,S=null):M=S.sibling;var D=d(y,S,b[_],x);if(D===null){S===null&&(S=M);break}e&&S&&D.alternate===null&&t(y,S),v=o(D,v,_),E===null?w=D:E.sibling=D,E=D,S=M}if(_===b.length)return n(y,S),vt&&Wl(y,_),w;if(S===null){for(;_<b.length;_++)S=f(y,b[_],x),S!==null&&(v=o(S,v,_),E===null?w=S:E.sibling=S,E=S);return vt&&Wl(y,_),w}for(S=r(y,S);_<b.length;_++)M=h(S,y,_,b[_],x),M!==null&&(e&&M.alternate!==null&&S.delete(M.key===null?_:M.key),v=o(M,v,_),E===null?w=M:E.sibling=M,E=M);return e&&S.forEach(function(C){return t(y,C)}),vt&&Wl(y,_),w}function g(y,v,b,x){var w=vg(b);if(typeof w!="function")throw Error(ie(150));if(b=w.call(b),b==null)throw Error(ie(151));for(var E=w=null,S=v,_=v=0,M=null,D=b.next();S!==null&&!D.done;_++,D=b.next()){S.index>_?(M=S,S=null):M=S.sibling;var C=d(y,S,D.value,x);if(C===null){S===null&&(S=M);break}e&&S&&C.alternate===null&&t(y,S),v=o(C,v,_),E===null?w=C:E.sibling=C,E=C,S=M}if(D.done)return n(y,S),vt&&Wl(y,_),w;if(S===null){for(;!D.done;_++,D=b.next())D=f(y,D.value,x),D!==null&&(v=o(D,v,_),E===null?w=D:E.sibling=D,E=D);return vt&&Wl(y,_),w}for(S=r(y,S);!D.done;_++,D=b.next())D=h(S,y,_,D.value,x),D!==null&&(e&&D.alternate!==null&&S.delete(D.key===null?_:D.key),v=o(D,v,_),E===null?w=D:E.sibling=D,E=D);return e&&S.forEach(function(A){return t(y,A)}),vt&&Wl(y,_),w}function m(y,v,b,x){if(typeof b=="object"&&b!==null&&b.type===jl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case yg:e:{for(var w=b.key,E=v;E!==null;){if(E.key===w){if(w=b.type,w===jl){if(E.tag===7){n(y,E.sibling),v=i(E,b.props.children),v.return=y,y=v;break e}}else if(E.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Pa&&ZH(w)===E.type){n(y,E.sibling),v=i(E,b.props),v.ref=Gg(y,E,b),v.return=y,y=v;break e}n(y,E);break}else t(y,E);E=E.sibling}b.type===jl?(v=Kl(b.props.children,y.mode,x,b.key),v.return=y,y=v):(x=Nx(b.type,b.key,b.props,null,y.mode,x),x.ref=Gg(y,v,b),x.return=y,y=x)}return a(y);case Pl:e:{for(E=b.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=BN(b,y.mode,x),v.return=y,y=v}return a(y);case Pa:return E=b._init,m(y,v,E(b._payload),x)}if(xg(b))return p(y,v,b,x);if(vg(b))return g(y,v,b,x);ux(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=$N(b,y.mode,x),v.return=y,y=v),a(y)):n(y,v)}return m}var ad=eG(!0),tG=eG(!1),qg={},Qo=au(qg),Vg=au(qg),Yg=au(qg);function Hl(e){if(e===qg)throw Error(ie(174));return e}function sN(e,t){switch(at(Yg,t),at(Vg,e),at(Qo,qg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lT(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lT(t,e)}ft(Qo),at(Qo,t)}function sd(){ft(Qo),ft(Vg),ft(Yg)}function nG(e){Hl(Yg.current);var t=Hl(Qo.current),n=lT(t,e.type);t!==n&&(at(Vg,e),at(Qo,n))}function uN(e){Vg.current===e&&(ft(Qo),ft(Vg))}var bt=au(0);function lx(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!=0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cx=[];function lN(){for(var e=0;e<cx.length;e++)cx[e]._workInProgressVersionPrimary=null;cx.length=0}var fx=Ra.ReactCurrentDispatcher,vi=Ra.ReactCurrentBatchConfig,ud=0,Ot=null,Fn=null,en=null,dx=!1,Xg=!1,Kg=0,V_e=0;function Dn(){throw Error(ie(321))}function cN(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yo(e[n],t[n]))return!1;return!0}function fN(e,t,n,r,i,o){if(ud=o,Ot=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fx.current=e===null||e.memoizedState===null?Q_e:J_e,e=n(r,i),Xg){o=0;do{if(Xg=!1,Kg=0,25<=o)throw Error(ie(301));o+=1,en=Fn=null,t.updateQueue=null,fx.current=Z_e,e=n(r,i)}while(Xg)}if(fx.current=yx,t=Fn!==null&&Fn.next!==null,ud=0,en=Fn=Ot=null,dx=!1,t)throw Error(ie(300));return e}function dN(){var e=Kg!==0;return Kg=0,e}function La(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?Ot.memoizedState=en=e:en=en.next=e,en}function Jo(){if(Fn===null){var e=Ot.alternate;e=e!==null?e.memoizedState:null}else e=Fn.next;var t=en===null?Ot.memoizedState:en.next;if(t!==null)en=t,Fn=e;else{if(e===null)throw Error(ie(310));Fn=e,e={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},en===null?Ot.memoizedState=en=e:en=en.next=e}return en}function Gl(e,t){return typeof t=="function"?t(e):t}function hx(e){var t=Jo(),n=t.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=e;var r=Fn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,u=null,l=o;do{var c=l.lane;if((ud&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=f,a=r):u=u.next=f,Ot.lanes|=c,cd|=c}l=l.next}while(l!==null&&l!==o);u===null?a=r:u.next=s,Yo(r,t.memoizedState)||(qr=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Ot.lanes|=o,cd|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function px(e){var t=Jo(),n=t.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);Yo(o,t.memoizedState)||(qr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function rG(){}function iG(e,t,n){var r=Ot,i=La();if(vt){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=t(),Rt===null)throw Error(ie(349));(ud&30)!=0||oG(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,pN(sG.bind(null,r,o,e),[e]),r.flags|=2048,Qg(9,aG.bind(null,r,o,n,t),void 0,null),n}function oG(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ot.updateQueue,t===null?(t={lastEffect:null,stores:null},Ot.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function aG(e,t,n,r){t.value=n,t.getSnapshot=r,uG(t)&&xi(e,1,-1)}function sG(e,t,n){return n(function(){uG(t)&&xi(e,1,-1)})}function uG(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yo(e,n)}catch{return!0}}function hN(e){var t=La();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gl,lastRenderedState:e},t.queue=e,e=e.dispatch=K_e.bind(null,Ot,e),[t.memoizedState,e]}function Qg(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ot.updateQueue,t===null?(t={lastEffect:null,stores:null},Ot.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function lG(){return Jo().memoizedState}function gx(e,t,n,r){var i=La();Ot.flags|=e,i.memoizedState=Qg(1|t,n,void 0,r===void 0?null:r)}function mx(e,t,n,r){var i=Jo();r=r===void 0?null:r;var o=void 0;if(Fn!==null){var a=Fn.memoizedState;if(o=a.destroy,r!==null&&cN(r,a.deps)){i.memoizedState=Qg(t,n,o,r);return}}Ot.flags|=e,i.memoizedState=Qg(1|t,n,o,r)}function pN(e,t){return gx(8390656,8,e,t)}function Jg(e,t){return mx(2048,8,e,t)}function cG(e,t){return mx(4,2,e,t)}function fG(e,t){return mx(4,4,e,t)}function dG(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hG(e,t,n){return n=n!=null?n.concat([e]):null,mx(4,4,dG.bind(null,t,e),n)}function gN(){}function pG(e,t){var n=Jo();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cN(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function gG(e,t){var n=Jo();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cN(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Y_e(e,t){var n=Ke;Ke=n!==0&&4>n?n:4,e(!0);var r=vi.transition;vi.transition=1;try{e(!1),t()}finally{Ke=n,vi.transition=r}}function mG(){return Jo().memoizedState}function X_e(e,t,n){var r=Vl(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yG(e)?vG(t,n):(bG(e,t,n),n=Or(),e=xi(e,r,n),e!==null&&xG(e,t,r))}function K_e(e,t,n){var r=Vl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yG(e))vG(t,i);else{bG(e,t,i);var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Yo(s,a))return}catch{}finally{}n=Or(),e=xi(e,r,n),e!==null&&xG(e,t,r)}}function yG(e){var t=e.alternate;return e===Ot||t!==null&&t===Ot}function vG(e,t){Xg=dx=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function bG(e,t,n){Rt!==null&&(e.mode&1)!=0&&(De&2)==0?(e=t.interleaved,e===null?(n.next=n,Ko===null?Ko=[t]:Ko.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(e=t.pending,e===null?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function xG(e,t,n){if((n&4194240)!=0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,wT(e,n)}}var yx={readContext:pi,useCallback:Dn,useContext:Dn,useEffect:Dn,useImperativeHandle:Dn,useInsertionEffect:Dn,useLayoutEffect:Dn,useMemo:Dn,useReducer:Dn,useRef:Dn,useState:Dn,useDebugValue:Dn,useDeferredValue:Dn,useTransition:Dn,useMutableSource:Dn,useSyncExternalStore:Dn,useId:Dn,unstable_isNewReconciler:!1},Q_e={readContext:pi,useCallback:function(e,t){return La().memoizedState=[e,t===void 0?null:t],e},useContext:pi,useEffect:pN,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,gx(4194308,4,dG.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gx(4194308,4,e,t)},useInsertionEffect:function(e,t){return gx(4,2,e,t)},useMemo:function(e,t){var n=La();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=La();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=X_e.bind(null,Ot,e),[r.memoizedState,e]},useRef:function(e){var t=La();return e={current:e},t.memoizedState=e},useState:hN,useDebugValue:gN,useDeferredValue:function(e){var t=hN(e),n=t[0],r=t[1];return pN(function(){var i=vi.transition;vi.transition=1;try{r(e)}finally{vi.transition=i}},[e]),n},useTransition:function(){var e=hN(!1),t=e[0];return e=Y_e.bind(null,e[1]),La().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:iG,useId:function(){var e=La(),t=Rt.identifierPrefix;if(vt){var n=Ia,r=ja;n=(r&~(1<<32-Ji(r)-1)).toString(32)+n,t=t+"R:"+n,n=Kg++,0<n&&(t+=":"+n.toString(32))}else n=V_e++,t=t+"r:"+n.toString(32);return e.memoizedState=t},unstable_isNewReconciler:!1},J_e={readContext:pi,useCallback:pG,useContext:pi,useEffect:Jg,useImperativeHandle:hG,useInsertionEffect:cG,useLayoutEffect:fG,useMemo:gG,useReducer:hx,useRef:lG,useState:function(){return hx(Gl)},useDebugValue:gN,useDeferredValue:function(e){var t=hx(Gl),n=t[0],r=t[1];return Jg(function(){var i=vi.transition;vi.transition=1;try{r(e)}finally{vi.transition=i}},[e]),n},useTransition:function(){var e=hx(Gl)[0],t=Jo().memoizedState;return[e,t]},useMutableSource:rG,useSyncExternalStore:function(e,t){var n=Ot,r=Jo(),i=t(),o=!Yo(r.memoizedState,i);if(o&&(r.memoizedState=i,qr=!0),r=r.queue,Jg(sG.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||en!==null&&en.memoizedState.tag&1){if(n.flags|=2048,Qg(9,aG.bind(null,n,r,i,t),void 0,null),Rt===null)throw Error(ie(349));(ud&30)!=0||oG(n,t,i)}return i},useId:mG,unstable_isNewReconciler:!1},Z_e={readContext:pi,useCallback:pG,useContext:pi,useEffect:Jg,useImperativeHandle:hG,useInsertionEffect:cG,useLayoutEffect:fG,useMemo:gG,useReducer:px,useRef:lG,useState:function(){return px(Gl)},useDebugValue:gN,useDeferredValue:function(e){var t=px(Gl),n=t[0],r=t[1];return Jg(function(){var i=vi.transition;vi.transition=1;try{r(e)}finally{vi.transition=i}},[e]),n},useTransition:function(){var e=px(Gl)[0],t=Jo().memoizedState;return[e,t]},useMutableSource:rG,useSyncExternalStore:iG,useId:mG,unstable_isNewReconciler:!1};function mN(e,t){try{var n="",r=t;do n+=MCe(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i}}function yN(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var eAe=typeof WeakMap=="function"?WeakMap:Map;function wG(e,t,n){n=cu(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ex||(Ex=!0,RN=r),yN(e,t)},n}function SG(e,t,n){n=cu(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){yN(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){yN(e,t),typeof r!="function"&&(fu===null?fu=new Set([this]):fu.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function EG(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function OG(e,t,n,r,i){return(e.mode&1)==0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=cu(-1,1),t.tag=2,Bl(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var kG,vN,CG,_G;kG=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vN=function(){};CG=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Hl(Qo.current);var o=null;switch(n){case"input":i=oT(e,i),r=oT(e,r),o=[];break;case"select":i=yt({},i,{value:void 0}),r=yt({},r,{value:void 0}),o=[];break;case"textarea":i=uT(e,i),r=uT(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Kb)}cT(n,r);var a;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(mg.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(mg.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&ct("scroll",e),o||s===u||(o=[])):(o=o||[]).push(l,u))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}};_G=function(e,t,n,r){n!==r&&(t.flags|=4)};function Zg(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Rn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function tAe(e,t,n){var r=t.pendingProps;switch(oN(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(t),null;case 1:return Sr(t.type)&&Jb(),Rn(t),null;case 3:return r=t.stateNode,sd(),ft(wr),ft(Mn),lN(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Wg(t)?t.flags|=4:r.isDehydrated||(t.flags|=1024)),vN(e,t),Rn(t),null;case 5:uN(t);var i=Hl(Yg.current);if(n=t.type,e!==null&&t.stateNode!=null)CG(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ie(166));return Rn(t),null}if(e=Hl(Qo.current),Wg(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Xo]=t,r[Bg]=o,n){case"dialog":ct("cancel",r),ct("close",r);break;case"iframe":case"object":case"embed":ct("load",r);break;case"video":case"audio":for(e=0;e<zg.length;e++)ct(zg[e],r);break;case"source":ct("error",r);break;case"img":case"image":case"link":ct("error",r),ct("load",r);break;case"details":ct("toggle",r);break;case"input":OW(r,o),ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ct("invalid",r);break;case"textarea":_W(r,o),ct("invalid",r)}cT(n,o),e=null;for(var a in o)o.hasOwnProperty(a)&&(i=o[a],a==="children"?typeof i=="string"?r.textContent!==i&&(e=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(e=["children",""+i]):mg.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&ct("scroll",r));switch(n){case"input":kb(r),CW(r,o,!0);break;case"textarea":kb(r),TW(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Kb)}r=e,t.updateQueue=r,r!==null&&(t.flags|=4)}else{switch(a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=NW(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Xo]=t,e[Bg]=r,kG(e,t,!1,!1),t.stateNode=e,a=fT(n,r),n){case"dialog":ct("cancel",e),ct("close",e),i=r;break;case"iframe":case"object":case"embed":ct("load",e),i=r;break;case"video":case"audio":for(i=0;i<zg.length;i++)ct(zg[i],e);i=r;break;case"source":ct("error",e),i=r;break;case"img":case"image":case"link":ct("error",e),ct("load",e),i=r;break;case"details":ct("toggle",e),i=r;break;case"input":OW(e,r),i=oT(e,r),ct("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=yt({},r,{value:void 0}),ct("invalid",e);break;case"textarea":_W(e,r),i=uT(e,r),ct("invalid",e);break;default:i=r}cT(n,i);var s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="style"?DW(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&MW(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&wg(e,u):typeof u=="number"&&wg(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(mg.hasOwnProperty(o)?u!=null&&o==="onScroll"&&ct("scroll",e):u!=null&&K3(e,o,u,a))}switch(n){case"input":kb(e),CW(e,r,!1);break;case"textarea":kb(e),TW(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Js(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Wf(e,!!r.multiple,o,!1):r.defaultValue!=null&&Wf(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Kb)}PH(n,r)&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Rn(t),null;case 6:if(e&&t.stateNode!=null)_G(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ie(166));n=Hl(Yg.current),Hl(Qo.current),Wg(t)?(r=t.stateNode,n=t.memoizedProps,r[Xo]=t,r.nodeValue!==n&&(t.flags|=4)):(r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xo]=t,t.stateNode=r)}return Rn(t),null;case 13:if(ft(bt),r=t.memoizedState,r!==null&&r.dehydrated!==null){if(r=Wg(t),e===null){if(!r)throw Error(ie(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(ie(317));r[Xo]=t}else Hg(),(t.flags&128)==0&&(t.memoizedState=null),t.flags|=4;return Rn(t),null}return(t.flags&128)!=0?(t.lanes=n,t):(r=r!==null,n=!1,e===null?Wg(t):n=e.memoizedState!==null,r&&!n&&(t.child.flags|=8192,(t.mode&1)!=0&&(e===null||(bt.current&1)!=0?tn===0&&(tn=3):tq())),t.updateQueue!==null&&(t.flags|=4),Rn(t),null);case 4:return sd(),vN(e,t),e===null&&Yb(t.stateNode.containerInfo),Rn(t),null;case 10:return ZT(t.type._context),Rn(t),null;case 17:return Sr(t.type)&&Jb(),Rn(t),null;case 19:if(ft(bt),o=t.memoizedState,o===null)return Rn(t),null;if(r=(t.flags&128)!=0,a=o.rendering,a===null)if(r)Zg(o,!1);else{if(tn!==0||e!==null&&(e.flags&128)!=0)for(e=t.child;e!==null;){if(a=lx(e),a!==null){for(t.flags|=128,Zg(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return at(bt,bt.current&1|2),t.child}e=e.sibling}o.tail!==null&&Nt()>fd&&(t.flags|=128,r=!0,Zg(o,!1),t.lanes=4194304)}else{if(!r)if(e=lx(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Zg(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!vt)return Rn(t),null}else 2*Nt()-o.renderingStartTime>fd&&n!==1073741824&&(t.flags|=128,r=!0,Zg(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Nt(),t.sibling=null,n=bt.current,at(bt,r?n&1|2:n&1),t):(Rn(t),null);case 22:case 23:return LN(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&r.mode!=="unstable-defer-without-hiding"&&t.tag!==23&&(t.flags|=8192),n&&(t.mode&1)!=0?(Vr&1073741824)!=0&&(Rn(t),t.tag!==23&&t.subtreeFlags&6&&r.mode!=="unstable-defer-without-hiding"&&(t.flags|=8192)):Rn(t),null}throw Error(ie(156,t.tag))}var nAe=Ra.ReactCurrentOwner,qr=!1;function Er(e,t,n,r){t.child=e===null?tG(t,null,n,r):ad(t,e.child,n,r)}function AG(e,t,n,r,i){n=n.render;var o=t.ref;return rd(t,i),r=fN(e,t,n,r,o,i),n=dN(),e!==null&&!qr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,za(e,t,i)):(vt&&n&&iN(t),t.flags|=1,Er(e,t,r,i),t.child)}function TG(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!zN(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,NG(e,t,o,r,i)):(e=Nx(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,(e.lanes&i)==0){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ig,n(a,r)&&e.ref===t.ref)return za(e,t,i)}return t.flags|=1,e=hu(o,r),e.ref=t.ref,e.return=t,t.child=e}function NG(e,t,n,r,i){if(e!==null&&Ig(e.memoizedProps,r)&&e.ref===t.ref)if(qr=!1,(e.lanes&i)!=0)(e.flags&131072)!=0&&(qr=!0);else return t.lanes=e.lanes,za(e,t,i);return xN(e,t,n,r,i)}function bN(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if((t.mode&1)==0)t.memoizedState={baseLanes:0,cachePool:null},at(ld,Vr),Vr|=n;else{if((n&1073741824)==0)return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,at(ld,Vr),Vr|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=o!==null?o.baseLanes:n,at(ld,Vr),Vr|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,at(ld,Vr),Vr|=r;return Er(e,t,i,n),t.child}function MG(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xN(e,t,n,r,i){var o=Sr(n)?$l:Mn.current;return o=td(t,o),rd(t,i),n=fN(e,t,n,r,o,i),r=dN(),e!==null&&!qr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,za(e,t,i)):(vt&&r&&iN(t),t.flags|=1,Er(e,t,n,i),t.child)}function FG(e,t,n,r,i){if(Sr(n)){var o=!0;Zb(t)}else o=!1;if(rd(t,i),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),qH(t,n,r),rN(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;typeof l=="object"&&l!==null?l=pi(l):(l=Sr(n)?$l:Mn.current,l=td(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||u!==l)&&VH(t,a,r,l),lu=!1;var d=t.memoizedState;a.state=d,ix(t,r,a,i),u=t.memoizedState,s!==r||d!==u||wr.current||lu?(typeof c=="function"&&(nN(t,n,c,r),u=t.memoizedState),(s=lu||GH(t,n,s,r,d,u,l))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,BH(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Zi(t.type,s),a.props=l,f=t.pendingProps,d=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=pi(u):(u=Sr(n)?$l:Mn.current,u=td(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==f||d!==u)&&VH(t,a,r,u),lu=!1,d=t.memoizedState,a.state=d,ix(t,r,a,i);var p=t.memoizedState;s!==f||d!==p||wr.current||lu?(typeof h=="function"&&(nN(t,n,h,r),p=t.memoizedState),(l=lu||GH(t,n,l,r,d,p,u)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return wN(e,t,n,r,o,i)}function wN(e,t,n,r,i,o){MG(e,t);var a=(t.flags&128)!=0;if(!r&&!a)return i&&$H(t,n,!1),za(e,t,o);r=t.stateNode,nAe.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ad(t,e.child,null,o),t.child=ad(t,null,s,o)):Er(e,t,s,o),t.memoizedState=r.state,i&&$H(t,n,!0),t.child}function DG(e){var t=e.stateNode;t.pendingContext?LH(e,t.pendingContext,t.pendingContext!==t.context):t.context&&LH(e,t.context,!1),sN(e,t.containerInfo)}var em={dehydrated:null,treeContext:null,retryLane:0};function tm(e){return{baseLanes:e,cachePool:null}}function RG(e,t,n){var r=t.pendingProps,i=bt.current,o=!1,a=(t.flags&128)!=0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!=0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),at(bt,i&1),e===null)return aN(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)==0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(e=r.children,i=r.fallback,o?(e=PG(t,e,i,n),t.child.memoizedState=tm(n),t.memoizedState=em,e):typeof r.unstable_expectedLoadTime=="number"?(e=PG(t,e,i,n),t.child.memoizedState=tm(n),t.memoizedState=em,t.lanes=4194304,e):SN(t,e));if(i=e.memoizedState,i!==null){if(s=i.dehydrated,s!==null){if(a)return t.flags&256?(t.flags&=-257,EN(e,t,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mx({mode:"visible",children:r.children},i,0,null),o=Kl(o,i,n,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,(t.mode&1)!=0&&ad(t,e.child,null,n),t.child.memoizedState=tm(n),t.memoizedState=em,o);if((De&8)!=0||(t.mode&1)==0||s.data==="$!")t=EN(e,t,n);else if(r=(n&e.childLanes)!=0,qr||r){if(r=Rt,r!==null){switch(n&-n){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}r=(o&(r.suspendedLanes|n))!=0?0:o,r!==0&&r!==i.retryLane&&(i.retryLane=r,xi(e,r,-1))}tq(),t=EN(e,t,n)}else s.data==="$?"?(t.flags|=128,t.child=e.child,t=gAe.bind(null,e),s._reactRetry=t,t=null):(n=i.treeContext,eo=Ll(s.nextSibling),yi=t,vt=!0,n!==null&&(gi[mi++]=ja,gi[mi++]=Ia,gi[mi++]=Ul,ja=n.id,Ia=n.overflow,Ul=t),t=SN(t,t.pendingProps.children),t.flags|=4096);return t}return o?(r=IG(e,t,r.children,r.fallback,n),o=t.child,i=e.child.memoizedState,o.memoizedState=i===null?tm(n):{baseLanes:i.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=em,r):(n=jG(e,t,r.children,n),t.memoizedState=null,n)}return o?(r=IG(e,t,r.children,r.fallback,n),o=t.child,i=e.child.memoizedState,o.memoizedState=i===null?tm(n):{baseLanes:i.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=em,r):(n=jG(e,t,r.children,n),t.memoizedState=null,n)}function SN(e,t){return t=Mx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function PG(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},(i&1)==0&&o!==null?(o.childLanes=0,o.pendingProps=t):o=Mx(t,i,0,null),n=Kl(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function jG(e,t,n,r){var i=e.child;return e=i.sibling,n=hu(i,{mode:"visible",children:n}),(t.mode&1)==0&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function IG(e,t,n,r,i){var o=t.mode;e=e.child;var a=e.sibling,s={mode:"hidden",children:n};return(o&1)==0&&t.child!==e?(n=t.child,n.childLanes=0,n.pendingProps=s,t.deletions=null):(n=hu(e,s),n.subtreeFlags=e.subtreeFlags&14680064),a!==null?r=hu(a,r):(r=Kl(r,o,i,null),r.flags|=2),r.return=t,n.return=t,n.sibling=r,t.child=n,r}function EN(e,t,n){return ad(t,e.child,null,n),e=SN(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function LG(e,t){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),eN(e.return,t)}function ON(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function zG(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Er(e,t,r.children,n),r=bt.current,(r&2)!=0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!=0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&LG(e,n);else if(e.tag===19)LG(e,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(at(bt,r),(t.mode&1)==0)t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&lx(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ON(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&lx(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ON(t,!0,n,null,o);break;case"together":ON(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function za(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),cd|=t.lanes,(n&t.childLanes)==0)return null;if(e!==null&&t.child!==e.child)throw Error(ie(153));if(t.child!==null){for(e=t.child,n=hu(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=hu(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function rAe(e,t,n){switch(t.tag){case 3:DG(t),Hg();break;case 5:nG(t);break;case 1:Sr(t.type)&&Zb(t);break;case 4:sN(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;at(tx,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(at(bt,bt.current&1),t.flags|=128,null):(n&t.child.childLanes)!=0?RG(e,t,n):(at(bt,bt.current&1),e=za(e,t,n),e!==null?e.sibling:null);at(bt,bt.current&1);break;case 19:if(r=(n&t.childLanes)!=0,(e.flags&128)!=0){if(r)return zG(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),at(bt,bt.current),r)break;return null;case 22:case 23:return t.lanes=0,bN(e,t,n)}return za(e,t,n)}function iAe(e){switch(oN(e),e.tag){case 1:Sr(e.type)&&Jb();var t=e.flags;return t&65536?(e.flags=t&-65537|128,e):null;case 3:if(sd(),ft(wr),ft(Mn),lN(),t=e.flags,(t&128)!=0)throw Error(ie(285));return e.flags=t&-65537|128,e;case 5:return uN(e),null;case 13:if(ft(bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));Hg()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ft(bt),null;case 4:return sd(),null;case 10:return ZT(e.type._context),null;case 22:case 23:return LN(),null;case 24:return null;default:return null}}var vx=!1,ql=!1,oAe=typeof WeakSet=="function"?WeakSet:Set,le=null;function bx(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){kr(e,t,r)}else n.current=null}function kN(e,t,n){try{n()}catch(r){kr(e,t,r)}}var $G=!1;function aAe(e,t){if(WT=Lb,e=SH(),PT(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(s=a+i),f!==o||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(s=a),d===o&&++c===r&&(u=a),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=s===-1||u===-1?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(HT={focusedElem:e,selectionRange:n},Lb=!1,le=t;le!==null;)if(t=le,e=t.child,(t.subtreeFlags&1028)!=0&&e!==null)e.return=t,le=e;else for(;le!==null;){t=le;try{var p=t.alternate;if((t.flags&1024)!=0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,m=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Zi(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;if(b.nodeType===1)b.textContent="";else if(b.nodeType===9){var x=b.body;x!=null&&(x.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(w){kr(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,le=e;break}le=t.return}return p=$G,$G=!1,p}function nm(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&kN(t,n,o)}i=i.next}while(i!==r)}}function xx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function CN(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function BG(e,t,n){if(Vo&&typeof Vo.onCommitFiberUnmount=="function")try{Vo.onCommitFiberUnmount(Mb,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&((i&2)!=0||(i&4)!=0)&&kN(t,n,o),r=r.next}while(r!==e)}break;case 1:if(bx(t,n),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){kr(t,n,a)}break;case 5:bx(t,n);break;case 4:GG(e,t,n)}}function UG(e){var t=e.alternate;t!==null&&(e.alternate=null,UG(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xo],delete t[Bg],delete t[YT],delete t[H_e],delete t[G_e])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function WG(e){return e.tag===5||e.tag===3||e.tag===4}function HG(e){e:{for(var t=e.return;t!==null;){if(WG(t))break e;t=t.return}throw Error(ie(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:t=t.containerInfo,r=!0;break;case 4:t=t.containerInfo,r=!0;break;default:throw Error(ie(161))}n.flags&32&&(wg(t,""),n.flags&=-33);e:t:for(n=e;;){for(;n.sibling===null;){if(n.return===null||WG(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}r?_N(e,n,t):AN(e,n,t)}function _N(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Kb));else if(r!==4&&(e=e.child,e!==null))for(_N(e,t,n),e=e.sibling;e!==null;)_N(e,t,n),e=e.sibling}function AN(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(AN(e,t,n),e=e.sibling;e!==null;)AN(e,t,n),e=e.sibling}function GG(e,t,n){for(var r=t,i=!1,o,a;;){if(!i){i=r.return;e:for(;;){if(i===null)throw Error(ie(160));switch(o=i.stateNode,i.tag){case 5:a=!1;break e;case 3:o=o.containerInfo,a=!0;break e;case 4:o=o.containerInfo,a=!0;break e}i=i.return}i=!0}if(r.tag===5||r.tag===6){e:for(var s=e,u=r,l=n,c=u;;)if(BG(s,c,l),c.child!==null&&c.tag!==4)c.child.return=c,c=c.child;else{if(c===u)break e;for(;c.sibling===null;){if(c.return===null||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}a?(s=o,u=r.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):o.removeChild(r.stateNode)}else if(r.tag===18)a?(s=o,u=r.stateNode,s.nodeType===8?VT(s.parentNode,u):s.nodeType===1&&VT(s,u),Mg(s)):VT(o,r.stateNode);else if(r.tag===4){if(r.child!==null){o=r.stateNode.containerInfo,a=!0,r.child.return=r,r=r.child;continue}}else if(BG(e,r,n),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(i=!1)}r.sibling.return=r.return,r=r.sibling}}function TN(e,t){switch(t.tag){case 0:case 11:case 14:case 15:nm(3,t,t.return),xx(3,t),nm(5,t,t.return);return;case 1:return;case 5:var n=t.stateNode;if(n!=null){var r=t.memoizedProps,i=e!==null?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,o!==null){for(e==="input"&&r.type==="radio"&&r.name!=null&&kW(n,r),fT(e,i),t=fT(e,r),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];a==="style"?DW(n,s):a==="dangerouslySetInnerHTML"?MW(n,s):a==="children"?wg(n,s):K3(n,a,s,t)}switch(e){case"input":aT(n,r);break;case"textarea":AW(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,o=r.value,o!=null?Wf(n,!!r.multiple,o,!1):e!==!!r.multiple&&(r.defaultValue!=null?Wf(n,!!r.multiple,r.defaultValue,!0):Wf(n,!!r.multiple,r.multiple?[]:"",!1))}n[Bg]=r}}return;case 6:if(t.stateNode===null)throw Error(ie(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:n=t.stateNode,n.isDehydrated&&(n.isDehydrated=!1,Mg(n.containerInfo));return;case 12:return;case 13:qG(t);return;case 19:qG(t);return;case 17:return}throw Error(ie(163))}function qG(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new oAe),t.forEach(function(r){var i=mAe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function sAe(e,t){for(le=t;le!==null;){t=le;var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{GG(e,i,t);var o=i.alternate;o!==null&&(o.return=null),i.return=null}catch(_){kr(i,t,_)}}if(n=t.child,(t.subtreeFlags&12854)!=0&&n!==null)n.return=t,le=n;else for(;le!==null;){t=le;try{var a=t.flags;if(a&32&&wg(t.stateNode,""),a&512){var s=t.alternate;if(s!==null){var u=s.ref;u!==null&&(typeof u=="function"?u(null):u.current=null)}}if(a&8192)switch(t.tag){case 13:if(t.memoizedState!==null){var l=t.alternate;(l===null||l.memoizedState===null)&&(DN=Nt())}break;case 22:var c=t.memoizedState!==null,f=t.alternate,d=f!==null&&f.memoizedState!==null;n=t;e:{r=n,i=c;for(var h=null,p=r;;){if(p.tag===5){if(h===null){h=p;var g=p.stateNode;if(i){var m=g.style;typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"}else{var y=p.stateNode,v=p.memoizedProps.style,b=v!=null&&v.hasOwnProperty("display")?v.display:null;y.style.display=FW("display",b)}}}else if(p.tag===6)h===null&&(p.stateNode.nodeValue=i?"":p.memoizedProps);else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===r)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===r)break;for(;p.sibling===null;){if(p.return===null||p.return===r)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}if(c&&!d&&(n.mode&1)!=0){le=n;for(var x=n.child;x!==null;){for(n=le=x;le!==null;){r=le;var w=r.child;switch(r.tag){case 0:case 11:case 14:case 15:nm(4,r,r.return);break;case 1:bx(r,r.return);var E=r.stateNode;if(typeof E.componentWillUnmount=="function"){var S=r.return;try{E.props=r.memoizedProps,E.state=r.memoizedState,E.componentWillUnmount()}catch(_){kr(r,S,_)}}break;case 5:bx(r,r.return);break;case 22:if(r.memoizedState!==null){XG(n);continue}}w!==null?(w.return=r,le=w):XG(n)}x=x.sibling}}}switch(a&4102){case 2:HG(t),t.flags&=-3;break;case 6:HG(t),t.flags&=-3,TN(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,TN(t.alternate,t);break;case 4:TN(t.alternate,t)}}catch(_){kr(t,t.return,_)}if(n=t.sibling,n!==null){n.return=t.return,le=n;break}le=t.return}}}function uAe(e,t,n){le=e,VG(e)}function VG(e,t,n){for(var r=(e.mode&1)!=0;le!==null;){var i=le,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||vx;if(!a){var s=i.alternate,u=s!==null&&s.memoizedState!==null||ql;s=vx;var l=ql;if(vx=a,(ql=u)&&!l)for(le=i;le!==null;)a=le,u=a.child,a.tag===22&&a.memoizedState!==null?KG(i):u!==null?(u.return=a,le=u):KG(i);for(;o!==null;)le=o,VG(o),o=o.sibling;le=i,vx=s,ql=l}YG(e)}else(i.subtreeFlags&8772)!=0&&o!==null?(o.return=i,le=o):YG(e)}}function YG(e){for(;le!==null;){var t=le;if((t.flags&8772)!=0){var n=t.alternate;try{if((t.flags&8772)!=0)switch(t.tag){case 0:case 11:case 15:ql||xx(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ql)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Zi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&WH(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}WH(t,a,n)}break;case 5:var s=t.stateNode;n===null&&t.flags&4&&(n=s,PH(t.type,t.memoizedProps)&&n.focus());break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var c=l.dehydrated;c!==null&&Mg(c)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(ie(163))}ql||t.flags&512&&CN(t)}catch(f){kr(t,t.return,f)}}if(t===e){le=null;break}if(n=t.sibling,n!==null){n.return=t.return,le=n;break}le=t.return}}function XG(e){for(;le!==null;){var t=le;if(t===e){le=null;break}var n=t.sibling;if(n!==null){n.return=t.return,le=n;break}le=t.return}}function KG(e){for(;le!==null;){var t=le;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{xx(4,t)}catch(u){kr(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){kr(t,i,u)}}var o=t.return;try{CN(t)}catch(u){kr(t,o,u)}break;case 5:var a=t.return;try{CN(t)}catch(u){kr(t,a,u)}}}catch(u){kr(t,t.return,u)}if(t===e){le=null;break}var s=t.sibling;if(s!==null){s.return=t.return,le=s;break}le=t.return}}var lAe=Math.ceil,wx=Ra.ReactCurrentDispatcher,NN=Ra.ReactCurrentOwner,bi=Ra.ReactCurrentBatchConfig,De=0,Rt=null,Ut=null,pn=0,Vr=0,ld=au(0),tn=0,rm=null,cd=0,Sx=0,MN=0,FN=0,DN=0,fd=1/0,Ex=!1,RN=null,fu=null,Ox=!1,du=null,kx=0,im=0,PN=null,Cx=-1,_x=0;function Or(){return(De&6)!=0?Nt():Cx!==-1?Cx:Cx=Nt()}function Vl(e){return(e.mode&1)==0?1:(De&2)!=0&&pn!==0?pn&-pn:q_e.transition!==0?(_x===0&&(e=Fb,Fb<<=1,(Fb&4194240)==0&&(Fb=64),_x=e),_x):(e=Ke,e!==0||(e=window.event,e=e===void 0?16:nH(e.type)),e)}function xi(e,t,n){if(50<im)throw im=0,PN=null,Error(ie(185));var r=Ax(e,t);return r===null?null:(Pb(r,t,n),(De&2)!=0&&r===Rt?MN|=t:(r===Rt&&((De&2)==0&&(Sx|=t),tn===4&&Yl(r,pn)),Yr(r,n),t===1&&De===0&&(e.mode&1)==0&&(fd=Nt()+500,ex&&uu())),r)}function Ax(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}function Yr(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Ji(a),u=1<<s,l=o[s];l===-1?((u&r)==0||(u&i)!=0)&&(o[s]=YCe(u,t)):l<=t&&(e.expiredLanes|=u),a&=~u}if(r=Rb(e,e===Rt?pn:0),r===0)n!==null&&GW(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&GW(n),t===1)e.tag===0?(n=JG.bind(null,e),ex=!0,hi===null?hi=[n]:hi.push(n)):(n=JG.bind(null,e),hi===null?hi=[n]:hi.push(n)),U_e(uu),n=null;else{switch(YW(r)){case 1:n=vT;break;case 4:n=qW;break;case 16:n=Nb;break;case 536870912:n=VW;break;default:n=Nb}n=sq(n,QG.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function QG(e,t){if(Cx=-1,_x=0,(De&6)!=0)throw Error(ie(327));var n=e.callbackNode;if(pd()&&e.callbackNode!==n)return null;var r=Rb(e,e===Rt?pn:0);if(r===0)return null;if((r&30)!=0||(r&e.expiredLanes)!=0||t)t=Tx(e,r);else{t=r;var i=De;De|=2;var o=eq();(Rt!==e||pn!==t)&&(fd=Nt()+500,hd(e,t));do try{dAe();break}catch(s){ZG(e,s)}while(1);JT(),wx.current=o,De=i,Ut!==null?t=0:(Rt=null,pn=0,t=tn)}if(t!==0){if(t===2&&(i=bT(e),i!==0&&(r=i,t=jN(e,i))),t===1||(i=e.current.alternate,(r&30)==0&&!cAe(i)&&(t=Tx(e,r),t===2&&(o=bT(e),o!==0&&(r=o,t=jN(e,o))),t===1)))throw n=rm,hd(e,0),Yl(e,r),Yr(e,Nt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ie(345));case 2:Xl(e);break;case 3:if(Yl(e,r),(r&130023424)===r&&(t=DN+500-Nt(),10<t)){if(Rb(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Or(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=qT(Xl.bind(null,e),t);break}Xl(e);break;case 4:if(Yl(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Ji(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=Nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lAe(r/1960))-r,10<r){e.timeoutHandle=qT(Xl.bind(null,e),r);break}Xl(e);break;case 5:Xl(e);break;default:throw Error(ie(329))}}return Yr(e,Nt()),e.callbackNode===n?QG.bind(null,e):null}function jN(e,t){var n=De;De|=8,e.isDehydrated&&(e.isDehydrated=!1);for(var r,i=0;50>i&&(r=Tx(e,t),r===2&&MN!==0);i++);return De=n,r}function cAe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Yo(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yl(e,t){for(t&=~FN,t&=~Sx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ji(t),r=1<<n;e[n]=-1,t&=~r}}function JG(e){if((De&6)!=0)throw Error(ie(327));pd();var t=Rb(e,0);if((t&1)==0)return Yr(e,Nt()),null;var n=Tx(e,t);if(e.tag!==0&&n===2){var r=bT(e);r!==0&&(t=r,n=jN(e,r))}if(n===1)throw n=rm,hd(e,0),Yl(e,t),Yr(e,Nt()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xl(e),Yr(e,Nt()),null}function IN(e,t){var n=De;De|=1;try{return e(t)}finally{De=n,De===0&&(fd=Nt()+500,ex&&uu())}}function dd(e){du!==null&&du.tag===0&&(De&6)==0&&pd();var t=De;De|=1;var n=bi.transition,r=Ke;try{if(bi.transition=0,Ke=1,e)return e()}finally{Ke=r,bi.transition=n,De=t,(De&6)==0&&uu()}}function LN(){Vr=ld.current,ft(ld)}function hd(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,B_e(n)),Ut!==null)for(n=Ut.return;n!==null;){var r=n;switch(oN(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jb();break;case 3:sd(),ft(wr),ft(Mn),lN();break;case 5:uN(r);break;case 4:sd();break;case 13:ft(bt);break;case 19:ft(bt);break;case 10:ZT(r.type._context);break;case 22:case 23:LN()}n=n.return}if(Rt=e,Ut=hu(e.current,null),pn=Vr=t,tn=0,rm=null,FN=MN=Sx=cd=0,Ko!==null){for(e=0;e<Ko.length;e++)if(t=Ko[e],n=t.interleaved,n!==null){t.interleaved=null,r=n.next;var i=t.pending;if(i!==null){var o=i.next;i.next=r,n.next=o}t.pending=n}Ko=null}}function ZG(e,t){do{var n=Ut;try{if(JT(),fx.current=yx,dx){for(var r=Ot.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}dx=!1}if(ud=0,en=Fn=Ot=null,Xg=!1,Kg=0,NN.current=null,n===null||n.return===null){tn=1,rm=t,Ut=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=pn,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,f=c.tag;if((c.mode&1)==0&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=EG(a);if(h!==null){if(h.flags&=-257,OG(h,a,s,o,t),u=void 0,s=h,s.mode&1){var p=o.pingCache;if(p===null?(p=o.pingCache=new eAe,u=new Set,p.set(l,u)):(u=p.get(l),u===void 0&&(u=new Set,p.set(l,u))),!u.has(t)){u.add(t);var g=pAe.bind(null,o,l,t);l.then(g,g)}}var m=s.updateQueue;if(m===null){var y=new Set;y.add(l),s.updateQueue=y}else m.add(l);break e}else u=Error(ie(411,wW(s)||"A React component"))}else if(vt&&s.mode&1){var v=EG(a);if(v!==null){(v.flags&65536)==0&&(v.flags|=256),OG(v,a,s,o,t);break e}}tn!==4&&(tn=2),u=mN(u,s),o=a;do{switch(o.tag){case 3:l=u,o.flags|=65536,t&=-t,o.lanes|=t;var b=wG(o,l,t);UH(o,b);break e;case 1:l=u;var x=o.type,w=o.stateNode;if((o.flags&128)==0&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(fu===null||!fu.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var E=SG(o,l,t);UH(o,E);break e}}o=o.return}while(o!==null)}rq(n)}catch(S){t=S,Ut===n&&n!==null&&(Ut=n=n.return);continue}break}while(1)}function eq(){var e=wx.current;return wx.current=yx,e===null?yx:e}function tq(){(tn===0||tn===3||tn===2)&&(tn=4),Rt===null||(cd&268435455)==0&&(Sx&268435455)==0||Yl(Rt,pn)}function Tx(e,t){var n=De;De|=2;var r=eq();Rt===e&&pn===t||hd(e,t);do try{fAe();break}catch(i){ZG(e,i)}while(1);if(JT(),De=n,wx.current=r,Ut!==null)throw Error(ie(261));return Rt=null,pn=0,tn}function fAe(){for(;Ut!==null;)nq(Ut)}function dAe(){for(;Ut!==null&&!$Ce();)nq(Ut)}function nq(e){var t=aq(e.alternate,e,Vr);e.memoizedProps=e.pendingProps,t===null?rq(e):Ut=t,NN.current=null}function rq(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)==0){if(n=tAe(n,t,Vr),n!==null){Ut=n;return}}else{if(n=iAe(t),n!==null){n.flags&=32767,Ut=n;return}e!==null&&(e.flags|=32768,e.subtreeFlags=0,e.deletions=null)}if(t=t.sibling,t!==null){Ut=t;return}Ut=t=e}while(t!==null);tn===0&&(tn=5)}function Xl(e){var t=Ke,n=bi.transition;try{bi.transition=0,Ke=1,hAe(e,t)}finally{bi.transition=n,Ke=t}return null}function hAe(e,t){do pd();while(du!==null);if((De&6)!=0)throw Error(ie(327));var n=e.finishedWork,r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ie(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(XCe(e,i),e===Rt&&(Ut=Rt=null,pn=0),(n.subtreeFlags&2064)==0&&(n.flags&2064)==0||Ox||(Ox=!0,sq(Nb,function(){return pd(),null})),i=(n.flags&15990)!=0,(n.subtreeFlags&15990)!=0||i){i=bi.transition,bi.transition=0;var o=Ke;Ke=1;var a=De;De|=4,NN.current=null,aAe(e,n),sAe(e,n),j_e(HT),Lb=!!WT,HT=WT=null,e.current=n,uAe(n),BCe(),De=a,Ke=o,bi.transition=i}else e.current=n;if(Ox&&(Ox=!1,du=e,kx=r),i=e.pendingLanes,i===0&&(fu=null),HCe(n.stateNode),Yr(e,Nt()),Ex)throw Ex=!1,e=RN,RN=null,e;return(kx&1)!=0&&e.tag!==0&&pd(),i=e.pendingLanes,(i&1)!=0?e===PN?im++:(im=0,PN=e):im=0,uu(),null}function pd(){if(du!==null){var e=YW(kx),t=bi.transition,n=Ke;try{if(bi.transition=0,Ke=16>e?16:e,du===null)var r=!1;else{if(e=du,du=null,kx=0,(De&6)!=0)throw Error(ie(331));var i=De;for(De|=4,le=e.current;le!==null;){var o=le,a=o.child;if((le.flags&16)!=0){var s=o.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(le=l;le!==null;){var c=le;switch(c.tag){case 0:case 11:case 15:nm(8,c,o)}var f=c.child;if(f!==null)f.return=c,le=f;else for(;le!==null;){c=le;var d=c.sibling,h=c.return;if(UG(c),c===l){le=null;break}if(d!==null){d.return=h,le=d;break}le=h}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}le=o}}if((o.subtreeFlags&2064)!=0&&a!==null)a.return=o,le=a;else e:for(;le!==null;){if(o=le,(o.flags&2048)!=0)switch(o.tag){case 0:case 11:case 15:nm(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,le=y;break e}le=o.return}}var v=e.current;for(le=v;le!==null;){a=le;var b=a.child;if((a.subtreeFlags&2064)!=0&&b!==null)b.return=a,le=b;else e:for(a=v;le!==null;){if(s=le,(s.flags&2048)!=0)try{switch(s.tag){case 0:case 11:case 15:xx(9,s)}}catch(w){kr(s,s.return,w)}if(s===a){le=null;break e}var x=s.sibling;if(x!==null){x.return=s.return,le=x;break e}le=s.return}}if(De=i,uu(),Vo&&typeof Vo.onPostCommitFiberRoot=="function")try{Vo.onPostCommitFiberRoot(Mb,e)}catch{}r=!0}return r}finally{Ke=n,bi.transition=t}}return!1}function iq(e,t,n){t=mN(n,t),t=wG(e,t,1),Bl(e,t),t=Or(),e=Ax(e,1),e!==null&&(Pb(e,1,t),Yr(e,t))}function kr(e,t,n){if(e.tag===3)iq(e,e,n);else for(t=e.return;t!==null;){if(t.tag===3){iq(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fu===null||!fu.has(r))){e=mN(n,e),e=SG(t,e,1),Bl(t,e),e=Or(),t=Ax(t,1),t!==null&&(Pb(t,1,e),Yr(t,e));break}}t=t.return}}function pAe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Or(),e.pingedLanes|=e.suspendedLanes&n,Rt===e&&(pn&n)===n&&(tn===4||tn===3&&(pn&130023424)===pn&&500>Nt()-DN?hd(e,0):FN|=n),Yr(e,t)}function oq(e,t){t===0&&((e.mode&1)==0?t=1:(t=Db,Db<<=1,(Db&130023424)==0&&(Db=4194304)));var n=Or();e=Ax(e,t),e!==null&&(Pb(e,t,n),Yr(e,n))}function gAe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),oq(e,n)}function mAe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(t),oq(e,n)}var aq;aq=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||wr.current)qr=!0;else{if((e.lanes&n)==0&&(t.flags&128)==0)return qr=!1,rAe(e,t,n);qr=(e.flags&131072)!=0}else qr=!1,vt&&(t.flags&1048576)!=0&&YH(t,sx,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=td(t,Mn.current);rd(t,n),i=fN(null,t,r,e,i,n);var o=dN();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Sr(r)?(o=!0,Zb(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tN(t),i.updater=ox,t.stateNode=i,i._reactInternals=t,rN(t,r,e,n),t=wN(null,t,r,!0,o,n)):(t.tag=0,vt&&o&&iN(t),Er(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=vAe(r),e=Zi(r,e),i){case 0:t=xN(null,t,r,e,n);break e;case 1:t=FG(null,t,r,e,n);break e;case 11:t=AG(null,t,r,e,n);break e;case 14:t=TG(null,t,r,Zi(r.type,e),n);break e}throw Error(ie(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Zi(r,i),xN(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Zi(r,i),FG(e,t,r,i,n);case 3:if(DG(t),r=t.updateQueue,e===null||r===null)throw Error(ie(282));if(r=t.pendingProps,i=t.memoizedState.element,BH(e,t),ix(t,r,null,n),o=t.stateNode,r=t.memoizedState.element,r===i)Hg(),t=za(e,t,n);else{if((i=o.isDehydrated)&&(eo=Ll(t.stateNode.containerInfo.firstChild),yi=t,i=vt=!0),i){if(e=o.mutableSourceEagerHydrationData,e!=null)for(i=0;i<e.length;i+=2)o=e[i],o._workInProgressVersionPrimary=e[i+1],cx.push(o);for(n=tG(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else Er(e,t,r,n),Hg();t=t.child}return t;case 5:nG(t),e===null&&aN(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null;var a=i.children;return GT(r,i)?a=null:o!==null&&GT(r,o)&&(t.flags|=32),MG(e,t),Er(e,t,a,n),t.child;case 6:return e===null&&aN(t),null;case 13:return RG(e,t,n);case 4:return sN(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ad(t,null,r,n):Er(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Zi(r,i),AG(e,t,r,i,n);case 7:return Er(e,t,t.pendingProps,n),t.child;case 8:return Er(e,t,t.pendingProps.children,n),t.child;case 12:return Er(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,at(tx,r._currentValue),r._currentValue=a,o!==null)if(Yo(o.value,a)){if(o.children===i.children&&!wr.current){t=za(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=cu(-1,n&-n),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),eN(o.return,n),s.lanes|=n;break}u=u.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ie(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),eN(a,n),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Er(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,rd(t,n),i=pi(i),r=r(i),t.flags|=1,Er(e,t,r,n),t.child;case 14:return r=t.type,i=Zi(r,t.pendingProps),i=Zi(r.type,i),TG(e,t,r,i,n);case 15:return NG(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Zi(r,i),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Sr(r)?(e=!0,Zb(t)):e=!1,rd(t,n),qH(t,r,i),rN(t,r,i,n),wN(null,t,r,!0,e,n);case 19:return zG(e,t,n);case 22:return bN(e,t,n);case 23:return bN(e,t,n)}throw Error(ie(156,t.tag))};function sq(e,t){return HW(e,t)}function yAe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(e,t,n,r){return new yAe(e,t,n,r)}function zN(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vAe(e){if(typeof e=="function")return zN(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wb)return 11;if(e===Ob)return 14}return 2}function hu(e,t){var n=e.alternate;return n===null?(n=Xr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nx(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")zN(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case jl:return Kl(n.children,i,o,t);case vW:a=8,i|=4;break;case bb:a=8,i|=8;break;case xb:return e=Xr(12,n,t,i|2),e.elementType=xb,e.lanes=o,e;case Sb:return e=Xr(13,n,t,i),e.elementType=Sb,e.lanes=o,e;case Eb:return e=Xr(19,n,t,i),e.elementType=Eb,e.lanes=o,e;case Z3:return Mx(n,i,o,t);case eT:return e=Xr(23,n,t,i),e.elementType=eT,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q3:a=10;break e;case J3:a=9;break e;case wb:a=11;break e;case Ob:a=14;break e;case Pa:a=16,r=null;break e}throw Error(ie(130,e==null?e:typeof e,""))}return t=Xr(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Kl(e,t,n,r){return e=Xr(7,e,r,t),e.lanes=n,e}function Mx(e,t,n,r){return e=Xr(22,e,r,t),e.elementType=Z3,e.lanes=n,e}function $N(e,t,n){return e=Xr(6,e,null,t),e.lanes=n,e}function BN(e,t,n){return t=Xr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bAe(e,t,n,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.isDehydrated=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=xT(0),this.expirationTimes=xT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xT(0),this.identifierPrefix=r,this.mutableSourceEagerHydrationData=null}function UN(e,t,n,r,i,o,a){return e=new bAe(e,t,n,a),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Xr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:null},tN(i),e}function xAe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function om(e,t,n,r){var i=t.current,o=Or(),a=Vl(i);e:if(n){n=n._reactInternals;t:{if(Il(n)!==n||n.tag!==1)throw Error(ie(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Sr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(ie(171))}if(n.tag===1){var u=n.type;if(Sr(u)){n=zH(n,u,s);break e}}n=s}else n=su;return t.context===null?t.context=n:t.pendingContext=n,t=cu(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),Bl(i,t),e=xi(i,a,o),e!==null&&rx(e,i,a),a}function WN(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function uq(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function HN(e,t){uq(e,t),(e=e.alternate)&&uq(e,t)}function wAe(){return null}function GN(e){this._internalRoot=e}Fx.prototype.render=GN.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ie(409));om(e,t,null,null)};Fx.prototype.unmount=GN.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dd(function(){om(null,e,null,null)}),t[ou]=null}};function Fx(e){this._internalRoot=e}Fx.prototype.unstable_scheduleHydration=function(e){if(e){var t=QW();e={blockedOn:null,target:e,priority:t};for(var n=0;n<nu.length&&t!==0&&t<nu[n].priority;n++);nu.splice(n,0,e),n===0&&eH(e)}};function lq(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function am(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function SAe(e,t){if(!t)for(var n;n=e.lastChild;)e.removeChild(n);return t=UN(e,0,t,null,!1,!1,""),e[ou]=t.current,Yb(e.nodeType===8?e.parentNode:e),t}function Dx(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=WN(a);s.call(l)}}om(t,a,e,i)}else{if(a=o=n._reactRootContainer=SAe(n,r),typeof i=="function"){var u=i;i=function(){var l=WN(a);u.call(l)}}dd(function(){om(t,a,e,i)})}return WN(a)}XW=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.isDehydrated){var n=Cg(t.pendingLanes);n!==0&&(wT(t,n|1),Yr(t,Nt()),(De&6)==0&&(fd=Nt()+500,uu()))}break;case 13:var r=Or();dd(function(){return xi(e,1,r)}),HN(e,1)}};ST=function(e){if(e.tag===13){var t=Or();xi(e,134217728,t),HN(e,134217728)}};KW=function(e){if(e.tag===13){var t=Or(),n=Vl(e);xi(e,n,t),HN(e,n)}};QW=function(){return Ke};JW=function(e,t){var n=Ke;try{return Ke=e,t()}finally{Ke=n}};pT=function(e,t,n){switch(t){case"input":if(aT(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Qb(r);if(!i)throw Error(ie(90));EW(r),aT(r,i)}}}break;case"textarea":AW(e,n);break;case"select":t=n.value,t!=null&&Wf(e,!!n.multiple,t,!1)}};IW=IN;LW=dd;var EAe={Events:[Ug,Zf,Qb,PW,jW,IN]},sm={findFiberByHostInstance:zl,bundleType:0,version:"18.0.0-rc.0-fe905f152-20220107",rendererPackageName:"react-dom"},OAe={bundleType:sm.bundleType,version:sm.version,rendererPackageName:sm.rendererPackageName,rendererConfig:sm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=UW(e),e===null?null:e.stateNode},findFiberByHostInstance:sm.findFiberByHostInstance||wAe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-rc.0-fe905f152-20220107"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Rx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rx.isDisabled&&Rx.supportsFiber)try{Mb=Rx.inject(OAe),Vo=Rx}catch{}}Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EAe;Wr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lq(t))throw Error(ie(200));return xAe(e,t,null,n)};Wr.createRoot=function(e,t){if(!am(e))throw Error(ie(299));var n=!1,r="";return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix)),t=UN(e,1,!1,null,n,!1,r),e[ou]=t.current,Yb(e.nodeType===8?e.parentNode:e),new GN(t)};Wr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ie(188)):(e=Object.keys(e).join(","),Error(ie(268,e)));return e=UW(t),e=e===null?null:e.stateNode,e};Wr.flushSync=function(e){return dd(e)};Wr.hydrate=function(e,t,n){if(!am(t))throw Error(ie(200));return Dx(null,e,t,!0,n)};Wr.hydrateRoot=function(e,t,n){if(!lq(e))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="";if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix)),n=UN(e,1,!0,n!=null?n:null,i,!1,o),e[ou]=n.current,Yb(e),r)for(e=0;e<r.length;e++)i=r[e],o=i._getVersion,o=o(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,o]:n.mutableSourceEagerHydrationData.push(i,o);return om(t,n,null,null),new Fx(n)};Wr.render=function(e,t,n){if(!am(t))throw Error(ie(200));return Dx(null,e,t,!1,n)};Wr.unmountComponentAtNode=function(e){if(!am(e))throw Error(ie(40));return e._reactRootContainer?(dd(function(){Dx(null,null,e,!1,function(){e._reactRootContainer=null,e[ou]=null})}),!0):!1};Wr.unstable_batchedUpdates=IN;Wr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!am(n))throw Error(ie(200));if(e==null||e._reactInternals===void 0)throw Error(ie(38));return Dx(e,t,n,!1,r)};Wr.version="18.0.0-rc.0-fe905f152-20220107";function cq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cq)}catch(e){console.error(e)}}cq(),CCe.exports=Wr;export{NAe as H,MAe as L,FV as O,Cr as R,PAe as T,CAe as W,RAe as _,TAe as a,Nm as b,DAe as c,FAe as d,jAe as e,LAe as f,AAe as g,DV as h,CCe as i,be as r,_Ae as s,jV as u,IAe as w};
