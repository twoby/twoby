var fe=Object.defineProperty,ye=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var X=(e,t,n)=>t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c=(e,t)=>{for(var n in t||(t={}))U.call(t,n)&&X(e,n,t[n]);if(I)for(var n of I(t))W.call(t,n)&&X(e,n,t[n]);return e},p=(e,t)=>ye(e,be(t));var T=(e,t)=>{var n={};for(var s in e)U.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&I)for(var s of I(e))t.indexOf(s)<0&&W.call(e,s)&&(n[s]=e[s]);return n};import{r as y,u as _e,a as we,b as Ee,c as ve,d as Se,R as o,_ as $e,T as Pe,O as Ce,s as $,L as D,w as B,e as ke,W as Ie,f as Ne,H as Le,g as Me,h as _,i as qe}from"./vendor.04b72e90.js";const Re=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}};Re();const Te=()=>{const e={hashRoot:"",hashSlash:"#"},t=[["default",{}]];return new Map(t.map(([n,s])=>[n,{options:s,hist:e}]))},G=e=>Te().get(e),Be="_error_cx7tg_1",je="_worse_cx7tg_11",Fe="_equal_cx7tg_21",He="_better_cx7tg_41",ze="_bytes_cx7tg_51",Oe="_row_cx7tg_64",Ve="_main_cx7tg_65";var N={error:Be,worse:je,equal:Fe,better:He,bytes:ze,row:Oe,main:Ve};const K=e=>["\u2717","\u2717","\u2713"].map((t,n)=>{const s=[e.worse,e.equal,e.better];return{symbol:t,className:s[n]}}),j=(e,t,n)=>{const s=Math.sign(e.length-t.length);return n[s+1]},Q=e=>{const[t,n]=y.exports.useState(new Map);return e.listen(()=>{n(new Map)}),{cache:t,setCache:n,updateCache:(r,a)=>{if(a===null)return n(new Map);n(new Map([...t,[r,a]]))}}},b=(e,t=8,n="0")=>{const s=Math.ceil(e.length/t)*t,r=new RegExp(`.{${t}}`,"g");return e.padStart(s,n).match(r)||[]},Ye=e=>[...e].map(t=>"2"+t.toString(2)).join(""),J=e=>b(e,2,"0").map(n=>parseInt(n,3).toString(2).padStart(3,"0")).join(""),Ae=e=>b(e||"0",8,"0").join(""),Z=e=>b(e,8,"0").map(n=>parseInt(n,2)),ee=e=>{const t=Ye(e),n=J(t),s=Ae(n);return Z(s)},te=e=>[...e].map(t=>t.toString(2).padStart(8,"0")).join(""),Ue=e=>b(e,3).map(t=>parseInt(t,2).toString(3).padStart(2,"0")),ne=e=>Ue(e).join(""),We=e=>e.slice(e.indexOf("1")),Xe=e=>e.split("2").slice(1).map(t=>parseInt(t,2)).filter(t=>!isNaN(t)),se=e=>{const t=te(e),n=We(t),s=ne(n);return Xe(s)},P=e=>Uint8Array.from(e),De=(e,{radix:t,sep:n})=>{const s=e.split(n).map(r=>parseInt(r,t)).filter(r=>!isNaN(r));return P(s)},F=e=>{const t=P(ee(e)),n=P(se(t));return{code8:t,out8:n}},Ge={radix:10,space:",",content:["list","heat"]},Ke=({radix:e,space:t,content:n},s)=>{const r=n.includes(s)?s:n[0],a={heat:["reps","input"],list:["input"]}[r]||[],i=d=>a.includes(d),l=[{keys:["reps"].filter(i),empty:2,decode:d=>parseInt(d,10),encode:d=>d.toString(10),checkValue:d=>d>1},{keys:["input"].filter(i),empty:[],decode:d=>De(d,{sep:t,radix:e}),encode:d=>{const m=h=>(h===void 0&&console.log({n:h}),h.toString(e));return[...d].map(m).join(t)},checkValue:()=>!0}],u=["",r,""].join("/");return{formats:l,root:u}},re=e=>{const t=_e(),n=we(),s=Ee().pathname.split("/"),{formats:r,root:a}=Ke(Ge,s[1]),i=p(c({},e),{formats:r,root:a}),l=ve(n,i),u=Se(t,i),d=y.exports.useMemo(()=>m=>u(c(c({},l),m)),[l]);return{hash:l,setHash:u,updateHash:d}},Qe="_error_ahglg_1",Je="_worse_ahglg_11",Ze="_equal_ahglg_21",et="_better_ahglg_41",tt="_bytes_ahglg_51",nt="_wrapper_ahglg_64",st="_dropdown_ahglg_65",rt="_center_ahglg_76",ot="_right_ahglg_121",at="_item_ahglg_125",ct="_active_ahglg_125";var E={error:Qe,worse:Je,equal:Ze,better:et,bytes:tt,wrapper:nt,dropdown:st,center:rt,right:ot,item:at,active:ct};const it=8,L={uint8:{textParser:e=>t=>ut(t,e),bitParser:e=>t=>b(t,e.bits)},uintVarTern:{textParser:({sep:e})=>t=>{const n=t.replaceAll(e,""),s=J(n);return b(s,it)},bitParser:({padding:e})=>t=>{const n=ne(t);return b(n,e).map(s=>parseInt(s,3).toString(2))}}},H=({bits:e,radix:t})=>{const n=Math.log(2**(e||8));return Math.ceil(n/Math.log(t))},w=e=>te(e),lt=e=>Z(e),ut=(e,{radix:t,bits:n,sep:s})=>{const r=H({bits:n,radix:2});return e.split(s).map(a=>parseInt(a,t).toString(2).padStart(r,"0"))},dt=(e,{radix:t,padding:n,sep:s})=>e.map(r=>parseInt(r,2).toString(t).padStart(n,"0")).join(s),pt=e=>e.replace(/^\w/,t=>t.toUpperCase()),mt=({sep:e})=>{const t=new Map([[".*2.*","joined by 2"]]),n=[...t.keys()].find(r=>e==null?void 0:e.match(new RegExp(r)));return(t.get(n)||"").split(" ")},ht=e=>{const t=H(e),{padding:n}=c({padding:t},e),s=`${n}x${e.bits||0}`,r=new Map([["0x.*",""],[".*x24","byte trios"],[".*x3","bit trios"],[".*x4","nibbles"],[".*x8","bytes"],["1x.*","digits"],["2x.*","pairs"],["3x.*","trios"]]),a=[...r.keys()].find(l=>s.match(new RegExp(l)));return(r.get(a)||"").split(" ")},gt=e=>[e.name,xt(e),...ht(e),...mt(e)],xt=({radix:e})=>new Map([[2,"binary"],[3,"ternary"],[10,"decimal"],[16,"hex"]]).get(e)||`base-${e}`,oe=e=>{const t=gt(e).filter(n=>n);return{text:pt(t.join(" ")),value:t.join("-")}},ft=e=>{const t=!!e.choice,{choices:n,choose:s}=e,{choiceStyles:r}=e,a=n.map(oe),i=()=>{s(null)},l=({key:g})=>{s(n.find((x,f)=>a[f].value===g)||null)},u="Explore encodings...",d=a.map(g=>({key:g.value,label:g.text})),m=(g,{label:x})=>t?!0:g.split(" ").some(f=>x.match(new RegExp(`(^| )${f}`,"i"))),h=p(c({},r),{placeholder:u,onSelect:l,items:d,match:m,onInput:i});return o.createElement($e,c({},h))},yt=e=>{const{togglePad:t,qualia:n,pad:s}=e,r=e.choice?2*!!s:1,{symbol:a}=n[r],{className:i}=n[r],l={dropdownClassName:E.dropdown,activeItemClassName:E.active,itemClassName:E.item};return o.createElement("div",{className:E.wrapper},o.createElement("div",{className:E.center},o.createElement("span",null,"Integer format")),o.createElement(ft,c({},p(c({},e),{choiceStyles:l}))),o.createElement("div",{className:E.right},o.createElement("button",{onClick:t,className:i},a," Padding")))},bt=(e,t)=>{const{padding:n,sep:s}=t;if(n===0)return!0;const r=b(e,n,"");return!(s?e.split(s):r).some(l=>n!==l.length)},_t=(e,t)=>{const{radix:n,sep:s}=t,i=`[^${new Map([[16,"a-f0-9"]]).get(n)||"0-"+(n-1)}${s}]`,l=new RegExp(i,"g"),u=new RegExp(`[${s}]+`,"g");return e.match(l)?e.replace(l,""):e.match(u)?e.replace(u,s):e},wt=e=>e.target.value,Et=({setInput:e,setText:t,options:n})=>{const{textParser:s}=n.parse,{decode:r}=n.code;return a=>{const i=wt(a),l=_t(i,n),u=bt(i,n);if(l!==i||!u)return t(l);const d=s(n)(i).join(""),m=lt(d);let h;try{h=r(m)}catch({message:g}){return console.warn(g),t(l)}e(h),t(null)}},vt="_error_hixcb_1",St="_worse_hixcb_11",$t="_equal_hixcb_21",Pt="_better_hixcb_41",Ct="_bytes_hixcb_51";var z={error:vt,worse:St,equal:$t,better:Pt,bytes:Ct};const ae=e=>{const{uuid:t,label:n,editable:s=!0}=e,{cache:r,updateCache:a}=e,{setInput:i,options:l}=e,u=r.has(t),d=v=>a(t,v),m=u?r.get(t):e.text,h=e.text===m,g=Et({setInput:i,setText:d,options:l}),x={className:z.bytes},f=p(c({},x),{value:m,maxRows:12,minRows:1,onChange:g}),C=s?o.createElement(Pe,c({},f)):o.createElement("div",c({},x),m),k=h?z.equal:z.error;return o.createElement("div",null,o.createElement("div",{className:k},n),C)},kt=8,M={get uint8(){return{decode:e=>e,encode:e=>e,name:"Uint8",block:kt,radix:2}},get uintVarTern(){return{decode:se,encode:ee,name:"Twoby",block:null,radix:3}}},ce=e=>{const{parse:t,code:n,src:s}=e,r=c({bits:8},e),{name:a}=c(c({},n),e),i=oe(p(c({},r),{name:a})).text,l=t.bitParser(r)(s),u=dt(l,r);return{options:r,label:i,text:u}},q=e=>{const t=H(e);return ce(p(c({},e),{padding:t,sep:" "}))},O=e=>ce(p(c({},e),{padding:0,sep:","})),It=({value:e})=>{const n={parse:L.uint8,code:M.uint8,bits:8,radix:10};return[O(p(c({},n),{src:w([e])}))]},Nt=({in8:e,code8:t,out8:n})=>{const r={parse:L.uint8,code:M.uint8,bits:8,radix:16};return[q(p(c({},r),{name:"Input",src:w(e)})),q(p(c({},r),{name:"Output",src:w(t)})),O(p(c({},r),{name:"",radix:10,src:w(n)}))]},Lt=({in8:e,code8:t,choice:n})=>{const s=M.uint8,r=L.uint8,a=M.uintVarTern,i=L.uintVarTern,u=[O(p(c({},{parse:r,code:s,sep:",2,",radix:2}),{name:"Input",src:w(e)}))];if(n!==null){const d=p(c({parse:i,code:a},n),{radix:3}),m=c({parse:r,code:a},n);return u.concat([q(p(c({},d),{name:"Internal",src:w(t)})),q(p(c({},m),{src:w(t)}))])}return u},Mt="_result_gq5kq_1";var qt={result:Mt};const Rt=({El:e,cls:t=null,msg:n=""})=>o.createElement(e,{className:t},n),Tt=e=>{const{prefix:t,header:n,items:s,cache:r}=e,{updateCache:a,setInput:i}=e;return o.createElement("div",{className:e.cls},o.createElement(Rt,c({},n)),o.createElement("div",{className:qt.result},s.map((l,u)=>o.createElement(ae,c({},p(c({},l),{uuid:`${t}-${u}`,updateCache:a,setInput:i,cache:r,key:u}))))))},Bt=({result:e,in8:t,choice:n,qualia:s})=>{const{code8:r,out8:a}=F(t),{className:i}=j(t,r,s),l=j(t,r,["\u2717 Encoding is longer than input","Encoding is same length as input","\u2713 Encoding is shorter than input"]),u=[p(c({},e),{prefix:"i0",header:{msg:l,El:"div",cls:i},items:Nt({in8:t,code8:r,out8:a})}),p(c({},e),{prefix:"i1",header:{msg:"Explore",El:"h3"},items:Lt({in8:t,code8:r,choice:n})})].map(d=>o.createElement(Tt,c({key:d.prefix},d)));return o.createElement(o.Fragment,null,u)},jt=e=>{const t=e.history,{hash:n,updateHash:s}=re(),{cache:r,setCache:a,updateCache:i}=Q(t),l=S=>s({input:S}),u=n.input,d=K(N),m=[{radix:2,bits:3},{radix:2,bits:4},{radix:16,bits:8},{radix:16,bits:24}],[h,g]=y.exports.useState(!0),[x,f]=y.exports.useState(m[0]),v={pad:h,qualia:d,choices:m,choice:x,choose:S=>{a(new Map),f(S)},togglePad:()=>{a(new Map),g(!h)}},R={result:{cls:N.row,cache:r,updateCache:i,setInput:l},in8:u,choice:x,qualia:d};return o.createElement(o.Fragment,null,o.createElement("div",{className:N.main},o.createElement(Bt,c({},R)),o.createElement(yt,c({},v)),o.createElement("div",{className:N.row},o.createElement(Ce,null))))},Ft="_error_7fqax_1",Ht="_worse_7fqax_11",zt="_equal_7fqax_21",Ot="_better_7fqax_41",Vt="_bytes_7fqax_51",Yt="_examples_7fqax_64";var ie={error:Ft,worse:Ht,equal:zt,better:Ot,bytes:Vt,examples:Yt};const At=$.div`
  gap: 0.333em;
  display: grid;
  justify-items: center;
  justify-content: space-evenly;
  grid-template-columns: 1fr minmax(auto, 400px) 1fr;
  grid-template-rows: 1fr;
  padding-top: 1em;
`,Ut=$.div`
  grid-column: 2;
`,le=e=>{const s=e.links[0],{text:t}=s,n=T(s,["text"]);return o.createElement(At,null,o.createElement(Ut,null,o.createElement(D,c({},n),t)))},Wt=e=>{const{inputs:t}=e,n=[{to:"/heat/",text:"View Heatmap"}],s=K(ie);return o.createElement(o.Fragment,null,o.createElement(le,{links:n}),o.createElement("h3",null,"Examples"),o.createElement("div",{className:ie.examples},t.map((r,a)=>{const i=r.join(", "),l=P(r),{code8:u}=F(l),d="/list/"+r.join(","),{className:m}=j(l,u,s),h={key:a,className:m,to:d};return o.createElement(D,c({},h),"[",i,"]")})))},Xt="_row_1mreh_1";var ue={row:Xt};const Dt=(e,t)=>{let n;return(...s)=>{const r=function(){n=null,e(...s)};clearTimeout(n),n=setTimeout(r,t)}},de=({innerWidth:e,innerHeight:t}=window)=>({width:e,height:t}),Gt=()=>{const[e,t]=y.exports.useState(de);return y.exports.useEffect(()=>{const n=Dt(()=>{t(de())},250);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),e},Kt=8;function*V(e,t=0){for(let n=t;n<e;n+=1)yield n}const Qt=({reps:e,n1:t,n2:n})=>{const[s,r]=[t,n].map(u=>2**u-1),a=[].concat(...B(V(e)).map(()=>[s,r])),{code8:i}=F(P(a)),l=i.length/(2*e);return{x:s,y:r,count:l}},Jt=e=>{const{reps:t}=e,n=Kt;return{table:B(V(n+1,1)).reduce((r,a)=>[...r,...B(V(n+1,1)).map(i=>Qt({reps:t,n1:a,n2:i}))],[])}},Zt=[{name:"click",value:{},on:[{events:"rect:click",update:"datum"}]}],en={width:400,height:200,padding:5,$schema:"https://vega.github.io/schema/vega/v5.json",signals:Zt,data:[{name:"table"},{name:"text",transform:[{type:"formula",as:"byteText",expr:"datum.nBytes + ' per Uint8'"}]}]},tn={axes:[{orient:"top",title:"X",scale:"x"},{orient:"left",title:"Y",scale:"y"}]},nn=e=>c(c({range:{scheme:"blueorange"},type:"linear"},{nice:!0,reverse:!0}),e),pe=n=>{var s=n,{field:e}=s,t=T(s,["field"]);return c({domain:{data:"table",field:e},type:"band"},t)},Y={color:e=>nn(c({name:"color"},e)),x:e=>pe(c({name:"x",range:"width"},e)),y:e=>pe(c({name:"y",range:"height"},e))},sn=(e,t)=>{const n="x",s="y",r={field:n},a={field:s},i={domain:t};return p(c(c(c({},tn),en),e),{scales:[Y.x(r),Y.y(a),Y.color(i)],marks:[{type:"rect",from:{data:"table"},encode:{enter:{x:{scale:"x",field:n},y:{scale:"y",field:s},width:{scale:"x",band:1},height:{scale:"y",band:1},fill:{scale:"color",field:"count"}},update:{fill:{scale:"color",field:"count"}},hover:{fill:{value:"red"}}}},{type:"text",interactive:!1,from:{data:"text"},encode:{enter:{x:{signal:"width",offset:-5},y:{signal:"height",offset:24},fill:{value:"black"},fontSize:{value:18},align:{value:"right"},text:{field:"byteText"}}}}],legends:[{fill:"color",type:"gradient",orient:"bottom",direction:"horizontal",title:["Bytes per int"],titleFontSize:12,titlePadding:4}]})},rn=({width:e,height:t},n,s)=>({width:e*n,height:t*s}),on=(()=>{const e=t=>`rgba(244,244,255,${t})`;return[e(.2),e(.8),e(.9),e(1)].join(",")})(),an=$.div`
  background-image: linear-gradient(${on});
  grid-auto-rows: auto;
  position: fixed;
  display: grid;
  height: 40vh;
  width: 100%;
  z-index: 100;
  bottom: 0;
  left: 0;
`,cn=$.div`
  height: ${e=>e.height}px;
  grid-template-rows: auto auto 1fr;
  display: grid;
`,ln=(e={})=>["Width","Height"].every(t=>`client${t}`in e),un=e=>t=>{if(t&&ln(t)){const n=t.clientHeight,s=t.clientWidth;e({width:s,height:n})}},dn=()=>{const{hash:e,updateHash:t}=re(),[n,s]=o.useState(null);return{hash:e,choice:n,choose:a=>(i,l)=>{s(l);const u=pn(l,a);t({input:u,reps:a})}}},pn=(e,t)=>{const n=[];if(e&&"x"in e&&"y"in e)for(;n.length<t*2;)n.push(e.x)&&n.push(e.y);return n},mn=e=>{const t={count:0,x:"X",y:"Y"},{count:n,x:s,y:r}=c(c({},t),e),a=n.toFixed(2).replace(/0?\.?0*$/,""),i=parseFloat(a)!==n?"~":"";return{nBytes:a?`${i+a} Bytes`:"??? Bytes",nXnY:`${s},${r}`}},hn=e=>{const t=!1,n=e.history,s=Gt(),[r,a]=o.useState(s),{cache:i,updateCache:l}=Q(n),{hash:u,choice:d,choose:m}=dn(),h=o.useMemo(()=>un(a),[s]),g=o.useMemo(()=>sn(rn(r,.8,.5),[0,2]),[r]),{nBytes:x,nXnY:f}=mn(d),C=p(c({},Jt(u)),{text:[{nBytes:x}]}),k=([xe])=>{m(xe)("",d)},v=o.useMemo(()=>ke({spec:g}),[g]),A=o.createElement(ae,c({},p(c({},It({value:u.reps})[0]),{label:`Repetitions of "${f}"`,uuid:"repetitions",setInput:k,updateCache:l,cache:i}))),R=r.height*2,S={click:m(u.reps)},he={data:C,actions:t,signalListeners:S},ge=[{to:"/list/",text:"View Examples"}];return o.createElement(o.Fragment,null,o.createElement(an,null,o.createElement("div",{className:ue.row},o.createElement("div",{ref:h},o.createElement(v,c({},he))))),o.createElement(cn,{height:R},o.createElement("div",{className:ue.row},o.createElement(le,{links:ge}),o.createElement("h3",null,"HeatMap Controls"),o.createElement("div",null,A))))},gn="203220",xn="f4f4ff",fn=["Tahoma","Verdana","sans-serif"],yn=$.div`
  font-family: ${fn.join(",")};
  grid-template-columns: minmax(66vw, auto);
  justify-content: space-evenly;
  grid-auto-rows: auto;
  display: grid;
`,bn=Ie`
  body {
    background-color: #${xn};
    color: #${gn};
  }
`,me=e=>{const{hist:t,inputs:n}=e,s=Ne(t),r={history:s},a=c({},r),i=o.createElement(jt,c({},r)),l={inputs:n},u=o.createElement(Wt,c({},l)),d=o.createElement(hn,c({},a)),m=o.createElement("a",{href:"https://github.com/twoby/twoby"},"Twoby");return o.createElement(Le,{history:s},o.createElement(yn,null,o.createElement("h2",null,m," (two-separated binary)"),o.createElement(Me,null,o.createElement(_,{path:"/",element:i},o.createElement(_,{path:"heat/:reps/:input",element:d}),";",o.createElement(_,{path:"heat/:reps",element:d}),";",o.createElement(_,{path:"heat",element:d}),";",o.createElement(_,{path:"list/:input",element:u}),";",o.createElement(_,{path:"list",element:u}),";",o.createElement(_,{path:"",element:u}),";"))),o.createElement(bn,null))};me.defaultProps=p(c({},G("default")),{inputs:[[0,0,0,0]]});const _n=e=>e.getElementById("index"),wn=qe.exports.createRoot(_n(document)),En=[[],...[...Array(27).keys()].map(e=>(2**e).toString(3).split("").map(n=>2**parseInt(n)))],vn=[G("default")];wn.render(y.exports.createElement("div",null,[...vn.map((e,t)=>{const n=p(c({},e),{inputs:En,key:t});return y.exports.createElement(me,n)})]));
